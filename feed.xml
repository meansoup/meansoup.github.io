<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Backend Brew</title>
    <description>backend tech, log</description>
    <link>https://meansoup.github.io/</link>
    <atom:link href="https://meansoup.github.io/rfeed.xml" rel="self" type="application/rss+xml" />
    <updated>2025-01-18T15:58:37+00:00</updated>
    <id>https://meansoup.github.io</id>
    <author>
      <name></name>
    </author>
    
      <item>
        <title>IEEE 754 부동 소수점 계산, floating point calculation</title>
        
          <description>&lt;h2 id=&quot;1-is-not-exactly-1&quot;&gt;1 is not exactly 1&lt;/h2&gt;

&lt;p&gt;오늘 다뤄볼 내용은, 컴퓨터 연산에 있어서 컴퓨터가 명확하게 나타내지 못하는 수들에 대해 다뤄보려고 한다.
다소 길지만 끝까지 읽으면 분명 도움이 될 것이다.&lt;/p&gt;

&lt;p&gt;개발자 &lt;strong&gt;기술 면접에서도 단골로 차용되는 주제&lt;/strong&gt;이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;실제로 나도 기술 면접에서 이 주제로 면접을 봤었고 굉장히 좋은 평을 들었다.&lt;/li&gt;
  &lt;li&gt;어디가서 부동 소수점 계산 면접을 보게된다면 이 자료면 충분할 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;java-code&quot;&gt;Java Code&lt;/h2&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위의 코드를 보면, 하나는 0.1에 10을 곱한 값을 출력하고, 하나는 0.1을 10번 더한 값을 출력한다.&lt;br /&gt;
직관적으로 계산해보면, 두 값은 모두 1이 된다.&lt;/p&gt;

&lt;p&gt;하지만 결과값을 보면 다음과 같다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.0&lt;br /&gt;
0.9999999999999999&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;컴퓨터에서의-floating-저장&quot;&gt;컴퓨터에서의 floating 저장&lt;/h2&gt;

&lt;p&gt;이유를 살펴보기 전에 알아야 할 것이 있다!&lt;br /&gt;
바로 컴퓨터가 어떻게 실수(float, double)들을 저장하는 지에 대한 것이다. 이 부분은 어떻게 보면 좀 깊은 내용을 다루는 것일 수 있다.&lt;/p&gt;

&lt;p&gt;모두가 알다시피 컴퓨터는 &lt;strong&gt;0과 1만 저장할 수 있다&lt;/strong&gt;.&lt;br /&gt;
즉 2진법으로 숫자를 저장한다는 것인데, 이는 정수를 저장하는데 있어서는 모든 수를 표현할 수 있지만, &lt;strong&gt;소수를 저장하는데 문제&lt;/strong&gt;가 생기게 된다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;\(0.01_2 = 0.25\) 를 의미.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;2진수 0.01은 10진수 0.25와 같다.&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;이런식으로 계산하다보면&lt;/p&gt;
  &lt;blockquote&gt;
    &lt;p&gt;\(0.1_2 = 0.5\)&lt;br /&gt;
\(0.01_2 = 0.25\)&lt;br /&gt;
\(0.001_2 = 0.125\)&lt;br /&gt;
\(0.0001_2 = 0.0625\)&lt;br /&gt;
…&lt;/p&gt;
  &lt;/blockquote&gt;

  &lt;p&gt;와 같은 식으로 이진수가 표현이 된다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;03을-컴퓨터에-저장하기&quot;&gt;0.3을 컴퓨터에 저장하기&lt;/h2&gt;

&lt;p&gt;그런데 문제는 \(0.3\) 을 표현하는데 생긴다.&lt;br /&gt;
\(0.01_2 + 0.0001_2 = 0.28125\) 이고,&lt;br /&gt;
따라서 \(0.3 = 0.0101...._2\) 가 될 수 있다.&lt;/p&gt;

&lt;p&gt;하지만, \(0.3\) 은 2진수로 정확하게 나타낼 수 없다.&lt;br /&gt;
그 이유는 \(0.3\) 을 2로 계속 곱하여도, 값이 정리되지 않는 부분에서도 확인할 수 있다. (이 부분은 다소 수학적 부분)&lt;/p&gt;

&lt;p&gt;2진수를 10진수로 변환할 때는,&lt;br /&gt;
2를 계속해서 곱하면서 일의 자리 숫자가 1이 될 경우, 2진수에서 1을 표시하고 계속해서 연산한다.&lt;br /&gt;
이는 곱한 결과가 0.0, 즉 나머지가 없을 때까지 계속해서 진행한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;\(0.5 * 2 = 1.0\)&lt;br /&gt;
\(0.5 = 0.1_2\)&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;10진수 0.5와 2진수 0.1이 같음을 확인할 수 있다.&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;동일하게,&lt;br /&gt;
\(0.25 * 2^2 = 1.0\)&lt;br /&gt;
\(0.25 = 0.01_2\)&lt;/p&gt;

  &lt;p&gt;그럼 \(0.1\) 을 2진수로 바꿔보도록 하자.&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;\(0.1 * 2 = 0.2\) ,  \(0.0..._2\)
      &lt;ul&gt;
        &lt;li&gt;2를 곱해도 1의 자리 숫자가 0 이므로 0.0&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(0.2 * 2 = 0.4\) ,  \(0.00..._2\)
      &lt;ul&gt;
        &lt;li&gt;2를 곱해도 1의 자리 숫자가 0 이므로 0.00&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(0.4 * 2 = 0.8\) ,  \(0.000..._2\)
      &lt;ul&gt;
        &lt;li&gt;2를 곱해도 1의 자리 숫자가 0 이므로 0.000&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(0.8 * 2 = 1.6\) ,  \(0.0001..._2\)
      &lt;ul&gt;
        &lt;li&gt;2를 곱하니 1의 자리 숫자가 1 이므로 \(0.0001\)&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(0.6 * 2 = 1.2\) ,  \(0.00011..._2\)
      &lt;ul&gt;
        &lt;li&gt;위에서 1의 자리 숫자를 뺀 0.6을 base로 2를 곱한다&lt;/li&gt;
        &lt;li&gt;2를 곱하니 1의 자리 숫자가 1 이므로 \(0.00011\)&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(0.2 * 2 = 0.4\) ,  \(0.000110..._2\)&lt;/li&gt;
  &lt;/ol&gt;

  &lt;p&gt;이런 식으로 0.1에 맞는 2진수를 계산할 수 있다.&lt;/p&gt;

  &lt;p&gt;위 계산 식을 통해 0.1은 2진수로 완벽하게 나타낼 수 없는 무한소수(2진수에서)가 되는 것을 확인할 수 있다.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;위의 수식을 통해, 0.1과 0.3을 비롯한 여러 숫자들이 2진수로 명확하게(유한소수로) 나타낼 수 없는 것을 확인할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;ieee-standard-754&quot;&gt;IEEE standard 754&lt;/h2&gt;

&lt;p&gt;그렇다면 컴퓨터는 어떻게 0.3, 0.1이란 수를 표현할 수 있을까?&lt;br /&gt;
&lt;strong&gt;IEEE standard 754 표준&lt;/strong&gt;을 보면 이를 알 수 있다. IEEE 754에서는 실수에 대해 이렇게 표기하도록 명시한다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/algorithm/floating/floating1.png&quot; alt=&quot;ieee spec&quot; /&gt;&lt;/p&gt;

&lt;p&gt;일반적으로 float 타입이 32bit, double 타입이 64bit이므로, single precision이 float 타입, double precision이 double 타입이라고 생각할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;sign bit&lt;/strong&gt;: 말 그대로 음수인지, 양수인지에 대한 표현.&lt;br /&gt;
&lt;strong&gt;fraction&lt;/strong&gt;: 소수점에 대해 1을 제외한 소수점 자리의 값을 나타냄.&lt;br /&gt;
&lt;strong&gt;exponent&lt;/strong&gt;: 지수부에 대한 값.&lt;/p&gt;

&lt;p&gt;아래의 수식을 보시면 더 직관적으로 이해할 수 있을 것이다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/algorithm/floating/floating2.png&quot; alt=&quot;ieee spec2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;sign bit는 음수와 양수의 구분을 하고 있다.&lt;br /&gt;
fraction은 다소 이해가 되지 않을 수 있는데, 값이 \(1.1011_2\) 이라면, fraction은 1을 제외한 소수점 부분인 1011을 의미한다.&lt;br /&gt;
exponent는 bias를 빼줌으로써 계산한다.&lt;/p&gt;

&lt;h2 id=&quot;실수의-덧셈-연산&quot;&gt;실수의 덧셈 연산&lt;/h2&gt;

&lt;p&gt;이러한 실수의 저장 속에서 실수의 연산을 컴퓨터가 어떻게 하는지에 대해 집중할 필요가 있다.&lt;br /&gt;
다시 우리의 목적을 상기해보면 우리는 &lt;strong&gt;덧셈을 했을 경우와 곱셈을 했을 경우의 차이&lt;/strong&gt;에 대해 보고 있었다.&lt;/p&gt;

&lt;p&gt;먼저 실수의 덧셈에 대해 확인해 보자.&lt;br /&gt;
우리가 생각하고 계산하는 그대로 컴퓨터도 계산한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;먼저 exponent(지수부)를 맞춰준다&lt;/li&gt;
  &lt;li&gt;두 수를 더한다&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;scientific-notation&lt;/strong&gt;으로 다시 정리한다.
    &lt;ul&gt;
      &lt;li&gt;계산한 후의 값이 1의 자리 숫자에 1이 오도록 연산을 맞춰주는 것을 말한다.&lt;/li&gt;
      &lt;li&gt;scientific-notation을 사용해야 1을 제외한 fraction 값을 구할 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;\(1.01*2^2\) 와 \(1.11*2^0\) 를 더해보자.&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;\(1.11*2^0 = 0.0111*2^2\)
      &lt;ul&gt;
        &lt;li&gt;\(2^2\) 의 exponent에 맞추어 지수부를 \(2\) 로 맞춰준다.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(1.01*2^2 + 0.0111*2^2 = 1.1011*2^2\)
      &lt;ul&gt;
        &lt;li&gt;두 수를 더해준다&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(10.0011 * 2^2 = 1.00011*2^3\)
      &lt;ul&gt;
        &lt;li&gt;scientific-notation을 적용한다&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ol&gt;

&lt;/div&gt;

&lt;h2 id=&quot;실수의-곱셈-연산&quot;&gt;실수의 곱셈 연산&lt;/h2&gt;

&lt;p&gt;다음은 실수의 곱셈이다.&lt;br /&gt;
곰셉은 조금 더 복잡하지만, 간단한 수준의 연산으로 정리된다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;먼저 두 수의 exponent를 더해 준다.&lt;/li&gt;
  &lt;li&gt;두 수를 곱한다.&lt;/li&gt;
  &lt;li&gt;그리고 덧셈과 마찬가지로 &lt;strong&gt;scientific-notation&lt;/strong&gt;으로 정리하여 exponent를 다시 계산한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;\(1.01*2^2\) 와 \(1.11*2^0\) 를 곱해보자.&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;\(2 + 0 = 2\)
      &lt;ul&gt;
        &lt;li&gt;지수부(exponent)를 더해준다.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(1.01 * 1.11 = 10.0011\)
      &lt;ul&gt;
        &lt;li&gt;두 수를 곱해준다.&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;\(10.0011 * 2^2 = 1.00011*2^3\)
      &lt;ul&gt;
        &lt;li&gt;scientific-notation을 적용한다&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ol&gt;

&lt;/div&gt;

&lt;p&gt;이렇게 덧셈과 곱셈에서의 연산 방식과 차이를 볼 수 있다.&lt;br /&gt;
두 연산 방식 모두, double형 기준에서 52bit의 fraction을 초과하는 부분에서 그 이하의 값에 대한 처리가 필요하다는 것을 알 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;fraction&lt;/strong&gt;은 제한적이지만, 실수를 2진수로 저장하면 무제한적이게 길어지기 때문에!&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ieee-754--java-specification&quot;&gt;IEEE 754 &amp;amp; JAVA specification&lt;/h2&gt;

&lt;p&gt;IEEE754에서는 위와 같은 실수의 처리에 대해 여러가지 방법을 제시힌다.&lt;br /&gt;
&lt;strong&gt;rounding&lt;/strong&gt;이라고 하는데, 아래와 같은 rounding 방식들을 제시한다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;round to zero, round up, round down, round even, round to nearest&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이 중에서도 JAVA는 JAVA specification에서 다음과 같이 round 처리를 밝힌다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/algorithm/floating/floating3.png&quot; alt=&quot;java spec&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;round to nearest&lt;/strong&gt;: 가까운 곳으로 rounding 하는 방식.&lt;/p&gt;

&lt;p&gt;예를 들어서 확실히 이해해보자.&lt;/p&gt;

&lt;h2 id=&quot;01--10&quot;&gt;0.1 * 10&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;0.1과 10의 곱&lt;/strong&gt;을 나타내면 다음과 같다.&lt;br /&gt;
먼저 2진수로 바꿔준 뒤, 이에 대한 52번째 자리까지(fraction이 52bit이기 때문) 계산한 후, 남는 부분을 Round to nearest 처리 해준다.&lt;br /&gt;
여기서 nearest는, 값을 버려서 0으로 내림하는 것보다, 1로 올림하는 것이 뒤의 … 값에서 따져봤을 때 더 가까운 값이므로 올려준다.&lt;br /&gt;
수식을 정리하면 아래와 같다.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;\(0.1\)&lt;br /&gt;
\(= 0.00011001100110011001100110011001100110011001100110011001...\)&lt;br /&gt;
\(= 0.00011001100110011001100110011001100110011001100110011010\) (Round to nearest)&lt;br /&gt;
\(= 1.1001100110011001100110011001100110011001100110011010 *2^{-4}\)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;\(10\)&lt;br /&gt;
\(= 1010\)&lt;br /&gt;
\(= 1.01 * 2^3\)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;\(0.1 * 10\)&lt;br /&gt;
\(= (1.1001100110011001100110011001100110011001100110011010 *2^{-4}) * (1.01 *2^3)\) &lt;br /&gt;
\(= 10.00000000000000000000000000000000000000000000000000001 *2^{-1}\)&lt;br /&gt;
\(= 1.0000000000000000000000000000000000000000000000000000\) (Round to nearest)&lt;br /&gt;
\(= 1\)&lt;/p&gt;

&lt;p&gt;JAVA specification에서 밝히는 규칙을 그대로 따라온 결과, 0.1*10이 1임을 볼 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;01--01--&quot;&gt;0.1 + 0.1 + …&lt;/h2&gt;

&lt;p&gt;그렇다면 덧셈의 경우는 어떨까?&lt;br /&gt;
보기 좋게 0을 붙여서 scientific-notation form으로 자리수를 맞췄다.&lt;br /&gt;
또 헷갈리지 않기 위해 10자리씩 숫자를 나눠 두었다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;0.1 + 반복 수&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;저장되는 값&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1 (0.1)&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0.0001 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2 (0.1 + 0.1)&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;00.001 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;000.01 &lt;strong&gt;0011001100&lt;/strong&gt; 1100110011 &lt;strong&gt;0011001100&lt;/strong&gt; 1100110011 &lt;strong&gt;0011001101&lt;/strong&gt; 00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;000.01 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;5&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0000.1 &lt;strong&gt;0000000000&lt;/strong&gt; 0000000000 &lt;strong&gt;0000000000&lt;/strong&gt; 0000000000 &lt;strong&gt;0000000000&lt;/strong&gt; 00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;6&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0000.1 &lt;strong&gt;0011001100&lt;/strong&gt; 1100110011 &lt;strong&gt;0011001100&lt;/strong&gt; 1100110011 &lt;strong&gt;0011001100&lt;/strong&gt; 11&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;7&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0000.1 &lt;strong&gt;0110011001&lt;/strong&gt; 1001100110 &lt;strong&gt;0110011001&lt;/strong&gt; 1001100110 &lt;strong&gt;0110011001&lt;/strong&gt; 10&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0000.1 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 0110011001 &lt;strong&gt;1001100110&lt;/strong&gt; 01&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;9&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0000.1 &lt;strong&gt;1100110011&lt;/strong&gt; 0011001100 &lt;strong&gt;1100110011&lt;/strong&gt; 0011001100 &lt;strong&gt;1100110011&lt;/strong&gt; 00&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;10&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0000.1 &lt;strong&gt;1111111111&lt;/strong&gt; 1111111111 &lt;strong&gt;1111111111&lt;/strong&gt; 1111111111 &lt;strong&gt;1111111111&lt;/strong&gt; 11&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;blockquote&gt;
  &lt;p&gt;0.11111111111111111111111111111111111111111111111111111 (2)&lt;br /&gt;
= 0.99999999999999988897769753748434595763683319091796875&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;첫 공백은 각각 fraction 앞의 1을 제외한 수부터 10칸씩을 나타낸다.&lt;br /&gt;
따라서 52칸, 52bit의 fraction을 갖는 것을 볼 수 있다.&lt;br /&gt;
여기서의 연산에서도, 52bit를 넘어갈 경우 round to nearest를 적용했다.&lt;br /&gt;
9번의 연산에 모두 표현하지 못한 점에 대해선 양해가 필요할 것 같다. (힘듦)&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;논리적으로 이해가 되긴 하니까?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;주의할 점은 \(0.1 + 0.1\)이 \(0.2\) 가 아니라는 점이다.&lt;br /&gt;
\(0.1 != 0.1\) 이기 때문이고, 위에서부터 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.1&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.1 + 0.1&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.1 + 0.1 + 0.1&lt;/code&gt;을 이어나가 마지막 값이 0.1을 열번 더한 값을 확인할 수 있다.
이 값을 계산기로 계산해보면, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.9999999...&lt;/code&gt; 의 값을 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;덧셈의 경우 어렵지 않지만 헷갈릴 수 있다.&lt;br /&gt;
한 번의 연산이 일어날 경우, 52bit로 소수점이 잘리며 rounding이 이뤄지는 점에 주목할 필요 가 있다.&lt;/p&gt;

&lt;p&gt;위의 연산을 보면,&lt;br /&gt;
자리 수가 소수점 넷째 자리에서 첫째 자리까지 바뀌면서,&lt;br /&gt;
0.1은 계속해서 넷째 자리이기 때문에,&lt;br /&gt;
값의 결과는 계속해서 52bit를 초과하게 되고,&lt;br /&gt;
이에 대한 &lt;strong&gt;round to nearest가 계속&lt;/strong&gt;해서 이뤄지게 된다.&lt;/p&gt;

&lt;h2 id=&quot;코드-및-결과-확인&quot;&gt;코드 및 결과 확인&lt;/h2&gt;

&lt;p&gt;floating point의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0.1&lt;/code&gt; 값을 아래 java 코드로 확인할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;float0_1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float0_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BigDecimal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float0_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;

	&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toByteArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;float0_1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++){&lt;/span&gt;
		&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%8s&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toBinaryString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;mh&quot;&gt;0xFF&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;sc&quot;&gt;&apos;0&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
		&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;toByteArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;byte&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;];&lt;/span&gt;
	&lt;span class=&quot;nc&quot;&gt;ByteBuffer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;wrap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;putDouble&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bts&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;0.1 (0.1을 print)&lt;br /&gt;
0.1000000000000000055511151231257827021181583404541015625 (0.1을 bigdecimal로 명확하게 print)&lt;br /&gt;
0011111110111001100110011001100110011001100110011001100110011010 (0.1의 byte를 출력)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;결과&quot;&gt;결과&lt;/h2&gt;

&lt;p&gt;결과적으로 이 글에서는 다음과 같은 내용을 다뤘다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;컴퓨터는 소수들에 대해 정확한 표기를 할 수 없다.&lt;/li&gt;
  &lt;li&gt;컴퓨터가 소수를 표기하기 위해 위와 같은 방식을 사용한다.&lt;/li&gt;
  &lt;li&gt;IEEE 754에선 소수의 연산을 위한 방식을 표준화하고 있다.&lt;/li&gt;
  &lt;li&gt;JAVA는 소수의 연산에 round to nearest를 사용한다.&lt;/li&gt;
  &lt;li&gt;0.1은 0.1이 아니다.&lt;/li&gt;
  &lt;li&gt;0.1 * 10과 0.1 + … + 0.1(10번) 의 값은 다르다.&lt;/li&gt;
  &lt;li&gt;이를 증명하는 방법들.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이와 관련해서 C나 다른 언어에서는 다른 값을 보일 수 있다는 것도 참고해야 한다.&lt;br /&gt;
언어마다 IEEE 754에서 보이는 round 규칙 중 다른 것을 택하기 때문이다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/computer/floating-point</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/computer/floating-point</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>&lt;p&gt;&lt;strong&gt;Kivy - interactive applications and games in python second edition&lt;/strong&gt; 을 통한 kivy framework 스터디 내용 정리.&lt;/p&gt;

&lt;h3 id=&quot;kivy&quot;&gt;kivy&lt;/h3&gt;
&lt;p&gt;Android, iOS, Linux, windows, Mac OS 전부 동작하는 multi-platform을 지원하는 python UI이다.&lt;br /&gt;
핵심 부분을 Cython으로 구현하고 대부분의 그래픽 동작을 directly GPU와 연결하여 속도가 빠르다. (확실히 이전에 사용해본 cordova 보다 빠르긴 하다)&lt;/p&gt;

&lt;h3 id=&quot;기본-개념&quot;&gt;기본 개념&lt;/h3&gt;
&lt;p&gt;안드로이드의 xml과 java처럼, kv와 py를 사용하고 있는데, FooApp class 는 자동으로 foo.kv와 연결된다. (FooApp class를 갖는 파일 명은 상관 없음)&lt;br /&gt;
&lt;strong&gt;widget&lt;/strong&gt;: kivy GUI component. the minimal graphical units.&lt;br /&gt;
&lt;strong&gt;property&lt;/strong&gt;: widget의 속성 중 하나이다.&lt;br /&gt;
&lt;strong&gt;self&lt;/strong&gt;: 역시 속성 중 하나로 자기 자신을 가리킨다.&lt;br /&gt;
&lt;strong&gt;root&lt;/strong&gt;: 계층 최상위를 말한다.&lt;br /&gt;
&lt;strong&gt;id&lt;/strong&gt;: .kv에서 다른 위젯에서 접근할 수 있도록 하는 값&lt;br /&gt;
&lt;strong&gt;property&lt;/strong&gt;:&lt;br /&gt;
  x, right, center_x&lt;br /&gt;
  y, top, center_y&lt;br /&gt;
  width, height를 각 self, root에 대해 쓸 수 있음&lt;br /&gt;
  size_hint - 0~1 의 비율 크기&lt;br /&gt;
  size_hint_x, size_hint_y&lt;br /&gt;
  pos_hint - 0~1 의 비율 위치&lt;/p&gt;

&lt;h3 id=&quot;layout&quot;&gt;layout&lt;/h3&gt;
&lt;p&gt;안드로이드의 layout과 유사한 모습이다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;FloatLayout&lt;br /&gt;
 size_hint, pos_hint로 창에 대한 비율로 구성한다.&lt;/li&gt;
  &lt;li&gt;RelativeLayout&lt;br /&gt;
 FloatLayout과 동일한데, layout에 대한 비율로 구성한다.&lt;/li&gt;
  &lt;li&gt;GridLayout&lt;br /&gt;
 행과 열로 layout을 구성한다.&lt;/li&gt;
  &lt;li&gt;BoxLayout&lt;br /&gt;
 세로나 가로로 쌓는 구성이다.&lt;br /&gt;
 BoxLayout은 child들이 채우는 형식으로 되어있어, ScrollView에 적합하지 않다.&lt;br /&gt;
 즉, BoxLayout은 child들이 동일한 비율로 layout을 나눠서 채움. 따라서 height 등의 값이 먹히지 않았다.&lt;/li&gt;
  &lt;li&gt;StackLayout&lt;br /&gt;
 BoxLayout과 동일한데, 계속 정해진 방향으로 쌓는 구성이다.&lt;/li&gt;
  &lt;li&gt;ScatterLayout&lt;br /&gt;
 RelativeLayout과 유사한데, rotating, scaling, translating과 같은 멀티터치를 사용한다.&lt;/li&gt;
  &lt;li&gt;PageLayout&lt;br /&gt;
 멀티페이지 이펙트를 주고, 흔히 다른 layout들을 내부에 widget으로 사용한다.&lt;br /&gt;
 &lt;strong&gt;swipe_threshold&lt;/strong&gt; - 어느 비율만큼 당겨야 페이지가 넘어가는지에 대한 설정&lt;/li&gt;
&lt;/ol&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/99.etc/kivy/2019-04-16-kivy_book_01.html</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/99.etc/kivy/2019-04-16-kivy_book_01.html</guid>
      </item>
    
      <item>
        <title>kivy app &amp; game book ch2</title>
        
          <description>&lt;h3 id=&quot;coordinate-space&quot;&gt;coordinate space&lt;/h3&gt;
&lt;p&gt;일종의 그림이 그려지는 도화지? 같은 개념이다.&lt;br /&gt;
coordinate space는 제한되지 않으며, bottom-left corner of the screeon을 origin으로 한다.&lt;/p&gt;

&lt;h3 id=&quot;canvas&quot;&gt;canvas&lt;/h3&gt;
&lt;p&gt;widget에 vector shape를 그릴 수 있다.&lt;br /&gt;
canvas에 그리는게 아니라, canvas는 coordinate space에 그리는 명령들의 집합이 &lt;strong&gt;canvas&lt;/strong&gt;이다.&lt;br /&gt;
모든 widget은 각각 Canvas를 포함한다.&lt;br /&gt;
모든 widget은 동일한 coordiante space를 공유한다.&lt;br /&gt;
coordiante space는 windows나 screen size에 제한되지 않다.&lt;br /&gt;
canvas는 canvas.before, canvas, canvas.after의 세 객체를 가진다.&lt;br /&gt;
canvas.after는 가장 마지막에 호출되어 다른 widget들 위에 생성된다.&lt;/p&gt;

&lt;h3 id=&quot;vertax-instruction&quot;&gt;&lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.graphics.vertex_instructions.html&quot;&gt;vertax instruction&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;inherit from the VertexInstruction. 어떤걸 그릴 건지에 대한 것, 기본적인 모양에 대한 명령어이다. (Line, Rectangle, Triangle, Point)&lt;br /&gt;
이걸 통해 coordinate space에 vector shape의 그림을 그린다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;strong&gt;instruction&lt;/strong&gt;&lt;/th&gt;
      &lt;th&gt;&lt;strong&gt;description&lt;/strong&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Rectangle&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ellipse&lt;/td&gt;
      &lt;td&gt;부채꼴 같은 것. 0도가 12시&lt;br /&gt; angle_start, angle_end 로 부채꼴을 그릴 수 있음&lt;br /&gt; segments 는 몇 개의 선으로 원을 그리는지에 대한 것&lt;br /&gt; 즉, 무제한의 선으로 원을 그려야 정확한 원. default=180&lt;br /&gt; segments : 3으로 하면 삼각형&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Triangle&lt;/td&gt;
      &lt;td&gt;x,y points 3개 -&amp;gt; 삼각형&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Quad&lt;/td&gt;
      &lt;td&gt;points 4개 -&amp;gt; 사각형&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Line&lt;/td&gt;
      &lt;td&gt;points 2개 -&amp;gt; 선 (2개씩 여러 개로 여러 선 그릴 수 있음)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Point&lt;/td&gt;
      &lt;td&gt;points 1개 -&amp;gt; 점 (여러 개로 여러 점 찍을 수 있음)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Bezier&lt;/td&gt;
      &lt;td&gt;곡선. points를 attractors로 사용. (math formalism.. 수학적)&lt;br /&gt; dash_length 는 점선의 길이, dash_offset 은 점선 사이의 거리&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Mesh&lt;/td&gt;
      &lt;td&gt;삼각형의 조합으로 이루어지며, 굉장히 수학적&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;context-instruction&quot;&gt;context instruction&lt;/h3&gt;
&lt;p&gt;inhefit from the CntextInstruction. 어디에, 어떻게 그릴지에 대한 것이다. (Color, Rotate, Translate, Scale)&lt;br /&gt;
vertax가 선, 원, 네모를 그린다면 contex는 색상, 회전, 크기 등..&lt;br /&gt;
이걸 통해 coordinate space에 변화를 준다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;strong&gt;instruction&lt;/strong&gt;&lt;/th&gt;
      &lt;th&gt;&lt;strong&gt;description&lt;/strong&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source: &apos;kivy.png&apos;&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;이미지를 넣을 수 있음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Color: rgba:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;color 설정 가능&lt;br /&gt;이미지가 있다고 해도 필터 같은 느낌으로 해당 컬러를 갖게 됨.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Rotate: angle:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;회전 &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Rotate: axis:&lt;/code&gt; - 어떤 축으로 할지 축을 지정&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Translate: x: or y:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;이동. 회전 상태라면, x, y의 방향이 반대가 됨&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Scale: xyz:&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;각 축에 대한 size를 비율로 지정. 0.5배를 했다면, 원상복구를 위해선 2배를 해줘야 함&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;push--pop-matrix&quot;&gt;push &amp;amp; pop matrix&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;PushMatrix&lt;/strong&gt;: PushMatrix, which will save the current coordinate space context&lt;br /&gt;
&lt;strong&gt;PopMatrix&lt;/strong&gt;: PopMatrix, which return the context to its original state. 즉, 이 사이에 context instruction을 쓰면 다른애들 영향 x.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;canvas에서 적용, canvas.after에서 해제하는 방식으로도 사용한다.
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;canvas:
    PushMatrix:
    Translate:
        xy: self.x,self.y
canvas.after:
    PopMatrix:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;context-instruction-&quot;&gt;context instruction +&lt;/h3&gt;
&lt;p&gt;Color, Rotate, Translate, Scale은 모두 설정하면 그 다음부터 coordinate space에 영향을 계속 미치게 된다. (그래서 push &amp;amp; pop matrix가 존재)&lt;br /&gt;
모든 적용을 회피하기 위해선 RelativeLayout 하위에서 적용하면 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;RelativeLayout은 내부적으로 widget의 position 등을 결정하기 때문&lt;/li&gt;
  &lt;li&gt;RelativeLayout은 내부에 PushMatrix, PopMatrix를 가지고 있음&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;widget 속의 각 widget들은 각각 canvas.before, canvas, canvas.after를 가진다. (layout도 widget의 일종이고)&lt;br /&gt;
canvas.before에는 별도의 Push/PopMatrix가 있어 여기서 구현하면 canvas 전에 cotext를 원상 복구한다.&lt;/p&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kivy/app-game-book-2</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kivy/app-game-book-2</guid>
      </item>
    
      <item>
        <title>kivy app &amp; game book ch3</title>
        
          <description>&lt;h3 id=&quot;id&quot;&gt;id&lt;/h3&gt;
&lt;p&gt;.kv 내에서만 접근 가능한 아이디다.&lt;br /&gt;
보통 맨 앞에 _를 붙이지만, 구분하기 위한 권고사항이지 필수는 아니다&lt;/p&gt;

&lt;h3 id=&quot;attribute&quot;&gt;attribute&lt;/h3&gt;
&lt;p&gt;어떤 widget에 attribute를 생성하고, id를 여기 넣어주면 그 attribute로 접근할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;ComicCreator&amp;gt;:
    AnchorLayout: ...
        ToolBox:
            id: _tool_box
            drawing_space: _drawing_space
    AnchorLayout: ...
        DrawingSpace:
            id: _drawing_space
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;commiccreator.kv의 ToolBox에서 drawing_space attribute는 _drawing_space(id)를 가지고 있으며, python에서 drawing_space로 여기에 접근 가능하다.&lt;br /&gt;
root도 동일한 방식이다.&lt;/p&gt;

&lt;h3 id=&quot;etc&quot;&gt;etc.&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;root&lt;/strong&gt;: base widget in the rule hierarchy&lt;br /&gt;
&lt;strong&gt;self&lt;/strong&gt;: current widget&lt;br /&gt;
&lt;strong&gt;app&lt;/strong&gt;: the instance of the application&lt;/p&gt;

&lt;h3 id=&quot;touch-event&quot;&gt;Touch event&lt;/h3&gt;
&lt;p&gt;touch event는 mouse, finger touch, magic pen touch으로 나뉘며, 아래 event는 mouse, finger touch에서 사용 가능하다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;on_touch_down&lt;/strong&gt;: new touch start&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;on_touch_move&lt;/strong&gt;: the touch is moved&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;on_touch_up&lt;/strong&gt;: the touch ends&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;각 touch event는 parameter(touch)로 여러 정보를 갖는 &lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.input.motionevent.html#kivy.input.motionevent.MotionEvent&quot;&gt;MotionEvent&lt;/a&gt;를 받는다.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    def on_touch_down(self, touch):
        if self.collide_point(touch.x, touch.y):
            self.select()
            return True
        return super(DraggableWidget, self).on_touch_down(touch)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;event가 진행되면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;True&lt;/code&gt;를 return하고, event가 widget 밖으로 나가면, children에 전달해 return을 받는다.&lt;br /&gt;
유사하게 super.on_touch_~ 으로 chidren의 event를 신경쓸 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;collide_point&quot;&gt;collide_point&lt;/h3&gt;
&lt;p&gt;모든 widget이 app(coordinate space)에서 발생하는 touch event(MotionEvent)를 받지만, 그 event가 특정 widget에서 발생하는지 확인하는 보편적인 방법이다.&lt;/p&gt;

&lt;h3 id=&quot;dynamic-createdeleate-canvas&quot;&gt;dynamic create/deleate canvas&lt;/h3&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;with self.canvas:
                self.selected = Line(rectangle=(0, 0, self.width, self.height),
                dash_offset=2)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;with self.canvas&lt;/code&gt;를 통해 canvas에 instructions를 넣을 수 있다.&lt;br /&gt;
Line instance를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.selected&lt;/code&gt;에 넣어서 언제든 삭제할 수 있도록 구현할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;if self.selected:
    self.canvas.remove(self.selected)
    self.selected = None
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.canvas.remove(self.selected)&lt;/code&gt;를 통해 canvas에 self.selected를 지울 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;localizing-coordinates&quot;&gt;localizing coordinates&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;to_parent()&lt;/code&gt; 같이, 현재 widget에서 구현하지만, 움직일 공간이 parent, 혹은 parent’s parent와 같은 경우 coordinates의 범위를 지정해주는 것.&lt;br /&gt;
RelativeLayout은 coordinate의 위치 값들이 다 다르기 때문에 이런 방법이 필요하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;RelativeLayout이 아닌 layout들은 그 상위에 대해 절대적인 coordinate 값을 가지고 있음&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;to_parent()&lt;/strong&gt;: transform relative coordinates inside RelativeLayout to the parent of RelativeLayout. 부모의 coordinate에 접근할 수 있다.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;to_local()&lt;/strong&gt;: transform the coordinates of parent of RelativeLayout to RelativeLayout&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;to_window()&lt;/strong&gt;: transform the coordinates of the current widget to absolute coordinate with respect to the window&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;to_widget()&lt;/strong&gt;: transform the absolute coordinates to coordinates within the parent of the current widget&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;py와-kv-연결&quot;&gt;.py와 .kv 연결&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;layout.add_widget(w)&lt;/code&gt;으로 layout에 widget을 더해준다.&lt;br /&gt;
&lt;a href=&quot;https://kivy.org/doc/stable/guide/lang.html#special-syntax&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#:import toolbox toolbox&lt;/code&gt;&lt;/a&gt;으로 toolbox를 .kv에 import 한다. (.kv에서도 python code를 import할 수 있다.)&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;comiccreator.py
comiccreator.kv (얘가 toolbox를 사용)
- toolbox.py
- toolbox.kv&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;위와 같이, commiccreator가 main이 되고 toolbox를 사용하는 상황에서&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;comiccreator.py에서 comiccreator.kv를 사용하고 (kv에서 자동으로)&lt;/li&gt;
  &lt;li&gt;commiccreator는 toolbox.kv를 내부적으로 사용하고 (.py에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Builder.load_file&lt;/code&gt;로 load)&lt;/li&gt;
  &lt;li&gt;toolbox.kv는 toolbox.py의 구현을 사용한다 (.kv에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#:import toolbox toolbox&lt;/code&gt;로 import)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;즉, toolbox.py가 main이었다면 import를 안해도 .kv를 가져갔겠지만, toolbox가 main이 아니라 사용되는 상황에서, .py를 import 해줘야 했음.&lt;/p&gt;

&lt;h3 id=&quot;bindunbind&quot;&gt;bind/unbind&lt;/h3&gt;
&lt;p&gt;binding에는 2가지 방법이 존재한다.&lt;/p&gt;

&lt;h4 id=&quot;1-at-py-it-works-for-every-instance-about-this-class&quot;&gt;1. at .py, it works for every instance about this class&lt;/h4&gt;
&lt;p&gt;python에서는 bind하면 전체 적용되는 것을 피하기 위해 touch_down의 경우 overriding하여 사용하고, 나머지에 대해 bind 하는 방식을 사용한다.&lt;br /&gt;
(we didn’t want the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_move&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_up&lt;/code&gt; events active all the time.)&lt;br /&gt;
move와 up은 touch_down이 발생한 이후에 발생할 수 있으므로, 이 이벤트들을 항상 active 상태에 두는 것이 아니라, touch_down시에 bind를 통해 관리하도록 하는 것이다.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;def on_touch_down(self, touch):
    ...
    self.draw(ds, x, y)

def draw(self, ds, x, y):
    ...
    ds.bind(on_touch_move=self.update_figure)
    ds.bind(on_touch_up=self.end_figure)

def update_figure(self, ds, touch):
def end_figure(self, ds, touch):
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;2-at-kv-it-works-only-for-this-instance&quot;&gt;2. at .kv, it works only for this instance&lt;/h4&gt;

&lt;p&gt;특정 instance에 대해 bind하기 때문에 collide_point를 사용할 필요가 없다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Button&lt;/strong&gt;: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_press:&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_release:&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&amp;lt;GeneralOptions&amp;gt;:
    Button:
        text: &apos;Clear&apos;
        on_press: root.clear(*args) # clear, remove는 .py의 GeneralOptions에 구현된 함수
    Button:
        text: &apos;Remove&apos;
        on_release: root.remove(*args)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;ToggleButton&lt;/strong&gt;: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_state&lt;/code&gt; - .py에서 ‘down’, ‘normal’로 구분&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;etc-1&quot;&gt;etc&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;clear_widgets()&lt;/code&gt;: 모든 widget을 지움&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;remove_widget(x.children[0])&lt;/code&gt;: 가장 최근에 추가된 widget을 지움&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;kivy-property&quot;&gt;&lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.properties.html&quot;&gt;Kivy property&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;property가 정의되면 Kivy는 내부적으로 property와 연관된 event를 생성하고, 이 event는 ‘on_&lt;strong&gt;property_name&lt;/strong&gt;’ method와 연결된다.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;translation = ListProperty(None)
    def on_translation(self, instance, value):
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;따라서, property에 값을 넣어주면 on_&lt;strong&gt;property&lt;/strong&gt; 가 자동으로 실행 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이는 kivy에서 굉장히 중요한 개념으로, 내부적으로 많이 사용됨.&lt;/li&gt;
  &lt;li&gt;다른 클래스에서 특정 property를 바꿈으로써 on_property를 trigger할 수 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;center_x&lt;/code&gt;도 property를 내부적으로 사용하는 것이다.&lt;br /&gt;
.kv의 vertex instruction의 attribute도 내부적으로 property로 사용 된다.&lt;br /&gt;
python property와 혼동해서는 안된다.&lt;br /&gt;
Kivy Property는 항상 attribute 지만, attribute가 모두 Kivy Property는 아니다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;attribute&lt;/strong&gt;: used to describe variables(references, objects, instances) that belongs to class&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;class StatusBar(BoxLayout):
    counter = NumericProperty(0)
    previous_counter = 0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;kivy property는 static attribute로 선언되나, internally transformed to attribute instansces.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;counter&lt;/code&gt;는 static하게 선언되나 attribute instances가 되고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;previous_counter&lt;/code&gt;는 static attribute로 되어 all StatusBar가 share..
    &lt;ul&gt;
      &lt;li&gt;class name(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StatusBar.previous_counter&lt;/code&gt;)이나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__class__&lt;/code&gt;(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__class_.previous_counter&lt;/code&gt;)로 바로 접근 가능&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__init__&lt;/code&gt; 안에서 선언되는 것들은 instance 임. 즉 not shared..&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;kivy-property-1&quot;&gt;Kivy property&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;BoundedNumericProperty&lt;/strong&gt;: set the maximum and minimum values&lt;br /&gt;
&lt;strong&gt;AliasProperty&lt;/strong&gt;: extend the properties, create our own properties&lt;br /&gt;
NumericProperty&lt;br /&gt;
StringProperty&lt;br /&gt;
ListProperty&lt;br /&gt;
DictProperty&lt;br /&gt;
ObjectProperty&lt;br /&gt;
StringProperty&lt;/p&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kivy/app-game-book-3</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kivy/app-game-book-3</guid>
      </item>
    
      <item>
        <title>kivy app &amp; game book ch4</title>
        
          <description>&lt;h3 id=&quot;screenmanager&quot;&gt;ScreenManager&lt;/h3&gt;
&lt;p&gt;ScreenManager는 여러 device에서 screen을 적절하게 조절할 수 있게 해준다.&lt;br /&gt;
multiple screen을 갖도록 해주며 screen간 switch를 쉽게 해준다.&lt;br /&gt;
ScreenManager는 항상 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Screen&lt;/code&gt; widget을 가져아하고, 다른 Widget을 가질 수 없다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Screen&lt;/code&gt;으로 사용되는 곳에도 명시가 필요하다. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@Screen&lt;/code&gt;으로 상속해주어야 한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Screen&lt;/code&gt;은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;manager&lt;/code&gt; attribute를 갖고, 이를 통해 접근할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt; property를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Screen&lt;/code&gt;에 명시하여 screen을 변경할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;예를 들어 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root.current = &apos;comicscreen&apos;&lt;/code&gt;을 통해 comicscreen으로 switch 함.
    &lt;ul&gt;
      &lt;li&gt;여기서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;root&lt;/code&gt;는 ScreenManager 이고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;current&lt;/code&gt;는 active screen 임.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;유사하게 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;current = &apos;colorscreen&apos;&lt;/code&gt;으로 colorscreen으로 switch 할 수 있음.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;comiccreator.kv&lt;/code&gt;에서 각 항목들에 대해 id, root를 부여하는 이유&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ScreenManager를 사용하게 되면 ScreenManager가 Screen들을 통제하게 되는 구조가 되기 때문에 .py에서 kivyApp이 빌드하는 최상위가 Manager가 되야 한다.&lt;/p&gt;

&lt;h3 id=&quot;color&quot;&gt;Color&lt;/h3&gt;
&lt;p&gt;동적으로 coloring 하기 위한 방법이다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;canvas.add&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;with ---.canvas:&lt;/code&gt;를 통해 color를 추가할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;canvas&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;canvas.before.add&lt;/code&gt;를 사용하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Color&lt;/code&gt; instruction이 Canvas에 추가한 다른 instructions보다 먼저 적용되도록 할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;transision&quot;&gt;&lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.uix.screenmanager.html#changing-transitions&quot;&gt;transision&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;screen을 switch 할 때 어떤 animation이 보이는가에 대한 것이다.&lt;/p&gt;

&lt;h3 id=&quot;etc&quot;&gt;etc&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_file&lt;/code&gt;은 .kv를 include하는 것이며, 이와 유사하게 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;load_string&lt;/code&gt;으로 .kv를 python file에서 사용할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;stencilview&quot;&gt;stencilView&lt;/h3&gt;
&lt;p&gt;특정 영역에만 이벤트를 처리하기 위해서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;collide_points&lt;/code&gt;와 같은 방법을 사용했었는데, 이건 group mode나 resize 같은 상황에서 완벽하지 않다.&lt;br /&gt;
따라서 StencilView를 쓰는데, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StencilView&lt;/code&gt;는 drawing area를 해당 view의 공간까지로 제한하며, 밖에 그려진 것들은 숨겨진다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;drawingspace&lt;/code&gt;를 제한하기 위해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StencilView&lt;/code&gt;를 상속하도록 함.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DrawingSpace(RelativeLayout)&lt;/code&gt;을 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DrawingSpace(stencilView)&lt;/code&gt;로 변경.
    &lt;ul&gt;
      &lt;li&gt;참 여기서 DrawingSpace는 예제에서 만들어낸 클래스!&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StencilView&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RelativeLayout&lt;/code&gt;이 아니므로, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StencilView&lt;/code&gt; class는 relative coordinates를 사용할 수 없다. 즉, 여기서 사용한다면 상위의 RelativeLayout을 사용하게 되는 것이며, 일반적으로 drawing은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;relative coordinates&lt;/code&gt;를 사용하는 것이 좋으므로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RelativeLayout&lt;/code&gt;안에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DrawingSpace&lt;/code&gt;을 사용하도록 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DrawingSpace(RelativeLayout)&lt;/code&gt;와 같은 동작을 원한다면 RelativeLayout을 가질 수 있도록 RelativeLayout으로 DrawingSpace를 감싸도록 한다. 이렇게 되면 RelativeLayout이 원하는 위치와 사이즈를 갖도록 설정해주어야 한다.
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  RelativeLayout:
  DrawingSpace:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;scatter&quot;&gt;scatter&lt;/h3&gt;
&lt;p&gt;scale, rotate와 같은 기능들을 가지고 있는 class. 두 손가락으로 scale과 rotate를 할 수 있도록 구현되어 있고, mobile에서도 사용가능하다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scatter&lt;/code&gt;도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;RelativeLayout&lt;/code&gt;처럼 relative coordinates를 사용한다.&lt;/p&gt;

&lt;h3 id=&quot;scatter-적용&quot;&gt;scatter 적용&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;DraggableWidget이 Scatter를 상속하도록 함.&lt;/li&gt;
  &lt;li&gt;scatter가 event를 받을 수 있도록 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_down&lt;/code&gt;에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;super.on_touch_down&lt;/code&gt;를 추가 함.&lt;/li&gt;
  &lt;li&gt;scatter가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pos&lt;/code&gt; property에 대한 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_pos&lt;/code&gt; method를 지원하므로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_move&lt;/code&gt; 대신 사용.&lt;/li&gt;
  &lt;li&gt;scatter는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rotation&lt;/code&gt;과 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;scale&lt;/code&gt; property를 또한 지원하며, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_rotation&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_scale&lt;/code&gt; 사용.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;property-활용&quot;&gt;property 활용&lt;/h3&gt;
&lt;p&gt;property의 활용은 하나의 변경이 다른 widget에 영향을 미칠 때 효과적으로 사용할 수 있다.&lt;br /&gt;
예를들어 하나의 widget이 rotation이 변경되면, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_rotation&lt;/code&gt; 함수가 호출되는데, 이 함수 내부에서 연관된 widget들의 rotation을 변경하여 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_rotation&lt;/code&gt;을 호출할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;gesture&quot;&gt;gesture&lt;/h3&gt;
&lt;p&gt;kivy 에서는 gesture를 저장할 수 있는데, gesture를 string으로 저장함.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_down&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_move&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_up&lt;/code&gt; 마다 point를 저장하여 string으로 변환하는 방식이다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gesture = Gesture()&lt;/code&gt;로 Gesture를 생성하고&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gesture.add_stroke(self.points)&lt;/code&gt;로 points를 넣고
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.points += [touch.pos]&lt;/code&gt;로 points가 기록되어 있음&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gesture.normalize()&lt;/code&gt;로 default number로 바꾸고&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GestureDatabase.gesture_to_str(gesture)&lt;/code&gt;로 string으로 출력하여 확인하도록 함.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;kivy 에서 저장한 gesture를 활용하는 방식.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;str_to_gesture&lt;/code&gt;로 저장해둔 string gesture를 gesture로 바꿈&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GestureDataBase.add_gesture&lt;/code&gt;로 gesture를 database에 추가&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_down&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_move&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_up&lt;/code&gt;에 대한 함수 구현.
    &lt;ul&gt;
      &lt;li&gt;각 함수에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[touch.pos]&lt;/code&gt;를 저장하고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_up&lt;/code&gt;에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GestureDatabase.find&lt;/code&gt;를 통해 database에서 저장된 gesture가 있는지 찾도록 함.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;찾은 값과, database에 넣은 gesture가 일치하는지 확인하여 사용.
    &lt;ul&gt;
      &lt;li&gt;여기서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;discriminate&lt;/code&gt;를 통해 해당 그림들을 그리도록 하였음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;behavior&quot;&gt;behavior&lt;/h3&gt;
&lt;p&gt;특정 widget의 classic behavior를 다른 behavior에 사용할 수 있다.&lt;br /&gt;
예를 들어, ButtonBehavior(on_press, onRelease를 사용하기 위한)를 Label이나 Image widget에 사용할 수 있다.&lt;/p&gt;

&lt;p&gt;behavior는 widget의 appearance를 바꾸는 것이 아니라, functionallity만 넣어주는 것이다.&lt;br /&gt;
&lt;strong&gt;multiple inheritance&lt;/strong&gt;를 통해 사용할 수 있지만, touch가 중복되거나, 동일 property를 갖는 경우에 대해 조심해서 사용해야 한다.&lt;/p&gt;

&lt;p&gt;현재는 아래의 Behavior만 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ButtonBehavior&lt;/li&gt;
  &lt;li&gt;ToggleButtonBehavior&lt;/li&gt;
  &lt;li&gt;DragBehavior&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;style&quot;&gt;style&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Window&lt;/strong&gt;: window를 import 하여, 몇 가지 application window와 global parameter, event를 설정할 수 있다. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;clearcolor&lt;/code&gt; property 를 통해 backgrond color를 설정할 수 있다.&lt;br /&gt;
&lt;strong&gt;bold&lt;/strong&gt;: bold property로 폰트 설정할 수 있다.&lt;br /&gt;
&lt;strong&gt;background_normal&lt;/strong&gt;, &lt;strong&gt;background_down&lt;/strong&gt;: background_normal과 background_down property를 통해, Button의 background image를 설정할 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;Label&amp;gt;&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;Button&amp;gt;&lt;/code&gt;과 같이 widget에 대한 적용을 하면 코드 전체의 Label에 영향을 미칠 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;set할 때의 순서도 중요함. Button을 먼저 set하면, Label 것이 overwrite.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;factory&quot;&gt;Factory&lt;/h3&gt;
&lt;p&gt;새로운 class를 등록할 수 있다. 말 그대로 정말 만들어내는 것.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Factory.register()&lt;/code&gt;으로, kivy에서 ‘name’으로 사용할 수 있는 class를 등록할 수 있다.&lt;br /&gt;
등록된 name은 .kv에서 사용 가능하다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Factory.unregister()&lt;/code&gt;으로, 등록된 name을 해제할 수도 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Line을 unregister로 해제하고, register로 새로만든 Line을 등록함으로써 Line을 재정의하는 방식으로도 사용할 수 있다.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kwargs&lt;/code&gt; parameter가 Line의 모든 property를 가지고 있는데, 여기서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kwargs[&apos;width&apos;]&lt;/code&gt;를 사용하여 Line의 두께를 바꿀 수 있음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kivy/app-game-book-4</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kivy/app-game-book-4</guid>
      </item>
    
      <item>
        <title>kivy app &amp; game book ch5</title>
        
          <description>&lt;h3 id=&quot;atlas&quot;&gt;Atlas&lt;/h3&gt;
&lt;p&gt;여러 image를 처리하기 위한 방법으로, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sprite&lt;/code&gt;로도 알려져 있다.(오호 sprite는 unity에서 낯익다)&lt;br /&gt;
application image들을 하나의 큰 image로 group화 하여 request를 줄이는 방식이다. 쉽게 말하면 img1~100을 받을 때 100번 req 해야하는데, 이걸 이어 붙이고 좌표를 보내서 1번의 req로 받겠다!&lt;br /&gt;
하나의 큰 atlas 이미지와 각 이미지에 대한 좌표들을 json file로 저장하는 작업을 내부적으로 해준다.&lt;/p&gt;

&lt;p&gt;atlas 이미지를 생성하기 위해 &lt;a href=&quot;http://python-pillow.github.io/&quot;&gt;pillow library&lt;/a&gt;가 필요하며 아래와 같은 명령어로 실행함&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python -m kivy.atlas invasion 100 *.png&lt;/code&gt; (basename, size, img list)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;basename&lt;/code&gt;.png, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;basename&lt;/code&gt;.atlas(json format) 이 생성됨&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;atlas 이미지를 사용하기 위해서 kv에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;source: atlas://src/path/imgfile&lt;/code&gt;와 같이 사용한다.&lt;/p&gt;

&lt;h3 id=&quot;soundloader&quot;&gt;SoundLoader&lt;/h3&gt;
&lt;p&gt;kivy에서 sound effect를 사용하기 위해서 SoundLoader를 사용한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SoundLoader.load(&apos;soundfile.wav&apos;)&lt;/code&gt;와 같이 soundfile을 load하면 Sound class를 return하고 이를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.play()&lt;/code&gt;를 통해 재생시킬 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;animation&quot;&gt;&lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.animation.html&quot;&gt;Animation&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;목적지까지 움직이는 것과 같은 간단한 animation을 설정하는데 사용한다.&lt;br /&gt;
default로 period를 1초로 갖는다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_start&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_progress&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_complete&lt;/code&gt;의 3개의 event를 bind 해서 사용한다. 여기서 progress는 진행 정도를 말한다.&lt;br /&gt;
animation instance의 parameter는 적용할 widget의 어떤 property도 될 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이게 무슨말이냐면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Animation(font_size=72, d=2)&lt;/code&gt; 같이 font_size를 설정할 수도 있고 property는 다된다는 거다&lt;br /&gt;
&lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.animation.html#kivy.animation.AnimationTransition&quot;&gt;transition&lt;/a&gt;으로 목적지까지의 transition의 모양을 설정할 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_complete&lt;/code&gt;를 통해 두 개의 animation을 연결할 수 있다. 이 방식은 on_complete 즉 종료되면 다른 animation을 실행하도록 하는 방식이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;automatic-bind&quot;&gt;Automatic bind&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pos: self.parent.pos&lt;/code&gt;를 layout에 선언함으로써 parent가 움직일때, child도 움직이도록 할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이렇게 parent가 바뀔 때, child가 따라서 pos가 바뀌게 할 수 있는데, 이 pos의 변화와 parent가 아닌 다른 event에 의한 pos의 변화가 겹쳐서 발생하면 문제가 생길 수 있음. 따라서 parent의 pos 변화를 받도록 하는 widget을 만들고, 실제 widget은 마음대로 움직이도록 함&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;scheduling&quot;&gt;scheduling&lt;/h3&gt;
&lt;p&gt;kivy Clock을 import하여 사용한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schedule_interval&lt;/code&gt; 을 통해 주기적으로 해당 함수를 실행할 수 있다. (단위는 초)&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schedule_once&lt;/code&gt; 를 통해 한 번만 해당 함수를 실행할 수도 있다.&lt;br /&gt;
마찬가지로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unschedule&lt;/code&gt;을 통해 schedule을 해제할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;multi-touch&quot;&gt;multi-touch&lt;/h3&gt;
&lt;p&gt;모든 kivy widget과 component는 multi-touch를 지원한다.&lt;br /&gt;
kivy는 각 touch에 대한 data들을 제공하여 이를 활용해 multi-touch를 구현할 수 있도록 한다.&lt;br /&gt;
&lt;a href=&quot;&quot;&gt;collide_point&lt;/a&gt;로, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;touch.pos&lt;/code&gt;가 어디에 있는지를 통해 touch를 구분하도록 한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_down&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_move&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_touch_up&lt;/code&gt;은 모두 같은 touch reference를 사용하기 때문에 이를 통해 touch를 구분할 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;touch.ud&lt;/code&gt; (user data)를 활용하여 down을 어디서 했는지 구분하는 등으로 사용 가능함.&lt;/p&gt;

&lt;h3 id=&quot;keyboard&quot;&gt;keyboard&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Window.request_keyboard&lt;/code&gt; 를 통해 keyboard를 받는데, paremeter 중 하나로 keyboard가 closed될 때 수행될 함수를 넣어주며, 보통 unbind를 넣는다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bind(on_key_down=)&lt;/code&gt; 를 통해, key를 누를 때 수행 될 함수를 구현하여 bind 해 준다.&lt;br /&gt;
mobile device에서는 keyboard를 사용하지 않아야 할 수도 있다.&lt;br /&gt;
어떤 event에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bind&lt;/code&gt; 할 수 있는 method의 개수는 제한이 없다.&lt;/p&gt;

&lt;h2 id=&quot;combining-animation&quot;&gt;combining animation&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt; , &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;amp;&lt;/code&gt; 을 통해 animation을 combine할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt; : one after another.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt; : at the same time.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Animation1 &amp;amp;= Animation2&lt;/code&gt; 으로 2가 1과 동시에 수행되도록 할 수 있고,&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Animation1 += Animation2&lt;/code&gt; 으로 2가 1이 수행된 이후에 수행되도록 할 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt; 의 동작은 &lt;a href=&quot;##Animation&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_complete&lt;/code&gt;&lt;/a&gt;로 animation을 연결한 것과 유사하지만, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_complete&lt;/code&gt;에서 animation 두 개를 연결해 loop를 만든 것과 같은 동작을 수행할 수는 없다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kivy/app-game-book-5</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kivy/app-game-book-5</guid>
      </item>
    
      <item>
        <title>kivy app &amp; game book ch6</title>
        
          <description>&lt;h3 id=&quot;video-widget&quot;&gt;video widget&lt;/h3&gt;
&lt;p&gt;kivy 에서는 video widget을 제공한다.&lt;/p&gt;

&lt;h3 id=&quot;property&quot;&gt;property:&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;allow_stretch - True이면, screen size에 맞게 video가 커질 수 있다.&lt;/li&gt;
  &lt;li&gt;color - play 중이지 않을 때 덮어쓰는 색상.&lt;/li&gt;
  &lt;li&gt;source - 재생할 비디오 위치.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#:set A B&lt;/code&gt;를 통해 kv에서 주소를 define하여 사용할 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;일반적으로 &lt;a href=&quot;&quot;&gt;Factory&lt;/a&gt;를 통해 재정의하여 사용하는데, property를 활용하여 재정의 함.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_state&lt;/code&gt;에서 state가 변경될 때 호출되며 (state는 play, pause, stop을 가짐)&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;on_eos&lt;/code&gt;는 end of stream 일때 호출되며&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_on_load&lt;/code&gt;는 video가 memory로 load될 때, ready to play일 때 실행 됨.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;asyncimage&quot;&gt;AsyncImage&lt;/h3&gt;
&lt;p&gt;AsyncImage는 Image와 달리 image가 loading 되는 동안 program을 사용할 수 있도록 한다.&lt;br /&gt;
큰 이미지를 받을 때 사용될 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;etc&quot;&gt;etc&lt;/h3&gt;
&lt;p&gt;이외에 sidebar, ScrollView와 같은 kivy widget들의 활용이 있다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kivy/app-game-book-6</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kivy/app-game-book-6</guid>
      </item>
    
      <item>
        <title>kivy</title>
        
          <description>&lt;p&gt;&lt;strong&gt;Widget Parameter&lt;/strong&gt;:&lt;br /&gt;
kivy widget constructor parametor를 추가하고 싶을 때, &lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.properties.html&quot;&gt;property 명시&lt;/a&gt;하기 위해 keyword argument를 사용한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;font&lt;/strong&gt;:&lt;br /&gt;
한글폰트등의 폰트 적용 방법. 폰트도 하나의 StringProperty이다.&lt;br /&gt;
&lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.uix.label.html#catering-for-unicode-languages&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;font_name&lt;/code&gt;으로 적용&lt;/a&gt;한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://noonnu.cc/&quot;&gt;눈누&lt;/a&gt;에서 무료폰트를 확인할 수 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;connect .kv with .py&lt;/strong&gt;:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;self.ids.~&lt;/code&gt;으로 접근하는 경우도 있으며,&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;layout_content=ObjectProperty(None)&lt;/code&gt;와 같이 Property를 생성하면, 해당 .kv 클래스에서 동일 name으로 사용하는 방식도 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;dynamic added scroll view&lt;/strong&gt;:&lt;br /&gt;
scroll view에 들어갈 widget들이 많을 때, 그걸 동적으로 추가하고 넣어주는 &lt;a href=&quot;https://gist.github.com/smglab/a5f4fcfb094f54c44ff0&quot;&gt;코드&lt;/a&gt;가 필요하다. 인스타나 페북도 그런 것들의 일종이고.. 이거 없으면 kivy는 한 번에 다 보여주려고 하면서 죽어버린다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://kivy.org/doc/stable/api-kivy.core.text.markup.html&quot;&gt;mark up&lt;/a&gt;&lt;/strong&gt;:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;markup=True&lt;/code&gt;와 함께, text에 부분적으로 color, font 등의 수정을 할 수 있다. 그니까 책에서 배운건 text 전체에 적용되는데, 이건 딱 그 일부분만 적용되도록 할 수 있다는 것이다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;action bar&lt;/strong&gt;:&lt;br /&gt;
action bar를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;top: root.height&lt;/code&gt;로 위치 설정을 하였을 때, 윈도우에서 제대로 설정 되었지만, 안드로이드에서는 위에 상태표시줄까지 위치로 잡아 그만큼 잘리는 현상이 발생하였다.&lt;br /&gt;
해당 코드를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pos_hint: {&apos;top&apos;: 1}&lt;/code&gt;로 해결할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;label-size&quot;&gt;label size&lt;/h3&gt;
&lt;p&gt;label의 text에 따라 label size가 조절되지 않아 엄청 못생기고 밉게 보이는 경우에 대한 해답을 각각 .py, .kv에서 찾았다.&lt;/p&gt;

&lt;p&gt;label의 text에 따라 size를 조절해주는 &lt;a href=&quot;https://stackoverflow.com/questions/18670687/how-i-can-adjust-variable-height-text-property-kivy&quot;&gt;코드&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;text_size&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;texture_size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;l&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;setter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;size&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;width&lt;/code&gt;에 따라 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;s&lt;/code&gt;(label)의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text_size&lt;/code&gt;를 setter로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(w, None)&lt;/code&gt;으로 설정. 즉, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text_size&lt;/code&gt;를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;width&lt;/code&gt;로 설정하는 것&lt;/p&gt;

&lt;p&gt;kv 파일에서 text에 따라 size를 조절해주도록 하는 &lt;a href=&quot;https://stackoverflow.com/questions/43666381/wrapping-the-text-of-a-kivy-label&quot;&gt;코드&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;n&quot;&gt;text_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;size_hint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;texture_size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;와 같이, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;text_size&lt;/code&gt;를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;width&lt;/code&gt;로 맞추고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;height&lt;/code&gt;를 width로 정해진 texture_size의 값으로 설정.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;주의사항&lt;/strong&gt;:&lt;br /&gt;
위와 같은 size 조절은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bind&lt;/code&gt;로 발생함.&lt;br /&gt;
즉 width와 texture_size가 변경될 때 dynamic하게 코드를 변경하는 것.&lt;br /&gt;
따라서 위와 같은 코드 바로 뒤에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;l.height&lt;/code&gt;와 같은 코드를 사용해도 height를 구할 수 없음.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;실제로 scrollview 구현 중 height에 따른 scroll 위치를 적용하는데 애를 먹음.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;l.bind(height=self.lavel_height_changed)&lt;/code&gt;와 같이, height에 bind를 통해 원하는 값들을 처리할 수 있음.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kivy/kivy-etc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kivy/kivy-etc</guid>
      </item>
    
      <item>
        <title>TDD 01</title>
        
          <description>&lt;h3 id=&quot;tdd-공부-시작&quot;&gt;TDD 공부 시작&lt;/h3&gt;

&lt;p&gt;최근 회사에서 안드로이드 F/W의 모듈 추가와 수정을 하면서 단위 테스트가 필요한 경우가 많았다.&lt;br /&gt;
TDD라는 말이 그 전부터도 한참 많이 들어왔던 단어인데, 최근들어 공부해야 겠다는 생각이 들었다.&lt;br /&gt;
결국 단위 모듈 테스트라면 파이썬에선 __main__으로 되는 것 아닌가 싶기도 한데..&lt;/p&gt;

&lt;p&gt;켄트 백이 쓴 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;Test-Driven Development: By Example&lt;/code&gt;을 번역한 책을 기준으로 TDD 공부를 시작하였다.&lt;br /&gt;
이 책은 예제를 위주로 다루고 있고, chapter에 따른 내용들은 내 맘대로 이름을 붙여 정리해보았다.&lt;/p&gt;

&lt;h3 id=&quot;tdd&quot;&gt;TDD&lt;/h3&gt;
&lt;p&gt;테스트 주도 개발은 단순한 두 가지 규칙만을 따른다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;오직 자동화된 테스트가 실패한 경우에만 새로운 코드를 작성한다.&lt;/li&gt;
  &lt;li&gt;중복을 제거한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위 규칙들에서 아래와 같은 함의를 갖는다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;매 결정사항에 대해 피드백을 제공하는 실행 가능한 코드를 기반으로 하는 유기적인 설계를 해야한다.&lt;/li&gt;
  &lt;li&gt;직접 테스트를 작성한다.&lt;/li&gt;
  &lt;li&gt;개발 환경은 작은 변화에도 빠르게 반응할 수 있어야 한다&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
  &lt;li&gt;쉬운 테스트를 위해 응집도는 높고 결합도는 낮은 컴포넌트들로 구성되게 설계해야 한다&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;프로그래밍-순서&quot;&gt;프로그래밍 순서&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;실패하는 작은 테스트를 작성한다. 처음에는 컴파일조차 되지 않을 수 있다.&lt;/li&gt;
  &lt;li&gt;빨리 테스트가 통과하게끔 만든다. 코드가 개판이어도 좋다.&lt;/li&gt;
  &lt;li&gt;리팩토링을 통해 테스트를 통과하게 만든 문제들을 제거한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이런 코드 방식으로 다음과 같은 함의를 가질 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;결함을 감소시켜 품질보증을 능동적으로 할 수 있다.&lt;/li&gt;
  &lt;li&gt;고약한 예외 상황의 숫자를 충분히 낮출 수 있다면 프로젝트 매니저가 정확히 추정하여 고객을 매일의 개발 과정에 참여시킬 수 있다&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
  &lt;li&gt;깔끔하고 쉽게 이해가능한 코드로 기술적인 대화가 분명해질 수 있다면 협력하기 더 쉬워질 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tdd가-필요한-이유&quot;&gt;TDD가 필요한 이유&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;용기&lt;/strong&gt;를 주기 때문이다.&lt;br /&gt;
불확실함으로 인한 두려움은 망설이게하고 / 커뮤니케이션을 줄이고 / 피드백을 피하게 한다.&lt;br /&gt;
불학실함을 이기고 구체적인 학습을 통해 분명하게 커뮤니케이션하고/ 구체적인 피드백을 받아야 한다.&lt;br /&gt;
TDD를 하는 것은 톱니바퀴를 만드는 것과 같고, 하나가 작동하면 걔는 영원히 작동하는 것이다.&lt;br /&gt;
TDD란 프로그래밍 중 내린 결정과 그 결정에 대한 비드백 사이의 간격을 인지하고, 이 간격을 통제할 수 있게 해주는 기술이다.&lt;/p&gt;

&lt;p&gt;결국 TDD는,
&lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;단순&lt;/code&gt;하게 시작하고, &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;자동화된 테스트&lt;/code&gt;를 만들고, 새로운 설계에 대한 도입을 위해 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;리팩토링&lt;/code&gt; 하는 것이다.&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;따라서 컴파일 등의 과정이 최소화된 파이썬 등의 언어가 제일 적합하다. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;실제 안드로이드 F/W에서는 클래스 간의 결합도가 높아 단일 모듈 테스트가 굉장히 어렵거나 불가능한 항목이 많았다. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;특정 상황에서만 나오는 예외 케이스에 대해 고객의 요구사항을 테스트에 추가한다는 말로 보인다. 항상 이슈가 되는 건 100% 발생 이슈가 아니라 발견할 수 없는 특정 상황 이슈니까. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-01</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-01</guid>
      </item>
    
      <item>
        <title>TDD 02</title>
        
          <description>&lt;p&gt;1부 화폐 예제&lt;/p&gt;

&lt;h3 id=&quot;tdd의-기본원리&quot;&gt;TDD의 기본원리&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;재빨리 테스트를 하나 추가한다.&lt;/li&gt;
  &lt;li&gt;모든 테스트를 실행하고 추가한 것이 실패하는지 확인한다.&lt;/li&gt;
  &lt;li&gt;코드를 바꾼다.&lt;/li&gt;
  &lt;li&gt;성공을 확인한다.&lt;/li&gt;
  &lt;li&gt;리팩토링을 통해 중복을 제거한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;chapter-1&quot;&gt;chapter 1&lt;/h2&gt;
&lt;p&gt;이 책은 예제를 통해 개념을 설명해가고 있다.&lt;br /&gt;
첫 번째 예제는 다음과 같다.&lt;/p&gt;

&lt;p&gt;계속 강조했듯이, &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;우선 테스트를 만든다&lt;/code&gt;. (여기선 Junit을 사용)&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testMultiplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;얼마나 테스트를 먼저 만드냐면, 위 코드는 컴파일이 되지 않는데, 이유는 아래와 같다. (이게 코드냐! 싶다)&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Dollar 클래스가 없음&lt;/li&gt;
  &lt;li&gt;생성자가 없음&lt;/li&gt;
  &lt;li&gt;times 함수 없음&lt;/li&gt;
  &lt;li&gt;amount 필드 없음&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;TDD에서는 우선 위처럼 테스트를 만들고 아래의 문제점들을 찾아 하나씩 해결하는 방식이다.&lt;br /&gt;
여기서 위 문제들을 해결해서 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;컴파일이 되게 만든다&lt;/code&gt;. 딱히 예제가 필요하지 않을 것 같다.&lt;br /&gt;
컴파일이 되게 만들었다면, &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;테스트를 통과하게 만들어야 한다&lt;/code&gt;.&lt;br /&gt;
처음엔 테스트를 빠르게 통과하게 만드는데, 어느정도냐면 임의의 값에 대한 테스트 성공이 아니라, 특정 테스트 값에 대해 성공하도록 수정해도 된다&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;multiple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;multiple&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;의존성과-중복&quot;&gt;의존성과 중복&lt;/h3&gt;
&lt;p&gt;목표는 코드를 바꾸지 않으면서 의미있는 테스트를 추가하는 것인데, 현재 이것은 불가능하다.&lt;br /&gt;
TDD에서 중요한 것은 코드의 중복을 제거함으로써 의존성을 줄이고 하나의 코드 수정으로 적용될 수 있도록 하는 것이다.&lt;/p&gt;

&lt;h2 id=&quot;chater-2&quot;&gt;chater 2&lt;/h2&gt;

&lt;h3 id=&quot;tdd의-구체적-기본원리&quot;&gt;TDD의 구체적 기본원리&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;#TDD의-기본원리&quot;&gt;TDD 기본원리&lt;/a&gt;를 조금더 확인해 보면&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;재빨리 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;필요한 모든 요소를 포함&lt;/code&gt;한 테스트를 하나 추가한다.&lt;/li&gt;
  &lt;li&gt;실행 가능하게 만든다. 깔끔하고 단순한 해법이 명백하다면 그 것을 사용하고, 그렇지 않다면 이전에 했던 것처럼 최대한 빨리 테스트를 통과하게 한다. 여기서 핵심은 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;테스트를 통과만 할 수 있는 더러운 코드&lt;/code&gt;를 잠시는 작성해도 된다는 것이다.&lt;/li&gt;
  &lt;li&gt;올바르게 만든다. 위에서 저지른 죄를 되돌리고 중복을 제거한다. 해야할 것들을 리스트 업한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;tdd-vs-add&quot;&gt;TDD vs ADD&lt;/h3&gt;
&lt;p&gt;코딩의 방향은 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;작동&lt;/code&gt;하는 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;깔끔한&lt;/code&gt; 코드를 얻는 것이다.&lt;br /&gt;
&lt;strong&gt;Test-Driven Development (TDD)&lt;/strong&gt;:&lt;br /&gt;
  작동하는 코드를 먼저 만들고 깔끔한 코드로 수정하는 방식.&lt;br /&gt;
&lt;strong&gt;Architecture-Driven Development (ADD)&lt;/strong&gt;:&lt;br /&gt;
  깔끔한 코드를 먼저 만들고 작동하는 코드를 만드는 방식.&lt;/p&gt;

&lt;h3 id=&quot;오류-제어하기&quot;&gt;오류 제어하기&lt;/h3&gt;
&lt;p&gt;설계상의 결함이나 부작용, 코드상 꺼림찍한 느낌이 있다면 이를 테스트로 변환하고 테스트를 수정하는 것이 TDD의 일반적인 주제이다.&lt;br /&gt;
부족한 부분을 보완하기 위해 테스트를 수정하고 이후에 다시 코드를 수정할 수 있도록 한다.&lt;/p&gt;

&lt;h2 id=&quot;chapter-3&quot;&gt;chapter 3&lt;/h2&gt;

&lt;h3 id=&quot;value-object-pattern&quot;&gt;value object pattern&lt;/h3&gt;
&lt;p&gt;값 객체 패턴이라고 번역되는 이 패턴의 가장 큰 특징은 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;객체의 인스턴스 변수가 생성자를 통해 설정된 후에는 결코 변하지 않는다&lt;/code&gt;는 것이다.&lt;br /&gt;
값 객체는 별칭 문제에 대해 걱정할 필요가 없다는 장점이 있다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;하나의 수표에 $5를 설정하고, 다른 수표에서 $5를 설정했을 때, 두 번째 수표의 값을 수정했을 때 첫 번째 수표의 값이 변하게 되는 문제를 별칭 문제라고 한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;값 객체에서는 위와 같은 상황에서 누군가 $7를 원한다면 새로운 객체를 만들어야 한다.&lt;br /&gt;
또 값 객체는 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;모든 연산에 대해 새 객체를 반환&lt;/code&gt;해야 하며, 따라서 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;equals()&lt;/code&gt;를 구현하여 반환된 값들을 판별해야 한다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Dollar라는 객체에 대해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;assertTrue(new Dollar(5).equals(new Dollar(5)))&lt;/code&gt;를 만족할 수 있도록 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt;의 구현이 필요하다.&lt;br /&gt;
&lt;a href=&quot;#TDD의-기본원리&quot;&gt;TDD 기본원리&lt;/a&gt;에서 배운 무작정 통과를 사용하면 다음과 같이 테스트를 통과할 수 있을 것이다. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;public boolean equals(Object object) { return true;}&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;삼각측량&quot;&gt;삼각측량&lt;/h3&gt;
&lt;p&gt;라디오 신호를 수신국 A, B가 감지하고 있을 때, 각 수신국 사이의 거리를 알고 있고 신호의 방향을 알고 있다면 이를 통해 신호의 거리와 방위를 계산하는 계산법이다.&lt;br /&gt;
코드에 적용하면 두 개 이상의 예제로 코드를 일반화 하는 방법이다.&lt;br /&gt;
어떻게 리팩토링을 해야하는지 감이 오지 않을 때, 설계를 어떻게 해야할지 떠오르지 않을 때 삼각측량을 통해 문제를 다른 방향에서 생각해볼 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;삼각측량-적용&quot;&gt;삼각측량 적용&lt;/h3&gt;
&lt;p&gt;아래와 같이 테스트를 추가하여 삼각측량을 할 수 있을 것이다.&lt;br /&gt;
그러면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;return true&lt;/code&gt;로 해결할 수 없고, 실제 값을 비교하도록 하는 수정이 비로소 이루어진다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testEquality&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollar&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위 코드는 Equals(null)을 고려하지 않았지만, 괜찮다. 리스트 업하고 나중에 확인하자.&lt;/p&gt;

&lt;h3 id=&quot;디자인-패턴-적용-과정&quot;&gt;디자인 패턴 적용 과정&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;디자인 패턴(값 객체)가 하나의 또 다른 오퍼레이션을 암시한다는 것을 보았다.&lt;/li&gt;
  &lt;li&gt;해당 오퍼레이션을 테스트했다.&lt;/li&gt;
  &lt;li&gt;오퍼레이션을 간단히 구현하였다.&lt;/li&gt;
  &lt;li&gt;테스트를 추가하였다. (삼각측량)&lt;/li&gt;
  &lt;li&gt;리팩토링했다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;chapter-4&quot;&gt;chapter 4&lt;/h2&gt;
&lt;p&gt;수정한 코드를 통해 테스트를 수정할 수 있다.&lt;br /&gt;
&lt;a href=&quot;#chater-1&quot;&gt;chapter 1&lt;/a&gt;의 코드를 수정해본다. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dollar.equals()&lt;/code&gt;가 구현되었고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;times()&lt;/code&gt;는 값 객체 패턴에 따라 새로운 값을 return하게 되었으므로 아래와 같이 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;테스트와 코드의 결합도를 낮추는 방향&lt;/code&gt;으로 수정될 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testMultiplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;수정 사항은 보다 명확하게 의도를 알 수 있으며, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dollar.amount&lt;/code&gt;를 사용하지 않아 변수를 private으로 변경할 수 있게 되었다.&lt;/p&gt;

&lt;h3 id=&quot;tdd의-생각&quot;&gt;TDD의 생각&lt;/h3&gt;
&lt;p&gt;완벽함을 위해 노력하지 않는다. 모든 것을 두 번 말함으로써(code와 test로) 자신감을 가지고 결함을 낮추기를 희망한다. 때로 결함이 생길 수 있지만, 그럴 땐 테스트를 어떻게 작성해야 했는지에 대한 교훈을 얻고 다시 시작한다.&lt;/p&gt;

&lt;h3 id=&quot;여태까지&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;오직 테스트를 향상시키기 위해서만 개발된 기능을 사용했다.&lt;/li&gt;
  &lt;li&gt;두 테스트가 동시에 실패하면 망한다는 점을 인식했다.&lt;/li&gt;
  &lt;li&gt;위험 요소가 있음에도 계속 진행했다.&lt;/li&gt;
  &lt;li&gt;테스트와 코드 사이의 결합도를 낮추기 위해, 테스트하는 객체의 새 기능을 사용했다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chapter-5&quot;&gt;chapter 5&lt;/h2&gt;

&lt;h3 id=&quot;골치아픈-큰-요구사항과-테스트&quot;&gt;골치아픈 큰 요구사항과 테스트&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;$5 + 10CHF = $10 (환율이 2:1 일 경우)&lt;/strong&gt;
위 요구사항의 테스트에 대해 어떻게 접근할 것인가?&lt;br /&gt;
우선 Dollar 테스트를 복사한 후 수정하여 사용해보도록 한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testFrancMultiplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위 테스트를 통과하기 위해 어떻게 해야할까?&lt;br /&gt;
한 번에 통과하기는 어려울 것이다.&lt;br /&gt;
빠르고 쉽게 통과하기 위해, (&lt;a href=&quot;#TDD의-기본원리&quot;&gt;TDD의 정신&lt;/a&gt;이다)&lt;br /&gt;
다시 Dollar 코드를 복사하여 Franc로 바꾸는 방법을 사용하도록 한다&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;br /&gt;
더럽고 지저분하고 마음이 찝찝하다. 이런 코드를 짠다니 싶지만, &lt;a href=&quot;#TDD의-구체적-기본원리&quot;&gt;TDD 구체적 기본원리&lt;/a&gt;를 확인한다. 우선 실행이 되고 테스트를 통과하는 코드를 만들고, 중복 제거와 같은 더러운 코드를 없애는 일은 그 다음임을 기억한다.&lt;/p&gt;

&lt;h3 id=&quot;검토해보면&quot;&gt;검토해보면&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;큰 테스트를 공략할 수 없다. 그래서 진전을 나타낼 수 있는 자그마한 테스트를 만들었다.&lt;/li&gt;
  &lt;li&gt;뻔뻔스럽게도 중복을 만들고 조금 고쳐 테스트를 작성했다.&lt;/li&gt;
  &lt;li&gt;설상가상으로 모델 코드까지 복사하고 수정하여 테스트를 통과했다.&lt;/li&gt;
  &lt;li&gt;중복이 사라지기 전에는 집에 가지 않겠다고 약속했다.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;이 단계가 너무 작고 이상해보여도 TDD의 핵심은 이런 작은 단계를 밟을 줄 아는 능력을 가지는 것이라고 한다. 일이 꼬일 경우 차근차근 해결해갈 수 있는 능력을 가질 수 있는 능력. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;중요한 점은 Dollar 코드를 복사하기 이전에 &lt;a href=&quot;#chapter-3&quot;&gt;Ch3&lt;/a&gt;, &lt;a href=&quot;#chapter-4&quot;&gt;Ch4&lt;/a&gt;를 통해 코드를 단순화 해놓은 점이 큰 도움이 되었다는 것. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-02</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-02</guid>
      </item>
    
      <item>
        <title>Token Passing Operator in C++</title>
        
          <description>&lt;p&gt;일하면서 신가하게 본 cpp 코드에 대해서 정리해보려고 한다.&lt;br /&gt;
오늘 처음 본 것은 아닌데, &lt;strong&gt;Token pasting operator&lt;/strong&gt;라는 이전엔 듣도 보도 못한 operator가 있더라.&lt;/p&gt;

&lt;h3 id=&quot;token-passing-operator란&quot;&gt;token passing operator란&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/ko-kr/cpp/preprocessor/preprocessor-operators?view=vs-2019&quot;&gt;MS docs&lt;/a&gt;에 정의된 내용을 보면,
전처리 연산자로 @define과 함께 사용되는 operator이다&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. 토큰을 다른데 붙여서 사용한다는건데, 예제를 보지 않으면 선뜻 이해하기 어려운 개념이다.&lt;br /&gt;
실제 처음 코드를 봤을 땐, 이런 문법이 있나 싶더라..&lt;/p&gt;

&lt;h3 id=&quot;기본-예제&quot;&gt;기본 예제&lt;/h3&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;cpf&quot;&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt; &lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
#define token(base, postfix) base##postfix 
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
	&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;가장 기본적인 예제는 위와 같다. base에 postfix를 붙여주는 방식으로 token passing operator가 사용된다.&lt;br /&gt;
이런 코드는 응용해서 사용하면 이해하기 불편할 수 있지만 새로운 사용성을 제시한다.&lt;/p&gt;

&lt;h3 id=&quot;응용-예제&quot;&gt;응용 예제&lt;/h3&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define TO_VALID(name) { \
    name##_valid = true; \
}
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define PUT_IF_VALID(name, value) { \
    if(name##_valid) { \
        name = value; \
    } \
}
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;game&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_valid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;game_valid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;TO_VALID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;PUT_IF_VALID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;PUT_IF_VALID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;game&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 define을 함수화시켜서 서로 다른 여러 개의 name에 대해 접근할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;주의-사항&quot;&gt;주의 사항&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;define&lt;/code&gt;의 option처럼 사용되는 것으로, 일반문에서 사용할 수 없다.&lt;/li&gt;
  &lt;li&gt;기본적으로 사용되는 변수들은 이미 정의되어 있어야 한다.&lt;/li&gt;
  &lt;li&gt;아래와 같은 코드도 사용가능하지만, 추천하지 않는다.
    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define VAL_NAME(base, postfix) base##postfix
&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;여기에 나온 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#@&lt;/code&gt; operator들은 개념이 정말 쉬운데, 내 리눅스 pc에서는 빌드되지 않더라..(왜지?) 사실 그닥 사용성이 애매한 operator들일 것 같아(실제로 의미있게 쓰이는데가 있는지도 잘 모르겠다) 이번 포스팅에 정리하지 않는다. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm/language/cpp/token-passing-operator</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm/language/cpp/token-passing-operator</guid>
      </item>
    
      <item>
        <title>TDD 03</title>
        
          <description>&lt;h2 id=&quot;chapter-6&quot;&gt;chapter 6&lt;/h2&gt;

&lt;h3 id=&quot;죄-지우기&quot;&gt;죄 지우기&lt;/h3&gt;
&lt;p&gt;이 전에(&lt;a href=&quot;blog/2019/09/16/tdd_book_02/#chapter-5&quot;&gt;ch5&lt;/a&gt;) 저지른 죄(복붙!)를 청소해야 한다.&lt;br /&gt;
가능한 방법은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Franc&lt;/code&gt;이 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;dollar&lt;/code&gt;를 상속하거나, 공통 부모를 갖도록 하는 방법이 있을 것이다.&lt;br /&gt;
프랑이 달러를 상속해? 말도 안되보이고, 실제 구현해보면 얻을 이득이 없다는 것을 깨달을 것이다. 공통 분모를 갖는 방향으로 수정을 해 나간다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;죄-지우기2&quot;&gt;죄 지우기2&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;blog/2019/09/16/tdd_book_02/#chapter-3&quot;&gt;ch3&lt;/a&gt;에서 만든 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt;는 Dollar와 Franc에 모두 남아있을 것이다. 이 함수를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dollar&lt;/code&gt; class에서 지우고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Money&lt;/code&gt; class에서 아래와 같이 수정한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;그러면 뭐가 안됐나 보니까, Franc.equals()에 대한 테스트가 없었으므로 ch3에서 수정한 테스트 코드도 아래와 같이 수정해준다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testEquality&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;왜 하는지 모르겠더라도 이런 테스트들을 작성한 후에 코드를 수정하도록 해야한다. 작성하고 보니, Dollar와 Franc가 거의 동일한 테스트를 중복해서 하고 있다. 이런 죄들을 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;반드시 지워야만&lt;/code&gt; 한다. Franc도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dollar&lt;/code&gt;class와 동일하게 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt;를 고칠 수 있고, 결국 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Money&lt;/code&gt; class의 equals와 동일한 함수가 나와 코드를 제거할 수 있을 것이다.&lt;/p&gt;

&lt;p&gt;근데 참 찝찝하다.. Franc와 Dollar의 비교는 어찌할 것인가.. 일단 뒤로 미루도록 한다.&lt;/p&gt;

&lt;h3 id=&quot;여태까지&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;공통된 코드를 첫 번째 클래스(Dollar)에서 상위 클래스(Money)로 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;단계적으로 옮겼다&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;두 번째 클래스(Franc)도 Money의 하위 클래스로 만들었다.&lt;/li&gt;
  &lt;li&gt;불필요한 구현을 제거하기 전에 두 equals() 구현을 일치시켰다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chapter-7&quot;&gt;chapter 7&lt;/h2&gt;

&lt;h3 id=&quot;미뤄둔-죄&quot;&gt;미뤄둔 죄&lt;/h3&gt;
&lt;p&gt;앞서 미뤄둔 죄를 해결하기 위한 테스트를 작성한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testEquality&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;당연히 테스트는 실패한다. 우선 빠르게 문제를 해결하면 아래와 같이 수정할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getClass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;여태까지-1&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;결함을 끄집어내서 테스트로 만들었다.&lt;/li&gt;
  &lt;li&gt;완벽하지 않지만 봐줄만하게 테스트를 통과시켰다.&lt;/li&gt;
  &lt;li&gt;더 많은 동기가 있기 전에 더 많은 설계를 도입하지 않기로 했다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그런데 참.. 한 챕터에 별로 하는게 없는 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;chapter-8&quot;&gt;chapter 8&lt;/h2&gt;
&lt;p&gt;Money class의 하위 클래스 Dollar, Franc가 하는 일이 별로 없으므로, 아예 제거하고 싶다. 이를 제거하기 위해서 단계적으로 진행해본다.&lt;/p&gt;

&lt;h3 id=&quot;method-통합&quot;&gt;Method 통합&lt;/h3&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Franc class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Franc&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//Dollar class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//Money class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;이렇게 method 선언이라도 공통부로 옮김으로써, 다음 단계에서 times를 Money class 단에서 쓸 수 있어 통합할 수 있게 된다.&lt;/p&gt;

&lt;h3 id=&quot;factory-method&quot;&gt;Factory Method&lt;/h3&gt;
&lt;p&gt;하위 클래스에 대한 직접적인 참조가 적어진다면 하위 클래스를 제거하기 위한 방향이라고 볼 수 있다. Money class에 Dollar를 반환하는 Factory Method를 도입할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Money Class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testMultiplication&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;15&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// testFrancMultiplication()도 동일하게 남아 있음.&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testEquality&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ol&gt;
  &lt;li&gt;five의 생성이 Money의 Factory Method를 참조한다.&lt;/li&gt;
  &lt;li&gt;Dollar에 대한 참조가 사라지길 바라므로, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dollar five = ~&lt;/code&gt;를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Money five = ~&lt;/code&gt;로 바꾼다.&lt;/li&gt;
  &lt;li&gt;앗.. Money.times() 를 구현해야 된다.&lt;/li&gt;
  &lt;li&gt;assertEquals에서 사용하는 Dollar의 생성도 Factory Method를 참조한다.&lt;/li&gt;
  &lt;li&gt;이제 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;어떤 client code도 Dollar라는 이름의 하위 클래스가 있다는 사실을 알지 못한다&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;하위 클래스의 존재를 테스트에서 분리하여 어떤 모델 코드에도 영향을 주지 않고 상속 구조를 변경할 수 있게 되었다&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;여태까지-2&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;times()&lt;/code&gt;의 메서드 서명부를 통일시킴으로써 중복 제거를 향해 한 단계 더 전진했다.&lt;/li&gt;
  &lt;li&gt;최소한의 method 선언부라도 공통 superclass로 옮겼다.&lt;/li&gt;
  &lt;li&gt;Factory method를 통해 테스트 코드에서 콘크리트 하위 클래스의 존재 사실을 분리했다.&lt;/li&gt;
  &lt;li&gt;하위 클래스가 사라지면서 몇몇 테스트가 불필요한 여분의 것이 된다고 생각했지만 일단 뒀다. (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testFrancMultiplication&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chapter-9&quot;&gt;chapter 9&lt;/h2&gt;

&lt;h3 id=&quot;할-일-목록-체크&quot;&gt;할 일 목록 체크&lt;/h3&gt;
&lt;p&gt;TDD를 진행하면서 TDD의 기본은 빠른 구현과 테스트 통과, 코드 중복 제거에 있기 때문에, 하나의 일을 해냄으로써 파생되는 할 일들을 계속해서 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;목록화 하여 관리하는 것이 필요&lt;/code&gt;하다.&lt;br /&gt;
예를 들면 현재까지 할일은 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$5 + 10CHF = $10 (환율이 2:1 이라면)&lt;/li&gt;
  &lt;li&gt;Money의 반올림?&lt;/li&gt;
  &lt;li&gt;hashCode()&lt;/li&gt;
  &lt;li&gt;Equal null&lt;/li&gt;
  &lt;li&gt;Equal Object&lt;/li&gt;
  &lt;li&gt;Dollar/Franc 중복&lt;/li&gt;
  &lt;li&gt;공용 times&lt;/li&gt;
  &lt;li&gt;통화?&lt;/li&gt;
  &lt;li&gt;testFancMultiplication 제거&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;할 일 목록에서 귀찮고 불필요한 하위 클래스를 제거하는데 도움이 될 것을 찾아본다.
통화 개념을 도입해보면 어떨까?&lt;br /&gt;
&lt;del&gt;통화 개념을 어떻게 구현하길 원하는가?&lt;/del&gt; 아니, 통화 개념을 어떻게 테스트하길 원하는가?&lt;/p&gt;

&lt;h3 id=&quot;통화개념&quot;&gt;통화개념&lt;/h3&gt;
&lt;p&gt;통화 개념을 위해 복잡한 객체들을 사용하고, 필요한 만큼 만들어지도록 하기 위해 경량 팩토리(flyweight factories)를 사용할 수 있지만, 우선 문자열을 대신 쓰도록 한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 통화개념을 위한 간단한 테스트&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testCurrency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CHF&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 통화개념을 위한 테스트 작성 후 테스트 통과를 위한 코드&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Dollar class, Franc도 똑같다.&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;통화개념-refactoring&quot;&gt;통화개념 refactoring&lt;/h3&gt;
&lt;p&gt;Dollar와 Franc를 모두 통합할 수 있는 동일한 구현이 가능할까? 리팩토링이 가능하지 않을까?&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Dollar class, Franc도 똑같다.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 Dollar와 Franc의 구현이 끝나면, currency와 currency()를 Money로 가져올 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;통화개념-refactoring-2&quot;&gt;통화개념 refactoring 2&lt;/h3&gt;
&lt;p&gt;문자열 USD와 CHF를 정적 팩토리 메서드로 옮긴다면 두 생성자가 동일해질 것이고 공통 구현을 만들 수 있을 것이다. 우선 constructor에 인자를 추가한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Dollar class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currency&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;그러면 constructor를 호출하는 곳에 에러가 발생하고, 이를 수정한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Dollar class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이제 factory method가 “USD”를 전달할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Dollar class, Franc도 똑같다.&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currency&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;이렇게 작은 단계를 밟아가는 것이(한 방에 해도 되는데) 꼭 이렇게 해야하는 것은 아니다. 하지만, 중요한 점은 이렇게도 일할 수 있는 능력이 있어야 한다는 것이다.&lt;br /&gt;
얼마나의 보폭으로 작업할지는 직접 판단하며 줄였나 들였다 해야한다.&lt;/p&gt;

&lt;h3 id=&quot;통화개념-refactoring-3&quot;&gt;통화개념 refactoring 3&lt;/h3&gt;
&lt;p&gt;지금의 수정을 확인하면 Dollar와 Franc의 constructor가 동일하다. 즉 상위 클래스로 옮길 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currency&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Dollar class, Franc도 똑같다.&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;STring&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;chapter-10&quot;&gt;chapter 10&lt;/h2&gt;

&lt;h3 id=&quot;times&quot;&gt;times()&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;#통화개념-refactoring-2&quot;&gt;9장의 times()&lt;/a&gt;를 보면 Dollar의 currency는 항상 Dollar이므로 아래와 같이 수정할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Dollar class, Franc도 똑같다.&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;근데, Dollar를 갖는지, Money를 갖는지가 중요한가?&lt;br /&gt;
이런 질문에 시스템 기반으로 깊은 생각이 필요할 것이다.&lt;br /&gt;
하지만 우리가 가지고 있는 테스트 코드들을 통해 컴퓨터에게 10초 이내의 답을 얻을 수도 있을 것이다.&lt;br /&gt;
수정하고 테스트를 돌려 컴퓨터에게 답을 얻자. TDD에서 가끔은 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;컴퓨터가 10초면 대답할 수 있는 것을 엔지니어가 몇 분 동안 고민하지 않고 테스트를 하기도 한다&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;컴퓨터에게-답-얻기&quot;&gt;컴퓨터에게 답 얻기&lt;/h3&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Dollar class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위와 같이 수정을 진행하고, 컴퓨터에게 오류가 있는지 묻는다.&lt;/p&gt;

&lt;h4 id=&quot;오류&quot;&gt;오류:&lt;/h4&gt;
&lt;ul&gt;
  &lt;li&gt;Money를 콘크리트 클래스로 바꿔야 한다.&lt;/li&gt;
  &lt;li&gt;그 후, 다시하면 이해하기 어려운 에러 메세지들이 출력된다. (test fail error)&lt;/li&gt;
  &lt;li&gt;에러 메세지를 이해하기 쉽게 toString()을 정의한다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;아니 테스트 없이 코드를 생성한다고?? 말이 되는가?
    &lt;ul&gt;
      &lt;li&gt;원래는 테스트 작성 후 toString()을 작성하는 것이 맞다. 하지만,
        &lt;ol&gt;
          &lt;li&gt;화면의 결과를 보려던 참이다.&lt;/li&gt;
          &lt;li&gt;toString()은 디버그 출력에만 쓰이기 때문에 잘못 구현되어도 리스크는 적다.&lt;/li&gt;
          &lt;li&gt;&lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;이미 에러 상태인데 새로운 테스트를 작성하는 것은 좋지 않을 것 같다&lt;/code&gt;.&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이렇게 조금 더 구체적으로 오류의 방향들을 찾아갈 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;times-refactoring&quot;&gt;times refactoring&lt;/h3&gt;
&lt;p&gt;위에서 에러가 되는 이유는 chapter 7에서 구현한 &lt;a href=&quot;#-미뤄둔-죄&quot;&gt;equals()&lt;/a&gt; 함수에 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt;에서는 class가 같은 지를 확인하고 있는데, 정말 해야할 것은 class가 같은 것이 아니라, currency가 같은 지에 대한 판단이다.&lt;br /&gt;
currency의 판단에 대한 test를 작성하고 싶지만, &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;이미 에러가 난 상태에서 테스트를 작성하지 않는 것이 좋을 것 같다&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;times-refactoring-2&quot;&gt;times refactoring 2&lt;/h3&gt;
&lt;p&gt;차근차근 단계를 밟아간다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#컴퓨터에게-답-얻기&quot;&gt;컴퓨터에게 답 얻기&lt;/a&gt;에서 수정한 코드를 다시 &lt;a href=&quot;#times()&quot;&gt;times()&lt;/a&gt;에서 수정한 원래 코드로 돌려는다.&lt;/li&gt;
  &lt;li&gt;test가 다시 통과한다.&lt;/li&gt;
  &lt;li&gt;currencyt가 같은 지를 체크할 수 있는 새로운 테스트를 작성한다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testDifferentClassEquality&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;실패한다. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt; 코드가 클래스가 아니라 currency를 비교하도록 해야할 것 같다.&lt;/li&gt;
  &lt;li&gt;equals를 수정한다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;money&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;test가 통과한다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dollar.times()&lt;/code&gt;가 Money를 return하도록 수정한다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c1&quot;&gt;// Dollar class, Franc도 똑같다.&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;test가 통과한다.&lt;/li&gt;
  &lt;li&gt;동일한 구현이 Franc(“CHF”)에서도 적용되는 것을 확인한다.&lt;/li&gt;
  &lt;li&gt;7번에서 구현한 함수를 상위 클래스(Money)로 끌어 올린다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;여태까지-3&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;두 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;times()&lt;/code&gt;를 일치시키기 위해 그 함수들이 호출하는 다른 함수들을 맞추어주고 상수를 변수로 바꿔주었다.&lt;/li&gt;
  &lt;li&gt;단지 디버깅을 위해 테스트 없이 toString()을 작성했다.&lt;/li&gt;
  &lt;li&gt;Dollar 대신 Money를 반환하는 변경을 시도한 뒤 그것이 잘 작동할지를 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;테스트가 말하도록 했다&lt;/code&gt;.&lt;/li&gt;
  &lt;li&gt;실험해본 것을 되돌리고 또 다른 테스트를 작성했다. 테스트를 작동했더니, 실험도 제대로 작동했다.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-03</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-03</guid>
      </item>
    
      <item>
        <title>TDD 04</title>
        
          <description>&lt;h2 id=&quot;chapter-11&quot;&gt;chapter 11&lt;/h2&gt;
&lt;p&gt;여태까지의 작업들로, 하위 클래스 Dollar, Franc에는 이제 생성자 밖에 남지 않았다. 생성자 때문에 하위 클래스가 있을 필요는 없으므로 하위클래스를 제거한다.&lt;/p&gt;

&lt;h3 id=&quot;하위-클래스-제거&quot;&gt;하위 클래스 제거&lt;/h3&gt;
&lt;p&gt;코드의 의미를 변경하지 않으면서, 하위 클래스에 대한 참조를 상위 클래스에 대한 참조로 변경할 수 있다. 먼저 factory method를 고치도록 한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Money class, franc 에 대한 factory class도 동일하게 수정&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 되면, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Franc&lt;/code&gt;는 지울 수 있는데, 다른 테스트에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;new Dollar&lt;/code&gt;를 사용하는 곳이 남아있다.
&lt;a href=&quot;blog/2019/09/25/tdd_book_03/#times-refactoring-2&quot;&gt;testDifferentClassEquality()&lt;/a&gt;에서 동치성 비교에 사용하고 있었다.&lt;br /&gt;
&lt;a href=&quot;blog/2019/09/25/tdd_book_03/#Factory-Method&quot;&gt;testEquality()&lt;/a&gt;에서 충분히 테스트 되고 있는 것 같다. 사실상 Money class로 통합되었으므로 과한 테스트를 수정해 아래와 같이 중복을 지울 수 있겠다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testEquaility&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertTrue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertFalse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;삭제 및 정리의 근거:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;testDifferentClassEquality() 는 클래스 대신 currency를 비교하도록 하는 코드로, 여러 클래스가 존재할 경우 의미가 있다. 클래스를 지우는 현재에 의미가 없는 테스트이다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Dollar&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Franc&lt;/code&gt;에 대한 별도의 테스트가 존재하지만, 클래스가 두 개 일때는 차이가 있을 수 있었지만, 통합된 로직상에서 별도의 테스트는 필요 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;여태까지&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;하위 클래스를 삭제했다.&lt;/li&gt;
  &lt;li&gt;기존 구조에 필요했지만, 변경된 구조에서 필요없는 테스트도 삭제했다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chapter-12&quot;&gt;chapter 12&lt;/h2&gt;
&lt;p&gt;우리의 할일 목록엔 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$5 +10CHF = $10 (환율 2:1인 경우)&lt;/code&gt;와 같은 덧셈이 있다.&lt;br /&gt;
전체 더하기 기능을 어떻게 시작해야 할지 모르겠으니, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$5 + $5 = $10&lt;/code&gt;과 같은 간단한 예부터 시작해보자.&lt;/p&gt;

&lt;h3 id=&quot;간단한-덧셈&quot;&gt;간단한 덧셈&lt;/h3&gt;
&lt;p&gt;당연히 테스트부터 만든다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testSimpleAddition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;plus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;plus에 대한 구현은, 이전에 배운 것처럼 우선은 사기(가짜 구현) 치듯 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Money.dollar(10)&lt;/code&gt;을 return할 수도 있겠지만, 어떻게 해야할 지가 명확하므로 구현해버린다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;plus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;환율-고려&quot;&gt;환율 고려&lt;/h3&gt;
&lt;p&gt;환율을 고려한 덧셈의 방식에는 여러가지 방식이 있을 것이다. Money와 비슷하게 동작하지만, 두 Money의 합을 나타내는 객체를 만드는 것..&lt;br /&gt;
저자는 여기서 두 가지 메타포를 생각했다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Money의 합을 지갑처럼 가지고 있어, 서로 다른 금액과 통화가 존재&lt;/li&gt;
  &lt;li&gt;각 통화와 금액을 환율에 맞춰 수식으로 존재&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;두 번째 방법으로 진행한다. 이럴 경우 Money가 수식의 가장 작은 단위가 될 것이며, 연산의 결과로 Expression들이 생기고, 그 중 하나에 더한 값이 나올 것이다.&lt;/p&gt;

&lt;h3 id=&quot;환율-고려-2&quot;&gt;환율 고려 2&lt;/h3&gt;
&lt;p&gt;TDD 논리에 따라 테스트를 작성해 나간다. 테스트 작성이 제일 중요한 듯 하다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;환율을 적용함으로써 얻어지는 reduced를 사용한다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testSimpleAddition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;환율이 적용되는 곳은 bank니까
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testSimpleAddition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;ul&gt;
      &lt;li&gt;왜 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Money&lt;/code&gt;가 아닌 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bank&lt;/code&gt;가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;reduce()&lt;/code&gt;를 맡아야 하는가?&lt;/li&gt;
    &lt;/ul&gt;
    &lt;ul&gt;
      &lt;li&gt;Expression(여기선 Money들의 수식)는 여기서 핵심이고, 핵심이 되는 객체가 다른 부분에 대해서 될 수 있는 한 모르도록 해야, 유연하고, 테스트하기 쉽고, 재활용이나 이해하기 쉽다.&lt;/li&gt;
      &lt;li&gt;Expression과 관련된 오퍼레이션이 많을 것이고, 모든 오퍼레이션을 Expression에만 추가하면 무한히 커질 수 있기 때문이다.&lt;/li&gt;
      &lt;li&gt;만약 Bank가 별 필요가 없다면, 기꺼이 Expression으로 구현을 옮길 수도 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;당장은 bank가 할 건 없다. 객체 하나만 있으면 된다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testSimpleAddition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;두 Money의 합은 Expression이어야 한다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testSimpleAddition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;plus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;$5 만들기.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testSimpleAddition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;plus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reduced&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;컴파일하기&quot;&gt;컴파일하기&lt;/h3&gt;
&lt;p&gt;와.. 이걸 컴파일 해야한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Expression이 필요하다. cllass보다 inteface가 가벼우니까 interface로 만든다.
  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;interface Expression&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Money.plus()&lt;/code&gt;가 Expression을 구현해야 한다. Expression에는 아직 아무 구현도 없으니까..
  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Class Money implements Expression&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Bank class와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;reduce()&lt;/code&gt; 함수가 필요하다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;이제 컴파일이 되고, 테스트가 바로 실패한다.&lt;/li&gt;
  &lt;li&gt;오.. 이제 가짜 구현을 할 수 있다.&lt;/li&gt;
  &lt;li&gt;가짜!
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;테스트 통과! 리팩토링할 준비가 되었다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;여태까지-1&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;큰 테스트($5 + 10CHF)를 작은 테스트($5 + $5)로 줄여서 발전을 보일 수 있었다.&lt;/li&gt;
  &lt;li&gt;필요한 계산(Expression)에 대한 가능한 메타포들을 신중히 생각해보았다.&lt;/li&gt;
  &lt;li&gt;새 메타포를 기반으로 기존의 테스트를 재 작성했다.&lt;/li&gt;
  &lt;li&gt;테스트를 빠르게 컴파일했다.&lt;/li&gt;
  &lt;li&gt;테스트를 실행했다.&lt;/li&gt;
  &lt;li&gt;진짜 구현을 위한 리팩토링을 기다린다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chapter-13&quot;&gt;chapter 13&lt;/h2&gt;
&lt;p&gt;모든 중복을 제거해야 테스트를 완료했다고 말할 수 있다. 코드 중복은 없더라도, 데이터 중복이 있을 경우에도 제거해주어야 한다.&lt;br /&gt;
가짜구현 &lt;a href=&quot;#컴파일하기&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Money.dollar(10)&lt;/code&gt;&lt;/a&gt;은 테스트 코드에 있는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;five.plus(five)&lt;/code&gt;와 데이터 중복이라고 볼 수 있다.&lt;br /&gt;
우리는 Money들에 대한 연산을 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;수식으로 존재&lt;/code&gt;하게 만들어 주기로 했으므로 덧셈의 결과가 Money가 아닌 수식으로 존재해야 한다.&lt;/p&gt;

&lt;h3 id=&quot;sum&quot;&gt;Sum&lt;/h3&gt;
&lt;p&gt;plus에 대한 연산의 결과는 &lt;a href=&quot;#간단한-덧셈&quot;&gt;Money를 반환&lt;/a&gt;하였지만, 이건 엄연히 말하면 수식으로 존재하는 것이 아니고, Sum과 같은 Expression으로 존재해야 한다&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;.
두 Money의 합은 Sum이어야 한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testPlusReturnsSum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;plus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;five&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;우선 테스트를 작성했다. 이 테스트는 오래가지 못할 것이다. 연산의 외부 행위가 아닌 내부 구현에 너무 깊게 관여하기 때문이다. 그래도, 테스트를 통과하면 우선 한 걸음 나아간 것이다.&lt;br /&gt;
실행해보면 에러가 계속 날거고, 통과하기 위해 아래와 같은 수정이 필요하다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Sum class 생성&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Money class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;plus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;또, Sum의 생성자도 필요하고, Sum은 Expression이어야 한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Sum class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;augend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addend&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이제, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testSimpleAddition()&lt;/code&gt;에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Bank.reduce()&lt;/code&gt;는 Sum을 전달받는다. sum으로 받는 통화가 모두 같고, reduce로 얻을 통화도 같다면, 결과는 sum의 money들을 합친 값이어야 한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testReduceSum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;테스트에 대한 코드는,&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Bank class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;와 같이 구현될 수 있을텐데 이 코드는 두 가지 이유로 지저분하다&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;캐스팅(형변환), 이 코드는 모든 Expression에 대해 작동해야 한다.&lt;/li&gt;
  &lt;li&gt;두 단계에 거친 reference.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;아래와 같이 메서드를 Sum 내부로 옮길 수 있을 것이다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Bank class&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;//Sum class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;reduce&quot;&gt;reduce&lt;/h3&gt;
&lt;p&gt;위의 테스트는 통과했고, 위 코드에 더 할 것이 명확하지 않으니 새로운 할 일을 확인하여 테스트를 생성한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;reduce(Money)&lt;/code&gt;의 경우에 대한 테스트이다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testReduceMoney&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;해결 코드:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;지저분하다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c1&quot;&gt;//Bank class&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;한 걸음&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c1&quot;&gt;//Bank class&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;//Money class&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;깔끔하다.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;c1&quot;&gt;//Expression&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Bank class&lt;/span&gt;
  &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Expression&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;source&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;여태까지-2&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;중복이 제거되기 전까지 테스트를 통과한 것으로 치지 않았다.&lt;/li&gt;
  &lt;li&gt;앞으로 필요할 것으로 예상되는 객체(Sum)의 &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;생성을 강요하기 위한 테스트&lt;/code&gt;를 작성했다.&lt;/li&gt;
  &lt;li&gt;빠른 솓도로 객체 구현을 시작했따.&lt;/li&gt;
  &lt;li&gt;한 곳에서 캐스팅을 이용해 구현했다가, &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;테스트 통과 후 적당한 자리로 코드를 옮겼다&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;chapter-14&quot;&gt;chapter 14&lt;/h2&gt;

&lt;h3 id=&quot;환전&quot;&gt;환전&lt;/h3&gt;
&lt;p&gt;단순한 변환을 생각하면 2Franc이 있는데 이것을 Dollar로 바꾼다고 생각해보자. 자 테스트는 이미 만들었다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testReduceMoneyDifferentCurrency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;addRate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CHF&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;franc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dollar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;테스트 통과를 위해 아래와 같은 코드를 작성할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Money class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CHF&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;문제는, Money가 환율을 알아선 안된다는 것. Bank가 알아야할 부분이고, &lt;code class=&quot;language-plaintext yelhglt highlighter-rouge&quot;&gt;각 객체가 해야할 역할에 정확하고 독립적이어야 한다&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Bank가 환율을 알도록하고, money에서는 이 값을 가져다가 사용하도록 한다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;//Bank&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;from&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;CHF&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;USD&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//Money&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Money&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Bank&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;currency&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;amount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;여태까지-3&quot;&gt;여태까지&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;필요할 것이라 생각되는 인자를 빠르게 추가했다.&lt;/li&gt;
  &lt;li&gt;코드와 테스트 사이에 있는 데이터 중복을 제거한다.&lt;/li&gt;
  &lt;li&gt;자바의 기본 동작에도 의구심이 든다면 테스트를 작성한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;그니까, sum 안에 두 값이 있다면, sum은 두 값의 합이라는 식을 나타내는 객체가 되는 것이니까. 현재의 plus는 수식이 완료된 값을 반환하므로 구현하기로 한 방향과 맞지 않다. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;TDD지만 객체지향적 개념을 배워가는 것 같다. 이런 개념들이 기본적으로 필요하단 말이겠지. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;이렇게 느리고 맘에 안들게 한 걸음씩 밟아가야 하는 것인가.. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-04</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-04</guid>
      </item>
    
      <item>
        <title>TDD 05</title>
        
          <description>&lt;p&gt;이전까지는 예제 없이 정리가(설명이) 안되는 것들이 많았지만, 이제는 구체적인 예제는 없이 TDD의 개념과 진행 방향에 대해서만 정리하도록 한다.&lt;/p&gt;

&lt;h2 id=&quot;chapter-15&quot;&gt;chapter 15&lt;/h2&gt;

&lt;p&gt;하나씩 원하는 테스트를 작성한다.&lt;br /&gt;
이 테스트는 생각이 나는대로 수도 코드처럼 코드를 작성한다.&lt;br /&gt;
컴파일과 테스트를 통과하는 방향으로 수정해나가는 것이기 때문에, 컴파일 에러가 날 수 있다.&lt;br /&gt;
컴파일 에러가 나는 것을 두려워하는 것이 아니라, 중요한 것은 한 번에 하나씩 확실하게(완벽하라는 건 아니다. 빠르게가 더 중요하니까) 고쳐나가는 것이다.&lt;br /&gt;
우리가 할 일이 무엇인지를 알려주는 것이 컴파일과 테스트이다.&lt;br /&gt;
중복을 제거하고 상속이나 범용성을 가질 수 있는 코드들을 변경하면서 다시 고치는 것이다.&lt;br /&gt;
변경 후에 영향을 미치는 다른 부분들을 컴파일러가 알려주면 그 부분도 수정한다.&lt;/p&gt;

&lt;h2 id=&quot;chapter-16&quot;&gt;chapter 16&lt;/h2&gt;

&lt;p&gt;테스트도, 차후에 읽을 때 이해하기 좋게 코드를 짠다.
효율적인 TDD&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;TDD를 쓰고 개발량이 증가한다.&lt;/li&gt;
  &lt;li&gt;TDD를 쓰고 동일 기능을 구현하는데 필요한 라인 수가 감소한다.&lt;/li&gt;
  &lt;li&gt;디버깅, 통합 작업, 다른 사람한테 설명하는데 걸리는 시간 등을 합친 것보다 경제적이다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;chapter-17&quot;&gt;chapter 17&lt;/h2&gt;

&lt;p&gt;이 장에서는 어떻게 해 나가야 하는지와 테스트를 돌아본다.&lt;/p&gt;

&lt;h3 id=&quot;다음에-해야할-일은-무엇일까-생각이-들-때&quot;&gt;다음에 해야할 일은 무엇일까? 생각이 들 때&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;SmallLint 같은 code critic 프로그램을 실행하는 것도 좋다.
    &lt;ul&gt;
      &lt;li&gt;내가 놓친 것을 잡아줄 수 있기 때문에.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;어떤 테스트들이 추가로 더 필요할까? 생각하는 것.
    &lt;ul&gt;
      &lt;li&gt;실패해야하는 테스트가 성공하는 경우.&lt;/li&gt;
      &lt;li&gt;실패해야하는 테스트가 실패하는 경우.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;막무가내로 개발하며 해야할 일을 적어놓은 리스트를 비우느 ㄴ것.&lt;/li&gt;
  &lt;li&gt;말과 개념이 잘 통하는지 확인&lt;/li&gt;
  &lt;li&gt;현재 설계로 제거하기 어려운 중복이 있는지 확인.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;메타포&quot;&gt;메타포&lt;/h3&gt;
&lt;p&gt;메타포는 클래스 명 등을 정하는 아이디어와도 같은 것인데, 메타포를 통해 설계가 완전히 바뀔 수 있다. 즉, 중요하다.
이 책에서 예시를들고 있는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;expression&lt;/code&gt;을 통한 통화 계산은 나도 생각을 못한 것이었는데, 저자도 10 ~ 20번의 금전 관련 프로그램에 대한 설계들을 통해 얻은 통찰이라고 한다.&lt;/p&gt;

&lt;h3 id=&quot;코드와-테스트-비교&quot;&gt;코드와 테스트 비교&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;코드와 테스트 사이에 비슷한 수준의 함수 개수와 라인 수가 유지 된다.
    &lt;ul&gt;
      &lt;li&gt;테스트 코드는 공통된 테스트를 뽑아내는 작업으로 라인 수를 줄일 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;코드 복잡도를 보면 테스트 코드는 코드 복잡도가 1이다.
    &lt;ul&gt;
      &lt;li&gt;분기나 반복이 전혀 없기 때문이다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;테스트의-질&quot;&gt;테스트의 질&lt;/h3&gt;
&lt;p&gt;TDD의 부산물로 자연스레 생기는 테스트들은 시스템과 함께 유지되야 할 만큼 유용하다. 하지만 이 테스트들이 다른 종류의 테스트를 대체할 수는 없다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;성능 테스트&lt;/li&gt;
  &lt;li&gt;스트레스 테스트&lt;/li&gt;
  &lt;li&gt;사용성 테스트&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;테스트의-질을-가늠하는-지표&quot;&gt;테스트의 질을 가늠하는 지표&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;명령문 커버리지(statement coverage)
    &lt;ul&gt;
      &lt;li&gt;TDD는 100%의 명령문 커버리지를 따르게 되는데, 모든 함수들이 테스트 케이스에 의해 검증된다는 것을 의미한다. JProbe를 통해 확인할 수도 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;결함 삽입(defect insertion)
    &lt;ul&gt;
      &lt;li&gt;코드의 내용을 바꾼 후 테스트가 실패하는지 보는 것이다. 수동으로 할 수 있지만 &lt;a href=&quot;http://jester.sourceforge.net/&quot;&gt;Jester&lt;/a&gt;를 통해 확인할 수도 있다.&lt;/li&gt;
      &lt;li&gt;그니까 테스트 통과하려고 거짓말 한 것들을 거르기 위한 것으로 보인다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;테스트-커버리지를-향상시키는-법&quot;&gt;테스트 커버리지를 향상시키는 법&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;더 많은 테스트 케이스를 작성하는 것.
    &lt;ul&gt;
      &lt;li&gt;예를 들면 TDD 개발자는 6개의 테스트를 작성한다면, 전문 테스터는 65개의 테스트를 작성한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;프로그램의 로직을 단순화 하는 것.
    &lt;ul&gt;
      &lt;li&gt;코드를 줄여서 테스트가 다양한 경우를 다루게 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-05</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-05</guid>
      </item>
    
      <item>
        <title>TDD 06</title>
        
          <description>&lt;p&gt;통화 예시는 이제 끝났다. 이제는 xUnit에 대한 예시를 위해 python에서의 TDD의 좀 더 교묘한 활용을 보게된다.&lt;/p&gt;

&lt;h2 id=&quot;chapter-18&quot;&gt;chapter 18&lt;/h2&gt;

&lt;p&gt;크기를 넓혀서 테스트 뿐 아니라 테스트 프레임워크를 만들어 테스트를 해보도록 한다.&lt;br /&gt;
테스트 프레임워크를 만드는데도, 가장 먼저 할 일은 테스트를 작성하는 것이다.&lt;br /&gt;
파이썬을 사용한다고해도, 이전에 배웠던 TDD의 기본 로직은 변하지 않는다. 똑같이 테스트와 구현, 중복 제거를 진행한다.&lt;/p&gt;

&lt;h3 id=&quot;getattr&quot;&gt;getattr&lt;/h3&gt;
&lt;p&gt;파이썬에선 메서드의 이름을 함수처럼 다룰 수 있는데, 이를 활용해 테스트 코드를 보다 간단히 할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;wasRun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;getattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;testMethod&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 코드에서, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testMethod&lt;/code&gt;를 name으로 넣고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run()&lt;/code&gt;에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getattr()&lt;/code&gt;를 통해 받아서 실행하게 할 수 있다.&lt;br /&gt;
이 후 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run()&lt;/code&gt; 코드를 상위 클래스에 두어 모든 테스트에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run()&lt;/code&gt;을 통해 테스트를 진행할 수 있도록 구현할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;testcasetest&quot;&gt;TestCaseTest&lt;/h3&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;getattr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WasRun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testMethod&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestCaseTest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TestCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testRunning&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;testMethod&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wasRun&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;TestCaseTest&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;testRunning&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;처음 완성한 테스트는 위와 같다. test가 run했는지를 확인하기 위한 테스트인데, test F/W을 만드는데 test를 하고 있는 미묘한 상황이다.&lt;/p&gt;

&lt;h2 id=&quot;chapter-19&quot;&gt;chapter 19&lt;/h2&gt;

&lt;h3 id=&quot;3a-pattern&quot;&gt;3A (pattern)&lt;/h3&gt;
&lt;p&gt;테스트를 작성하다보면 발견하게되는 공통된 패턴.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;arrange(준비) - 객체를 생성한다.&lt;/li&gt;
  &lt;li&gt;act(행동) - 어떤 자극을 준다.&lt;/li&gt;
  &lt;li&gt;assert(확인) - 결과를 검사한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;성능과-격리&quot;&gt;성능과 격리&lt;/h3&gt;
&lt;p&gt;테스트를 작성하다보면 3A 패턴을 확인하게되고, 여러 테스트에서 &lt;strong&gt;1번 arrange&lt;/strong&gt;가 동일하게 사용되는 경우를 확인할 수 있다.&lt;br /&gt;
예를 들면, 7과 9의 사칙연산에서 각 사칙연산 테스트는 4개지만, 7과 9는 모든 테스트에서 사용된다. 이러한 객체들을 새로 생성하는가에 대해 두 가지 제약이 상충한다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;성능 - 테스트가 될 수 있는한 빨리 실행되길 원함. 여러 테스트에서 같은 객체를 사용한다면, 하나의 객체 생성으로 모든 테스트에서 사용하게 함.&lt;/li&gt;
  &lt;li&gt;격리 - 하나의 테스트의 성공과 실패가 다른 테스트에 영향을 주지 않길 원함.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이런 제약에서 당연히 테스트 커플링을 만들지 않는 방향으로 가는 것이 좋다.&lt;br /&gt;
테스트 커플링이 발생하면, A 테스트 후 B 테스트시 성공하더라도 B 테스트 후 A 테스트 시 실패하는 등 예기치 못한 동작들이 발생하기 쉽다.&lt;/p&gt;

&lt;h2 id=&quot;chapter-20&quot;&gt;chapter 20&lt;/h2&gt;

&lt;p&gt;중복이 여러 개 생길 때까지 기다리는 것이 아니라 바로바로 중복이 나올 때마다 리팩토링을 한다. (켄트 백 방식)&lt;/p&gt;

&lt;h2 id=&quot;chapter-21&quot;&gt;chapter 21&lt;/h2&gt;

&lt;h3 id=&quot;테스트-구현-순서&quot;&gt;테스트 구현 순서&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;테스트를 통해 얻을 수 있는 것이 있고, 테스트를 만들 수 잇다는 확신이 드는 것부터 만든다.&lt;/li&gt;
  &lt;li&gt;테스트를 하나 성공시켰는데, 그 다음 테스트를 만들면서 문제가 생기면 다시 돌아가서 생각해보도록 한다.
    &lt;ul&gt;
      &lt;li&gt;모든 테스트가 성공하던 시점을 체크포인트로 삼는 것.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;필요한-것을-빠르게&quot;&gt;필요한 것을 빠르게&lt;/h3&gt;
&lt;p&gt;TDD의 기본은 필요한 것들을 빠르게 만드는 것이다. 진짜가 될 가짜 구현을 만드는 것.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;어떤 것이 필요한지를 확인한다.
    &lt;ul&gt;
      &lt;li&gt;예를들면 Test에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testBrokenMethod()&lt;/code&gt;를 예상하여 만든다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;필요한 것을 빠르게 만든다.
    &lt;ul&gt;
      &lt;li&gt;test broken 상태는 많은 경우와 처리방식이 있겠지만, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;raise Exception&lt;/code&gt; 같이 핸들링하지 않고 우선 빠르게 생성한다. 아직 예외를 잡고 고치지 않았지만, 분명 선언을 한다는 것이 중요하다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;chapter-23&quot;&gt;chapter 23&lt;/h2&gt;

&lt;h3 id=&quot;collecting-parameter&quot;&gt;collecting parameter&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;매개변수 수집&lt;/strong&gt;이라고 번역된 이 패턴은 메서드가 매개변수를 받아서 처리하는 것.&lt;br /&gt;
예를 들면, 아래와 같은 코드처럼 적용이 된다. (별 것도 아닌데 거창하게 적어놨다..)&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;장점은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run()&lt;/code&gt;이 명시적으로 return하지 않아도 된다는 점이다.&lt;/li&gt;
  &lt;li&gt;하지만 저 목적보단 메서드가 명확한지, 논리적인지가 중요하다. 여기선 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;run()&lt;/code&gt;이 할당하는 부분과, 할당 후 테스트를 수행하는 부분으로 나뉘는데 이는 좋지 않으므로 할당을 위에서 해주는 방식으로 수정한다.&lt;br /&gt;
```python
#1
def run(self):
  result = TestResult()
  … #use&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;#2
def run(self, result):
    … #use
```&lt;/p&gt;

&lt;h2 id=&quot;chapter-24&quot;&gt;chapter 24&lt;/h2&gt;

&lt;h3 id=&quot;xunit&quot;&gt;xUnit&lt;/h3&gt;
&lt;p&gt;xUnit은 30개 이상의 프로그래밍 언어에 포팅되어 있고, 아마 사용하려는 언어에 이미 되어있을 것.&lt;br /&gt;
앞선 실습처럼 xUnit을 직접 구현함으로써 얻을 수 있는 것이 있다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;숙달: 직접 만들어보면, xUnit을 이해하기 쉬움.&lt;/li&gt;
  &lt;li&gt;탐험: 새로운 언어를 접할 때, 간단한 xUnit을 만듦으로서 기능들을 경험.&lt;/li&gt;
&lt;/ol&gt;

&lt;ul&gt;
  &lt;li&gt;마틴 파울러: 소프트웨어 공학 역사에 이토록 많은 사람이 이렇게 짧은 코드로 이토록 큰 은혜를 입은 적이 없었다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;tdd-python&quot;&gt;TDD python&lt;/h3&gt;
&lt;p&gt;하나 하나 따라가지 않았지만, python에서 TDD를 사용하는 방법은 java에서와 유사했다.&lt;br /&gt;
동일하게 TDD의 원칙에 따라 테스트와 함께 코드를 작성해나갔고,&lt;br /&gt;
다른점은 python의 언어 특징에 맞게 리팩토링 및 수정이 진행되었다는 점이다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-06</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-06</guid>
      </item>
    
      <item>
        <title>TDD 07 (테스트 패턴)</title>
        
          <description>&lt;p&gt;TDD에서 인기있게 사용되는 패턴들에 대한 공부.&lt;br /&gt;
TDD 트릭, 디자인 패턴, 리팩토링이 TDD와 어떤 관련이 있는지.&lt;/p&gt;

&lt;h3 id=&quot;질문&quot;&gt;질문&lt;/h3&gt;
&lt;p&gt;어떻게 테스트할 것인가에 대해 이야기 하기 전에, 기본적인 전략에 대한 질문에 답해야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;테스트 한다는 것은 무엇을 뜻하는가?&lt;/li&gt;
  &lt;li&gt;테스트를 언제 해야 하는가?&lt;/li&gt;
  &lt;li&gt;테스트할 로직을 어떻게 고를 것인가?&lt;/li&gt;
  &lt;li&gt;테스트할 데이터를 어떻게 고를 것인가?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그 어떤 소프트웨어 엔지니어도 아무리 작은 수정도 테스트 없이 릴리즈하지 않는다. 테스트를 하지만, 자동화된 테스트를 갖고있지 않을 뿐이다.&lt;br /&gt;
‘이 수정이 다른 부분에 영향을 미치지 않을까?’에 대해, 테스트하는 스트레스를 자동화 테스트에 맡기는 것이다.&lt;/p&gt;

&lt;h2 id=&quot;테스팅-패턴&quot;&gt;테스팅 패턴&lt;/h2&gt;

&lt;h3 id=&quot;격리된-테스트&quot;&gt;격리된 테스트&lt;/h3&gt;
&lt;p&gt;테스트끼리 서로 아무 영향도 미치지 않아야 한다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;테스트 결과를 보면, 여러 개의 fail이 맨 처음 하나의 fail로부터 비롯되는 경우가 많은데, 이는 잘못된 테스트이다.
    &lt;ul&gt;
      &lt;li&gt;문제가 하나면 fail은 하나여야 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;일부 테스트 실행을 위해, 선행 테스트가 실행되어야 하는 경우 이는 잘못된 테스트이다.
    &lt;ul&gt;
      &lt;li&gt;문제가 실행 순서에 상관없이 작동할 수 있어야 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;주어진 문제를 작은 단위로 분리한다.
    &lt;ul&gt;
      &lt;li&gt;때론 매우 많은 노력이 필요한 작업이지만, 각 테스트를 실행하기 위한 환경을 쉽고 빠르게 세팅하는 것.&lt;/li&gt;
      &lt;li&gt;결과적으로 시스템이 응집도는 높고 결합도는 낮은 객체의 모음으로 구성.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;전체 애플리케이션 대상의 테스트보다 작은 스케일의 테스트를 하면 독립적이기 쉽다.&lt;/p&gt;

&lt;h3 id=&quot;테스트-목록&quot;&gt;테스트 목록&lt;/h3&gt;
&lt;p&gt;시작하기 전 작성해야 할 테스트 목록을 모두 적어둘 것.&lt;br /&gt;
발 디딜 곳이 확실해지기 전에 전진하지 말 것.&lt;br /&gt;
테스트 목록을 적어두고, ‘지금’ 할일인지, ‘나중에’ 할일인지 판단하여 결정한다.&lt;/p&gt;

&lt;h3 id=&quot;테스트-우선&quot;&gt;테스트 우선&lt;/h3&gt;
&lt;p&gt;테스트는 대상이 되는 코드를 작성하기 직전에 작성하는 것이 좋다.&lt;br /&gt;
테스트를 먼저하면, 테스트하지 않음으로서 발생하는 스트레스가 줄고, 효율적인 작업이 가능하다.&lt;/p&gt;

&lt;h3 id=&quot;단언-우선&quot;&gt;단언 우선&lt;/h3&gt;
&lt;p&gt;단언(assert)를 테스트 작성시 가장 먼저 쓰고 시작한다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;시스템을 개발할 때 무슨 일부터 하는가?
    &lt;ul&gt;
      &lt;li&gt;완료된 시스템이 어떨 거라고 알려주는 이야기부터 작성한다. (user story)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;특정 기능을 개발할 때 무슨 일부터 하는가?
    &lt;ul&gt;
      &lt;li&gt;기능이 완료되면 통과할 수 있는 테스트부터 작성한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;테스트를 개발할 때 무슨 일부터 하는가?
    &lt;ul&gt;
      &lt;li&gt;완료될 때 통과해야 할 단언부터 작성한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;단언의 기능&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;테스트하고자 하는 기능이 어디에 속하는지 정함.&lt;/li&gt;
  &lt;li&gt;기존의 함수 수정할지, 새로운 메서드를 추가할지, 새로운 클래스를 만들지 정함.&lt;/li&gt;
  &lt;li&gt;메서드의 이름을 정함.&lt;/li&gt;
  &lt;li&gt;어떤 식으로 검사할지 정함.&lt;/li&gt;
  &lt;li&gt;이 테스트가 제안하는 다른 테스트는 무엇이 있을지 고려함.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;테스트-데이터&quot;&gt;테스트 데이터&lt;/h3&gt;
&lt;p&gt;읽을 때 쉽고 따라가기 좋은 데이터를 사용한다.&lt;br /&gt;
데이터 값을 산발하는게 아니라, 데이터에 차이가 있다면 그 사이에 의미가 있어야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;1과 2 사이에 개념적 차이가 없다면 1을 사용.&lt;br /&gt;
시스템이 여러 입력을 다운다면, 테스트 역시 여러 입력을 반영해야 한다.&lt;br /&gt;
하지만 세 항목으로 가능한 테스트를 열 개를 하면 안된다.&lt;br /&gt;
동일한 상수의 사용을 피한다.&lt;/li&gt;
  &lt;li&gt;예를 들어 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minus()&lt;/code&gt;의 구현에 1-1을 쓰지말고 2-1을 사용. 혹시라도 인자의 순서가 엎어지는 것도 고려하는 테스트를 위함.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;명백한-데이터&quot;&gt;명백한 데이터&lt;/h3&gt;
&lt;p&gt;테스트 자체에 예상되는 값과 실제 값을 포함하고 이 둘 사이의 관계를 드러내기 위해 노력하라.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;예를 들면, 환율이 2:1, 수수료가 1.5%일 때 100을 환전하는 테스트를 작성할 때,
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;assertEquals(new TestMoney(49.25, &quot;testmoney&quot;), result)&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;assertEqulas(new TestMoney(100 / 2 * (1 - 0.015), &quot;testmoney&quot;), result)&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;아래와 같이 작성하면 사용된 숫자와 예상되는 결과 사이의 관계를 알 수 있고,&lt;/li&gt;
      &lt;li&gt;어떻게 기능을 구현해야 하는지도 다시 확인하게 된다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;한-단계-테스트&quot;&gt;한 단계 테스트&lt;/h3&gt;
&lt;p&gt;다음 테스트를 고를 때의 기준은 새로운 무언가를 가르쳐 줄 수 있으며, 구현할 수 있다는 확신이 드는 테스트이다.
‘아는 것에서 모르는 것으로’ 라는 방향성을 가지고 테스트를 고른다.&lt;/p&gt;

&lt;h3 id=&quot;시작-테스트&quot;&gt;시작 테스트&lt;/h3&gt;
&lt;p&gt;테스트를 맨 처음 시작할 때는, 오퍼레이션이 아무 일도 하지 않을 경우를 먼저 테스트한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;복잡한 수식 계산에서는, 답이 0이라거나 등 함수를 사용하지 않아도 결과가 나오는 테스트.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;설명-테스트&quot;&gt;설명 테스트&lt;/h3&gt;
&lt;p&gt;자동화된 테스트가 널리 쓰이기 위해, 테스트를 통해 설명을 요청하고, 테스트를 통해 설명하라.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;시퀀스 다이어그램이 있다면, 이를 테스트로 작성해 보는 방법 등.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;학습-테스트&quot;&gt;학습 테스트&lt;/h3&gt;
&lt;p&gt;외부에서 만든 소프트웨어나 API들을 사용해야할 때, API가 예상대로 작동한다는 확인을 위한 작은 테스트를 만들 수 있다.&lt;br /&gt;
통과한다면 API를 제대로 이해한 것이고, 실패한다면 실제 프로그램에 넣었어도 제대로 작동하지 않았을 것이다.&lt;/p&gt;

&lt;h3 id=&quot;회귀-테스트&quot;&gt;회귀 테스트&lt;/h3&gt;
&lt;p&gt;시스템에 장애가 생겼을 때 제일 먼저 해야할 일. 장애로 인해 실패하는 테스트, 통과할 경우 장애가 수정되었다고 볼 수 있는 테스트를 간단하게 작성한다.&lt;br /&gt;
회귀 테스트는 완벽한 선견지명이 있다면 처음 코딩할 때 작성되어야 할 테스트이다. 어떻게 하면 이 테스르를 애초에 작성할 수 있었을까 생각해본다.&lt;br /&gt;
시스템 장애를 쉽게 해결할 수 없다면, 리팩토링을 해야할 수 있고, 이는 설계가 마무리되지 않았다는 것이다.&lt;/p&gt;

&lt;h3 id=&quot;방향잡기&quot;&gt;방향잡기&lt;/h3&gt;
&lt;p&gt;키보드로 뭘 쳐야할지 안다면&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;명백한 구현&lt;br /&gt;
잘 모르겠다면&lt;/li&gt;
  &lt;li&gt;가짜 구현&lt;br /&gt;
올바른 설계가 명확하지 않다면&lt;/li&gt;
  &lt;li&gt;삼각측량 기법 사용
그래도 잘 모른다면&lt;/li&gt;
  &lt;li&gt;휴식
그래도…?&lt;/li&gt;
  &lt;li&gt;코드를 다 지워버리고 다시!&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;자식-테스트&quot;&gt;자식 테스트&lt;/h3&gt;
&lt;p&gt;지나치게 큰 테스트 케이스를 돌리는 방법. 원래 테스트 케이스의 깨지는 부분에 해당하는 작은 테스트 케이스를 작성하고, 그 작은 테스트 케이스가 실행되도록 하라. 그 후에 다시 원래의 큰 테스트 케이스를 추가하라.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;큰 테스트를 작성하면, 왜 이렇게 테스트가 클까? 어떤 방식으로 더 작게 만들 수 있었을까?&lt;/li&gt;
  &lt;li&gt;한 번에 여러 구현이 필요한 테스트의 경우 가짜 구현이나 테스트의 일부분을 잠시 지우기도 함.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;모의-객체&quot;&gt;모의 객체&lt;/h3&gt;
&lt;p&gt;비용이 많이 들거나, 복잡한 리소스에 의존하는 객체를 테스트할 때 사용하는 방법이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;예를 들면 database, 내가 보는 안드로이드 F/W 단에서는 Phone, Tracker 등.
    &lt;ul&gt;
      &lt;li&gt;DB의 경우, 시작 시간이 오래걸리고, 깨끗하게 유지하기 어렵고, 원격 서버에 위치하는 등의 문제가 있는데, 이를 진짜 DB를 쓰지않고 Mock을 사용함으로써 해결.&lt;br /&gt;
객체의 가시성(visibility)에 대해 격려되어 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;가독성이 좋다는 장점이 있음.&lt;/li&gt;
  &lt;li&gt;실제 객체나 DB의 큰 구조나 데이터를 보지 않아도 되고 이해할 수 있음.&lt;/li&gt;
  &lt;li&gt;설계 과정에서 커플링이 감소.&lt;br /&gt;
그치만 모의 객체가 진짜 객체와 동일하게 동작하지 않을 수 있으므로 프로젝트에 위험 요소가 하나 추가된다.&lt;/li&gt;
  &lt;li&gt;모의 객체요 엩스트 집합을 진짜 객체가 사용 가능해질 때 그대로 적용해서 위험을 줄일 수 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;셀프-션트&quot;&gt;셀프 션트&lt;/h3&gt;
&lt;p&gt;한 객체가 다른 객체와 올바르게 대화하는지 테스트하려면 테스트 대상이 되는 객체가 원래의 대화 상대가 아니라 테스트 케이스와 대화하도록 하면 된다.&lt;br /&gt;
테스트 케이스에 별도의 이벤트 리스너를 만들어 사용하면, 테스트 케이스가 일종의 모의 객체처럼 사용된다.&lt;br /&gt;
셀프 션트 패턴은 테스트 케이스가 구현할 인터페이스(리스너)를 얻기 위해 인터페이스를 추출해야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;인터페이스 추출 vs 기존 클래스를 블랙박스 테스트 - 둘 중 더 쉬운 방법을 선택.&lt;/li&gt;
  &lt;li&gt;추출된 인터페이스는 여러 곳에서 쓰이기도 함.&lt;/li&gt;
  &lt;li&gt;파이썬 같은 언어는 테스트에 필요한 오퍼레이션만 구현하면 되지만, 자바 같은 언어는빈 메서드라도 인터페이스를 구현해야 함.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;로그-문자열&quot;&gt;로그 문자열&lt;/h3&gt;
&lt;p&gt;메시지 호출 순서가 올바른지 검사하고자 할 때 로그 문자열을 사용한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;로그 문자열을 가지고 있다가 메시지가 호출될 때마다 그 문자열에 추가하도록 하는 방식.&lt;br /&gt;
특히 옵저버를 구현하고, 이벤트 통보가 원하는 순서대로 발생하는지 확인하고자 할 때 유용하다.&lt;br /&gt;
이벤트 통보만 확인하고, 순서는 상관없다면 문자열 집합을 저장하고 집합 비교를 수행하면 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;크래시-테스트&quot;&gt;크래시 테스트&lt;/h3&gt;
&lt;p&gt;에러 코드(발생하기 힘든 에러 상황)를 어떻게 테스트하는가?&lt;br /&gt;
테스트되지 않은 코드는 작동하는 것이 아니다. (박력)&lt;br /&gt;
수많은 에러 상황을 어떻게 테스트할 것인가? 작동하길 원하는 부분에 대해서만 하면 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;file system에 여유 공간이 없을 경우에 대한 테스트를 원한다면, 실제로 큰 파일을 만들 수 있지만, 가짜구현을 만들어서 테스트하는 방식이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;깨진-테스트&quot;&gt;깨진 테스트&lt;/h3&gt;
&lt;p&gt;혼자서 프로그래밍을 할 때 프로그래밍을 깨진 상태로 끝마치는 것이 좋다.&lt;br /&gt;
마무리되지 않은 문장을 보면 그 전에 무슨 생각을 했었느지 떠올리게 되고, 생각의 실마리를 떠올리고 나면 문장을 마무리하고 계속 진행할 수 있다.&lt;br /&gt;
프로그래밍도 똑같이 테스트 케이스를 작성하고 실패를 확인하면 나중에 코딩을 할 때, 어느 작업부터 시작할지 명백히 알 수 있다.
몇 주간의 간극 후에도 개발을 그대로 이어나갈 수 있는 책갈피를 가지게 되는 것이다.&lt;/p&gt;

&lt;h3 id=&quot;깨끗한-체크인&quot;&gt;깨끗한 체크인&lt;/h3&gt;
&lt;p&gt;팀단위 프로그래밍을 할 때 프로그래밍을 모든 테스트가 성공한 상태로 끝마치는 것이 좋다.&lt;br /&gt;
내가 마지막으로 코딩한 후 무슨 일이 있을지 알 수 없기 때문에, 확신이 있는 상태로 마무리해야 한다.&lt;br /&gt;
테스트가 실패했다면, 작성한 코드를 완전히 이해하지 못했다는 것이고,&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;작성한 코드를 날려버리거나&lt;/li&gt;
  &lt;li&gt;수정하고 다시 테스트해야 한다.&lt;br /&gt;
테스트 통과를 위해 주석처리를 하는 말도 안되는 행동을 해서는 안된다.&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;초록-막대-패턴&quot;&gt;초록 막대 패턴&lt;/h2&gt;

&lt;h3 id=&quot;가짜로-구현하기진짜로-만들기-전까지만&quot;&gt;가짜로 구현하기(진짜로 만들기 전까지만)&lt;/h3&gt;
&lt;p&gt;실패하는 테스트를 만든 후, 상수를 입력해서 테스트를 통과시킨다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;테스트가 잘못 구현되어있는 경우 (시간을 들이지 않고) 이를 확인할 수 있음.&lt;/li&gt;
  &lt;li&gt;리팩토링 해야하는 부분을 명확하게 찾을 수 있음.&lt;/li&gt;
  &lt;li&gt;구체적인 예시를 갖고 시작하면 헷갈리는 일이 적음.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;삼각측량&quot;&gt;삼각측량&lt;/h3&gt;
&lt;p&gt;연관성 있는 테스트 두 개를 통해 구현을 증명하는 방법이다.&lt;br /&gt;
TDD에서는 예가 두 개 이상일때에만 추상화를 하는 방식으로 보수적인 코딩을 할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;즉 추상적인 코드는, 두 개 이상의 예시로 삼각측량을 하고 구현을 하는 방식.&lt;br /&gt;
가짜구현이 감각에 의존한다면 삼각측량은 단순하지만 명확하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;명백한-구현&quot;&gt;명백한 구현&lt;/h3&gt;
&lt;p&gt;어떻게 구현해야할지 확신이 든다면 위와 같은 방식을 쓰지 않고 그냥 구현해버려라.&lt;br /&gt;
그리고 테스트가 실패한다면 그제서야 위와 같은 방식을 사용해도 된다.&lt;br /&gt;
한 번에 어렵다면, 위와 같은 방식들로 ‘제대로 동작하는 코드’ 후에 ‘깨끗한 코드’ 만들기.&lt;/p&gt;

&lt;h3 id=&quot;하나에서-여럿으로&quot;&gt;하나에서 여럿으로&lt;/h3&gt;
&lt;p&gt;컬렉션을 사용한 구현에서는, 단일 항목으로 구현하고 확장하는 방식.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;xunit-패턴&quot;&gt;xUnit 패턴&lt;/h2&gt;
&lt;p&gt;xUnit 계열 테스트 프레임워크를 위한 패턴&lt;/p&gt;

&lt;h3 id=&quot;단언assertion&quot;&gt;단언(assertion)&lt;/h3&gt;
&lt;p&gt;사람 대신 프로그램이 자동으로 코드가 동작하느닞에 대한 판단을 수행하도록 하라.&lt;br /&gt;
테스트를 완전히 자동화하려면 결과 평가에 사람의 판단을 끄집어내고, 컴퓨터가 모든 판단을 해야한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;판단 결과가 boolean 이어야 함.&lt;/li&gt;
  &lt;li&gt;이 boolean이 컴퓨터에 의해 검증되어야 함.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;assertEquals(), assertTrue(), assertFalse()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;픽스처fixture&quot;&gt;픽스처(fixture)&lt;/h3&gt;
&lt;p&gt;여러 테스트에서 공통으로 사용되는 객체들을 생성할 때, 각 테스트 코드에 있는 지역 변수를 인스턴스 변수로 바꾸고 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setUp()&lt;/code&gt;을 정의하여 초기화하도록 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;복붙을 한다고 해도 반복 작성에 시간이 소요되는데, 이것을 단축할 수 있다.&lt;/li&gt;
  &lt;li&gt;setup에 수정이 필요한 경우, 반복 수정을 줄일 수 있다.&lt;/li&gt;
  &lt;li&gt;(-) 테스트 작성 전에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setUp()&lt;/code&gt;이 수행된다는 점과 어떻게 초기화되는지를 확인해야 한다.&lt;/li&gt;
  &lt;li&gt;너무 많은 setUp 코드는 작성 전 많은 것들을 기억하게 하므로 호불호가 갈린다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;외부-픽스처&quot;&gt;외부 픽스처&lt;/h3&gt;
&lt;p&gt;픽스처 중 외부 자원이 있을 경우 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tearDown()&lt;/code&gt;을 통해 자원을 해제한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tearDown()&lt;/code&gt;은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;testMethod()&lt;/code&gt; 에서 무슨일이 생기든 호출된다. 하지만, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setUp()&lt;/code&gt; 과정 중 문제가 발생하면 호출되지 않는다.&lt;br /&gt;
테스트의 목적 중 하나는 테스트 실행 전과 실행 후의 외부 세계가 동일하게 유지되야 하는 것이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;따라서 테스트 중 파일을 열었다면 꼭 테스트 끝나기전에 닫아주어야 함.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;테스트-메서드&quot;&gt;테스트 메서드&lt;/h3&gt;
&lt;p&gt;객체지향 프로그래밍 언어에서는 아래와 같이 구조 계층을 나눈다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;모듈&lt;/li&gt;
  &lt;li&gt;클래스
    &lt;ul&gt;
      &lt;li&gt;픽스처를 사용하고 이를 위해 클래스를 사용한다면, 같은 픽스처를 공유하는 메서드들이 동일한 클래스에서 작성될 것이다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;메서드
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test-&lt;/code&gt;로 시작하는 메서드 이름을 xUnit에서는 자동으로 테스트로 인식하고 testsuite를 생성한다.&lt;/li&gt;
      &lt;li&gt;딱봐도 이해하기 쉬운 네이밍과, 코드. 최대한 간단하고 짧은 코드.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;예외-테스트&quot;&gt;예외 테스트&lt;/h3&gt;
&lt;p&gt;예외가 발생하는 것이 정상인 경우에 대한 테스트. 예상되는 예외를 잡아서 무시하고, 예외가 발생하지 않는 경우에 테스트가 실패하게 만들면 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;정확하게 원하는 종류의 예외만 잡아야 하는 것에 주의.
    &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;testWantException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// do method which is correct making exception.&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;fail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// fail if it is not catched&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;WhatYouReallyWantException&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
    &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fail()&lt;/code&gt;은 xUnit에서 테스트 실패를 알려주기 위한 메서드이다.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;전체-테스트&quot;&gt;전체 테스트&lt;/h3&gt;
&lt;p&gt;모든 테스트를 한번에 실행하기 위해서는 모든 테스트 슈트에 대한 모음을 작성하면 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;각각의 패키지에 대해 하나씩, 그리고 전체 애플리케이션에서 패키지 테스트를 모아주는 테스트 슈트.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-07</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-07</guid>
      </item>
    
      <item>
        <title>TDD 08</title>
        
          <description>&lt;h2 id=&quot;디자인-패턴&quot;&gt;디자인 패턴&lt;/h2&gt;
&lt;p&gt;우리가 언제나 새로운 문제를 푸는 것 같지만, 외부의 문제보다 사용하는 도구에 의한 내부의 문제를 푸는 경우가 많고, 공통의 해결책을 가진 문제를 발견하는 경우도 많다.&lt;br /&gt;
디자인 패턴의 성공은 객체 프로그래머들이 보는 공통성에 대한 증거이다.&lt;/p&gt;

&lt;h3 id=&quot;카멘드&quot;&gt;카멘드&lt;/h3&gt;
&lt;p&gt;간단한 메서드 호출보다 복잡한 형태의 계산 작업에 대한 호출이 필요할 때, 계산 작업에 대한 객체를 생성해 이를 호출한다.&lt;br /&gt;
복잡한 계산 작업 호출을 위해 메서드 호출보다 객체를 사용하면 더 구체적이고 조작하기 쉬워진다.&lt;br /&gt;
호출 자체를 나타내는 객체를 만드는 것으로, 자바의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Runnable&lt;/code&gt; 인터페이스가 하나의 예이다.&lt;/p&gt;

&lt;h3 id=&quot;값-객체&quot;&gt;값 객체&lt;/h3&gt;
&lt;p&gt;객체를 공유하였는데, 다른 곳에서 나도 모르게 객체의 값을 바꿀때 생기는 문제를 별칭 문제라 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;두 객체가 제 삼의 다른 객체에 대한 참조를 공유하는데, 한 객체가 공유되는 객체의 상태를 변화시키는 것.&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;현재 의존하는 객체에 대한 참조를 외부로 보내지 않는 방법.
    &lt;ul&gt;
      &lt;li&gt;객체에 대한 복사본을 제공하는 방식.&lt;/li&gt;
      &lt;li&gt;단점은 수행 시간과 메모리 공간을 차지한다는 점. 객체의 변화를 공유하고 싶은 경우에 사용할 수 없다는 점.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;옵저버 패턴
    &lt;ul&gt;
      &lt;li&gt;의존하는 객체에 자신을 등록하고 객체의 상태가 변하면 통지를 받는 방법.&lt;/li&gt;
      &lt;li&gt;흐름 이해를 어렵게하고, 로직이 지저분해질 수 있음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;값 객체
    &lt;ul&gt;
      &lt;li&gt;객체를 값처럼 사용하는 것.&lt;/li&gt;
      &lt;li&gt;모든 오퍼레이션은 기존의 객체는 변하지 않는 값으로 두고, 새로운 객체를 반환해야 함.&lt;/li&gt;
      &lt;li&gt;예를들면 500원 동전 두 개는 동등성을 띄지만, 동일성을 띄지는 않음.&lt;/li&gt;
      &lt;li&gt;500원에 500원을 더하면 새로운 1000원 객체를 돌려줘야지, 500원 값 객체의 값이 1000원으로 바뀌는 것이 아님.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;널-객체&quot;&gt;널 객체&lt;/h3&gt;
&lt;p&gt;객체의 특정 상황을 표현하고자 할 때는, 특별한 상황에 맞는 객체를 만들면 된다.&lt;br /&gt;
널 체크를 계속하는 것이 보기 싫은 상황에서 아래와 같은 코드들로 널 상황에서 반환하는 객체를 통해 널 체크를 하지 않을 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;TestObject&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getTestObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 코드를 아래와 같이 수정한다&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// NullObject class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;doSomething&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// TestObject class&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestObject&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getTestObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NullObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;TestObject&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getTestObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// do something&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;이런 코드는 잘못쓰이면 조건문 관련 2line을 없애고자 10line 가량을 생산해낼 수 있기 때문에, 논쟁이 있다.&lt;/p&gt;

&lt;h3 id=&quot;템플릿-메서드&quot;&gt;템플릿 메서드&lt;/h3&gt;
&lt;p&gt;작업 순서는 변하지 않으면서, 각 작업 단위에 대한 개선 가능성을 열어두고 싶은 경우 이를 표현하는 방법이다.&lt;br /&gt;
다른 매서드들에 대한 호출로만 이루어진 메서드를 만든다.&lt;br /&gt;
템플릿 메서드는 고전적인 순서 등을 표현하는데 좋다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;입력/처리/출력&lt;/li&gt;
  &lt;li&gt;메시지 보내기/응답 받기&lt;br /&gt;
템플릿 메서드는 초기 설계부터 구현하기 보다는 경험에 의해 구현되는 것이 좋다.&lt;/li&gt;
  &lt;li&gt;두 하위 클래스의 연산 순서가 같은 것을 발견하면, 다른 부분을 추출하면서 남는 것이 템플릿 메서드&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;플러거블-객체&quot;&gt;플러거블 객체&lt;/h3&gt;
&lt;p&gt;변이(같은 종, 다른 특성)을 어떻게 나타내는가에 대하여, 조건문으로 처리할 수 있지만, 여러 곳에서 지저분한 조건문이 사용된다면 이를 객체로 변환할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selected&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* do something */&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* do another thing */&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;예를 들어 위와 같은 구문을 mode가 selected이냐에 따라 여러 함수에서 계속해서 처리하고 있었다면,&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;selected&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;singleSelection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mode&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multipleSelection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;과 같이 mode를 구현하는 객체들을 만들어 내부적으로 함수를 다르게 설정하면 된다.&lt;br /&gt;
플러거블이라는 거창한 이름이… 당연한 이런 구현에 왜 필요한가 싶다.&lt;/p&gt;

&lt;h3 id=&quot;플러거블-셀렉터&quot;&gt;플러거블 셀렉터&lt;/h3&gt;
&lt;p&gt;인스턴스 별로 서로 다른 메서드를 동적으로 호출하는 방법.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;상속을 통해 하위 클래스를 각각 만듦.
    &lt;ul&gt;
      &lt;li&gt;서로 다른 하위 클래스가 열 개가 있다면 이는 작은 변이를 다루기엔 무거운 기법.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;switch 문을 갖는 하나의 클래스를 가짐.
    &lt;ul&gt;
      &lt;li&gt;각 객체마다 값을 가지고, 이 값에 따른 switch문을 처리하는 클래스를 가지는 기법.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;플러거블 셀렉터
    &lt;ul&gt;
      &lt;li&gt;리플렉션을 이용해 동적으로 메서드 호출.&lt;/li&gt;
      &lt;li&gt;메서드를 직관적으로 추적하기 어렵기 때문에 과용해서는 안됨.&lt;/li&gt;
      &lt;li&gt;메서드를 딱 하나 가지는 여러 하위 클래스의 뭉치들에서 사용하기 좋음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;팩토리-메서드&quot;&gt;팩토리 메서드&lt;/h3&gt;
&lt;p&gt;새 객체를 만들때 유연성을 원하는 경우, 생성자 대신 메서드를 통해 객체를 생성하는 방법이다.&lt;br /&gt;
메서드라는 인디렉션을 도입하여 유연성을 갖게되지만, 유연성이 필요한 경우에만 사용하여야하며, 그렇지 않을 때는 생성자를 사용하는 것으로 충분하다.&lt;/p&gt;

&lt;h3 id=&quot;컴포지트&quot;&gt;컴포지트&lt;/h3&gt;
&lt;p&gt;하나의 객체가 다른 객체 목록의 행위를 조합한 것처럼 행동하게 만들려고 할 때, 객체 집합을 나타내는 객체를 단일 객체에 대한 임포스터(사기꾼?)로 구현한다. 
컴포지트 패턴은 일종의 프로그래머의 트릭이다. Folder가 Folder를 포함하고, Drawing은 Drawing을 포함하는 것 등은 실세계와 잘 들어맞지 않지만, 코드를 훨씬 단순하게 만든다.&lt;/p&gt;

&lt;h3 id=&quot;수집-매개-변수&quot;&gt;수집 매개 변수&lt;/h3&gt;
&lt;p&gt;log에 append하듯이, stream에 write하듯이, 이어서 사용하는 것.&lt;br /&gt;
android phone의 dump 로그와 유사.&lt;/p&gt;

&lt;h3 id=&quot;싱글톤&quot;&gt;싱글톤&lt;/h3&gt;
&lt;p&gt;싱글톤은 어디서든 하나의 객체를 가져서 값을 동일하게 하는 디자인 패턴.
전역변수를 제공하지 않는 곳에서 전역변수처럼도 사용할 수 있다고 한다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;리팩토링&quot;&gt;리팩토링&lt;/h2&gt;
&lt;p&gt;아무리 큰 변화라도 작은 단계들로 변화시키는 방법.&lt;br /&gt;
일반적으로 리팩토링은 어떤 상황에서도 프로그램의 의미론을 변경해서 안되지만, TDD에서는 통과하는 테스트 안에서 상수를 변수로 바꾸는 등의 행동들도 리팩토링이라고 부른다. 이런 행위들이 테스트 통과에 변화를 주지 않기 때문이다.&lt;/p&gt;

&lt;h3 id=&quot;차이점-일치시키기&quot;&gt;차이점 일치시키기&lt;/h3&gt;
&lt;p&gt;비슷해 보이는 두 코드 조각을 합치기 위해서, 단계적으로 두 코드가 닮아가게끔 수정한다. 완전히 동일해지면 둘을 합친다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;비슷한 반복문, 비슷한 분기, 비슷한 클래스를 동일하게 만들고 제거&lt;br /&gt;
리팩토링 중 추론이 길어지면 가정으로 넘어가기도 하는데, 이런 작업을 명확하게 하기 위해 작은 단계를 밟아가는 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;변화-격리하기&quot;&gt;변화 격리하기&lt;/h3&gt;
&lt;p&gt;객체나 메서드 일부만을 바꾸려고 할 때, 바꿀 부분을 격리함. 외과의가 수술부위만 두고 나머지는 천으로 가리는 것처럼..&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;메서드 추출, 객체 추출 등&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;데이터-이주시키기&quot;&gt;데이터 이주시키기&lt;/h3&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-08</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd/tdd-book-08</guid>
      </item>
    
      <item>
        <title>C++11</title>
        
          <description>&lt;p&gt;요새 modern cpp를 공부한다고 cpp11과 cpp14를 공부하고 있다.&lt;br /&gt;
뭐가 이렇게 새로운게 많은 것인가.. 싶다.&lt;br /&gt;
이런것도 모르고 cpp를 쓰고 있었다니 그런데 한 숨에 이해하기 어려운 것들도 있는데, 나름대로 이해해서 적어 보았다.&lt;br /&gt;
많은 C++ 개발자들이 C를 배우기도 했고, 최신 C++의 기능들을 적용하지 못하고 있다는게 이런 코드들이 (우리회사에서도) 잘 사용되지 않는 이유인 듯 했다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/C%2B%2B11&quot;&gt;C++11 wiki&lt;/a&gt; 참고하였다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Table of Contents:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#lvalue-rvalue&quot;&gt;Lvalue, Rvalue&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#의-형식-연역&quot;&gt;&amp;amp;&amp;amp;의 형식 연역&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#extern-template&quot;&gt;extern template&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#uniform-initialization&quot;&gt;Uniform Initialization&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#member-initializer-list&quot;&gt;Member Initializer List&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#type-inference&quot;&gt;Type Inference&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#range-based-for-loop&quot;&gt;Range-based for loop&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#stdarray&quot;&gt;std::array&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#lambda-functions&quot;&gt;lambda functions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#alternative-function-syntax&quot;&gt;Alternative function syntax&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#object-construction-improvement&quot;&gt;Object construction improvement&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#overrides--final&quot;&gt;overrides &amp;amp; final&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#null-pointer-constant&quot;&gt;null pointer constant&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#enum-class&quot;&gt;enum class&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#템플릿-괄호처리&quot;&gt;템플릿 괄호처리&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#explicit-conversion-operators&quot;&gt;Explicit conversion operators&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#template-aliases&quot;&gt;Template aliases&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#variadic-templates&quot;&gt;Variadic templates&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#new-string-literal&quot;&gt;New String Literal&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#user-defined-literal&quot;&gt;User-defined Literal&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#multithreading-memory-model&quot;&gt;Multithreading memory model&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#tls&quot;&gt;TLS&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#default--delete&quot;&gt;default &amp;amp; delete&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#long-long&quot;&gt;long long&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#static-assertion&quot;&gt;static assertion&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#sizeof-member&quot;&gt;sizeof member&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#alignas--alignof&quot;&gt;alignas &amp;amp; alignof&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#attributes&quot;&gt;Attributes&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#tuple-type&quot;&gt;tuple type&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#regular-expression&quot;&gt;regular expression&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#smart-pointer&quot;&gt;smart pointer&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;lvalue-rvalue&quot;&gt;Lvalue, Rvalue&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/ko-kr/cpp/cpp/rvalue-reference-declarator-amp-amp?view=vs-2019&quot;&gt;MS Docs. Rvalue Reference&lt;/a&gt; 참고.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;lvalue: left value이자, locator value.&lt;br /&gt;
Rvalue reference를 통해, 기존에 발생할 수 있는 문제들을 해결하고, move constructor의 기반으로 사용.
    &lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// error Lvalue 참조&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rv&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//       Rvalue 참조&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://modoocode.com/227&quot;&gt;move constructor 모두의 코드&lt;/a&gt; 참고&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;즉 복사 생성자는 하나하나 싹 다 복사하는 거고,&lt;/li&gt;
  &lt;li&gt;이동 생성자는 포인터 주소만 복사하는 것.&lt;/li&gt;
  &lt;li&gt;그래서 이동 생성자에서 각 멤버들이 source의 멤버가 가리키는 주소를 가리키게 하고, 그 주소가 초기화(delete)되지 않도록 함.&lt;/li&gt;
  &lt;li&gt;말 그대로 복사는 싹 복사해서 하나 더 만듦.&lt;/li&gt;
  &lt;li&gt;말 그대로 이동은 있는건 쓱 옮김.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;의-형식-연역&quot;&gt;&amp;amp;&amp;amp;의 형식 연역&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;amp;&amp;amp;&lt;/code&gt;이 그렇다고 항상 Rvalue가 되는 것은 아니다. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;amp;&amp;amp;&lt;/code&gt;는 경우에 따라 &lt;strong&gt;universal reference&lt;/strong&gt;로도 사용된다.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Widget&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;//Rvalue reference&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Widget&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Widget&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//Rvalue reference&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;//universal reference&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;//Rvalue reference&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;              &lt;span class=&quot;c1&quot;&gt;//universal reference&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;amp;&amp;amp;&lt;/code&gt;가 쓰이면서 Rvalue가 되는 경우를 보면 형식연역이 일어나지 않는 경우이다.&lt;br /&gt;
반면 아래 &lt;a href=&quot;#type-inference&quot;&gt;Type Inference&lt;/a&gt;에서 더 확인하겠지만 형식 연역이 일어나는 경우 즉, auto나 template에서는 입력받은 자료형에 따라 형식 연역이 일어나기 때문에 받은 param 값이 중요하다.&lt;br /&gt;
universal reference는 초기값이 왼값이면 왼값 참조, 초기값이 오른값이면 오른값 참조를 하게된다.&lt;/p&gt;

&lt;h2 id=&quot;extern-template&quot;&gt;extern template&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extern template class std::vector&amp;lt;MyClass&amp;gt;&lt;/code&gt;과 같이 template에 extern을 사용할 수 있게 되었음.&lt;/p&gt;

&lt;h2 id=&quot;uniform-initialization&quot;&gt;Uniform Initialization&lt;/h2&gt;
&lt;p&gt;C++11에서 uniform initialization을 도입하여, 초기화 구문의 혼동을 완화하고, 어디서나 사용할 수 있는 초기화 구문을 도입함.&lt;br /&gt;
다른 초기화 방식(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;()&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;=&lt;/code&gt;)에서 제대로 초기화되지 않는 부분들도 잘 초기화될 수 있음.&lt;br /&gt;
특히 서로 다른 값을 담는 STL 컨테이너를 직접 생성 후 값들을 추가했어야 하는 부분들이 쉽게 초기화 할 수 있게 되었음.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;widget&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;private:&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// ok&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// ok&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;z&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// error&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// ok&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// ok&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// error&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// error. double can&apos;t be int. sum(x+ y) can do it.&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// C++98&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Tom&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;19&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Jane&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// C++11&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Smith&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;23&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;Mary&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;member-initializer-list&quot;&gt;Member Initializer List&lt;/h3&gt;
&lt;p&gt;생성자가 길어지는 것을 줄일 수 있고, 효율적으로 초기화시킬 수 있음.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// C++98&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// C++11&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ax&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;cm&quot;&gt;/* more if need */&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;cpp는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;int n(3);&lt;/code&gt;과 같은 초기화가 가능하기 때문.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x(ax)&lt;/code&gt;대신 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x{ax}&lt;/code&gt;도 가능.&lt;/li&gt;
  &lt;li&gt;기존 대입식 초기화는 객체를 위한 메모리 생성/할당 후 여기에 값을 넣고 이 값을 멤버변수에 대입.&lt;/li&gt;
  &lt;li&gt;반면 초기화 리스트는 객체의 생성과 초기화를 한번에 하기 때문에 오버헤드를 줄일 수 있음.&lt;/li&gt;
  &lt;li&gt;반드시 초기화 리스트가 필요한 경우 (== 대입식 초기화로 안되는 경우)
    &lt;ol&gt;
      &lt;li&gt;클래스가 레퍼런스를 멤버변수로 갖는 경우&lt;/li&gt;
      &lt;li&gt;클래스가 non static + const 멤버 변수를 갖는 경우&lt;/li&gt;
      &lt;li&gt;자식 클래스가 부모 클래스의 private 변수를 초기화하는 경우&lt;/li&gt;
      &lt;li&gt;자식 클래스가 부모 클래스를 초기화하는 경우&lt;/li&gt;
    &lt;/ol&gt;
    &lt;ul&gt;
      &lt;li&gt;ex, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;child(int ai, int aj, int ak): parent(ai, aj), k(ak)&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;type-inference&quot;&gt;Type Inference&lt;/h2&gt;
&lt;p&gt;C++11에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;decltype&lt;/code&gt;키워드가 추가되었다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt; 키워드.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt; 타입을 통해 파이썬처럼 자료형을 명시하지 않고 사용할 수 있게 되었음.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt; 타입은 항상 초기화를 필요로 하기 때문에, 코드에따라 초기화가 되지 않을 수 있어 발생하던 문제들을 보완할 수 있는 역할을 함.&lt;/li&gt;
  &lt;li&gt;이식(다른 bit의 프로그램)성 문제에서 형식 불일치가 발생하는 경우가 없어짐.&lt;/li&gt;
  &lt;li&gt;예를 들면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;std::function&lt;/code&gt;객체를 사용하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;를 사용하는 것보다 일반적으로 메모리를 많이 사용하고 속도도 느림.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;는 클로저를 담는 변수와 클로저와 같은 형식. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;std::function&lt;/code&gt;은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;std::function&lt;/code&gt; 템플릿의 한 인스턴스 크기이고, 고정되어 있음. 클로저를 저장하기에 부족한 경우, 힙 메모리를 할당해서 클로저를 저장함.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;코드의 길이도 더 짧아짐.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/29859796/c-auto-vs-auto&quot;&gt;auto vs auto&amp;amp;&amp;amp; stackoverflow&lt;/a&gt; 참고.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;는 항상 local copy.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&amp;amp;&lt;/code&gt;는 항상 reference.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&amp;amp;&amp;amp;&lt;/code&gt;는 local인지 reference인지 생각하지 않음. 즉 형식연역에 따라 둘다 될 수 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;decltype&lt;/code&gt; 키워드.&lt;br /&gt;
decltype(declared type)은 컴파일러가 type을 결정하도록 하는 것. type을 알려주는 것.&lt;br /&gt;
auto 키워드가 method의 return type으로 쓰일 때, return type을 알지 못하면 error가 발생함.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그러면 후행 반환 형식으로 type을 명시하거나, decltype을 사용해야 함.&lt;br /&gt;
auto를 사용하여 함수의 리턴 타입을 추론할 때 const나 참조형이 있다면 속성이 없어져 버리는데 decltype(auto)를 사용하면 정확히 추론된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;range-based-for-loop&quot;&gt;Range-based for loop&lt;/h2&gt;
&lt;p&gt;java에서처럼 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:&lt;/code&gt;을 통한 for문을 사용할 수 있다. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for (int i: arr)&lt;/code&gt;&lt;br /&gt;
array에서 배열의 길이를 지정해주지 않아도 되며, i의 초기값을 정해주지 않아도 된다.&lt;br /&gt;
또한, 언제까지 순회할지를 지정하지 않아도 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이건 내가 원하는데까지 순회할 수 없다는 단점도 됨.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;응용:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;변경 방지: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for (auto const i:arr)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;stdarray&quot;&gt;std::array&lt;/h2&gt;
&lt;p&gt;vector에서 지원하는 함수들을 유사하게 지원하면서, array를 만들어서 구현할 수 있또록 함.
array[]와의 차이:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;std::array는 객체이기 때문에 크기를 알 수 있음. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arr.size()&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;std::array는 index가 비어있어도 됨.&lt;/li&gt;
  &lt;li&gt;std::array는 생성시 크기를 명시해야 함.&lt;/li&gt;
  &lt;li&gt;std::array는 대입이 가능함.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;a href=&quot;https://en.cppreference.com/w/cpp/container/array&quot;&gt;Cpp Reference&lt;/a&gt; 참고.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;단순히 C의 array[]를 가지고 있는 집합체로, C의 array와 동일한 성능을 내면서 size를 얻거나, 할당 지원과 같은 장점을 얻을 수 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;lambda-functions&quot;&gt;lambda functions&lt;/h2&gt;
&lt;p&gt;lambda 식이 추가 되었는데, Java의 lambda 식과는 약간 다르고(뭔가 더 구시대적인 느낌?) 함수를 간단하게 만드는 것이라고 볼 수 있음.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto calc = [](int a, int b) -&amp;gt; int {return a + b;}&lt;/code&gt;와 같이 사용할 수 있음.&lt;/p&gt;

&lt;h2 id=&quot;alternative-function-syntax&quot;&gt;Alternative function syntax&lt;/h2&gt;
&lt;p&gt;후행 반환 형식이 도입되었다.&lt;br /&gt;
이는 함수 반환 타입을 auto 타입으로 했을 때를 위한 방식으로 도입되었는데, 어떤 타입으로 줘야할지 알지 못하므로 그 타입을 뒤에 명시하는 방식이었다.&lt;br /&gt;
그러나 C++14에서는 auto 타입으로 함수를 선언해도 후행 반환을 사용하지 않아도 되도록 업그레이드 되었다. 예를 들면 아래와 같다.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Lhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Rhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;adding_func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Lhs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Rhs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;decltype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lhs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lhs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rhs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// auto adding_func(const Lhs &amp;amp;lhs, cont Rhs &amp;amp;rhs) {return lhs + rhs;}   // C++14&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;return value는 lhs + rhs의 타입이어야 하는데, lhs와 rhs가 아직 정의되지 않은 상태에서 아래 코드를 사용할 수 없다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;decltype(lhs + rhs) adding_func(const Lhs &amp;amp;lhs, const Rhs &amp;amp;rhs) {return lhs + rhs;}&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;object-construction-improvement&quot;&gt;Object construction improvement&lt;/h2&gt;
&lt;p&gt;C++03까지는 생성자에서 다른 생성자를 호출할 수 없었다. 따라서 하나의 클래스에 다른 생성자가 동일한 구현이 필요할 경우 꼼수?처럼 함수를 만들어 호출하는 방식을 사용하였으나, C++11부터는 생성자에서 다른 생성자를 호출할 수 있게 되었다.&lt;br /&gt;
또한 non-static member의 초기화를 선언부에서 할 수 있게 되었다. 이 말이 뭐냐면 헤더파일에 멤버변수 선언하고, 생성자에서 초기화 하던걸 헤더파일에서 멤버변수 선언할때 초기값을 집어넣을 수 있어서 쓸데 없이 생성자에서 한 번 더쓰던걸 안써도 된다는 말이다.&lt;/p&gt;

&lt;h2 id=&quot;overrides--final&quot;&gt;overrides &amp;amp; final&lt;/h2&gt;
&lt;p&gt;Java에서 쓰는 애들이랑 유사하다. override와 final을 뒤에 붙이는게 특이하다.&lt;br /&gt;
virtual 함수에만 사용할 수 잇다.
Java와 마찬가지로 필수로 사용되어야 하는 것은 아니다.&lt;/p&gt;

&lt;p&gt;final:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;하위 클래스에서 더이상 재정의할 수 없음을 컴파일러에게 알린다.&lt;/li&gt;
  &lt;li&gt;class에도 사용할 수 있다.&lt;br /&gt;
override:&lt;/li&gt;
  &lt;li&gt;상위 클래스의 멤버함수를 재정의해야 함을 컴파일러에게 알린다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;override의 조건이 더 까다로워 졌기 때문에, 혹시 모를 휴먼 에러를 피하고자 override를 명시하는 것을 권장한다.&lt;br /&gt;
override 조건:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;parent class의 함수가 virtual.&lt;/li&gt;
  &lt;li&gt;함수의 이름이 동일.&lt;/li&gt;
  &lt;li&gt;매개변수 현식들이 동일.&lt;/li&gt;
  &lt;li&gt;const 여부가 동일.&lt;/li&gt;
  &lt;li&gt;return 형식 동일.&lt;/li&gt;
  &lt;li&gt;예외 명세가 호환되어야 함.&lt;/li&gt;
  &lt;li&gt;함수들의 참조(reference) 한정사가 동일 // C++11에서 추가
    &lt;ul&gt;
      &lt;li&gt;새로 추가된 한정사를 활용해 한정사가 다를 때마다 다른 함수나 생성자를 사용하도록 할 수 있지만, 잘 모르는 경우 이거 때문에 문제를 만들 수도 있음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;null-pointer-constant&quot;&gt;null pointer constant&lt;/h2&gt;
&lt;p&gt;기존의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NULL&lt;/code&gt;을 대체하기 위해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nullptr&lt;/code&gt;이 생겼다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto&lt;/code&gt;와 함께 했을 때, 타입을 알기 어려울 때 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nullptr&lt;/code&gt;이 더 효율적으로 쓰인다.&lt;br /&gt;
사실 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NULL&lt;/code&gt;도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0&lt;/code&gt;도 pointer가 nullptr이라는 것을 표현하기에 정확하지 않았고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NULL&lt;/code&gt;이 0으로 정의되어 있기 때문에 아래와 같은 문제점이 발생하기도 하였음.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// pointer 호출 의도로 f(p)를 의도했으나 f(n)이 호출됨.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;이 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nullptr&lt;/code&gt;은 새로 추가된 smart pointer에서도 사용되는 것으로 보임.
기존의 코드를 업그레이드 한다면, null 체크하는 부분과 초기 값 등을 모두 nullptr로 바꿔야 문제가 생기지 않을 것.&lt;/p&gt;

&lt;h2 id=&quot;enum-class&quot;&gt;enum class&lt;/h2&gt;
&lt;p&gt;자료형에 안전한 enum class가 생성되었다. 기존의 enum은 자료형과 상관 없는 아이들이었다.&lt;br /&gt;
기존의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enum&lt;/code&gt;은 Type에 상관 없이 int type으로 취급받아 숫자 혹은 다른 타입과 비교가 가능했다.&lt;br /&gt;
추가된 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;enum class&lt;/code&gt;는 이런 Type에 안전하다.(유연성은 좀 떨어져도)&lt;br /&gt;
enum이 업그레이드 된게 아니라, enum class가 추가된 것으로 기존의 enum은 그대로 사용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 기존의 enum&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Number&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ONE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TWO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// OK&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// enum class&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Number&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ONE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TWO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;             &lt;span class=&quot;c1&quot;&gt;// compile error. ZERO is not exist.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Number&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// compile error. also.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;Number&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// OK&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;     &lt;span class=&quot;c1&quot;&gt;// compile error. Number can&apos;t be int.&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static_cast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Number&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ZERO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// OK&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;class 명시까지 해서 좀 길어졌다고 생각할 수도 있지만, enum이 굉장히 많이 쓰이는 큰 프로그램에서는 중복 사용을 피하기 위해 KEY1_KEY2_KEY3_VALUE 와 같이 사용하던 것에 비해 훨씬 안전하고 효율적이어졌다.&lt;/p&gt;

&lt;h2 id=&quot;템플릿-괄호처리&quot;&gt;템플릿 괄호처리&lt;/h2&gt;
&lt;p&gt;C++03까지 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;gt;&amp;gt;&lt;/code&gt;은 항상 shift 연산자로 판단되어 왔지만, C++11은 템플릿에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;gt;&lt;/code&gt;를 잘 판별할 수 있게 되었다.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;vecotr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pair&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// C++03 &amp;gt;&amp;gt;를 못써서 이렇게&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pair&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// C++11 &amp;gt;&amp;gt;사용 가능&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;explicit-conversion-operators&quot;&gt;Explicit conversion operators&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://en.cppreference.com/w/cpp/language/cast_operator&quot;&gt;Cpp Docs&lt;/a&gt; 참고.&lt;br /&gt;
형 변환 연산자(conversion operator)로서 explicit을 사용할 수 있게 되었다. 딱 명시적으로 타입을 말해야만 변환이 된다.&lt;/p&gt;

&lt;h2 id=&quot;template-aliases&quot;&gt;Template aliases&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;using&lt;/code&gt;을 통해 기존의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;typedef&lt;/code&gt;의 역할을 더 강력하게 지원할 수 있음.&lt;br /&gt;
typedef는 template과 사용할 수 없었는데, using은 template과 사용할 수 있음.&lt;br /&gt;
또 기존에 typedef가 하던 것도 더 이쁘장하게 가능함.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FuncionType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;// old style&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FunctionType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// new introduce&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;First&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Third&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SomeType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SomeType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OtherType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TypedefName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// Invalid in typedef&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TypedefName&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SomeType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;OtherType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// valid in using&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;variadic-templates&quot;&gt;Variadic templates&lt;/h2&gt;
&lt;p&gt;가변인자 함수를 지원하던 것처럼, 가변 템플릿을 지원함.&lt;br /&gt;
C++03에서는 템플릿에서 가변 인자를 구현하려면 직접 지원하고 싶은 인자 수만큼 템플릿을 정의해주어야 했음.&lt;br /&gt;
가변인자 함수와 동일하게 사용할 수 있음.&lt;/p&gt;

&lt;h2 id=&quot;new-string-literal&quot;&gt;New String Literal&lt;/h2&gt;
&lt;p&gt;이전에는 unicode encoding의 string을 지원하지 않았는데, UTF-8, -16, -32의 인코딩을 지원함.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;u8&quot;I&apos;m a UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;u&quot;This is a UTF-16&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;U&quot;This is a UTF-32&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;또한 raw string literal을 위한 아래와 같은 리터럴도 제공함.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;R&quot;(The String Data \ stuff&quot;)&quot;&lt;/span&gt;
&lt;span class=&quot;s&quot;&gt;R&quot;delimiter(The String Data \ Stuff&quot;)delimiter&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;user-defined-literal&quot;&gt;User-defined Literal&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/ko-kr/cpp/cpp/user-defined-literals-cpp?view=vs-2019&quot;&gt;MS Docs&lt;/a&gt; 참고.&lt;br /&gt;
기존의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;float f = 10f&lt;/code&gt;와 같이 선언하는 것처럼, 리터럴을 맘대로 추가할 수 있게 되었음.&lt;br /&gt;
이를 통해 단위 변환, 환산 가중치 연산도 간단하게 가능해졌음. 예제 참고.&lt;/p&gt;

&lt;h2 id=&quot;multithreading-memory-model&quot;&gt;Multithreading memory model&lt;/h2&gt;
&lt;p&gt;C++11에서 multithread programming을 지원하기 위한 메모리 모델과 라이브러리를 지원.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;std::thread&lt;/code&gt;인데, 초기엔 멀티 플랫폼에서 제대로 동작하지 않는다는 말이 많았으나, 최근에는 잘 지원하는 것으로 보임.&lt;/p&gt;

&lt;h2 id=&quot;tls&quot;&gt;TLS&lt;/h2&gt;
&lt;p&gt;Thread Local Storage의 약자. java의 ThreadLocal 처럼, 스레드에 따라 다른 값을 갖도록 하는 변수를 선언.&lt;/p&gt;

&lt;h2 id=&quot;default--delete&quot;&gt;default &amp;amp; delete&lt;/h2&gt;
&lt;p&gt;default:&lt;br /&gt;
&lt;strong&gt;default construcotr&lt;/strong&gt;는 컴파일러가 기본적으로 생성하는 생성자인데, 이미 다른 생성자가 생성되어 있다면 컴파일러는 기본 생성자를 생성하지 않는다.&lt;br /&gt;
이런 상황에서 생성자 없이 객체를 명시만 하는 경우 오류가 발생하는데 이를 막기 위해 default constructor를 생성해야 하며, 이를 간단하게 해주는 것.&lt;br /&gt;
정의와 구현이 나뉘어 있는 경우, 이를 사용하여 구현을 따로 하지 않아도 됨.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NonDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// NotDefault() = default;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;NonDefault&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;NotDefault&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// default constructor가 없으므로 에러.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/20828907/the-new-syntax-default-in-c11&quot;&gt;default관련 stackoverflow&lt;/a&gt; 참고.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;default를 쓰면 trival과 POD이지만, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(){}&lt;/code&gt;같이 default를 직접 구현하면 trival도 POD도 아니게 됨.&lt;br /&gt;
```cpp
struct X{ X() = default; };
struct Y{ Y(){}; };&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;printf(“%d %d\n”, std::is_trivial&lt;X&gt;::value, std::is_pod&lt;X&gt;::value);
printf(&quot;%d %d\n&quot;, std::is_trivial&lt;Y&gt;::value, std::is_pod&lt;Y&gt;::value);&lt;/Y&gt;&lt;/Y&gt;&lt;/X&gt;&lt;/X&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
delete:  
**delete**는 해당 기능을 사용할 수 없게 만든다.  
```cpp
// copy가 불가능한 클래스 생성
struct NonCopyable {
    NonCopyable() = default;
    NonCopyable(const NonCopyable&amp;amp;) = delete;
    NonCopyable&amp;amp; operator=(const NonCopyable&amp;amp;) = delete;
};

// f에서 inst를 매개변수로 받을 수 없도록
struct NoInt {
    void f(double i);
    void f(int) = delete;
}

// f에서 double만 사용할 수 있도록
struct OnlyDouble {
    void f(double d);
    template&amp;lt;class T&amp;gt; void f(T) = delete;
};
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;C++03까지는 이런 코드들을 delete가 아닌 private으로 만들고, 구현부를 정의하지 않음으로써 사용하지 못하도록 했는데, 이젠 delete를 사용할 수 있음.&lt;br /&gt;
이전엔 링킹 시점에서 오류를 발견했다면, delete를 사용하면 컴파일 시점에서 오류를 발견할 수 있음.&lt;/p&gt;

&lt;h2 id=&quot;long-long&quot;&gt;long long&lt;/h2&gt;
&lt;p&gt;long long (int), unsigned int, … char16_t 등 새로운 자료형이 도입됐다.&lt;br /&gt;
응? 얘네가 C++11에서야 들어온 애들이었구나..&lt;/p&gt;

&lt;h2 id=&quot;static-assertion&quot;&gt;static assertion&lt;/h2&gt;
&lt;p&gt;컴파일 타임에 assertion 테스트를 할 수 있는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;static assert&lt;/code&gt;가 도입되었다.&lt;br /&gt;
template 같은 경우의 assertion 테스트가 용이하다.&lt;/p&gt;

&lt;h2 id=&quot;sizeof-member&quot;&gt;sizeof member&lt;/h2&gt;
&lt;p&gt;클래스 멤버에 대한 sizeof를 허용한다는 것인데.. 내 리눅스에서는 왜 C++03으로 되는지 의문..&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SomeType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;OtherType&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;SomeType&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;// not work with C++03&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;alignas--alignof&quot;&gt;alignas &amp;amp; alignof&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/ko-kr/cpp/cpp/alignment-cpp-declarations?view=vs-2019&quot;&gt;MS Docs&lt;/a&gt; 참고.&lt;br /&gt;
메모리 주소를 맞춰주는 역할을 하는 alignas와 그 크기를 찾는 alignof가 새로 추가 됨.&lt;br /&gt;
지정한 타입이 메모리의 어느 위치에 배치되는지를 확인하는 것.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;alignas&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Bar&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;       &lt;span class=&quot;c1&quot;&gt;// 4 bytes&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// 4 bytes&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;alignas&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;arr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;short&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;          &lt;span class=&quot;c1&quot;&gt;// 2 bytes&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;alignof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Bar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// output: 16&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;attributes&quot;&gt;Attributes&lt;/h2&gt;
&lt;p&gt;attribute가 도입되었는데, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;#pragma&lt;/code&gt;등으로 사용되던 extension들과 유사하게 제공하는 표준.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[[ ]]&lt;/code&gt;과 같은 형태로 도입되었고, standard attribute로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;noreturn&lt;/code&gt;과 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;carries_dependency&lt;/code&gt;가 도입되었음.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/10538291/what-is-the-point-of-noreturn&quot;&gt;noreturn stackoverflow&lt;/a&gt; 참고.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[[noreturn]] void f()&lt;/code&gt;의 의미는 return 값이 없다는게 아니라, call flow를 caller에게 보내지 않는다는 것이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;f()&lt;/code&gt; 내에서 exit, loop forever, throw exception 같은 상황이 발생할 경우이고, 이럴때 컴파일러에서의 최적화와 경고 출력을 하기 위함. 함부로 쓰기에는 위험.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;carries_dependency&lt;/code&gt;는 함수에 데이터 종속성을 지정하여 멀티스레드 동기화 관련해 효율적일 수 있게 함.&lt;/p&gt;

&lt;h2 id=&quot;tuple-type&quot;&gt;tuple type&lt;/h2&gt;
&lt;p&gt;구조체의 일반화로 볼 수 있는데, &lt;a href=&quot;#variadic-templates&quot;&gt;Variadic templates&lt;/a&gt;를 활용하여 생성되었음.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Types&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;tuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;default constructor가 있는 클래스들만으로 tuple을 만들면 내부의 다른 정의 없이 사용할 수 있고, 다른 동일한 tuple로 할당하는 것도 가능함.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tuple&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;test_tuple&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;test_tuple&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;proof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;6.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;AAA&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;regular-expression&quot;&gt;regular expression&lt;/h2&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include&lt;/span&gt; &lt;span class=&quot;cpf&quot;&gt;&amp;lt;regex&amp;gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;cp&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;regex&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rgx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\\&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;n&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;과 같이 사용할 수 있으나, 성능이 굉장히 안좋다고 함. 자바의 regular 보다도 훨씬 엄청나게 안좋다고 함. (그럼 왜 만든거…)&lt;/p&gt;

&lt;h2 id=&quot;smart-pointer&quot;&gt;smart pointer&lt;/h2&gt;
&lt;p&gt;C++11에 추가된 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unique_ptr&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;shared_ptr&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;weak_ptr&lt;/code&gt;을 기반으로 한 포인터.&lt;br /&gt;
꾸준히 업데이트 되고 있는 걳으로 보이나, 기존의 포인터와 호환하여 사용할 수 없음.&lt;/p&gt;
&lt;div class=&quot;language-cpp highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;unique_ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;make_unique&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// smart pointer&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;printf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%d&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// use as normal pointer&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// error&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;기존의 단점:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;딱 보면 포인터인지 모름.&lt;/li&gt;
  &lt;li&gt;delete 해야하는지의 여부를 모름.&lt;/li&gt;
  &lt;li&gt;delete 해야하더라도 delete []를 해야하는지 여부를 모름.&lt;/li&gt;
  &lt;li&gt;코드 상에서 delete 해주는 함수가 이미 구현되어 있는지 여부도 모름.&lt;/li&gt;
  &lt;li&gt;따라서 실수가 많아짐. (가비지 컬렉션 관련된)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;smart pointer:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;pointer를 감싸주는 일종의 wrapper.&lt;/li&gt;
  &lt;li&gt;pointer와 비슷하게 동작하며 여러 위험을 피할 수 있게 함.&lt;/li&gt;
  &lt;li&gt;생? pointer가 할 수 있는 대부분의 일을 하며 알아서 소멸 됨.&lt;/li&gt;
  &lt;li&gt;당연히 코드가 줄어듦.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;unique_ptr:&lt;br /&gt;
독점적 소유권. 포인터를 이동은 가능하나, 여러 포인터가 가르킬 수 없음. shared_ptr로 변환 가능.&lt;/p&gt;

&lt;p&gt;shared_ptr:&lt;br /&gt;
소유권이 나뉘며 가리키는 포인터가 늘어날 때마다 카운트가 증가하고, 카운트가 0이 될 때 소멸함.&lt;/p&gt;

&lt;p&gt;weak_ptr:&lt;br /&gt;
shared에서 서로 가리켜서 삭제되지 않는 경우에 대한 문제를 해결하기 위해 고안 됨.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm/language/cpp/cpp11</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm/language/cpp/cpp11</guid>
      </item>
    
      <item>
        <title>copy in Python</title>
        
          <description>&lt;p&gt;파이썬에서는 세 종류의 복사가 있다고 볼 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;생?복사, 얕은복사, 깊은복사&lt;br /&gt;
경우에 따라 의도치 않게 참조하거나, 참조가 무시될 수 있으니 알고 구별하여 사용해야 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;생-복사&quot;&gt;생 복사&lt;/h2&gt;
&lt;p&gt;생 복사는 할당 연산을 통해 복사되는 것을 말한다.&lt;br /&gt;
할당 시 주소까지 가져가기 때문에 아예 동일한 변수가 된다고 보면 된다.&lt;br /&gt;
한 쪽에서 수정시 다른 곳에서도 수정된다.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# b는 a의 주소를 받음.
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;same&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 동일 객체
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;same&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 동일 주소
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# b를 수정시 a도 수정
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# a를 수정시 b도 수정
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;얕은-복사&quot;&gt;얕은 복사&lt;/h2&gt;
&lt;p&gt;shallow copy라고 한다.&lt;br /&gt;
얕은 복사는 새로운 객체를 만들고, 원본 객체를 가리키는 참조를 새로운 복합 객체에 삽입한다.&lt;br /&gt;
즉, 내부 객체는 참조 객체이다.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;same&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# False
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;same_val&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# True
&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# b의 immutable object의 값이 변경되지 않음.
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 새로운 객체를 만들었기 때문에 b의 immutable object의 값이 변경되지 않음.
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# b의 mutable object의 값은 변경됨. 참조하고 있기 때문
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;얕은 복사의 방식(&lt;a href=&quot;https://stackoverflow.com/questions/2612802/how-to-clone-or-copy-a-list&quot;&gt;stackoverflow&lt;/a&gt; 참고)은 여러가지가 있음.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:]&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# 가독성 문제로 권장하지 않기도 함.
&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;copy&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;c1&quot;&gt;# a의 type을 알아내야 해서 살짝 더 느림.
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;깊은-복사&quot;&gt;깊은 복사&lt;/h2&gt;
&lt;p&gt;deep copy라고 한다.&lt;br /&gt;
깊은 복사는 새로운 객체를 만들고, 재귀적으로 원본 객체의 사본을 새로 만든 복합 객체에 삽입한다.&lt;br /&gt;
즉, 완전히 다른 객체를 만드는 것으로 객체 사이에 참조가 없다.&lt;br /&gt;
따라서 어떤 수정도 서로 간에 영향을 미치지 않는다.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;copy&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;deepcopy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;깊은 복사 방식엔 문제(&lt;a href=&quot;https://docs.python.org/ko/3/library/copy.html&quot;&gt;python docs&lt;/a&gt; 참고)가 있음.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;재귀 객체가 순한 루프를 만들 수 있음.
    &lt;ul&gt;
      &lt;li&gt;memo dictionary를 두어 이미 복사된 것을 저장하여 해결.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;깊은 복사는 모든 것을 복사하기 때문에, 복사본 간에 공유해야할 것도 복사할 수 있음.
    &lt;ul&gt;
      &lt;li&gt;user-defined class가 복사 연산이나 복사된 구성요소 집합을 override 하도록 함.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;함수-내-반환-시&quot;&gt;함수 내 반환 시&lt;/h2&gt;
&lt;p&gt;reference parameter로 전달된 함수에서, parameter 값을 변경시켜서 올려주고 싶다면 아래와 같이 해야한다.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;change_param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# calculated value
&lt;/span&gt;    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위와 같은 방식을 사용하는 이유는&lt;br /&gt;
위에서 배운 생복사, 얕은 복사, 깊은 복사 모두 함수 내부에서 선언된 list의 주소값을 사용하기 때문이다.&lt;br /&gt;
우리는 함수 밖에서 온 param의 주소 값을 그대로 가지고 수정해야 하는데 모든 copy는 새로운 list를 할당하여 실제 param을 변경하지 못한다.&lt;/p&gt;

&lt;p&gt;위 코드는 아래와 같은 문제가 있다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;index out of range를 피하기 위해 param에 사용하고자 하는 idx가 존재하는지 체크해야 함.&lt;/li&gt;
  &lt;li&gt;다 차원 list가 될 경우 더 많은 반복문과 위의 문제가 중첩됨.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이런 경우는 빈번히 사용될텐데&lt;br /&gt;
reference list의 주소를 그대로 두면서 copy를 진행하는 방법이 존재하나 찾아보았으나 없는 것으로 보인다.&lt;br /&gt;
아래와 같은 방법이 최선일 것으로 생각된다.&lt;/p&gt;
&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;change_param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]):&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;param&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;extend&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 기존의 list의 주소를 두고 값을 변경할 수 있다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm/language/python/python-copy</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm/language/python/python-copy</guid>
      </item>
    
      <item>
        <title>Time Complexity in Python data-structure</title>
        
          <description>&lt;p&gt;당연하게도 자료구조에 따라 python operation들의 time complexity가 달라진다.&lt;br /&gt;
같은 operation도 어떤 자료구조를 쓰느냐에 따라 성능이 달라질 수 있다.&lt;/p&gt;

&lt;p&gt;고민이 될 때는 아래 링크를 참고해서 각 동작들의 cost를 확인해보는 것도 좋겠다.&lt;/p&gt;

&lt;h2 id=&quot;기본-자료형-time-complexity&quot;&gt;기본 자료형 time complexity&lt;/h2&gt;

&lt;p&gt;아래 링크에서 정리된 표를 보면 좋다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://wiki.python.org/moin/TimeComplexity&quot;&gt;https://wiki.python.org/moin/TimeComplexity&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;libary&quot;&gt;libary&lt;/h2&gt;

&lt;h3 id=&quot;heapq&quot;&gt;heapq&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Operation&lt;/th&gt;
      &lt;th&gt;Average Big O&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;push&lt;/td&gt;
      &lt;td&gt;O(log n)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pop&lt;/td&gt;
      &lt;td&gt;O(log n)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/38806202/whats-the-time-complexity-of-functions-in-heapq-library/38833175&quot;&gt;https://stackoverflow.com/questions/38806202/whats-the-time-complexity-of-functions-in-heapq-library/38833175&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt&quot;&gt;https://www.ics.uci.edu/~pattis/ICS-33/lectures/complexitypython.txt&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/38806202/whats-the-time-complexity-of-functions-in-heapq-library/38833175&quot;&gt;https://stackoverflow.com/questions/38806202/whats-the-time-complexity-of-functions-in-heapq-library/38833175&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm/language/python/time-complexity</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm/language/python/time-complexity</guid>
      </item>
    
      <item>
        <title>IAM</title>
        
          <description>&lt;p&gt;IAM(Identity and Access Management)은 계정들의 리소스들에 대한 접근 권한을 관리하기 위해 제공하는 AWS의 서비스이다.
user와 user에 대한 permission을 부여할 수 있다.&lt;br /&gt;
IAM은 global service로 모든 리전에서 동일하게 사용할 수 있는 서비스이다.&lt;/p&gt;

&lt;h2 id=&quot;iam-항목들&quot;&gt;IAM 항목들&lt;/h2&gt;

&lt;h3 id=&quot;user&quot;&gt;User&lt;/h3&gt;

&lt;p&gt;사용자가 누구인지(인증)와 어떤 권한을 가지고 있는지를 설정한다.  &lt;br /&gt;
제거하기 전까지 영구적인 key 값을 갖는다.&lt;br /&gt;
따라서 일반적으로 long term credential에 사용된다.&lt;/p&gt;

&lt;p&gt;보안, 권한 관리 등의 목적으로 root 계정보다 IAM user를 등록하는 것을 권장한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;IAM을 사용하지 않고 root account로 진행해도 되지만 root account는 모든 권한을 가지고 있어 제어를 할 수 없는 문제가 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;group&quot;&gt;Group&lt;/h3&gt;

&lt;p&gt;여러 User들을 그룹화하여 권한을 부여한다.&lt;/p&gt;

&lt;h3 id=&quot;role&quot;&gt;Role&lt;/h3&gt;

&lt;p&gt;Role에 권한을 부여하고 user나 service에 role을 주는 방식으로 권한을 할당한다.&lt;br /&gt;
user에게 일시적으로 권한을 부여할 수 있기 때문에 short term credential에서 많이 사용된다. (STS와 함께)&lt;/p&gt;

&lt;h2 id=&quot;iam-policies&quot;&gt;IAM Policies&lt;/h2&gt;

&lt;p&gt;IAM policy는 JSON으로 관리되며 Effects, Action, Resource, Condition, Policy Variables를 가지고 있는다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;policy 예시: &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_examples_aws_mfa-dates.html&quot;&gt;MFA를 사용한 특정 액세스 허용&lt;/a&gt;&lt;/p&gt;

  &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;service-prefix-1:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;service-prefix-2:action-name-a&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;service-prefix-2:action-name-b&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Condition&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Bool&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;aws:MultiFactorAuthPresent&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;DateGreaterThan&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;aws:CurrentTime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2017-07-01T00:00:00Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;DateLessThan&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;aws:CurrentTime&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2017-12-31T23:59:59Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

&lt;/div&gt;

&lt;p&gt;정책으로 권한을 부여한다.&lt;br /&gt;
DENY가 명시되어 있다면 ALLOW 보다 우선 처리된다.&lt;br /&gt;
Best Practice는 보안을 위해 최소한의 권한만을 부여하는 것이다.&lt;/p&gt;

&lt;h3 id=&quot;aws-managed-policies&quot;&gt;AWS managed Policies&lt;/h3&gt;

&lt;p&gt;AWS에 의해 정의된 policy가 있고 이런 policy들은 서비스가 업그레이드 됨에 따라 변경되기도 한다.  &lt;br /&gt;
specific한 작업들에 관한 policy.&lt;br /&gt;
대표적으로 AdministratorAccess, PowerUserAcess가 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;AWS에서 관리하는 policy list - &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_job-functions.html&quot;&gt;link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;AWS manag4ed Policy들을 보면 policy 사용법을 더 이해할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;AdministratorAccess&lt;/strong&gt;:&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;*&lt;/code&gt;을 사용해서 모든 권한을 허용하는 policy.&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;PowerUserAccess&lt;/strong&gt;:&lt;br /&gt;
NotAction을 명시하여 대부분의 권한을 허용하지 않는다.  &lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;Effect&quot;:&quot;Deny&quot;&lt;/code&gt;를 쓰지 않는 것은, deny를 하게되면 이후에 허용하고 싶은 action들이 모두 무시되기 때문이다.&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;NotAction&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iam:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;organizations:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;account:*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iam:CreateServiceLinkedRole&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iam:DeleteServiceLinkedRole&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iam:ListRoles&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;organizations:DescribeOrganization&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;account:ListRegions&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;iam-policy-conditions&quot;&gt;IAM Policy Conditions&lt;/h3&gt;

&lt;p&gt;IAM policy condition은 policy의 효력이 발생하는 시점을 지정할 수 있는 요소이다.&lt;br /&gt;
이렇게 생겼다.&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Condition&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;{condition-operator}&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;{condition-key}&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;{condition-value}&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;operator type에 따라 여러가지 연산을 제공한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;String의 경우, String Equals, StringNotEquals, String Like …&lt;/li&gt;
  &lt;li&gt;Date의 경우, DateEquals, DateLessThan …&lt;/li&gt;
  &lt;li&gt;condition list - &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_elements_condition_operators.html&quot;&gt;link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;iam-policies-variables-and-tags&quot;&gt;IAM Policies Variables and Tags&lt;/h3&gt;

&lt;p&gt;Variable이란 policy에서 사용할 수 있는 aws에서 정의한 변수들이고,&lt;br /&gt;
Tag란 User나 Resource에 Tag를 하여 Variable처럼 사용할 수 있는 key 값이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;variable과 tag aws docs - &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_variables.html&quot;&gt;link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Example: ${aws:username}&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;“Resource”: [“arn:aws:s3:::mybucket/${aws:username}/*”]&lt;/li&gt;
  &lt;li&gt;username으로 시작하는 bucket에 접근할 수 있다.&lt;/li&gt;
  &lt;li&gt;모든 유저가 s3에 각자의 bucket을 갖도록 명시할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;AWS specific variables&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;aws:CurrentTime, aws:TokenIssueTime, aws:principaltype, aws:SecureTransport …&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Service specific variables&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;s3:prefix, s3:max-keys, s3:x-amz-acl, sns:Endpoint, sns:Protocol…&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Tag Based&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;iam:ResourceTag/key-name, aws:PrincipalTag/key-name …&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;iam-role-vs-resource-based-policies&quot;&gt;IAM Role vs Resource Based Policies&lt;/h3&gt;

&lt;p&gt;role(user, application, service)을 assume할 때 original permission을 포기하고 role에 설정된 permission을 갖게 된다.  &lt;br /&gt;
resource-based policy를 사용하면 이런 permission을 포기하지 않을 수 있다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;A가 dynamoA에 role을 가지고 있다.&lt;br /&gt;
B가 S3B에 role을 가지고 있다.&lt;/p&gt;

  &lt;p&gt;A가 dynamoA에서 S3B로 data를 dump하고 싶다.&lt;/p&gt;

  &lt;ol&gt;
    &lt;li&gt;A가 B의 role을 받아가면 A의 permission을 포기해야 하기 때문에 dynamoA의 role을 잃는다.&lt;/li&gt;
    &lt;li&gt;A가 S3B의 resoure-based policy에 추가되면 dynamoA의 policy를 잃지 않을 수 있다.&lt;/li&gt;
  &lt;/ol&gt;

&lt;/div&gt;

&lt;h2 id=&quot;iam-permission-boundaries&quot;&gt;IAM Permission Boundaries&lt;/h2&gt;

&lt;p&gt;Bouddary는 user나 role에 대한 maximum permission을 설정하는 것이다.&lt;br /&gt;
Boundary는 user와 role에 대해 지원되고 group은 지원하지 않는다.&lt;/p&gt;

&lt;p&gt;Boundary를 명시하면 policy가 있더라도 permission을 갖지 못하게 할 수 있다.
boundary에서 명시한 permission 중 plicy가 추가된 permission만 효력이 있다.&lt;br /&gt;
&lt;img src=&quot;/images/post/aws/iam/boundray.png&quot; alt=&quot;boundray.png&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;boundary와 policy들 사이의 effective를 diagram으로 확인 - &lt;a href=&quot;https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html&quot;&gt;link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;IAM permission boundary&lt;/p&gt;
  &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;s3:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;cloudwatch:*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ec2:*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;IAM permission&lt;/p&gt;
  &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012-10-17&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Statement&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Effect&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Allow&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Action&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;iam:CreateUser&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;Resource&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;위와 같이 boundray와 permission이 있다면 iam action은 boundary에 없으므로 permission이 있더라도 effective하지 않다.&lt;/p&gt;

&lt;/div&gt;

&lt;h3 id=&quot;refernce&quot;&gt;refernce&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;AWS docs&lt;/li&gt;
  &lt;li&gt;udemy, Ultimate AWS Certified Solutions Architect Professional 2022&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/iam</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/iam</guid>
      </item>
    
      <item>
        <title>기본개념과 용어</title>
        
          <description>&lt;h2 id=&quot;클라우드-컴퓨팅&quot;&gt;클라우드 컴퓨팅&lt;/h2&gt;
&lt;p&gt;컴퓨팅을 인프라를 하드웨어로 사용하는 것이 아니라 소프트웨어로 사용하는 방식이다.&lt;br /&gt;
데이터 센터를 물리적으로 구축하던 것을 인터넷을 통해 온디맨드로 사용하고 사용한 만큼의 비용을 지불하는 것을 말한다.&lt;/p&gt;

&lt;h2 id=&quot;클라우드-컴퓨팅-모텔&quot;&gt;클라우드 컴퓨팅 모텔&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;IaaS(Infrastructure as a Service)&lt;/strong&gt;:&lt;br /&gt;
기본적인 요소만 갖추어, (네트워킹, 컴퓨팅, 스토리지)&lt;br /&gt;
마치 물리적인 장비인 것처럼 사용할 수 있는 것.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Paas(Platform as a Service)&lt;/strong&gt;:&lt;br /&gt;
윈도우나 DB와 같은 것들을 제공하는 상태의 서비스.&lt;br /&gt;
하드웨어나 운영체제를 관리할 필요 없이 실행할 수 있는 상태.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;SaaS(Software as a Service):&lt;/strong&gt;&lt;br /&gt;
내가 무언가를 준비하지 않아도 사용할 수 있는 상태.&lt;/p&gt;

&lt;h2 id=&quot;클라우드-컴퓨팅-장점&quot;&gt;클라우드 컴퓨팅 장점&lt;/h2&gt;
&lt;p&gt;인프라 구축에 들어가는 자산/시간의 비용을 줄일 수 있다는 장점이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;사용한만큼 금액을 지불해 초기 투자 비용이 없음.&lt;/li&gt;
  &lt;li&gt;컴퓨터 환경에서 리소스 세팅 시간이 크게 감소.&lt;/li&gt;
  &lt;li&gt;인프라 구축과 관리에 시간과 비용 낭비 x.&lt;/li&gt;
  &lt;li&gt;필요한 경우 쉽게 추가/축소 가능.&lt;/li&gt;
  &lt;li&gt;전 세계의 리전에 쉽게 배포가 가능.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;awsamazon-web-services&quot;&gt;AWS(Amazon Web Services)&lt;/h2&gt;
&lt;p&gt;AWS에는 스토리지, 컴퓨팅, 네트워킹, 데이터베이스, 어플리케이션과 개발 관리 도구 등의 서비스가 있다.&lt;/p&gt;

&lt;p&gt;AWS의 서비스는 관리형/비관리형의 분리로 나뉜다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;비관리형 서비스&lt;/strong&gt;:&lt;br /&gt;
AWS가 관리해주지 않는 서비스.&lt;br /&gt;
사용자가 확장, 내결함성 및 가용성을 관리한다.&lt;br /&gt;
오류가 발생하거나 리소스를 쓸 수 없을 때 서비스가 어떻게 할지를 사용자가 관리해야한다는 것이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ex) EC2의 경우 OS를 올려서 방화벽 등의 관리를 직접 해야 함.&lt;/li&gt;
  &lt;li&gt;정교하게 제어할 수 있다는 장점 / 직접 제어해야한다는 단점&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;관리형 서비스&lt;/strong&gt;:&lt;br /&gt;
AWS가 관리해주는 서비스.&lt;br /&gt;
일반적으로 확장, 내결함성 및 가용성이 서비스에 내장되어 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ex) S3의 경우 사용자가 관리할 부분이 없음.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;클라우드-배포-모델&quot;&gt;클라우드 배포 모델&lt;/h2&gt;
&lt;p&gt;올인 클라우드: 모든 서비스를 클라우드에 올려서 사용하는 것.&lt;br /&gt;
하이브리드: 구축되어 있는 인프라와 함께 사용하는 방식. data center를 보유하거나 등의 경우 클라우드와 같이 활용.&lt;/p&gt;

&lt;h2 id=&quot;마이크로-서비스&quot;&gt;마이크로 서비스&lt;/h2&gt;
&lt;p&gt;모든 프로세스가 결합되어 단일 서비스로 진행되는 방식을 모놀리식 아키텍쳐라고 한다.&lt;br /&gt;
모놀리식 아키텍쳐는 단일 서비스이기 때문에 아래와 같은 단점을 갖는다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;확장이 어려움. 서비스가 커질수록 업데이트 및 유지관리가 어려움. 새로운 기술 도입이 어려움.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이러한 방식은 서비스에 적합하지 않아, 서비스 지향 아키텍쳐의 일종으로 나온 것이 마이크로 서비스이다.&lt;br /&gt;
마이크로 서비스는 기능별로 별도의 어플리케이션을 가지고 독립적으로 기능을 수행하는 구조이다.&lt;br /&gt;
따라서 모놀리식의 단점을 해결하는 아래와 같은 장점을 갖는다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;장점&lt;/strong&gt;:&lt;br /&gt;
각 서비스간에 다른 서비스에 영향을 주지 않아 확장이 쉽고 빠르다.&lt;br /&gt;
따라서, 새로운 기술의 도입과 테스트, 반영이 쉽다.&lt;br /&gt;
따라서, 서비스 마다 독립적으로 수요를 파악해 가용성을 조정할 수 있다. &lt;br /&gt;
따라서, 단일 서비스에서의 문제가 전체 서비스에 끼치는 영향이 줄어든다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;단점&lt;/strong&gt;:&lt;br /&gt;
각 서비스 간 호출에 대한 처리 비용이 더 많이 든다.&lt;br /&gt;
테스트가 더 복잡할 수 있다.&lt;br /&gt;
구조적으로 너무 많은 서비스를 만들 수도 있다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/ko/microservices/&quot;&gt;AWS의 MicroServices&lt;/a&gt; 참고.&lt;br /&gt;
AWS의 각 서비스는 마이크로 서비스 아키텍쳐를 지원하기 좋게 만들어져 있다.&lt;/p&gt;

&lt;h2 id=&quot;서버리스&quot;&gt;서버리스&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;#클라우드-컴퓨팅&quot;&gt;클라우드 컴퓨팅&lt;/a&gt;에서 본 클라우드 컴퓨팅의 장점을 넘어서 서버에 대한 고려를 아예 하지 않도록 하는 아키텍쳐.&lt;br /&gt;
서버에 대한 관리는 클라우드 사업자가 맡아서 하며, 필요한 기능을 함수로 구현하여 이를 서버에 별도 준비 없이 사용한다.&lt;br /&gt;
개발자는 함수 형태로 기능들을 구현하면, 서버리스 컴퓨팅 시 필요에 따라 event driven 방식으로 함수를 호출하여 사용하는 구조이다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;장점&lt;/strong&gt;:&lt;br /&gt;
쉽게 안정적인 대용량 서버를 만들 수 있다.&lt;br /&gt;
따라서 개발 기간이 단축되고, 개발자가 서버 운영/관리에서 자유로워져 개발에 집중할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;단점&lt;/strong&gt;:&lt;br /&gt;
클라우드 업체를 바꾸기가 어려울 수 있다.&lt;br /&gt;
서버 인프라에 문제가 생길 경우 원인을 찾거나 해결하는데 어려움이 있다.&lt;/p&gt;

&lt;p&gt;AWS에서는 S3, DynamoDB 등이 서버리스 서비스라고 할 수 있고&lt;br /&gt;
컴퓨팅 서비스에서는 Lambda가 서버리스를 지원한다.&lt;/p&gt;

&lt;h2 id=&quot;aws-infra&quot;&gt;AWS Infra&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;DC (데이터 센터)&lt;/strong&gt;:&lt;br /&gt;
단일 데이터 센터에서 수천 개의 서버를 운영한다.&lt;br /&gt;
모든 데이터 센터는 온라인으로 연결된다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;AZ (가용 영역)&lt;/strong&gt;:&lt;br /&gt;
AZ는 하나 이상의 DC로 이루어진다.&lt;br /&gt;
재해가 발생했을 때 다른 쪽에서 서비스 가능하도록하는 결함 분리 방식으로 설계되어 있다.&lt;br /&gt;
고속 프라이빗 링크를 통해 다른 AZ와 상호 연결된다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Region&lt;/strong&gt;:&lt;br /&gt;
두 개 이상의 AZ를 묶어 Region이라고 한다.&lt;/p&gt;

&lt;h2 id=&quot;region-선택&quot;&gt;Region 선택&lt;/h2&gt;
&lt;p&gt;인스턴스를 시작할 때 AZ를 선택하거나 AWS가 AZ를 선택하도록 할 수 있다.&lt;br /&gt;
리전을 선택할 때는 아래와 같은 사항들을 고려해서 선택해야 한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;법적 요구사항&lt;br /&gt;
특정 데이터의 경우 한국에 있어야 한다면 서울 리전만 사용할 수 있음.&lt;/li&gt;
  &lt;li&gt;지연시간(근접성)&lt;br /&gt;
클라이언트에게 가장 가깝고 빠르게 응답할 수 있는 위치.&lt;br /&gt;
&lt;a href=&quot;https://www.cloudping.info/&quot;&gt;https://www.cloudping.info/&lt;/a&gt; 에서 현 위치에서의 각 리전별 Latency를 확인할 수 있음.&lt;/li&gt;
  &lt;li&gt;사용 가능 서비스&lt;br /&gt;
리전 별 사용가능 서비스가 다름.&lt;/li&gt;
  &lt;li&gt;비용
리전 별 비용이 다름.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;서비스는 Region/AZ 기반 서비스로 나뉜다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;가용영역 중심 서비스&lt;/strong&gt;:&lt;br /&gt;
하나의 AZ에서 죽었을 때 다른 곳에서 서비스가 가능하도록 직접 설계해야 한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;리전 기반 서비스&lt;/strong&gt;:&lt;br /&gt;
기본적으로 다른 AZ에 서비스를 복제하여 AZ에서 죽었을 때에 대한 고려를 하지 않아도 된다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/terms</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/terms</guid>
      </item>
    
      <item>
        <title>기본 서비스</title>
        
          <description>&lt;p&gt;AWS에서 가장 기본적으로 사용되는 서비스는 EC2와 이와 같이 사용되는 ELB, Auto Scaling이 있다.&lt;/p&gt;

&lt;h2 id=&quot;ec2elastic-compute-cloud&quot;&gt;EC2(Elastic Compute Cloud)&lt;/h2&gt;
&lt;p&gt;하드웨어를 가상화하는 서비스. 가장 기본적인 클라우드 컴퓨터.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;CPU, mem, storage, net capa를 고려하여 여러 종류의 HW를 선택할 수 있음. (&lt;a href=&quot;https://aws.amazon.com/ko/ec2/instance-types/&quot;&gt;Instance Family Type&lt;/a&gt; 참고)&lt;br /&gt;
인스턴스를 추가하여 OS를 설치해서 사용.&lt;/li&gt;
  &lt;li&gt;AMI(Amazon Machine Image)를 사용하여 간단하고 빠르게 설치.&lt;br /&gt;
인스턴스를 사용할 때 추가하고 사용하지 않을 때 중지/종료해야 함. (비용 문제)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;요금제 구성은 아래와 같다.&lt;br /&gt;
&lt;strong&gt;온디맨드&lt;/strong&gt; - 사용한 만큼 낸다. 쓰지 않으면 종료.&lt;br /&gt;
&lt;strong&gt;예약 인스턴스&lt;/strong&gt; - 미리 예약하여 사용. 약정에 따라 할인받을 수 있음.&lt;br /&gt;
&lt;strong&gt;스팟 인스턴스&lt;/strong&gt; - 남는 서버를 싸게 줌. 쓰다가 남는게 없으면 스팟으로 동작하는게 제거될 수 있고 서비스 종료될 수 있음을 고려해야 함.&lt;/p&gt;

&lt;h2 id=&quot;elbelastic-load-balancing&quot;&gt;ELB(Elastic Load Balancing)&lt;/h2&gt;
&lt;p&gt;단일 end point로 클라이언트가 들어왔을 때 이를 매핑해주는 역할을 한다.&lt;br /&gt;
수신되는 트래픽을 EC2 인스턴스, 컨테이너 등에 자동으로 분산.&lt;br /&gt;
애플리케이션 트래픽의 로드를 처리할 수 있음.&lt;/p&gt;

&lt;p&gt;인스턴스 상태 확인하는 역할도 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;주기적으로 인스턴스 테스트를 하여 상태를 확인.&lt;/li&gt;
  &lt;li&gt;이를통해 정상적인 인스턴스로만 라우팅을 함.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;고정 세션 기능을 제공한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;여러 인스턴스를 사용하면 로드 밸런스 과정에서 다른 인스턴스를 사용할 때 세션이 유지되지 않는 것을 막기 위함.&lt;/li&gt;
  &lt;li&gt;고정 세션 기능을 사용하면 사용자 세션을 특정 애플리케이션 인스턴스에 바인딩 할 수 있음.&lt;/li&gt;
  &lt;li&gt;그치만, 로드 밸런싱 문제로 세션을 외부의 cache/db로 유지하는 방식이 권장됨.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;auto-scaling&quot;&gt;Auto Scaling&lt;/h2&gt;
&lt;p&gt;적절한 수의 EC2 인스턴스를 유지하도록 자동으로 생성/종료하는 서비스.&lt;br /&gt;
사용자 수에 따라 확장/축소할 수 있음.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;수동 조정&lt;/strong&gt; - 최대/최소 원하는 용량 들을 설정.&lt;br /&gt;
&lt;strong&gt;예약 조정&lt;/strong&gt; - 예측가능한 반복 이벤트에 따라 확장/축소가 발생해야하는 시간을 지정.&lt;br /&gt;
&lt;strong&gt;동적 조정&lt;/strong&gt; - 네트워크 대역폭 등 값을 가지고 더 상세하게 조정.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/basic-service</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/basic-service</guid>
      </item>
    
      <item>
        <title>API Gateway, SQS, SNS</title>
        
          <description>&lt;h2 id=&quot;amazon-api-gateway&quot;&gt;Amazon API Gateway&lt;/h2&gt;
&lt;p&gt;API Gateway는 API를 생성/게시/유지관리/모니터링/보안 적용할 수 있는 서비스이다.&lt;br /&gt;
API Gateway를 완전 관리형 서비스로 제공한다.&lt;br /&gt;
REST API를 제공하여 AWS 서비스를 활용할 수 있도록 한다.&lt;br /&gt;
Gateway로서 트래픽 관리, 인증과 엑세스 제어, 모니터링, API 버전 관리, 다중 API 호출 처리 등의 작업을 처리한다.&lt;/p&gt;

&lt;h3 id=&quot;메세지-변환-및-검증&quot;&gt;메세지 변환 및 검증&lt;/h3&gt;
&lt;p&gt;메시지 변환 및 검증 기능을 제공한다.&lt;br /&gt;
요청/응답 메시지에 대한 스키마를 정의하기 위해 모델을 생성할 수 있다.&lt;br /&gt;
요청/응답 페이로드 및 헤더는 모델을 기준으로 적절한 형식인지 검증할 수 있다.&lt;br /&gt;
매핑 템플릿을 사용해서 하나의 모델에서 다른 모델로 변환할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;백엔드-리소스-노출&quot;&gt;백엔드 리소스 노출&lt;/h3&gt;
&lt;p&gt;외부에서 직접적으로 서비스 서버에 접근하지 않고 gateway를 통해서 백엔드를 감출 수 있다.&lt;br /&gt;
현관문 역할을 하는 API를 생성할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;캐시&quot;&gt;캐시&lt;/h3&gt;
&lt;p&gt;API 응답을 클라이언트에 더 가깝게 가져와서 캐시한다.&lt;br /&gt;
캐시를 이용해서 컴퓨팅 리소스를 사용하지 않고 성능을 개선할 수 있음.&lt;/p&gt;

&lt;h3 id=&quot;api-엑세스-제어&quot;&gt;API 엑세스 제어&lt;/h3&gt;
&lt;p&gt;단일 단말에서의 초당 요청 개수, 일일 요청 개수 등을 조절할 수 있다.&lt;br /&gt;
하나의 클라이언트가 백엔드 시스템 용량을 과다하게 차지하는 것을 방지할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;api-메서드-호출에-보안-적용&quot;&gt;API 메서드 호출에 보안 적용&lt;/h3&gt;
&lt;p&gt;API 엑세스에 보안을 적용할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;리소스 정책&lt;/strong&gt;: 사용자가 API를 호출할 수 있는지 여부를 제어하기 위해 API에 연결하는 Json 정책 문서&lt;br /&gt;
&lt;strong&gt;IAM 권한 정책&lt;/strong&gt;: API의 생성과 배포, 메서드 호출의 권한 정책을 생성.
&lt;strong&gt;VPC&lt;/strong&gt;: Virtual Private Cloud 클라이언트를 통해서 액세스할 수 있는 API 엔드포인트 생성.&lt;br /&gt;
&lt;strong&gt;Amazon Cognito, Lambda 권한부여자&lt;/strong&gt;: Lambda 권한부여자나 Cognito와 통합하여 백엔드 리소스에 액세스 하기 전에 클라이언트를 인증.&lt;/p&gt;

&lt;h3 id=&quot;gateway-활용&quot;&gt;Gateway 활용&lt;/h3&gt;
&lt;p&gt;CloudWatch에 로그 메시지 및 상세 지표를 전송하여 API 로깅을 할 수 있음.&lt;/p&gt;

&lt;p&gt;Lambda 함수를 CRUD 백엔드로 붙여서 해당 데이터를 DynamoDB에 저장할지 S3에 저장할지 구분.&lt;/p&gt;

&lt;h2 id=&quot;sns와-sqs&quot;&gt;SNS와 SQS&lt;/h2&gt;
&lt;p&gt;프로세스는 sync(바로 처리 후 응답) 방식과 async(queue에 넣어 순차 처리) 방식으로 나뉜다.&lt;/p&gt;

&lt;h3 id=&quot;sqs-simple-queue-service&quot;&gt;SQS (Simple Queue Service)&lt;/h3&gt;
&lt;p&gt;async 처리를 하는 완전관리형 서비스이다.&lt;br /&gt;
처리를 할 리소스를 기다리는 메시지를 저장하는 Queue의 역할을 한다.&lt;br /&gt;
사용자가 메시지 저장/관리에 신경쓰지 않고 메시지를 활용하는 애플리케이션만 집중할 수 있다.&lt;br /&gt;
EC2 와 결합하여 사용되며 EC2가 죽어도 메시지가 남아 보다 안정적이다.&lt;br /&gt;
수신측이 폴링을 통해 메시지를 가져가며 수신과 1대1 관계이다.
sendMessageBatch로 최대 10개의 메세지를 한 번에 보낼 수 있다.&lt;/p&gt;

&lt;p&gt;표준 대기열과 FIFO 대기열을 지원한다.&lt;/p&gt;

&lt;p&gt;표준 대기열:&lt;br /&gt;
메시지 순서가 보장되지 않음.&lt;br /&gt;
메시지가 중복될 수 있음.&lt;br /&gt;
처리량이 비교적 많음.&lt;/p&gt;

&lt;p&gt;FIFO 대기열:&lt;br /&gt;
메시지 순서가 유지됨.&lt;br /&gt;
메시지가 중복 없이 한 번만 수신됨.&lt;br /&gt;
처리량에 제한. (초당 300개의 트랜잭션)&lt;/p&gt;

&lt;p&gt;메시지는 최대 256KB의 크기이고 제한 시간 초과(기본 30초, 최대 12시간), 메시지 보존 기간(기본 4일, 최소 60초, 최대 14일)를 갖는다.&lt;br /&gt;
&lt;strong&gt;제한 시간 초과&lt;/strong&gt;:&lt;br /&gt;
하나의 Queue는 생산자/소비자가 가져가는게 규칙인데, 멀티 스레드나 여러 프로그램에서 Queue를 쳐다볼 수 있다는 것이고 이거를 막는것이 제한 시간 초과이다.&lt;br /&gt;
예를 들면 여러 EC2 인스턴스가 동시에 처리하는 문제가 생길 수 있음.&lt;br /&gt;
SQS가 송수신이 1대1이라는 것은 수신이 처리를 하고 메시지를 지워서 혼자만 보기 때문에 1대1이라고 하는 것이고, 보기 전까지 문제가 발생할 수 있는 부분에 대한 내용.&lt;/p&gt;

&lt;p&gt;메시지를 수신하면 처리했다는 것을 알리기 위해 메시지를 지워야 한다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://docs.aws.amazon.com/AWSSimpleQueueService/latest/APIReference/Welcome.html&quot;&gt;SQS 작업 API&lt;/a&gt; 참고.&lt;/p&gt;

&lt;h3 id=&quot;sns-simple-notification-service&quot;&gt;SNS (Simple Notification Service)&lt;/h3&gt;
&lt;p&gt;메시지가 들어오는 순간 구독자에게 메시지를 알려주는 서비스이다.&lt;br /&gt;
push 방식으로 알림이 전송되기 때문에 새로운 정보/업데이트를 정기적으로 확인할 필요가 없다.&lt;br /&gt;
구독자에는 Lambda, SQS, http, email, SMS, mobile을 등록할 수 있다.&lt;br /&gt;
수신측이 푸시를 통해 수동적으로 메시지를 받으며, 1대 다수의 관계이다.&lt;/p&gt;

&lt;p&gt;메시지의 순서는 보장되지 않으며 게시된 후에는 삭제할 수 없다.(남한테 보내는거니까)&lt;br /&gt;
SNS 전송 정책에서 메시지 전송 실패시 재시도를 제어할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.aws.amazon.com/sns/latest/api/API_Operations.html&quot;&gt;SNS API&lt;/a&gt; 참고.&lt;/p&gt;

&lt;h3 id=&quot;팬아웃&quot;&gt;팬아웃&lt;/h3&gt;
&lt;p&gt;메시지를 SNS로 받아와서 SNS가 여러 대의 SQS로 메시지를 전달하는 것.&lt;br /&gt;
각 SQS는 서로 다른 작업을 하는 EC2와 연결될 수 있는 방식이다.&lt;/p&gt;

&lt;p&gt;예를들어 팬아웃 방식을 이미지 처리에 사용할 수 있다.&lt;br /&gt;
SNS로 메세지를 받으면 SNS는 썸네일 생성/모바일용 이미지 생성/웹용 이미지 생성의 각각의 SQS에 메시지를 보내도록 처리할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;amazon-mq&quot;&gt;Amazon MQ&lt;/h3&gt;
&lt;p&gt;Apache ActiveMQ를 위한 관리형 메시지 브로커 서비스.&lt;br /&gt;
메시지 브로커를 클라우드에서 쉽게 설정하고 운영할 수 있도록 한다.&lt;br /&gt;
기존 애플리케이션의 메시지 기능을 클라우드로 마이그레이션 할 때 사용이 권장된다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/gw-sqs-sns</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/gw-sqs-sns</guid>
      </item>
    
      <item>
        <title>container</title>
        
          <description>&lt;p&gt;container란 배포를 쉽게할 수 있는 방법으로 사용한다.&lt;br /&gt;
개발자가 운영팀의 도움 없이도 배포를 할 수 있다.&lt;br /&gt;
개발을 하고 배포하는데 설치/setup 해야하는 작업들이 굉장히 많다. (os/application)&lt;/p&gt;

&lt;p&gt;배포 방식의 변화:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;os/app 들을 차례대로 설치 - 너무 오래 걸림&lt;/li&gt;
  &lt;li&gt;os와 platform을 image화 하여 copy/paste로 하여 배포 - os 배포 시간과 부팅 시간이 걸림&lt;/li&gt;
  &lt;li&gt;os의 가상화를 이용해 os는 동일하게 사용하고 컨테이너화(app만 독립적으로 동작하도록 쪼개서 파티션화) 함 - app 실행 시간만 걸림&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;런타임 엔진&lt;/strong&gt;, &lt;strong&gt;코드&lt;/strong&gt;, &lt;strong&gt;종속항목&lt;/strong&gt; 으로 구성된다.&lt;br /&gt;
서버 &amp;gt; 호스트 OS &amp;gt; 도커 위에 각 컨테이너(Bins/Libs, app)가 올라간다.&lt;/p&gt;

&lt;h2 id=&quot;도커-컨테이너&quot;&gt;도커 컨테이너&lt;/h2&gt;
&lt;p&gt;도커 컨테이너는 애플리케이션을 실행하는데 필요한 모든 항목(코드, 실행시간, 시스템 도구, 라이브러리 …)를 포함하고 있는 배포의 표준화된 단위이다.&lt;/p&gt;

&lt;p&gt;간편하게 서비스 모델링을 할 수 있다.&lt;br /&gt;
경량, 이식성, 일관성을 갖는다.&lt;br /&gt;
모든 앱 모든 언어에서 사용할 수 있다.&lt;br /&gt;
한 번만 작성하여 패키지화 해두면 어디서든 실행할 수 있다.&lt;br /&gt;
앱을 &lt;a href=&quot;https://meansoup.github.io/blog/2020/03/25/aws_terms/#%EB%A7%88%EC%9D%B4%ED%81%AC%EB%A1%9C-%EC%84%9C%EB%B9%84%EC%8A%A4&quot;&gt;마이크로 서비스&lt;/a&gt;로 더욱 쉽게 분리할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;개발-수명-주기&quot;&gt;개발 수명 주기&lt;/h2&gt;
&lt;p&gt;Dockerfile은 컨테이너에 포함되는 구성 요소를 포함하고 있는 파일로, 명령어들로 이루어져 있다.&lt;br /&gt;
Dockerfile을 통해 컨테이너 이미지를 생성하고 이 이미지를 다운 받아서 사용하도록 한다.&lt;/p&gt;

&lt;h2 id=&quot;도커-이미지&quot;&gt;도커 이미지&lt;/h2&gt;
&lt;p&gt;도커 이미지는 파일 모음으로 아래와 같은 구조(스택)로 도커 이미지가 구성된다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;커널(bootfs) &amp;gt; 기본 이미지(Debian) &amp;gt; 이미지(emacs 추가) &amp;gt; 이미지(Apache 추가) &amp;gt; 컨테이너(쓰기 가능)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;지침은 Dockerfile에 저장된다.&lt;br /&gt;
대부분 동일한 os를 기반하여야 한다.&lt;br /&gt;
도커 이미지를 저장하기 위해 amazon ECR/Docker Hub/private repository를 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;amazon-컨테이너-서비스&quot;&gt;Amazon 컨테이너 서비스&lt;/h2&gt;
&lt;p&gt;컨테이너가 많아졌을 때는 관리하기가 어려워질 수 있다.&lt;br /&gt;
AWS에서 컨테이너 관련하여 서비스를 제공한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;관리&lt;/strong&gt; - ECS, EKS (배포/예약/조정 및 관리)&lt;br /&gt;
&lt;strong&gt;호스팅&lt;/strong&gt; - EC2, Fargate (Fargate는 EC2를 관리해줌)&lt;br /&gt;
&lt;strong&gt;이미지&lt;/strong&gt; - ECR (컨테이너 이미지용 리포지토리)&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ECS&lt;/strong&gt; - 컨테이너의 배포 관리를 도와주는 완전 관리형 컨테이너 조정 서비스.&lt;br /&gt;
&lt;strong&gt;EKS&lt;/strong&gt; - k8s를 쉽게 실행할 수 있도록 하는 관리형 서비스.&lt;br /&gt;
&lt;strong&gt;Fargate&lt;/strong&gt; - 컨테이너를 실행하기 위해 조정할 필요가 없음. 컨테이너 이미지를 업로드하고 리소스 요구사항을 지정하면 컨테이너를 실행해 준다. ECS와 같이 사용되기도 함.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/container</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/container</guid>
      </item>
    
      <item>
        <title>ElastiCache</title>
        
          <description>&lt;p&gt;ElastiCache는 인 메모리 캐시를 쉽게 배포/운영/조정할 수 있게 해주는 서비스.&lt;br /&gt;
캐싱의 장점을 가지고 있기 때문에 자주쓰는 데이터를 가져와서 애플리케이션 속도 개선, 지연시간 단축, 쿼리 호출 수를 줄이는 장점이 있다.&lt;br /&gt;
DB 서버에 대한 트래픽이 증가할 때에 대한 해결책으로 사용할 수 있다.&lt;br /&gt;
write보다는 read가 많으면서 느리고 비용이 많이 드는 데이터, 정적인 값이면서 자주 사용하는데이터, 기한이 경과된 데이터에서 고려하여 사용한다.&lt;/p&gt;

&lt;p&gt;Memcached, Redis를 지원한다.&lt;br /&gt;
Memcached:&lt;br /&gt;
멀티스레딩, 유지 관리 용이, 간편한 수평 확장, 단일 AZ&lt;br /&gt;
Redis: 다양한 데이터 구조 지원, 지속성, 원자조작, 구독 메시지(Pub/Sub), 다중 AZ&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;특성&lt;/th&gt;
      &lt;th&gt;Memcached&lt;/th&gt;
      &lt;th&gt;Redis&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;DB 부하를 줄이는 캐시&lt;/td&gt;
      &lt;td&gt;Y&lt;/td&gt;
      &lt;td&gt;Y&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;고급 데이터 유형&lt;/td&gt;
      &lt;td&gt;N&lt;/td&gt;
      &lt;td&gt;Y&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;데이터 세트 정렬/순위 지정&lt;/td&gt;
      &lt;td&gt;N&lt;/td&gt;
      &lt;td&gt;Y&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Pub/Sub 기능&lt;/td&gt;
      &lt;td&gt;N&lt;/td&gt;
      &lt;td&gt;Y&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;다중 AZ로 자동 장애 조치&lt;/td&gt;
      &lt;td&gt;N&lt;/td&gt;
      &lt;td&gt;Y&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;지속성&lt;/td&gt;
      &lt;td&gt;N&lt;/td&gt;
      &lt;td&gt;Y&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;용어&quot;&gt;용어&lt;/h2&gt;
&lt;p&gt;노드 - 가장 작은 블록. 선택에 따라 memcached/Redis 인스턴스를 실행
클러스터 - 하나 이상의 노드로 구성된 논리적 그룹
엔드포인트 - 클러스터에 연결하는 고유한 주소
복제그룹 - Redis 클러스터의 모음
캐시 히트 - 캐시가 요청된 정보를 포함
캐시 미스 - 캐시가 요청된 정보를 포함하지 않음&lt;/p&gt;

&lt;h2 id=&quot;캐싱-전략&quot;&gt;캐싱 전략&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;레이지 로딩&lt;/strong&gt;:&lt;br /&gt;
캐시 히트/미스에서 레이지 캐싱 전략을 구현한다.&lt;br /&gt;
필요할 때만 데이터를 캐시로 로드하는 전략으로 가장 많이 쓰이는 전략이다.&lt;/p&gt;

&lt;p&gt;장점: 요청된 데이터만 캐싱 됨. 노드 장애가 치명적인 영향을 주지 않음.
단점: 캐시 미스 패널티가 있음. 애플리케이션이 오래된 데이터를 수신할 수 있음.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;연속 쓰기&lt;/strong&gt;:&lt;br /&gt;
데이터베이스가 작성될 때마다 캐시에 데이터를 추가하거나 데이터를 업데이트 한다.&lt;br /&gt;
일반적인 DB에서 write: read = 1: 9의 비율이기 때문에 효율이 떨어진다.&lt;/p&gt;

&lt;p&gt;장점: 최신 데이터
단점: 쓰기 패널티, 데이터 누락(노드 장애 등으로 새로운 노드 생성시 DB 작성때까지 비어있음), 미사용 데이터, 잦은 캐시 변동.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/elasticache</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/elasticache</guid>
      </item>
    
      <item>
        <title>Lambda</title>
        
          <description>&lt;p&gt;AWS에서 제공하는 서버리스 컴퓨팅 서비스이다.&lt;br /&gt;
코드를 함수로 업로드만 하면 Lambda가 알아서 관리하여 사용될 수 있도록 한다.&lt;br /&gt;
이벤트 소스에서 호출을 트리거하면 lambda에서 코드를 가져와서 실행하는 방식이다.&lt;/p&gt;

&lt;h2 id=&quot;lambda-사용&quot;&gt;lambda 사용&lt;/h2&gt;
&lt;p&gt;간단한 문제를 간단한 솔루션으로 해결하자는게 모토.&lt;br /&gt;
간단하게 코드를 작성하고 리소스 모델을 선택하여 유연하게 다른 서비스들과 통합하여 사용한다.&lt;br /&gt;
CloudWatch로 로그 분석과 X-Ray를 통한 분산 추척을 같이 활용한다.&lt;/p&gt;

&lt;h2 id=&quot;lambda-함수의-구조&quot;&gt;lambda 함수의 구조&lt;/h2&gt;
&lt;p&gt;lambda 함수는 Handler 함수와 이벤트 객체, 컨텍스트 객체로 구성된다.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyOutput&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handlerName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;MyEvent&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Context&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;context&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Handler 함수&lt;/strong&gt;:&lt;br /&gt;
Lambda 함수가 호출되면 Handler에서 코드 실행이 시작된다.&lt;br /&gt;
코드 방식도 main 보다는 handler와 같이 이루어진다.&lt;br /&gt;
Handler는 lambda 함수를 생성할 때 지정한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;이벤트 객체&lt;/strong&gt;:&lt;br /&gt;
서비스에서 만들어져서 전달되는 값이다.&lt;br /&gt;
event data를 Handler로 전달하는데 사용된다.&lt;br /&gt;
함수가 로직을 제어할 때 필요한 모든 데이터와 메타데이터를 포함한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;컨텍스트 객체&lt;/strong&gt;:&lt;br /&gt;
컨텍스트 객체를 사용해서 함수 코드가 Lambda 실행 환경과 상호작용할 수 있다.&lt;br /&gt;
런타임 정보를 제공하는데 AWS RequestId, 함수 제한 시간, 로깅 등을 포함한다.&lt;/p&gt;

&lt;h2 id=&quot;실행-모델&quot;&gt;실행 모델&lt;/h2&gt;
&lt;p&gt;push event 모델:&lt;br /&gt;
이벤트 호출 유형으로 이벤트 소스가 이벤트를 게시할 때 직접 Lambda 함수를 호출한다.&lt;br /&gt;
S3, SNS Cognito Echo 및 사용자 애플리케이션에 적용되는 방식이다.&lt;/p&gt;

&lt;p&gt;pull event 모델:&lt;br /&gt;
Lambda가 이벤트를 감지하면 이벤스 소스를 폴링하고 이벤트 소스가 Lambda를 호출한다.&lt;br /&gt;
Kinesis 스트림, DynamoDB 스트림 같은 스트리밍 이벤트 소스와 쓰일 때 적용된다.&lt;/p&gt;

&lt;p&gt;직접 호출:&lt;br /&gt;
AWS Lambda가 함수를 동기식으로 실행하고 호출 애플리케이션에 응답을 즉시 반환한다.&lt;br /&gt;
사용자 지정 애플리케이션에서 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;권한&quot;&gt;권한&lt;/h2&gt;
&lt;p&gt;lambda와 관련된 권한은 두 가지 유형이 있다.&lt;br /&gt;
실행권한 - Lambda 함수가 다른 AWS 리소스에 액세스하는데 필요한 권한.&lt;br /&gt;
호출권한 - 이벤트 소스가 Lambda 함수와 통신하는데 필요한 권한.&lt;/p&gt;

&lt;p&gt;AWS에서는 서비스 간에도 접근을 위해 권한이 필요하고, lambda에서 꼭 권한을 부여해주어야 한다.&lt;/p&gt;

&lt;h2 id=&quot;실행&quot;&gt;실행&lt;/h2&gt;
&lt;p&gt;설정한 제한시간(기본 3초, 최대 15분)이 넘어가면 종료되어 그 이상가는 프로그램을 사용할 수 없다.&lt;br /&gt;
정기적으로 Lambda 함수를 실행하도록 지정할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;제한사항&quot;&gt;제한사항&lt;/h2&gt;
&lt;p&gt;인바운드 네트워크 연결은 차단된다.&lt;br /&gt;
TCP/IP 소켓만 지원한다.&lt;br /&gt;
ptrace(디버깅) 시스템 호출은 제한된다.&lt;br /&gt;
TCP port 25 트래픽은 스팸 방지로 제한된다.&lt;/p&gt;

&lt;h2 id=&quot;버전-관리-및-별칭&quot;&gt;버전 관리 및 별칭&lt;/h2&gt;
&lt;p&gt;버전은 코드에 구성을 더한 사본으로 변경할 수 없다.&lt;br /&gt;
별칭은 버전에 대한 포인터로 변경할 수 있다.
각 버전/별칭에 자체 ARN이 지정된다.&lt;/p&gt;

&lt;h2 id=&quot;요금&quot;&gt;요금&lt;/h2&gt;
&lt;p&gt;아래 항목들로 요금이 청구된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;모든 함수에 걸친 총 요청 수.&lt;/li&gt;
  &lt;li&gt;코드가 실행되는 시간.&lt;/li&gt;
  &lt;li&gt;Lambda 함수에 할당하는 메모리 양.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;step-function&quot;&gt;Step Function&lt;/h2&gt;
&lt;p&gt;AWS Lambda의 경우 제한시간(15분)내에 동작이 완료되어야 한다.&lt;br /&gt;
제한시간을 초과할만한 상황(동영상 전송/변환 등)이 있을 수 있고 이를 여러 개의 함수의 수행으로 처리할 수 있다.&lt;br /&gt;
여러 함수를 수행하는데 워크플로를 정의하고 단계별로 수행할 수 있도록 정의한다.
JSON으로 정의하고 시각화로 확인할 수 있다.&lt;br /&gt;
콘솔에서 시각화를 확인하고 모니터링도 가능하다.&lt;/p&gt;

&lt;p&gt;사용하는 경우:&lt;br /&gt;
실패한 작업을 다시 시도하려는 경우&lt;br /&gt;
연속된 작업을 하려는 경우&lt;br /&gt;
try/catch/finally를 실행하려는 경우&lt;br /&gt;
데이터 기반 작업을 선택하려는 경우&lt;br /&gt;
작업을 병렬로 실행하려는 경우&lt;/p&gt;

&lt;p&gt;장점:&lt;br /&gt;
빠르게 애플리케이션을 빌드할 수 있는 생산성을 갖는다.&lt;br /&gt;
안정적으로 확장/복구할 수 있다.&lt;br /&gt;
단계를 쉽게 편집해서 애플리케이션을 쉽게 수정할 수 있다.&lt;br /&gt;
다른 서비스와 연동하여 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;상태-기계&quot;&gt;상태 기계&lt;/h2&gt;
&lt;p&gt;출력을 결정하기 위해 이전 조건에 의존하는 작동 조건을 가진 객체이다.&lt;br /&gt;
상태 기계의 입력을 함수로 전달하여 Lambda 함수를 호출한다.&lt;/p&gt;

&lt;p&gt;Amazon State Language(json)으로 작업을 수행할 수 있는 상태(작업 상태), 전환할 상태를 결정하는 상태(선택 상태), 실행을 중지하는 상태(실패 상태)를 명시해 작업을 수행한다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/lambda</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/lambda</guid>
      </item>
    
      <item>
        <title>보안, 배포</title>
        
          <description>&lt;h2 id=&quot;애플리케이션-보안&quot;&gt;애플리케이션 보안&lt;/h2&gt;
&lt;p&gt;통신에 대한 암호화는 Http protocol을 통해 할 수 있다.&lt;br /&gt;
암호화에 필요한 키(SSL에서는 인증서)를 가지고 암호화/복호화를 진행한다.&lt;/p&gt;

&lt;p&gt;AWS Certificates Manager를 통해서 인증서를 쉽게 배포하고 관리할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;aws-secrets-manager&quot;&gt;AWS Secrets Manager&lt;/h3&gt;
&lt;p&gt;Secrets Manager를 통해 수명 주기 전체에서 DB 자격 증명, API키 및 기타 암호를 교체 관리 검색한다.  &lt;br /&gt;
코드 상에 userid와 pw를 적는 것이 아니라, secrets Manager에 값을 적어두고 Secrets Manager에서 그 값을 가져와서 사용하도록 하는 방식이다.&lt;br /&gt;
따라서 암호를 보호하고 유출을 막을 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;sts-security-token-service&quot;&gt;STS (Security Token Service)&lt;/h3&gt;
&lt;p&gt;어플리케이션에서 임시 키를 생성하는데 사용되는 서비스.&lt;br /&gt;
IAM을 인증할때는 액세스키/보안키를 사용하지 않고 Security Token Service를 통한 임시 액세스키/보안키를 사용하는 것이 좋다.&lt;br /&gt;
임시 키 발급을 요청한 사용자의 IAM 정책을 사용해서 권한을 제어한다.&lt;br /&gt;
키를 만들면서 Role을 만들고 Role에 권한을 부여하여 해당 Role로 임시 키를 발급받을 수 있다.(Assume role) 이를 통해 사용자의 권한 전체를 부여하는게 아니라 일부 서비스만 권한을 줄 수 있다.&lt;/p&gt;

&lt;p&gt;STS 자격 증명 브로커를 사용할 수 있다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;사용자가 자격 증명 브로커에 엑서스를 요청&lt;/li&gt;
  &lt;li&gt;자격 증명 브로커가 별도의 자격 증명 스토어를 통해 확인(예를 들면 회사 사람인지를 확인)&lt;/li&gt;
  &lt;li&gt;자격 증명 브로커가 STS에 키를 요청&lt;/li&gt;
  &lt;li&gt;받은 키로 AWS에 접근&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;cognito&quot;&gt;Cognito&lt;/h3&gt;
&lt;p&gt;Amazon Cognito를 통해 다양한 기기에서 사용자 데이터 저장 및 동기화를 허용할 수 있다.&lt;br /&gt;
외부 공급자(Google, Amazon, Facebook)로 인증 후 액세스할 수 있다. (이후 Congnito가 STS에 키를 요청)&lt;br /&gt;
자체 인증 시스템을 연동해서 사용할 수도 있다.&lt;/p&gt;

&lt;h2 id=&quot;애플리케이션-배포&quot;&gt;애플리케이션 배포&lt;/h2&gt;
&lt;p&gt;최근 데브옵스 문화로 많은 부분이 자동화되고 개발자가 배포도 같이하고 있다.&lt;/p&gt;

&lt;h3 id=&quot;iac-infrastructure-as-code&quot;&gt;IaC (Infrastructure as Code)&lt;/h3&gt;
&lt;p&gt;복잡한 환경에서의 배포를 해결하는 목적 중 하나이다.&lt;br /&gt;
말 그대로 코드로 인프라를 갖추는 것이다.&lt;br /&gt;
반복 가능하고 자동화된 방식으로 생성될 수 있도록 환경을 정의하고, 코드로 프로덕션 환경을 생성하는 것이다.&lt;/p&gt;

&lt;p&gt;AWS에서는 이러한 배포 서비스로 CodeStar를 서비스하고 있다.&lt;/p&gt;

&lt;h3 id=&quot;블루-그린-배포-패턴&quot;&gt;블루-그린 배포 패턴&lt;/h3&gt;
&lt;p&gt;기존환경(블루)로 라우팅하다가 신규코드(그린)으로 트래픽을 옮기고 이슈가 되면 다시 블루로 롤백하는 배포 방식이다.&lt;br /&gt;
그린이 안정적이게 되면 블루가 된다.&lt;br /&gt;
문제가 생기면 바로 롤백할 수 있으니 안전한 배포 방식이다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Route53&lt;/strong&gt; - Amazon Route53으로 블루 그린 배포패턴을 위한 가중치 기반 트래픽 이동을 쉽게할 수 있다.&lt;br /&gt;
&lt;strong&gt;ELB 활용&lt;/strong&gt; - ELB에 블루 인스턴스만 있다가 그린 인스턴스를 추가하고, 블루 인스턴스를 중지 시키는 것.(삭제 아님)&lt;/p&gt;

&lt;h3 id=&quot;elastic-beanstalk&quot;&gt;Elastic Beanstalk&lt;/h3&gt;
&lt;p&gt;AWS Elastic Beanstalk는 EC2, Auto Scaling, ELB 등의 AWS 서비스에 대한 래퍼를 제공하여 배포를 편하게 할 수 있다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/security-deploy</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/security-deploy</guid>
      </item>
    
      <item>
        <title>성능 좋은 Java/Python의 기본 sorting 알고리즘, Tim Sort 이해하기</title>
        
          <description>&lt;h2 id=&quot;timsort-란&quot;&gt;TimSort 란?&lt;/h2&gt;

&lt;p&gt;Tim Sort는 Java, Python을 비롯한 여러 언어와 프레임워크에서 기본 알고리즘으로 사용되는 sorting 알고리즘이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;python (since v2.3)&lt;/li&gt;
  &lt;li&gt;java (since SE 7)&lt;/li&gt;
  &lt;li&gt;android&lt;/li&gt;
  &lt;li&gt;V8&lt;/li&gt;
  &lt;li&gt;Swift&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;특징&quot;&gt;특징&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;hybrid sorting algorithm (merge + insertion)&lt;/li&gt;
  &lt;li&gt;highly optimized mergesort&lt;/li&gt;
  &lt;li&gt;stable and faster mergesort&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;장점&quot;&gt;장점&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;작은 수의 sort에서 quick이나 merge sort보다 빠른 속도를 보인다.&lt;/li&gt;
  &lt;li&gt;큰 수에 있어서도 빠른 속도를 보인다.&lt;/li&gt;
  &lt;li&gt;real data에서 강하다.
    &lt;ul&gt;
      &lt;li&gt;테스트를 하는 데이터(실험실에서나 보이는)들에서는 whole random data 이기 때문에 기존의 sorting들과 유사한 속도.&lt;/li&gt;
      &lt;li&gt;real data들은 부분 sorting 되어 있거나 연속적인 값인 경우가 많아 더 효율적.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;worst case에서도 성능을 유지한다.
    &lt;ul&gt;
      &lt;li&gt;quick sort와 대비하여 사용되는 이유가 되기도 함.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;주요-개념&quot;&gt;주요 개념&lt;/h2&gt;

&lt;p&gt;Tim sort의 기본은 merge sort 이다.&lt;br /&gt;
여러가지 기술들로 여러 부분의 단점들을 개선해낸 sorting 알고리즘이다.&lt;/p&gt;

&lt;h3 id=&quot;binary-insersion-sort&quot;&gt;binary insersion sort&lt;/h3&gt;

&lt;p&gt;insertion sort의 \(O(n^2)\)를 \(C1 * n^2 + a1\) 라고 표현한다면 merge sort의 \(O(nlogn)\)을 \(C2 * nlogn + a2\)라고 표현할 수 있는데, 작은 n에서는 C1과 C2의 크기가 성능에 큰 영향을 미치며 insertion sort가 더 효율적이다.&lt;br /&gt;
따라서 성능 개선을 목적으로 tim sort는 작은 단위에서 insertion sort를 사용한다.&lt;br /&gt;
효율을 위해 binary search로 넣을 위치를 찾는다.&lt;/p&gt;

&lt;h3 id=&quot;run&quot;&gt;run&lt;/h3&gt;

&lt;p&gt;run은 각각이 insertion sort로 sorted 된 기본 단위이다.
Tim sort는 run이라는 덩어리를 만들어놓고 run들을 merge하는 방식으로 진행된다.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minRun&lt;/code&gt;을 통해 run의 최소 크기를 정함.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ary의 크기를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N&lt;/code&gt;이라하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minRun = min(N, MIN_MERGE)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MIN_MERGE&lt;/code&gt;의 경우 \(2^5\) ~ \(2^6\) 의 값을 사용.
    &lt;ul&gt;
      &lt;li&gt;이는 통계적으로 insertion sort가 더 빠른 크기.&lt;/li&gt;
      &lt;li&gt;전체 크기에서 mergesort가 가장 효율적일 수 있는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minRunLength&lt;/code&gt;를 계산하여 사용.&lt;/li&gt;
      &lt;li&gt;merge sort는 2의 제곱수일 때 가장 효율이 좋음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;merge-stack&quot;&gt;merge stack&lt;/h3&gt;
&lt;p&gt;각각의 run은 stack에 쌓이고 Tim sort의 merge는 stack에서 run들을 가져와 병합하는 방식으로 이루어진다.
기존의 merge sort에서 중요한 부분들이 run을 도입하여 Tim sort에서 추가적으로 고려해야 되는 부분들이 있다.
Tim sort가 여기서 고려한 부분은 다음과 같다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;stack의 갯수를 조절한다.
    &lt;ul&gt;
      &lt;li&gt;merge sort는 stack을 사용하지 않음.&lt;/li&gt;
      &lt;li&gt;run을 무자비하게 쌓으면 stack의 메모리 문제.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;길이가 유사한 크기의 run 끼리 병합한다.
    &lt;ul&gt;
      &lt;li&gt;merge sort에서는 유사/동일한 크기의 덩어리를 병합하는 것이 기본.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;인접한 run을 병합한다.
    &lt;ul&gt;
      &lt;li&gt;merge sort에서는 인접한 덩어리를 병합하는 것이 기본.&lt;/li&gt;
      &lt;li&gt;안정성과 효율적인 처리를 위해.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이러한 구현을 위해 stack에 run을 쌓을 때 다음과 같은 조건으로 stack을 쌓는다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;C &amp;gt; A + B&lt;/li&gt;
  &lt;li&gt;B &amp;gt; A&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;run-merge&quot;&gt;run merge&lt;/h3&gt;
&lt;p&gt;merge를 실제 진행할 때, merge sort의 단점은 추가 메모리를 n 사용한다는 점이었다.
Tim sort에서는 두 run의 merge 과정에서 작은 run만 복사하여 merge 값을 채우는 방식으로 진행하여 추가 메모리를 n/2 이하로 줄인다.&lt;/p&gt;

&lt;h3 id=&quot;galloping&quot;&gt;galloping&lt;/h3&gt;
&lt;p&gt;두 run을 merge할 때 한 쪽에서 계속해서 큰 숫자가 보이는 경우 galloping mode를 발동시킨다.&lt;br /&gt;
galloping mode는 \(2^k\) 번씩 점프하며 merge sort의 속도를 증가시킬 수 있도록 한다.&lt;/p&gt;

&lt;h2 id=&quot;다시보는-장점&quot;&gt;다시보는 장점&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;작은 수의 sort에서 quick이나 merge sort보다 빠른 속도를 보인다.
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;insertion sort의 활용&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;큰 수에 있어서도 빠른 속도를 보입니다.
    &lt;ul&gt;
      &lt;li&gt;&lt;strong&gt;작은 단위에서의 insertion sort의 역할&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;기본적으로 merge sort의 성능&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;real data에서 강하다.
    &lt;ul&gt;
      &lt;li&gt;테스트를 하는 데이터(실험실에서나 보이는)들에서는 whole random data 이기 때문에 기존의 sorting들과 유사한 속도.&lt;/li&gt;
      &lt;li&gt;real data들은 부분 sorting 되어 있거나 연속적인 값인 경우가 많아 더 효율적.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;insertion sort가 정렬된 데이터에 대해서 보다 효율적으로 동작&lt;/strong&gt;&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;galloping mode로 일부 정렬된 데이터에서 더 빠르게 sort&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;worst case에서도 성능을 유지한다.
    &lt;ul&gt;
      &lt;li&gt;quick sort와 대비하여 사용되는 이유가 되기도 함.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;기본적으로 merge sort의 성능&lt;/strong&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;코드&quot;&gt;코드&lt;/h2&gt;

&lt;p&gt;jetbrains에서 관리하는 repo인 &lt;a href=&quot;https://github.com/JetBrains/jdk8u_jdk/blob/master/src/share/classes/java/util/TimSort.java&quot;&gt;jdk8&lt;/a&gt;를 참고하면 좋다.&lt;br /&gt;
이 외에도 여러 곳에서 timsort 소스코드를 확인할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;merge-sort-vs-tim-sort&quot;&gt;merge sort vs tim sort&lt;/h2&gt;

&lt;p&gt;merge sort와 tim sort를 비교하는 속도 영상 참고&lt;/p&gt;

&lt;div class=&quot;youtube_video_wrapper&quot;&gt;
  &lt;iframe src=&quot;https://www.youtube.com/embed/ZxLxf5xqqyE?si=IjoSC6oHF1mkRqgx&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://svn.python.org/projects/python/trunk/Objects/listsort.txt&quot;&gt;python timsort 원본&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/JetBrains/jdk8u_jdk/blob/master/src/share/classes/java/util/TimSort.java&quot;&gt;JetBrain에서 사용하는 jdk8의 timsort&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Timsort&quot;&gt;Timsort wiki&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://d2.naver.com/helloworld/0315536&quot;&gt;naver D2에서 정리한 timsort&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://orchistro.tistory.com/175&quot;&gt;orchistro님이 정리한 timsort&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7770230/comparison-between-timsort-and-quicksort&quot;&gt;stackoverflow timsort vs quicksort&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cs.stackexchange.com/questions/84168/is-timsort-more-efficient-than-merge-sort-and-why&quot;&gt;stackoverflow timsort vs mergesort&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/11.Algorithm/2020-07-13-timsort.html</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/11.Algorithm/2020-07-13-timsort.html</guid>
      </item>
    
      <item>
        <title>Server Developer, 2020 yearly Retrospection</title>
        
          <description>&lt;p&gt;This year has been an exciting time as I 1transitioned to a new team and learned many new things.&lt;br /&gt;
We held an annual retrospective within the team, and while preparing for it, I reflected on my experiences and thoughts about this year at work.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#design&quot;&gt;Design&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;#synchronization-work&quot;&gt;Synchronization Work&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#batch&quot;&gt;Batch&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#language&quot;&gt;Language&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#automation&quot;&gt;Automation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#testing&quot;&gt;Testing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;design&quot;&gt;Design&lt;/h2&gt;

&lt;p&gt;One of the biggest lessons I learned this year after joining a new team was about design.&lt;br /&gt;
In my previous team, most tasks involved maintenance, with little opportunity for new development. As a result, I rarely participated in large-scale design meetings.&lt;br /&gt;
Joining the new team gave me the chance to repeatedly participate in designing new modules and subsequent batch development, which proved to be a valuable learning experience.&lt;/p&gt;

&lt;p&gt;It was very helpful to participate in the design meeting to think, draw, and discuss the structure.&lt;br /&gt;
I could see how to discuss it and what parts to point out.&lt;br /&gt;
At first, I had little experience in design, so there were many designs that I thought “Oh, I see.”&lt;br /&gt;
Later, there were many cases where I thought, “I thought this way, but the team members’ ideas are better.”&lt;/p&gt;

&lt;p&gt;!!! Initially, with limited experience, I often just acknowledged the designs without much input. Later, I found myself thinking, “I would approach this differently, but my teammates have great ideas,” which made the process more engaging.&lt;/p&gt;

&lt;p&gt;While I am still learning, I hope to have a greater influence on design next year.&lt;br /&gt;
There are some design-related insights I want to document here.&lt;/p&gt;

&lt;h3 id=&quot;synchronization&quot;&gt;Synchronization&lt;/h3&gt;

&lt;p&gt;We developed a synchronization server closely tied to the client app.&lt;br /&gt;
It provides values to the client to differentiate between an initial synchronization and the current synchronization state.&lt;/p&gt;

&lt;p&gt;The design follows these principles:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The value must be unintelligible to the client. Therefore, we encrypt data that only we can understand.
    &lt;ul&gt;
      &lt;li&gt;If the client could interpret the value, it might modify the data directly, potentially leading to uncontrollable synchronization scenarios or other issues.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;If the client modifies the value arbitrarily, a synchronization error should occur.
    &lt;ul&gt;
      &lt;li&gt;This is for the same reason as above. In case of an error, the client is guided to perform an initial synchronization to restart the process.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This approach reflects the know-how we’ve gained through our synchronization server development.&lt;/p&gt;

&lt;h3 id=&quot;batch&quot;&gt;Batch&lt;/h3&gt;

&lt;p&gt;One of the services we manage involves four batch servers.&lt;br /&gt;
These servers were added one by one as needed, which has made the setup cumbersome and confusing.&lt;/p&gt;

&lt;p&gt;When designing batches for new modules, we aimed not to follow the existing structure. Instead, we created a batch module that allows for the addition of batch jobs.&lt;br /&gt;
We developed batch servers connected via Kafka, designed to perform multiple job tasks, and implemented additional tasks when necessary.&lt;/p&gt;

&lt;p&gt;This experience taught me the importance of initial design, not just for services but also for batch servers.&lt;br /&gt;
Additionally, I learned that delete operations must be performed safely and precisely.&lt;/p&gt;

&lt;h3 id=&quot;language&quot;&gt;Language&lt;/h3&gt;

&lt;p&gt;Studying and applying Golang to batch development also stands out in my memory.&lt;br /&gt;
I had previously studied Golang but had set it aside. Revisiting it to optimize batch performance led to designing and developing a batch in Golang.&lt;/p&gt;

&lt;p&gt;The importance of language became clear through the following steps.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;The performance of the existing Python batch was poor.&lt;/li&gt;
  &lt;li&gt;There was obvious room for improvement, so we upgraded the batch by optimizing parts of the Python code.&lt;/li&gt;
  &lt;li&gt;Golang’s goroutines (lightweight threads) and high performance seemed well-suited for our needs.&lt;/li&gt;
  &lt;li&gt;We redesigned and developed the batch using Golang.&lt;/li&gt;
  &lt;li&gt;This resulted in nearly 100x performance improvement on a single EC2 instance.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Through this process, I realized.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Studying without actual development does not last long.&lt;/li&gt;
  &lt;li&gt;Code decays and becomes forgotten.&lt;/li&gt;
  &lt;li&gt;Considering the characteristics of the language is essential (ex, Golang’s efficient goroutines).&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;automation&quot;&gt;Automation&lt;/h2&gt;

&lt;p&gt;We achieved significant automation across various tasks last year.&lt;br /&gt;
I believe automation has these advantages.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Tedious tasks&lt;/strong&gt; no longer need to be done manually.&lt;/li&gt;
  &lt;li&gt;Developing automation tools for repetitive tasks is a &lt;strong&gt;fun challenge&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Our team automated several tasks this year.&lt;/p&gt;

&lt;h3 id=&quot;slack-notifications-for-errors-or-issues-in-was-and-batch&quot;&gt;Slack Notifications for Errors or Issues in WAS and Batch&lt;/h3&gt;

&lt;p&gt;We implemented Slack notifications for 500 errors in a new module we developed. This module is maintained so that no unknown 500 errors occur. If any arise, we are notified immediately and address them. (Though I suspect there are some 500 errors in other modules)&lt;br /&gt;
Even though we set up Grafana and metrics, they often go unused. Implementing such initial server-side features greatly aids server management.&lt;/p&gt;

&lt;h3 id=&quot;versioning-release-notes-and-documentation&quot;&gt;Versioning, Release Notes, and Documentation&lt;/h3&gt;

&lt;p&gt;Our deployment process is quite tedious.&lt;br /&gt;
We need to document changes for the QA team, submit the changes for approval, and then write release notes, which can be a hassle. To address this, we automated the process.&lt;/p&gt;

&lt;p&gt;We created a documentation program using Python. By adhering to a well-defined Git commit and PR convention, the program calculates major/minor/patch versions automatically and compiles the changes.&lt;br /&gt;
The compiled information and version updates are sent to Slack as QA documentation and change logs, and are also updated on GitHub releases.&lt;/p&gt;

&lt;p&gt;We dockerized this Python program and added it as a step in CircleCI for each module to automate the process.
This organized the tedious and laborious task.&lt;/p&gt;

&lt;p&gt;Automation improved work efficiency and service stability. Additionally, tackling automation projects exposed me to new areas of interest and kept the work engaging.&lt;/p&gt;

&lt;p&gt;I also realized that &lt;strong&gt;automation is easier than expected.&lt;/strong&gt;&lt;br /&gt;
Documentation automation, in particular, always seemed inconvenient. However, it turned out to be simpler and faster to implement than I anticipated.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;testing&quot;&gt;Testing&lt;/h2&gt;

&lt;p&gt;While developing new modules from scratch, we conducted various tests to improve performance and meet requirements.&lt;br /&gt;
The types of tests we performed are as follows:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Unit Test&lt;/td&gt;
      &lt;td&gt;Unit-level tests necessary for TDD&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;API Test&lt;/td&gt;
      &lt;td&gt;Tests conducted outside the server through actual API calls&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Scenario Test&lt;/td&gt;
      &lt;td&gt;Tests verifying user use-case flows (scenarios)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Performance Test&lt;/td&gt;
      &lt;td&gt;Load and performance tests using tools like Pinpoint or Locust&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Kent Beck’s statement that &lt;strong&gt;“tests provide peace of mind and trust”&lt;/strong&gt; resonated deeply with me.&lt;br /&gt;
Through extensive testing, we gained confidence in our service both before and after its launch.&lt;/p&gt;

&lt;p&gt;We also added scenario tests, which were not used in previous modules, and learned the importance of having diverse types of tests beyond just unit and API tests.&lt;br /&gt;
Here’s what it’s worth looking back on.&lt;/p&gt;

&lt;h3 id=&quot;duplicated-tests&quot;&gt;Duplicated Tests&lt;/h3&gt;

&lt;p&gt;With multiple test types, overlaps occur. Having too many tests can slow down the process, so defining clear test layers is crucial.&lt;/p&gt;

&lt;h3 id=&quot;performance-testing&quot;&gt;Performance Testing&lt;/h3&gt;

&lt;p&gt;I couldn’t participate in setting up or running performance tests due to other development priorities, which I regret.&lt;/p&gt;

&lt;h3 id=&quot;test-readability&quot;&gt;Test Readability&lt;/h3&gt;

&lt;p&gt;There’s a tendency to justify sloppy test code with “it’s just a test.” However, this made reviews cumbersome and understanding the tests during code changes time-consuming.&lt;br /&gt;
I strongly dislike tests with conditional branches. If needed, I believe the tests should be split. Some team members disagree, so it may just be a matter of preference.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;This year has been enjoyable. It highlighted the importance of team dynamics.&lt;br /&gt;
I learned a lot about development culture, such as pair programming, code reviews, and retrospectives. Our team fosters an open environment where people can share their thoughts and even uncomfortable topics freely, which I find wonderful.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/retrospect/2020</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/retrospect/2020</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #1</title>
        
          <description>&lt;p&gt;Kotlin in Action으로 Kotlin study 하기.&lt;/p&gt;

&lt;h2 id=&quot;chapter-1-kotlin-what-and-why&quot;&gt;chapter 1. Kotlin, What and Why&lt;/h2&gt;

&lt;h3 id=&quot;사용성&quot;&gt;사용성&lt;/h3&gt;
&lt;p&gt;Java 진형의 사용성을 안전하고 간결하고 편리하게 대처하기 위해 나왔다.&lt;br /&gt;
Intel mutli os engine으로 ios 개발도 가능하다.&lt;br /&gt;
Javascript로도 컴파일 가능하다.&lt;/p&gt;

&lt;h3 id=&quot;특성&quot;&gt;특성&lt;/h3&gt;
&lt;p&gt;자바와 동일하게 statically typed으로 타입을 컴파일 시점에서 알수 있어야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Statically typed는 장점이 있다.
    &lt;ul&gt;
      &lt;li&gt;performance, reliability, maintainability, tool support&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그치만 자바처럼 모든 타입을 명시할 필요는 없고 알아서 타입을 결정할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이걸 type inference라고 함.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;자바의 많은 개념들이 그대로 녹아들어 있다.&lt;br /&gt;
추가되는 것들은 nullable type, functional 이 있다.
그래서 object oriented 와 functional을 모두 지원한다.&lt;/p&gt;

&lt;h3 id=&quot;functional&quot;&gt;Functional&lt;/h3&gt;

&lt;p&gt;functional의 주요 컨셉은 아래와 같다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;first-class function, immutability, no side effect
functional의 장점은 아래와 같다.&lt;/li&gt;
  &lt;li&gt;conciseness, safe multithreading, easier testing.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;철학&quot;&gt;철학&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;Pragmatic
    &lt;ul&gt;
      &lt;li&gt;연구용이 아니라 실제로 사용하기 위해 디자인 되었고 많은 다른 언어들의 개념을 가져와서 사용한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Concise
    &lt;ul&gt;
      &lt;li&gt;Getter, setter, constructor param 같은 것들을 kotlin에 내장해서 간결하게 하였다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Safe
    &lt;ul&gt;
      &lt;li&gt;NPE를 막을 수 있는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?&lt;/code&gt; 와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClassCastException&lt;/code&gt;을 막기 위한 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;is&lt;/code&gt; 를 제공한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Interoperable
    &lt;ul&gt;
      &lt;li&gt;Java의 라이브러리들을 그대로 사용할 수 있고  java의 class나 method도 그대로 사용할 수 있다.&lt;/li&gt;
      &lt;li&gt;Java에서도 kotlin 거를 그대로 사용할 수 있다.&lt;/li&gt;
      &lt;li&gt;Kotlin은 own collection library를 갖지 않고 java standard library를 사용해서 java와 kotlin간의 어떤 wrapper나 converter가 필요하지 않다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;compile&quot;&gt;Compile&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/1_1.jpg&quot; alt=&quot;kotlin-compile&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Kotlin은 java class로 컴파일되니까 java와 완전 호환된다.&lt;br /&gt;
배포시에는 kotlin runtime도 넣어주어야 한다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/1</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/1</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #2</title>
        
          <description>&lt;h2 id=&quot;chapter-2-kotlin-basics&quot;&gt;chapter 2. Kotlin Basics&lt;/h2&gt;

&lt;h2 id=&quot;kotlin-function-body&quot;&gt;kotlin function body&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/2_1.jpg&quot; alt=&quot;function-body&quot; /&gt;&lt;/p&gt;

&lt;p&gt;kotlin의 function 구조는 위와 같다.&lt;/p&gt;

&lt;h3 id=&quot;expression&quot;&gt;expression&lt;/h3&gt;

&lt;p&gt;Kotlin은 반복문(for, while)을 제외하고는 expression으로 판단된다. (If, when 등)
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;expression&lt;/code&gt;은 value를 갖는다는 점에서 statement와 차이점을 보인다.
반면 java에서는 모든 control structure들이 statement이다.&lt;/p&gt;

&lt;p&gt;여기서 value를 갖는다는 것은 expression 자체(expression의 결과)가 value를 갖는 것을 말한다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 예를 들면 아래 if expression은 value를 갖고 있다.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;max&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;expression-body&quot;&gt;expression body&lt;/h3&gt;

&lt;p&gt;Block body와 expression body로 function의 body를 구분한다.&lt;br /&gt;
Block body: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt;으로 body가 쌓여진 일반적인 함수.&lt;br /&gt;
Expression body: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt; 없이 구현된 함수. 보통 one line function에서 사용하는 함수.&lt;/p&gt;

&lt;h3 id=&quot;variable&quot;&gt;variable&lt;/h3&gt;

&lt;p&gt;변수에 타입을 명시하지 않아도 된다.&lt;br /&gt;
명시할수도 있는데, 초기 값을 넣어주지 않으면 타입 추론이 안되므로 명시해주어야 한다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;val&lt;/code&gt;(from value): immutable (final in java)&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;var&lt;/code&gt;(from variable): mutable&lt;/p&gt;

&lt;p&gt;기본적으로 val을 사용하고, 수정이 필요한 경우만 var를 사용하도록 한다.&lt;br /&gt;
var이 change value를 허락해도, type은 fix되서 바뀔 수 없다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;$&lt;/code&gt;로 local variable에 접근할 수 있고, 이건 $(expression) 으로도 사용이 가능하다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello, $name!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Hello, ${if (args.size &amp;gt; 0) args[0] else &quot;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;someone&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;}!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;class&quot;&gt;class&lt;/h3&gt;

&lt;p&gt;kotlin은 public이 default라 public을 생략할 수 있다.&lt;br /&gt;
property를 선언하면 기본적으로 내부적으로 getter/setter가 같이 선언된 것이라고 보면 된다.&lt;br /&gt;
그냥 class의 property를 사용하면 java의 getter를 호출해준다.&lt;/p&gt;

&lt;p&gt;getter/setter 외의 custom accessors를 만들 수 있다.&lt;br /&gt;
custom accessors와 function을 만드는것의 차이는&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;성능 상으로는 차이가 없다&lt;/li&gt;
  &lt;li&gt;가독성에만 차이가 있다&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;package&quot;&gt;package&lt;/h3&gt;

&lt;p&gt;kotlin에도 package가 있고 java의 package 정책과 유사하다.&lt;br /&gt;
import로 class와 method를 구분하지 않고 method도 import할 수 있다.&lt;/p&gt;

&lt;p&gt;여러 class를 하나의 file에 넣을 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;enum&quot;&gt;enum&lt;/h3&gt;

&lt;p&gt;enum이 java랑 좀 다르다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 예제가 이해하기 편할 듯 하다.&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;RED&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ORANGE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;165&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;YELLOW&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;GREEN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BLUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;255&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;INDIGO&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;75&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;VIOLET&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;238&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;130&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;238&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;rgb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;r&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;256&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;BLUE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rgb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;when&quot;&gt;when&lt;/h3&gt;

&lt;p&gt;when과 함께 쓰일 때 enum의 효과가 더 크다.&lt;br /&gt;
when은 java의 switch와 비슷한데, 더 파워풀하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;any objects나 들어올 수 있다. (set 등)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;no arg when 을 사용할 때도 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;가독성은 좀 떨어질 수 있다.&lt;/li&gt;
  &lt;li&gt;성능상 이점을 얻기 위할 때 사용할 수 있다.&lt;/li&gt;
  &lt;li&gt;no arg이기 때문에 extra objects를 생성하지 않는다는 장점이 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;is&quot;&gt;is&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;is&lt;/code&gt;는 java의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;instanceof&lt;/code&gt;와 유사하다.&lt;br /&gt;
instanceof 체크하고 type casting을 해야하는 java와 달리 is는 compiler가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;smart cast&lt;/code&gt;를 해준다. (더 강력하고 편리하다)&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;smart cast를 위해서 property가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;val&lt;/code&gt;이어야 하고, custom accessor를 가질 수 없다. 그렇지 않으면 property에 대한 access가 동일한 값을 주는지에 대해 보장할 수 없다.&lt;/li&gt;
  &lt;li&gt;명시적 type cast는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;as&lt;/code&gt;를 이용한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;block-value&quot;&gt;block value&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;if&lt;/code&gt;나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;when&lt;/code&gt;의 branch에 block을 가질 수 있다.
block이 있으면, block의 가장 마지막 expression이 block의 result가 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;if나 when은 kotlin에서 expression이고 반환 값을 갖는다는 점을 상기하자.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;evalWithLogging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;evalWithLogging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;evalWithLogging&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;sum: $left + $right&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;n&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;right&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// return value&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;loop&quot;&gt;loop&lt;/h3&gt;

&lt;p&gt;java의 for loop과 완전히 매칭되는 for loop은 없다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;while은 java랑 완전히 같음.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그래서 range, progression을 사용한다.&lt;br /&gt;
range는 1..10 처럼 사용될 수 있고, 이런 range를 progression이라고 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;range는 char에도 된다. (‘A’..’F’, ‘0’..’9’)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;또, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;downTo&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;step&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;until&lt;/code&gt;을 제공하는데 직관적이다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;downTo&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;step&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;until&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;exception&quot;&gt;exception&lt;/h3&gt;

&lt;p&gt;exception은 java와 유사하다.&lt;br /&gt;
try, catch, finally도 java와 유사하다.&lt;/p&gt;

&lt;p&gt;java와 다른 점은 kotlin의 throw, try도 expression이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;try는 if와 다르게 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{}&lt;/code&gt; body를 항상 가져야 한다.
    &lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;readLine&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NumberFormatException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;또 다른 점은 kotlin은 함수에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;throws&lt;/code&gt;를 명시하지 않아도 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java와 다르게  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;checked exception&lt;/code&gt;과 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;unchecked exception&lt;/code&gt;을 구분하지 않는다는 것.&lt;/li&gt;
  &lt;li&gt;경험 상 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;checked exception&lt;/code&gt;에서 rethrow나 ignore exception 같은 처리들이 불필요하게 수행되는 경우가 많아 구분을 하지 않는 설계를 했다고 한다.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/2</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/2</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #3</title>
        
          <description>&lt;h2 id=&quot;chapter-3-defining-and-calling-functions&quot;&gt;chapter 3. Defining and Calling Functions&lt;/h2&gt;

&lt;h3 id=&quot;collection&quot;&gt;collection&lt;/h3&gt;

&lt;p&gt;setOf, listOf, mapOf로 collection을생성할 수 있다.&lt;/p&gt;

&lt;p&gt;kotlin은 java의 collection을 사용한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.javaClass&lt;/code&gt;로 class를 확인할 수 있다. (getClass()와 동일)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;java의 collection을 쓰지만 더 많은 것을 지원한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;예를들면 last, max와 같은 함수로, 얘네는 잠시 뒤에 다룰 extension function으로 제공된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;function&quot;&gt;function&lt;/h3&gt;

&lt;p&gt;parameter에 naming을 할 수 있고, default value도 넣을 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이건 python에서와 유사하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;kotlin에서는 함수가 클래스 없이 존재할 수 있기 때문에,&lt;br /&gt;
java에서 static method를 위해 만들었던 클래스들이 필요가 없다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;예를 들면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~utils&lt;/code&gt;와 같은 static method를 갖는 클래스들&lt;/li&gt;
  &lt;li&gt;그냥 파일 최상위에 함수가 들어가면 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;jvm은 클래스 안에 있는 코드만 실행이 가능하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;kotlin 컴파일러가 파일명을 기반으로 클래스를 내부적으로 만들어준다.&lt;/li&gt;
  &lt;li&gt;따라서 java에서 kotlin의 함수만 선언된 것을 사용할 때도 이런 네이밍을 맞춰서 쓸 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;변수도 클래스 없이 존재할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;static variable을 위한 클래스가 필요가 없어지는 것이지.&lt;/li&gt;
  &lt;li&gt;val은 getter를, var은 getter/setter를 만드니까 우리가 쓰던 상수처럼 되지 않는다.&lt;/li&gt;
  &lt;li&gt;const val을 써야 진짜 상수처럼 쓴다. (public static final로 컴파일 됨)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;extension-function&quot;&gt;extension function&lt;/h3&gt;

&lt;p&gt;클래스 밖에 선언된 함수를 말한다.
기존의 api를 재작성하지 않고 기능을 사용할 수 있어서, java의 클래스들의 기능을 확장하는 방식으로도 쓰인다. (위에서 보인 last, max 같이)
함수 앞에 클래스 이름을 붙이기만 하면 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이건 약간 functional language를 위한 기능인 것 같다. golang에서도 함수를 이렇게 쓰니까&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/3_1.JPG&quot; alt=&quot;extension-function&quot; /&gt;&lt;/p&gt;

&lt;p&gt;extension function에서는 클래스 안의 변수나 함수를 모두 자연스럽게 호출할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그치만 private, protected로 선언된 애들은 호출할 수 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;extension func를 사용하기 위해서는 다른 함수들처름 import를 해줘야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;자동으로 된다치면 동일한 extension이 여러군데 존재할 수 있기에 문제가 생길 것.&lt;/li&gt;
  &lt;li&gt;이걸 응용하면 동일한 extension을 여러 개 두고 필요한 것을 import해서 쓸 수도 있지 않을까? (좋은 구조는 아닐듯)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Because extension functions are effectively just syntactic sugar over static method
calls, you can use a more specific type as a receiver type, not just a class&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;번역으로 의미 전달이 잘 안된다.&lt;/li&gt;
  &lt;li&gt;결국 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Collection&amp;lt;T&amp;gt;&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Collection&amp;lt;String&amp;gt;&lt;/code&gt; 이런 애들을 receiver type으로 쓸 수 있다는 거다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;extension은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;override&lt;/code&gt;할 수 없다.&lt;br /&gt;
부모와 자식이 동일한 extension을 갖는다면 receiver를 first argument로 넘겨준다고 생각하면 된다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;View&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;showOff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I&apos;m a view!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;showOff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I&apos;m a button!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;showOff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;I&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;m&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;view&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;member function과 extension function이 동일하게 존재한다면 우선순위는 member가 더 높다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;이렇게 기존 라이브러리(여기선 java)를 새로운 언어데서 사용하는 패턴을 Pimp My Library라고 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;extension-properties&quot;&gt;extension properties&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;properties&lt;/code&gt;는 이전에 봤던건데 난 사실 되려 더 헷갈리게 되는 것 같아서 쓸지는 모르겠다..
하여튼 extension으로 property도 만들 수 있다는 것.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;얘는 자기가 갖고있는 field가 없다. (당연히)&lt;/li&gt;
  &lt;li&gt;접근할 수 있는 field가 없다면, setter를 만들지 못할 수도 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;varargs&quot;&gt;varargs&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vararg&lt;/code&gt;로 가변인자를 받을 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;infix&quot;&gt;infix&lt;/h3&gt;

&lt;p&gt;infix는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.&lt;/code&gt;을 생략하는 call을 말한다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;one&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// regular function call&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;one&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// infix call&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;parameter가 하나 뿐인 함수에 대해 infix call을 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;함수 선언 앞에 infix를 명시해줘야 한다.
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;infix fun Any.to(other: Any) = Pair(this, other)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;destructuring-declaration&quot;&gt;destructuring declaration&lt;/h3&gt;

&lt;p&gt;두 변수를 초기화할 수 있도록 하는 구현이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;설명하긴 어려운데, python/golang에서 값 두 개 반환하는거랑 비슷하게 쓰이는 것 같다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;예제로 보는게 좋겠다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;one&quot;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;element&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;withIndex&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;$index: $element&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;string&quot;&gt;string&lt;/h3&gt;

&lt;p&gt;kotlin은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String.split()&lt;/code&gt;이 regular expression이 아니다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;자바는 기본 regular라 헷갈리고 더러워질 때가 있다.&lt;/li&gt;
  &lt;li&gt;kotlin은 regular를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.toRegex()&lt;/code&gt;로 지원한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;여러줄 문자열을 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&quot;&quot;&quot; ~ &quot;&quot;&quot;&lt;/code&gt;로 지원한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;여기서 regular expression이 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/3_2.JPG&quot; alt=&quot;triple-quota&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;local-function&quot;&gt;local function&lt;/h3&gt;

&lt;p&gt;func 안에 func가 있는걸 local function이라고 한다.&lt;br /&gt;
외부 함수의 param에 직접 접근이 가능하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이것도 functional language를 지원하기 위한 것 같다.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/3</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/3</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #4</title>
        
          <description>&lt;h2 id=&quot;chapter-4-classes-objects-and-interface&quot;&gt;chapter 4. Classes, Objects and Interface&lt;/h2&gt;

&lt;h3 id=&quot;interface&quot;&gt;interface&lt;/h3&gt;

&lt;p&gt;interface가 abstract method와 non-abstract method를 모두 가질 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java 8과 비슷. abstrat &amp;amp; default method&lt;br /&gt;
그치만 어떤 state도 가질 수 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Clickable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;showOff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I&apos;m clickable!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// default 명시자가 필요 없음&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Button&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Clickable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;I was clicked&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;kotlin에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;override&lt;/code&gt; 사용이 강제된다.(역할은 java의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@Override&lt;/code&gt;와 동일.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;java와 유사하게 interface의 implements는 여러 개가 가능하고, class extends는 하나만 가능하다.&lt;/p&gt;

&lt;p&gt;동일한 non-abstract method를 갖는 interface 여러 개를 implements 하는 class는 override가 강제로 필요하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;특정 interface를 super 하는 방법은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;super&amp;lt;Clickable&amp;gt;.showOff()&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;modifier&quot;&gt;modifier&lt;/h3&gt;

&lt;p&gt;open, final, abstact&lt;/p&gt;

&lt;p&gt;java에서는 final을 명시하지 않으면 class 상속이 가능하다.&lt;br /&gt;
이런 경우 의도치 않은, 잘 명시되지 않은 class에 대한 상속을 하게 될 수 있다.&lt;br /&gt;
상속 이후 parent class가 변경되어 child class가 의도한 동작을 하지 않는 &lt;strong&gt;fragile base class&lt;/strong&gt; 문제가 발생할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이런 문제가 있었고, &lt;Effective Java=&quot;&quot;&gt; 등에서 상속을 의도하지 않는 경우 모두 final로 쓰라는 제안을 한다.&lt;/Effective&gt;&lt;/li&gt;
  &lt;li&gt;kotlin은 default를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;final&lt;/code&gt;로 쓰고 상속을 허용하려면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;open&lt;/code&gt;을 명시해야 한다.&lt;/li&gt;
  &lt;li&gt;class open 뿐 아니라 open class의 상속받을 method에도 open을 명시해야 한다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;override&lt;/code&gt;를 명시한 경우 기본적으로 open 이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;abstract class는 open이 없어도 된다. java와 유사하다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Animated&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;animate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// override 꼭 필요&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;open&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stopAnimating&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// override 가능&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;animateTwice&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// override 불가&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;visibility-modifier&quot;&gt;visibility modifier&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Modifier&lt;/th&gt;
      &lt;th&gt;Class member&lt;/th&gt;
      &lt;th&gt;Top-level declaration&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;public (default)&lt;/td&gt;
      &lt;td&gt;Visible everywhere&lt;/td&gt;
      &lt;td&gt;Visible everywhere&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;internal&lt;/td&gt;
      &lt;td&gt;Visible in a module&lt;/td&gt;
      &lt;td&gt;Visible in a module&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;protected&lt;/td&gt;
      &lt;td&gt;Visible in subclasses&lt;/td&gt;
      &lt;td&gt;(can not used)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;private&lt;/td&gt;
      &lt;td&gt;Visible in a class&lt;/td&gt;
      &lt;td&gt;Visible in a file&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;kotlin은 기본적으로 public 이다.&lt;/li&gt;
  &lt;li&gt;package private이 kotlin에는 없다.
    &lt;ul&gt;
      &lt;li&gt;kotlin에게 package는 namespace 관리용 정도.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;internal&lt;/code&gt;이 kotlin엔 존재하는데, 모듈(maven, gradle 등의 프로젝트 모듈) 내에서만 쓰일 수 있게 해서 &lt;strong&gt;encapsulation&lt;/strong&gt;을 지원한다.
    &lt;ul&gt;
      &lt;li&gt;module은 java의 package와는 다르다. module은 여러 package가 있을 수 있음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;java에서는 같은 package 안에서 protected 멤버에 접근할 수 있지만, kotlin에서는 그렇지 않다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;inner--nested-class&quot;&gt;inner &amp;amp; nested class&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Class A declared within another class B&lt;/th&gt;
      &lt;th&gt;In Java&lt;/th&gt;
      &lt;th&gt;In Kotlin&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Nested class (doesn’t store a reference to an outer class)&lt;/td&gt;
      &lt;td&gt;static class A&lt;/td&gt;
      &lt;td&gt;class A&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Inner class(stores a reference to an outer class&lt;/td&gt;
      &lt;td&gt;class A&lt;/td&gt;
      &lt;td&gt;inner class A&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;ul&gt;
  &lt;li&gt;kotlin은 default가 nested class.&lt;/li&gt;
  &lt;li&gt;kotlin inner class에서 outer class에 접근하려면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;this@{OuterClassName}&lt;/code&gt;을 써야 함.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;sealed-class&quot;&gt;sealed class&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sealed&lt;/code&gt;를 붙이면 클래스 상속을 제한한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;제한하는데, 클래스 외부의 상속을 막는 것.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;sealed&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;이렇게 내부에 상속만 가능&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;when(classVar)&lt;/code&gt;처럼 쓸 때, else가 하위 class에 대한 예외 처리로 default로 들어가야 한다.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sealed&lt;/code&gt;를 명시하면 클래스 상속이 제한되니 else가 필요 없다.&lt;/li&gt;
      &lt;li&gt;이런 방식은 class가 추가되었을 때에 대한 예외를 까먹지 않을 수 있다는 장점이 있음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;primary-constructor&quot;&gt;primary constructor&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;

    &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nickname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_nickname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_nickname&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위 방식 모두 primary constructor를 만드는 방식이다.&lt;br /&gt;
class name과 괄호로 싸여진 코드를 primary constructor라고 한다.&lt;/p&gt;

&lt;p&gt;class 정의 시 constructor를 별도로 생성하지 않으면 컴파일러가 default costructor(class())를 만들어준다.&lt;/p&gt;

&lt;p&gt;primary constructor에 private을 붙여서 외부에서 instance 생성을 막을수도 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;class Secretive private constructor() {}&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;secondary-constructor&quot;&gt;secondary constructor&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;open&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* code */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ctx&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Context&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AttributeSet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* code */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;위처럼 View에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;()&lt;/code&gt;가 없으니 primary는 선언하지 않았다고 볼 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;secondary constructor는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;constructor&lt;/code&gt;로 시작한다.&lt;br /&gt;
필요에 따라 여러 개를 생성해도 된다.&lt;/p&gt;

&lt;h3 id=&quot;properties-declared-in-interfaces&quot;&gt;properties declared in interfaces&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PrivateUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SubscribingUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;substringBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;@&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;FacebookUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;accountId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getFacebookName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;accountId&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;property의 override를 위처럼 할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nickname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;substringBefore&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;@&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;점점 예제 없이 설명이 안된다…
property의 getter/setter를 구현할 수도 있으나, field가 없으니 field를 참조할 수 없다.&lt;br /&gt;
위와 같은 경우 email은 abstract 하니까 구현이 필요하고, nickname은 안해도 된다.&lt;/p&gt;

&lt;h3 id=&quot;backing-field&quot;&gt;backing field&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.baeldung.com/kotlin/backing-fields&quot;&gt;baeldung의 backing fields&lt;/a&gt;를 참고하면 좋다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Kotlin will use a Java field to store the property values.&lt;/li&gt;
  &lt;li&gt;These Java fields are known as backing fields in the Kotlin world.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;backing-field-in-gettersetter&quot;&gt;backing field in getter/setter&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;statusCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;599&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;statusCode&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;statusCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;599&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;field&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;위 예제에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;statusCode&lt;/code&gt;에 할당하면, 계속 statusCode의 setter를 불러서 endless recursion을 만듦.&lt;br /&gt;
따라서 kotlin에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;field&lt;/code&gt;라는 애를 사용.&lt;/p&gt;

&lt;h3 id=&quot;setter-visibility&quot;&gt;setter visibility&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LengthCounter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;counter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;이렇게 하면 class 밖에서 counter를 set할 수 없음.&lt;/p&gt;

&lt;h3 id=&quot;data-class&quot;&gt;data class&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;kdata&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Client&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;postalCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;toString()&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hashCode()&lt;/code&gt; 를 자동으로 구현해주는 class.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;kotlin은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;==&lt;/code&gt;에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt;를 사용한다. 주솟값을 비교하려면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;===&lt;/code&gt;를 쓰면 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;data class의 property들은 &lt;strong&gt;immutable&lt;/strong&gt;하게 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;val&lt;/code&gt;을 쓰는 것을 권장.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;hashMap 등에 넣고 값이 변경되어 문제가 발생할 수도 있고,&lt;/li&gt;
  &lt;li&gt;multi thread에서 변경될 경우를 고려하지 않아도 되고,&lt;/li&gt;
  &lt;li&gt;data class가 제공하는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;copy()&lt;/code&gt;를 써서 데이터 수정보다 유사하게 데이터를 복사하면 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;by&quot;&gt;by&lt;/h3&gt;

&lt;p&gt;상속이 불가능한 class인데 상속이 필요하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Decorator&lt;/code&gt; 패턴으로 상속을 흉내낸다.&lt;br /&gt;
이러면 구현해야할 양이 많은데, kotlin은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;by&lt;/code&gt;를 제공해서 구현 양을 줄인다.&lt;/p&gt;

&lt;h3 id=&quot;object-for-singleton&quot;&gt;object for singleton&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Payroll&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Payroll&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;allEmployees&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;object는 consturctor가 필요없이 위처럼 그냥 쓰인다.&lt;/p&gt;

&lt;h3 id=&quot;companion-object&quot;&gt;companion object&lt;/h3&gt;

&lt;p&gt;companion object는 바깥 class의 private도 호출할 수 있어서 factory pattern 등을 구현하기 좋다.&lt;br /&gt;
companion에 정의된 property나 method는 companion이 정의된 class 이름으로 접근할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그러면 왜 굳이 class 안에 안넣고 companion을 쓰느냐..?&lt;/li&gt;
  &lt;li&gt;companion + extension으로 사용하는 예제가 있음&lt;/li&gt;
  &lt;li&gt;companion object에 naming을 붙여서 사용할수도 있음&lt;/li&gt;
  &lt;li&gt;companion에서 interface를 구현할 수도 있음&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;anonymous-inner-class&quot;&gt;anonymous inner class&lt;/h3&gt;

&lt;p&gt;java에서 흔히 쓰이는 event listener와 같은 코드를 kotlin에서 object를 활용해 anonymous object로 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;anonymous object는 외부의 변수를 접근할 수 있음.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/4</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/4</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #5</title>
        
          <description>&lt;h2 id=&quot;chapter-5-programming-with-lambdas&quot;&gt;chapter 5. Programming with lambdas&lt;/h2&gt;

&lt;p&gt;lambdas: 다른 함수에 넘길 수 있는 작은 코드 조각.&lt;/p&gt;

&lt;h3 id=&quot;lambda&quot;&gt;lambda&lt;/h3&gt;

&lt;p&gt;event가 발생 했을 때, handler를 통해 event를 처리하도록 하는 행위를 Java에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;anonymous inner class&lt;/code&gt;로 처리했다.&lt;br /&gt;
이런 inner class는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;verbose syntax&lt;/code&gt; 갖게 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;listener와 같은 예 들이 있다. (꼴 보기 싫지)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Java 8 에서는 이런 문제를 lambda로 해결할 수 있도록 했다.&lt;br /&gt;
Kotlin은 Java 6을 베이스로 했기 때문에 Java와는 다른 lambda를 지원한다.&lt;/p&gt;

&lt;h3 id=&quot;lambda-delegates&quot;&gt;lambda delegates&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;B&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If a lambda just delegates to a method or property, it can be replaced by a member.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;영작이 어렵다. 값을 주기만 하는 경우, 아래와 같이 수정이 가능하다.&lt;/li&gt;
  &lt;li&gt;이건 뭐 Java 8에서도 유사하게 쓰이니까.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;lambda-syntax&quot;&gt;lambda syntax&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/5_1.JPG&quot; alt=&quot;lambda syntax&quot; /&gt;&lt;/p&gt;

&lt;p&gt;kotlin의 lambda는 &lt;strong&gt;대괄호&lt;/strong&gt; 안에 있는 특성이 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이 부분은 java와 달라서 낯설긴 하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;syntax-sugar&quot;&gt;syntax sugar&lt;/h4&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 기본 lambda syntax&lt;/span&gt;
                                   &lt;span class=&quot;c1&quot;&gt;// syntax shortcut이 없어 장황함&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Kotlin에서는 last argument의 lambda를 밖으로 빼낼 수 있음&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// lambda가 only argument면 괄호를 지울 수 있음&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위 방식들은 가독성에만 차이가 있을 뿐 모두 같다.&lt;br /&gt;
lambda의 경우 마지막으로 빼서 저렇게 만드는 것이 가독성에 더 좋다.&lt;/p&gt;

&lt;h3 id=&quot;type-inferred-sugar&quot;&gt;type inferred sugar&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 얘는 type을 명시하지 않은 inferred.&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// autogenerated argument name.&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inferred&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lambda&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;를&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;쓰기&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;위해서는&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;추론이&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;가능해야&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;하기&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;때문에&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lambda&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;가&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;variable&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;로&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;만들어지는&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;경우에는&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;사용할&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;수&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;없다&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;  
&lt;span class=&quot;err&quot;&gt;``&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;`kotlin&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;getAge&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// lambda가 value로 만들어짐&lt;/span&gt;
                                  &lt;span class=&quot;c1&quot;&gt;// 따라서 type inferred lambda 사용 불가&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getAge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;accessing-variable-scope&quot;&gt;accessing variable scope&lt;/h3&gt;

&lt;p&gt;Java와는 다르게 final value가 아닌 애들한테도 접근 및 수정이 가능하다.&lt;br /&gt;
이렇게 lambda에서 access하는 외부 변수들을 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;captured&lt;/code&gt; 되었다고 한다.&lt;/p&gt;

&lt;h3 id=&quot;member-reference&quot;&gt;member reference&lt;/h3&gt;

&lt;p&gt;function을 value로 변환하는 것.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 함수 변환&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;getAge&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;maxBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// 생성자 변환&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;data class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;createPerson&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createPerson&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;collection-library&quot;&gt;collection library&lt;/h3&gt;

&lt;p&gt;Kotlin은 Java 보다 collection에 대해 더 많은 library를 제공한다.&lt;br /&gt;
대부분 명확한 naming을 갖는다.&lt;/p&gt;

&lt;h4 id=&quot;filter--map&quot;&gt;filter &amp;amp; map&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;filter&lt;/code&gt;는 말 그대로 filtering 하는거다. java 에서와 유사하다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;map&lt;/code&gt;은 각 value들을 maping 해주는 건데, 이것도 java와 유사하다.&lt;br /&gt;
예제를 보면 간단하다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Alice&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;29&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Bob&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;31&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;상황에 따라 다르지만, filter와 map을 연달아서 사용한다면 filtering 한 후에 mapping을 하는 것이, mapping 하는 element 수를 줄여 성능에 더 도움이 되는 편이다.&lt;/p&gt;

&lt;h4 id=&quot;all-any&quot;&gt;all, any&lt;/h4&gt;

&lt;p&gt;명확한 function name이다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;all&lt;/code&gt;과 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;any&lt;/code&gt;의 경우 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!all&lt;/code&gt;은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;any&lt;/code&gt;와 같다는 것. &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!any&lt;/code&gt; 역시도 그렇다는 것을 잘 기억하고 가독성이 좋은 방향(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!&lt;/code&gt;를 제거하는)으로 수정해가는 것이 좋다.&lt;/p&gt;

&lt;h4 id=&quot;count&quot;&gt;count&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;의 경우 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;size&lt;/code&gt;와 비교해볼 필요가 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;size&lt;/code&gt;는 collection에 대한 기본 함수니까.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;를 써야할 때는 어떤 때일까?&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;canBeInClub27&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;27&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;canBeInClub27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;canBeInClub27&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 같은 상황에서 명확하다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;의 경우 각각의 element를 추적하며 조건에 맞는 수를 세지만,&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;size&lt;/code&gt;를 위해서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;filter&lt;/code&gt; 조건에 맞는 collection을 생성하고 그 수를 반환한다.&lt;br /&gt;
따라서 filtering 이 필요한 경우에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;count&lt;/code&gt;를 쓰는게 맞다.&lt;/p&gt;

&lt;h4 id=&quot;find&quot;&gt;find&lt;/h4&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;find&lt;/code&gt;는 만족하는 element가 있다면 첫 번째로 매칭하는 element를 반환하고, 없다면 null을 반환한다.&lt;/p&gt;

&lt;h4 id=&quot;etc&quot;&gt;etc&lt;/h4&gt;

&lt;p&gt;그 외에도 많은 기본 library들이 있다. 대부분 명확하고 간단하다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;groupBy&lt;/code&gt;: element 기반으로 list를 map으로 만드는&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flatMap&lt;/code&gt;: 2겹의 collection을 풀어서 1겹으로 만드는&lt;/p&gt;

&lt;h3 id=&quot;lazy-operation&quot;&gt;lazy operation&lt;/h3&gt;

&lt;p&gt;kotlin에서 lambda를 사용할 때 제일 중요한 부분이 아닌가 싶다.&lt;br /&gt;
lambda를 사용하면 매번 작업마다 새로운 temporary collection을 생성해내는데, 이건 비효율 적이다. 그래서 마지막에 한 번에 연산을 마무리하도록 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lazy operation&lt;/code&gt;을 지원한다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;startsWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;asSequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;filter&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;startsWith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// lazy operation&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;large collection일 경우 lazy operation를 쓰는게 좋다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/5_1.JPG&quot; alt=&quot;lazy operation&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;intermediate operation&lt;/code&gt;은 another sequence를 return 하고,&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;terminal operation&lt;/code&gt;은 result를 return 한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;주의사항&lt;/strong&gt;:&lt;br /&gt;
If you’re targeting Java 8, streams give you one big feature that isn’t currently implemented for Kotlin collections and sequences: the ability to run a stream operation (such as map() or filter()) on multiple CPUs in parallel.&lt;/p&gt;

&lt;p&gt;다음 코드에서는, 첫 번째 find를 하고 이후의 element는 계산도 하지 않는다.&lt;br /&gt;
이런 부분도 lazy 의 장점이라고 할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;listOf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;asSequence&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;find&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;with--apply&quot;&gt;with &amp;amp; apply&lt;/h3&gt;

&lt;p&gt;with는 parameter로 받은 값의 naming을 여러번 반복해서 쓰지 않아도 되게 해주는 역할을 한다.&lt;br /&gt;
받은 parameter의 변수/함수들을 내부 호출하듯 사용하는거지.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alphabet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;StringBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;sc&quot;&gt;&apos;A&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;Z&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 여기 StringBuilder()의 함수를 그냥 호출&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;\nNow I know the alphabet!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// with()가 반환할 값&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;apply는 with랑 동일한데, 호출한 object(reciever object) 반환한다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;alphabet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;StringBuilder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;apply&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;sc&quot;&gt;&apos;A&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;&apos;Z&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;\nNow I know the alphabet!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/5</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/5</guid>
      </item>
    
      <item>
        <title>Why unexpected DynamoSizeLimitException occur?</title>
        
          <description>&lt;p&gt;I recently encountered a &lt;strong&gt;DynamoSizeLimitException&lt;/strong&gt; error unexpectedly.&lt;br /&gt;
After investigating the issue, I discovered some details that are not covered in the official AWS documentation, which I will document here.&lt;/p&gt;

&lt;h2 id=&quot;what-is-dynamosizelimitexception&quot;&gt;What is DynamoSizeLimitException&lt;/h2&gt;

&lt;p&gt;In DynamoDB, there is a size limit for items.&lt;br /&gt;
When a save request is made for an item that exceeds this predefined size, DynamoDB returns a &lt;strong&gt;DynamoSizeLimitException&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Check the &lt;a href=&quot;https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/ServiceQuotas.html#limits-items&quot;&gt;AWS DynamoDB Limits&lt;/a&gt;, you can find the following statement:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The maximum item size in DynamoDB is 400 KB, which includes both attribute name binary length (UTF-8 length) and attribute value lengths (again binary length)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In short, a single item cannot exceed 400KB.&lt;/p&gt;

&lt;h2 id=&quot;dynamosizelimitexception-occurs-under-400kb&quot;&gt;DynamoSizeLimitException Occurs Under 400KB&lt;/h2&gt;

&lt;p&gt;However, a &lt;strong&gt;DynamoSizeLimitException&lt;/strong&gt; occurred even in cases where the item size was below 400KB.&lt;br /&gt;
We were already aware of DynamoDB’s size limit and had implemented logic to handle cases where the size exceeds 400KB.&lt;/p&gt;

&lt;p&gt;Even so, the &lt;strong&gt;DynamoSizeLimitException&lt;/strong&gt; still occurred.&lt;/p&gt;

&lt;p&gt;Upon inspecting the item, it was only about 210KB in size.&lt;br /&gt;
The cause of this issue could not be found in the official documentation.&lt;/p&gt;

&lt;h2 id=&quot;why-does-dynamosizelimitexception-occur&quot;&gt;Why Does DynamoSizeLimitException Occur?&lt;/h2&gt;

&lt;p&gt;The root cause was found in &lt;strong&gt;Local Secondary Indexes (LSI)&lt;/strong&gt;.&lt;br /&gt;
When there is an LSI in DynamoDB, the size limit calculation changes.&lt;/p&gt;

&lt;p&gt;LSI uses the item as a replica and doubles the size.
Thus, &lt;strong&gt;if there are &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n&lt;/code&gt; LSIs, the maximum size used can be &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;n + 1&lt;/code&gt; times the item size&lt;/strong&gt;, which in turn reduces the item size limit.&lt;br /&gt;
In our case, we had one LSI, and the 210KB item exceeded the 400KB limit due to the LSI, leading to the issue.&lt;/p&gt;

&lt;p&gt;There is one more reason why LSI should not be used.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/dynamo/DynamoSizeLimitException</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/dynamo/DynamoSizeLimitException</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #6</title>
        
          <description>&lt;h2 id=&quot;chapter-6-the-kotlin-type-system&quot;&gt;chapter 6. The Kotlin Type System&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;kotlin&lt;/strong&gt;에서는 java와 다르게 주의깊게 알아야 하는 부분은 두 가지다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Nullable Type&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Read-Only Collection&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;nullable-type&quot;&gt;Nullable Type&lt;/h2&gt;

&lt;p&gt;Java에서는 null이 굉장히 거슬리는 문제가 됐다.&lt;br /&gt;
열심히 고려해도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NPE(Null Pointer Exception)&lt;/code&gt;는 너무 자주나고,&lt;br /&gt;
null을 체크하는 코드들은 로직을 어지럽힌다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Optional&lt;/code&gt;과 같은 기능들이 추가됐지만 코드가 이뻐지는 것 같지는 않다.&lt;br /&gt;
Kotlin에서는 이런 것들을 편하게 하기 위한 Type과 장치들을 제공한다.&lt;/p&gt;

&lt;h3 id=&quot;type&quot;&gt;Type?&lt;/h3&gt;

&lt;p&gt;Nullable Type과 Non-Nullable Type은 간단하다.&lt;br /&gt;
예제로 보면 쉽다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nullable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Type에 ?을 붙이면 nullable&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nonNullable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// compile 시점에 error 발생&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Type이 정해져있어, compile 시점에 error를 발생시키기 때문에 runtime에 의도하지 않은 NPE가 날 일이 없다.&lt;/p&gt;

&lt;h3 id=&quot;safe-call-operator-&quot;&gt;Safe Call Operator ?.&lt;/h3&gt;

&lt;p&gt;Kotlin에서 굉장한 장점이 바로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?.&lt;/code&gt; operator 이다.&lt;br /&gt;
아주 간단하고 명료하게, 읽기 쉽게 null 검사와 함수 호출을 가능하게 한다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;allCaps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;toUpperCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// s가 null -&amp;gt; return null&lt;/span&gt;
                                        &lt;span class=&quot;c1&quot;&gt;// !null -&amp;gt; return s.toUpperCase()&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;country&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;country&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// company나 address가 null이면 return null&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 같이 여러 상위 object들의 null check를 할 때 특히 유용하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;위 예제를 Java에서 모두 null check 한다고 생각하면…&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;elvis-operator-&quot;&gt;Elvis Operator ?:&lt;/h3&gt;

&lt;p&gt;null 대신 사용할 default value를 지정한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?.&lt;/code&gt;와 유사한데, default value를 명시해준다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// s가 null -&amp;gt; return &quot;&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;No Address&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;두 번째 예제와 같이 elvis operator의 우항으로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;throw&lt;/code&gt;를 넣을 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Kotlin은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;return&lt;/code&gt;이나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;throw&lt;/code&gt; 같은 연산도 식(expression)이기 때문에 elvis operator의 우항으로 넣을 수 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;safe-casts-as&quot;&gt;Safe Casts: as?&lt;/h3&gt;

&lt;p&gt;명시적 type case &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;as&lt;/code&gt;를 안전하게 할 수 있는 방법이 있다. (&lt;a href=&quot;https://meansoup.github.io/2021/01/07/kotlin_in_action_ch2/#is&quot;&gt;2장 참고&lt;/a&gt;)&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// type casting이 안될 경우 아예 함수 자체를 return false&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;not-null-assertion-&quot;&gt;Not-null assertion !!&lt;/h3&gt;

&lt;p&gt;nullable type을 절대 null이 아닐거라고 단정 짓기 위해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!!&lt;/code&gt;을 사용한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!!&lt;/code&gt; 사용한 값이 runtime에 실제 null이 올 경우 NPE가 발생한다.&lt;/p&gt;

&lt;p&gt;null 검사를 이미 했고 다시 하고싶지 않은 경우 사용할 수 있지만,&lt;br /&gt;
nullable 체크를 하지 않아도 되지만 굉장히 위험하고 추천되지 않는 방식이다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ignoreNulls&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;sNotNull&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;let&quot;&gt;let&lt;/h3&gt;

&lt;p&gt;let은 null이 아닐 경우 값을 변수에 넣어 작업을 진행하게 한다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sendEmailTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;sendEmailTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;예를 들면 위 코드를 아래와 같이 바꿀 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;lateinit&quot;&gt;lateinit&lt;/h3&gt;

&lt;p&gt;일반적으로 kotlin은 constuctor에서 모든 properties를 초기화해야 한다.&lt;br /&gt;
Junit의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@Before&lt;/code&gt; 같은 경우 메소드 안에서 초기화를 하는데, 이런 경우에 Kotlin은&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;nullable type을 쓰고 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!!&lt;/code&gt;를 쓰거나&lt;/li&gt;
  &lt;li&gt;non-nullable로 초기화를 해두거나&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;그치만 이런 방식은 좋지 않고 kotlin은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lateinit&lt;/code&gt;을 제공한다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyTest&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lateinit&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;myService&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Myservice&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 아직 초기화 안함&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Before&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setUp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;myService&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyService&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 초기화 한다&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lateinit&lt;/code&gt; property는 항상 var이어야 한다.&lt;br /&gt;
lateinit property가 초기화되기 이전에 사용되면 lateinit 관련 exception이 발생한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이 exception이 NPE보다 문제의 원인을 확인하기 훨씬 편리하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;extensions-on-nullable-types&quot;&gt;extensions on nullable types&lt;/h3&gt;

&lt;p&gt;nullable type에 대한 확장 함수는 safe call &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?.&lt;/code&gt; 없이 호출할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isNullOrBlank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// s가 null이어도 true를 반환&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;java는 this가 호출된 객체를 가리키므로 항상 null이 아니다.&lt;br /&gt;
반면 kotlin에서는 nullable type의 확장 함수에서는 this가 null이 될 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isNullOrBlank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isBlank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;type-parameter&quot;&gt;type parameter&lt;/h3&gt;

&lt;p&gt;type parameter는 기본적으로 nullable하다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printHashCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// t가 nullable&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printHashCode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// t가 not-nullable &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;T의 type은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Any?&lt;/code&gt;로 추론되기 때문에 nullable하고 not-nullable로 바꾸려면 Any를 명시한다.&lt;/p&gt;

&lt;h3 id=&quot;platform-type&quot;&gt;platform type&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;platform type&lt;/strong&gt;은 nullable인지 아닌지 알 수 없는 타입을 말한다.&lt;br /&gt;
이 type은 nullable로 처리해도 되고, not-nullable로 처리해도 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;모두 nullable로 하도록 해도 되겠지만 그러면 불필요한 null 체크가 필요할 수 있어 platform type을 만듦&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그런데 이 type을 kotlin에서 사용할 수 있도록 허락하지 않는다.&lt;br /&gt;
Java와 코드가 혼용될 때, Java의 type들이 kotlin에서 platform type으로 표현된다.&lt;br /&gt;
이럴 경우 java 처럼 runtime에 대한 handling은 개발자의 몫이다.&lt;/p&gt;

&lt;p&gt;platform type의 표기는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String!&lt;/code&gt;과 같다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;사용할 수는 없고 error msg에서 확인할 수 있음.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/6</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/6</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #6-2</title>
        
          <description>&lt;h2 id=&quot;chapter-6-2-the-kotlin-type-system&quot;&gt;chapter 6-2. The Kotlin Type System&lt;/h2&gt;

&lt;h2 id=&quot;primitive-types&quot;&gt;Primitive Types&lt;/h2&gt;

&lt;p&gt;java는 &lt;strong&gt;primitive type&lt;/strong&gt;(int 등)과 &lt;strong&gt;reference type&lt;/strong&gt;(string 등)을 갖는다.&lt;br /&gt;
Collection에서는 reference type이 필요하고 이런 상황들에서 primitive type을 쓰는 방법이 &lt;strong&gt;wrapper type&lt;/strong&gt;을 이용하는 것이다.&lt;/p&gt;

&lt;p&gt;kotlin에서는 wrapper type을 따로 구분하지 않고 사용한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그치만 항상 객체로 표현하는 것은 비효율적이고, 실행 시점에 가장 효율적인 방식으로 표현한다.&lt;/li&gt;
  &lt;li&gt;kotlin의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Int&lt;/code&gt; type은 대부분의 경우 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;int&lt;/code&gt;로 컴파일 되고, Collection 등에 사용될 땐 java의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Integer&lt;/code&gt;가 들어간다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;java type에 맞는 kotlin type&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;Integer types&lt;/strong&gt; - Byte, Short, Int, Long&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Floating-point number types&lt;/strong&gt; - Float, Double&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;The charater type&lt;/strong&gt; - Char&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;The boolean type&lt;/strong&gt; - Boolean&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;kotlin도 마찬가지로 &lt;strong&gt;jvm에서 primitive type을 collection에서 받아주지 않으므로&lt;/strong&gt; null을 사용하는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Int?&lt;/code&gt;와 같은 경우 외에도 collection에서 사용될 땐 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Integer&lt;/code&gt;로 변환된다.&lt;/p&gt;

&lt;h3 id=&quot;number-conversions&quot;&gt;Number conversions&lt;/h3&gt;

&lt;p&gt;kotlin에서는 number type의 자동 변환을 해주지 않는다.&lt;br /&gt;
Int를 Long에 넣으려면 명시적 변환을 해줘야한다는 말이다.&lt;/p&gt;

&lt;h2 id=&quot;root-type-any-any&quot;&gt;Root type Any, Any?&lt;/h2&gt;

&lt;p&gt;Java에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Object&lt;/code&gt;가 최상위 클래스이고,&lt;br /&gt;
Kotlin에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Any&lt;/code&gt;가 그렇다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Java에서 Object를 주면 Kotlin에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Any!&lt;/code&gt;가 되는거다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;unit-type&quot;&gt;Unit type&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Unit&lt;/code&gt; type은 Java에서의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;void&lt;/code&gt;와 같다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Unit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 위와 같음&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Java의 void와 다른 점은 Unit은 모든 기능을 갖는 일반적인 타입이고,&lt;br /&gt;
type argument 쓸 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Unit&lt;/code&gt; type에 속한 값은 딱 하나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Unit&lt;/code&gt; 뿐이다.&lt;/p&gt;

&lt;p&gt;generic에서 Unit을 반환할 때 유용하다. (void는 안되니까)&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Processor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NoResultProcessor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Processor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Unit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* return이 필요 없음 */&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;nothing-type&quot;&gt;Nothing type&lt;/h2&gt;

&lt;p&gt;성공적으로 return하는 경우가 없는 경우, 즉 fail 함수와 같이 return 값 자체가 의미 없는 함수.&lt;br /&gt;
무한 loop를 도는 함수.&lt;br /&gt;
함수가 정상적으로 끝나지 않는다는 사실을 명시하는 것이고, 코드 분석에 유용하단다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Nothing&lt;/code&gt;은 return type이나 return type으로 쓰일 type parameter로만 쓸 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;collections&quot;&gt;Collections&lt;/h2&gt;

&lt;p&gt;Collections에서도 nullable이 적용된다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&amp;gt;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Int가 nullable, List는 not-nullable&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;?&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// Int는 not-nullable, List는 nullable&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&amp;gt;?&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Int도 List도 nullable&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;read-only--mutable&quot;&gt;Read-only &amp;amp; mutable&lt;/h3&gt;

&lt;p&gt;Kotlin에서는 collection에 대해 수정 가능한지 여부를 제공한다.&lt;br /&gt;
즉, 수정 불가능한 collection을 제공한다는 것이다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Java에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;final&lt;/code&gt;로 생성하더라도 collection 자체를 바꿀 수 없을 뿐 내부 entity들을 추가/삭제하는 것은 가능했다.&lt;br /&gt;
이런 것을 막기 위해선 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Collection.unmodifiableList()&lt;/code&gt; 같은 함수로 생성하거나 따로 unmodifiable collection을 구현해야 했다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Kotlin에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MutableCollection&lt;/code&gt;과 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Collection&lt;/code&gt;을 가지고 collection의 변경 가능 여부를 구별한다.&lt;br /&gt;
이를 통해 어떤 코드에서 collection에 대해 수정을 하는지, 조회만 하는지를 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/6_1.JPG&quot; alt=&quot;collection structure&quot; /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;kotlin은 &lt;strong&gt;java.util&lt;/strong&gt;의 collection 구조를 mutable collection에 그대로 적용함&lt;/li&gt;
  &lt;li&gt;Java의 collection들(ArrayList 등)을 Kotlin interface를 상속한 것처럼 취급함&lt;/li&gt;
  &lt;li&gt;Java와 kotlin의 코드를 혼용하면, java에서는 모두 수정이 가능&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;collection-생성-함수&quot;&gt;collection 생성 함수&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;collection type&lt;/th&gt;
      &lt;th&gt;read only&lt;/th&gt;
      &lt;th&gt;mutable&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;List&lt;/td&gt;
      &lt;td&gt;listOf&lt;/td&gt;
      &lt;td&gt;mutableListOf, arrayListOf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Set&lt;/td&gt;
      &lt;td&gt;setOf&lt;/td&gt;
      &lt;td&gt;mutableSetOf, hashSetOf, linkedSetOf, sortedSetOf&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Map&lt;/td&gt;
      &lt;td&gt;mapOf&lt;/td&gt;
      &lt;td&gt;mutableMapOf, hashMapOf, linkedMapOf, sortedMapOf&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;array&quot;&gt;Array&lt;/h2&gt;

&lt;p&gt;기본적으로 Array보다는 Collection을 사용해야 한다.&lt;br /&gt;
Java의 API들이 Array를 사용하는 경우가 있어 써야할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;사실 java에서도 array를 잘 안쓰는 것 같은데..&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arrayOf&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;arrayOfNulls&lt;/code&gt;로 생성할 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;toTypedArray&lt;/code&gt;로 collection을 Array로 바꿀 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IntArray&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ByteArray&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CharArray&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;BooleanArray&lt;/code&gt; 등의 클래스들은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;int[]&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;byte[]&lt;/code&gt; 등으로 컴파일 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;생성자가 size를 받고 default 값으로 초기화 된 배열을 만듦&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/6-2</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/6-2</guid>
      </item>
    
      <item>
        <title>config.js</title>
        
          <description>&lt;p&gt;vue로 github.io에 github page를 로딩하기 위해 build 했다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vue create {project}&lt;/code&gt; 로 project를 생성하고,&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm run build&lt;/code&gt; 로 build 한 뒤,&lt;/li&gt;
  &lt;li&gt;github에 push&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;하면 되야하는데 되지 않는다.&lt;/p&gt;

&lt;p&gt;github에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/docs&lt;/code&gt;에 있는 정적 페이지들을 호출할 수 있도록 제공하고 있고 vue의 build 산출물이 docs로 쓰여지게 해야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;default는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/dist&lt;/code&gt; 인데 이걸 바꿔주는 것을 config.js에서 할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;module&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;outputDir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./docs&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;publicPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;/votes/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;npm run build&lt;/code&gt; 시 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/docs&lt;/code&gt;로 산출물이 생성되고, publicPath는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/votes&lt;/code&gt;로 시작하게 된다.&lt;/p&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/vue/config</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/vue/config</guid>
      </item>
    
      <item>
        <title>Why use linux screen, How to use screen?</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;Linux Commands&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/dev-tools/linux-commands/terminal&quot; class=&quot;btn&quot;&gt;Terminal Shortcut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/tmux&quot; class=&quot;btn&quot;&gt;tmux&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/cut&quot; class=&quot;btn&quot;&gt;cut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/jq&quot; class=&quot;btn&quot;&gt;jq&lt;/a&gt;
&lt;a href=&quot;/docs/tools/linux-commands/screen&quot; class=&quot;btn btn-purple&quot;&gt;screen&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/split&quot; class=&quot;btn&quot;&gt;split&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;When performing tasks in a screen session, the session persists even if the terminal session disconnects, ensuring that your work is not interrupted.&lt;br /&gt;
For this reason, screen is commonly used on Linux servers for batch tasks, long-running processes, and background jobs.&lt;/p&gt;

&lt;p&gt;While screen can also be used for window splitting, I generally prefer to use tmux for that purpose.&lt;/p&gt;

&lt;h2 id=&quot;external-session-commands&quot;&gt;External Session Commands&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Action&lt;/th&gt;
      &lt;th&gt;Command&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;List screen sessions&lt;/td&gt;
      &lt;td&gt;screen -list&lt;br /&gt;screen -ls&lt;/td&gt;
      &lt;td&gt;Displays a list of open screen sessions, showing whether each session is attached/detached, the creation time, and the session ID.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Start a screen&lt;/td&gt;
      &lt;td&gt;screen -S {name}&lt;/td&gt;
      &lt;td&gt;Creates and enters a new screen session with the specified &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt;.&lt;br /&gt;Even if a session with the same name exists, a new session will be created with a different session ID.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Enter a screen&lt;/td&gt;
      &lt;td&gt;screen -r {name} or {sessionId}&lt;/td&gt;
      &lt;td&gt;Re-enters an existing screen session using the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;name&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sessionId&lt;/code&gt;.&lt;br /&gt;If there are multiple sessions with the same name, the session ID must be specified.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Enter a screen&lt;/td&gt;
      &lt;td&gt;screen -x {name} or {sessionId}&lt;/td&gt;
      &lt;td&gt;Similar to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-r&lt;/code&gt; when used alone.&lt;br /&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-x&lt;/code&gt; option allows entry into an attached session (already connected in another terminal).&lt;br /&gt;The &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-r&lt;/code&gt; option does not allow this.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kill a screen session&lt;/td&gt;
      &lt;td&gt;screen -X -S {name} kill&lt;/td&gt;
      &lt;td&gt;Kills a specific session.&lt;br /&gt;This is used to terminate a session that was detached without being exited, keeping it alive.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Kill all screen sessions&lt;/td&gt;
      &lt;td&gt;killall screen&lt;br /&gt;pkill screen&lt;/td&gt;
      &lt;td&gt;Terminates all screen sessions.&lt;br /&gt;Use with caution as it can lead to accidental termination of important sessions.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;internal-session-commands&quot;&gt;Internal Session Commands&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Action&lt;/th&gt;
      &lt;th&gt;Command&lt;/th&gt;
      &lt;th&gt;Description&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Detach from screen&lt;/td&gt;
      &lt;td&gt;ctrl + a d&lt;/td&gt;
      &lt;td&gt;Detaches from the screen session, leaving it running in the background.&lt;br /&gt;This is the most frequently used command.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Check session ID&lt;/td&gt;
      &lt;td&gt;echo $STY&lt;/td&gt;
      &lt;td&gt;Displays the session ID of the current screen session.&lt;br /&gt;This command is often used to verify whether the terminal is inside a screen session.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;There are many other commands available, but for window splitting, using &lt;a href=&quot;/docs/dev-tools/linux-commands/tmux&quot;&gt;tmux&lt;/a&gt; is more convenient.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/tools/linux-commands/screen</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/tools/linux-commands/screen</guid>
      </item>
    
      <item>
        <title>대용량 파일 터미널에서 split으로 자르기</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;Linux Commands&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/dev-tools/linux-commands/terminal&quot; class=&quot;btn&quot;&gt;Terminal Shortcut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/tmux&quot; class=&quot;btn&quot;&gt;tmux&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/cut&quot; class=&quot;btn&quot;&gt;cut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/jq&quot; class=&quot;btn&quot;&gt;jq&lt;/a&gt;
&lt;a href=&quot;/docs/tools/linux-commands/screen&quot; class=&quot;btn&quot;&gt;screen&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/split&quot; class=&quot;btn btn-purple&quot;&gt;split&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;linux에서 big file을 handling 할 때 사용하는 방법.&lt;/p&gt;

&lt;p&gt;최근 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;split&lt;/code&gt;을 사용할 일들이 더 많아져서, 정리하고자 올린다.&lt;/p&gt;

&lt;p&gt;linux에서 서버를 관리하다보면, 생각보다 큰 파일들을 관리해야할 일들이 많다.&lt;br /&gt;
내가 편리하게? 어쩌면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;split&lt;/code&gt; 없이는 해결할 수 없는 문제들을 해결하기 위해 사용하는 커맨드를 정리한다.&lt;/p&gt;

&lt;h2 id=&quot;문제가-됐던-파일&quot;&gt;문제가 됐던 파일&lt;/h2&gt;
&lt;p&gt;최근에 내가 확인한 파일은 아래와 같은 파일들이었다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;하나의 라인에 파일이 수십 GB 쓰여있는 파일.&lt;/li&gt;
  &lt;li&gt;수천만 ~ 수억 라인을 갖는 수십 GB 파일.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;문제&quot;&gt;문제&lt;/h2&gt;
&lt;p&gt;내가 겪은 문제는..&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;큰 파일들은 load하기가 어려워서 vi로 수십 GB의 파일을 load하면 load가 되지 않는 경우가 많다.
    &lt;ul&gt;
      &lt;li&gt;적당히 큰 파일들은 켜지지만 딜레이가 굉장히 컸다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;1번의 한 라인으로 쓰인 파일은 head로 일부를 확인할 수도 없다.
    &lt;ul&gt;
      &lt;li&gt;head가 line을 출력하니까.. head시 수십 GB를 print하는 상황&lt;/li&gt;
      &lt;li&gt;cut으로 일부 출력이 가능하지만, 포맷을 모르는 한 라인은 무작정 cut을 할수도 없고 시간이 오래걸림&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;2번의 여러 라인의 파일은 diff, uniq 같은 커맨드에 대해 process가 kill 되어 버린다. (손을 쓸 수 없다)&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;split-사용-사례&quot;&gt;split 사용 사례&lt;/h2&gt;
&lt;p&gt;위와 같은 문제를 해결하기 위해 아래와 같이 사용했다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;data를 확인하기 위해 파일을 열어봐야 하는 상황이었다.
    &lt;ul&gt;
      &lt;li&gt;file을 split으로 byte 단위로 나누어 열어볼 수 있게 작게 나눴다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;data를 diff해야 하는 상황이었다.
    &lt;ul&gt;
      &lt;li&gt;그 외 다른 커맨드나 python 등의 작업에서 로드시 메모리 문제가 없게하기 위해서도 사용할 수 있다.&lt;/li&gt;
      &lt;li&gt;file을 split으로 line 단위로 나누어 작업하였다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;split-사용-방법&quot;&gt;split 사용 방법&lt;/h2&gt;

&lt;h3 id=&quot;byte-단위로-나누기&quot;&gt;byte 단위로 나누기&lt;/h3&gt;
&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; 100MB sourcefile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게하면 100MB 단위로 파일을 나눌 수 있다.&lt;br /&gt;
개인적으로 100MB 정도면.. 파일을 편하게 열어볼 수 있겠더라.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;instance의 cpu, mem 사양마다 다를 것.&lt;/li&gt;
  &lt;li&gt;diff등의 작업에서는 더 크게 1~10GB로 작업했다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;위 1번 문제처럼 파일이 라인 단위가 아닐 때 byte 단위로 나누면 좋지 싶다.&lt;/p&gt;

&lt;h3 id=&quot;line-단위로-나누기&quot;&gt;line 단위로 나누기&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; 1000000 sourcefile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게하면 1000000 라인 단위로 파일을 나눌 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;target-file-적용하기&quot;&gt;target file 적용하기&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-b&lt;/span&gt; 100MB sourcefile targetfile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위 예제에서 targetfile이 없을 경우, targetfile의 name은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xaa&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xab&lt;/code&gt; … 같은 식이다.&lt;br /&gt;
targetfile을 명시해주면, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;targetfileaa&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;targetfileab&lt;/code&gt; … 같은 식이 된다.&lt;/p&gt;

&lt;h3 id=&quot;targetfile-suffix&quot;&gt;targetfile suffix&lt;/h3&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;split&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; 100 sourcefile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-d&lt;/code&gt; option을 적용하면 alphabet suffix가 numeric으로 바뀐다.&lt;br /&gt;
&lt;strong&gt;before&lt;/strong&gt;: targetfile의 name은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xaa&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xab&lt;/code&gt; …&lt;br /&gt;
&lt;strong&gt;after&lt;/strong&gt;: targetfile의 name은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x01&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x02&lt;/code&gt; …&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://kb.iu.edu/d/afar&quot;&gt;https://kb.iu.edu/d/afar&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux-commands/split</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux-commands/split</guid>
      </item>
    
      <item>
        <title>How to Use linux cut command, Parsing Large Files with cut in the terminal</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;Linux Commands&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/dev-tools/linux-commands/terminal&quot; class=&quot;btn&quot;&gt;Terminal Shortcut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/tmux&quot; class=&quot;btn&quot;&gt;tmux&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/cut&quot; class=&quot;btn btn-purple&quot;&gt;cut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/jq&quot; class=&quot;btn&quot;&gt;jq&lt;/a&gt;
&lt;a href=&quot;/docs/tools/linux-commands/screen&quot; class=&quot;btn&quot;&gt;screen&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/split&quot; class=&quot;btn&quot;&gt;split&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The &lt;strong&gt;cut&lt;/strong&gt; command is one of the commands used to parse file data.&lt;br /&gt;
It is highly efficient in the process of parsing and preprocessing data.&lt;/p&gt;

&lt;h2 id=&quot;usability&quot;&gt;Usability&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;When you want to view only part of a simple file, you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sed&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awk&lt;/code&gt;, but &lt;strong&gt;cut&lt;/strong&gt; offers the best performance.
    &lt;ul&gt;
      &lt;li&gt;You can see a noticeable performance difference when dealing with large files over 1GB.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;When you want to inspect large files, opening them with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vi&lt;/code&gt; may take a long time, but with &lt;strong&gt;cut&lt;/strong&gt;, you can view the content quickly.&lt;/li&gt;
  &lt;li&gt;If a single line is extremely large (for example, 10GB), you might not be able to open it with tools like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;vi&lt;/code&gt;. Since it’s a single line, even &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;head&lt;/code&gt; won’t help you view it. In such cases, you can use &lt;strong&gt;cut&lt;/strong&gt; to inspect the data.
    &lt;ul&gt;
      &lt;li&gt;Of course, using &lt;a href=&quot;/docs/dev-tools/linux-commands/split&quot;&gt;split&lt;/a&gt; in such scenarios is also a good option.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;When using scripts like Python, preprocessing the data can significantly boost performance.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;This kind of data preprocessing is very effective when dealing with large files that are simple and have a consistent format.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;When extracting userdata for batch processing.&lt;/li&gt;
  &lt;li&gt;When parsing large amounts of simple, non-standard logs.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;how-to-use&quot;&gt;How to Use&lt;/h2&gt;

&lt;p&gt;While there are several ways to use &lt;strong&gt;cut&lt;/strong&gt;, the most common usage is with &lt;strong&gt;cut -d -f&lt;/strong&gt;.&lt;br /&gt;
It’s also useful when you need to extract specific characters.&lt;/p&gt;

&lt;p&gt;A limitation of &lt;strong&gt;cut&lt;/strong&gt; is that it only allows you to cut by a single character, but there are many datasets where this is useful, and the performance is excellent.  &lt;br /&gt;
You can use it alongside other commands to parse data with consistent formats like db dumps, CSVs, and JSON files. &lt;br /&gt;
It is frequently used for file parsing, data extraction, and in command pipes.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;Example&lt;/p&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/terminal-commands/cut.gif&quot; alt=&quot;cut&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;cutting-by-delimiter&quot;&gt;Cutting by Delimiter&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;DELIMITER&apos;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; INDEX FILE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;-d&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Option to specify the character to cut by.&lt;/li&gt;
  &lt;li&gt;Since only a single character is allowed, you cannot use strings.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;-f&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Option to select which field(s) to extract after cutting.&lt;/li&gt;
  &lt;li&gt;You can specify using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N-M&lt;/code&gt;, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N,M-L&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ignoring-lines-without-delimiters&quot;&gt;Ignoring Lines Without Delimiters&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;DELIMITER&apos;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; INDEX &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; FILE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;-s&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Option to skip lines that do not contain the delimiter.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;changing-the-delimiter&quot;&gt;Changing the Delimiter&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;DELIMITER&apos;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; INDEX &lt;span class=&quot;nt&quot;&gt;--output-delimiter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;OUTPUT DELIMITER&quot;&lt;/span&gt; FILE
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;–output-delimiter&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Specifies a string to replace the delimiter used in the output.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cutting-by-character&quot;&gt;Cutting by Character&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; INDEX
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;-c&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Allows you to cut by character.&lt;/li&gt;
  &lt;li&gt;You can specify ranges using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N-M&lt;/code&gt;, or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N,M-L&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/tools/linux-commands/cut</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/tools/linux-commands/cut</guid>
      </item>
    
      <item>
        <title>java coverage test 개념 및 jacoco 사용법</title>
        
          <description>&lt;p&gt;최근 회사에서 jacoco로 line coverage exclude를 할 일이 생겼다.&lt;br /&gt;
protobuf로 java file을 만들었는데, protobuf 생성 파일이 라인 수가 꽤 되서 line coverage를 떨어뜨리고 있었다.&lt;/p&gt;

&lt;p&gt;exclude를 적용하는 방법에 애를 먹어 정리한다.&lt;/p&gt;

&lt;h2 id=&quot;jacoco란&quot;&gt;jacoco란?&lt;/h2&gt;

&lt;p&gt;먼저 jacoco가 뭔지 알아야겠다.&lt;br /&gt;
jacoco는 line coverage report를 만들어주는 툴이다.&lt;/p&gt;

&lt;p&gt;jacoco가 직접 test를 한다고 생각하기 쉬운데 실제로 그렇지 않다.&lt;br /&gt;
jacoco는 surefire의 test coverage information을 가져다가 보고서를 작성하는 녀석이다.&lt;/p&gt;

&lt;h2 id=&quot;jacoco-goal&quot;&gt;jacoco goal&lt;/h2&gt;

&lt;p&gt;사실 jacoco를 쓸 때 알아야 할 것들이 많은 건 아니다.&lt;br /&gt;
내가 쓰면서 의문이 있었던 부분은 pom.xml에 추가되는 goal들이 무슨 의미였는지였다.&lt;/p&gt;

&lt;p&gt;기본으로 추가하는 pom.xml plugin.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.jacoco&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jacoco-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.8.2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;prepare-agent&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;report&lt;span class=&quot;nt&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;phase&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/phase&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;report&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;prepare-agent&quot;&gt;prepare-agent&lt;/h3&gt;

&lt;p&gt;agent는 &lt;strong&gt;collect coverage information when maven-surefire-plugin runs the tests&lt;/strong&gt;을 한다.&lt;br /&gt;
위에서 말했듯이 surefire의 결과를 가져오는 역할이다.&lt;/p&gt;

&lt;p&gt;별도의 destFile이 set되어있지 않다면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/jacoco.exec&lt;/code&gt;에 가져온다.&lt;/p&gt;

&lt;h3 id=&quot;report&quot;&gt;report&lt;/h3&gt;

&lt;p&gt;report는 &lt;strong&gt;creates code coverage reports for tests in HTML, XML, CSV formats&lt;/strong&gt;을 한다.&lt;br /&gt;
agent에서 가져온 data로 coverage report를 작성하는 역할이다.&lt;/p&gt;

&lt;p&gt;별도의 outputDirectory가 set되어있지 않다면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;target/site/jacoco&lt;/code&gt;에 파일들을 생성한다.&lt;/p&gt;

&lt;h3 id=&quot;check&quot;&gt;check&lt;/h3&gt;

&lt;p&gt;check는 &lt;strong&gt;validates the coverage rules&lt;/strong&gt;를 한다.&lt;br /&gt;
coverage가 통과 되었는지 등을 확인할 수 있는 goal인데, 필수적으로 필요한 건 아니다.&lt;br /&gt;
여기서 goal을 설정하면 build하다가 fail을 만들 수 있다.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;check와 같이 사용되는 goal들이 더 있는데, document를 확인하면 될 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;jacoco-command&quot;&gt;jacoco command&lt;/h2&gt;

&lt;p&gt;이제 jacoco command를 확인해보자.&lt;br /&gt;
intellij에서 run configuration을 jacoco로 하고 line coverage test를 돌리면 intellij test가 돌더라..&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이 문제는 내 pc에서만 그럴지도 모르겠다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그래서 jacoco 결과를 받지 못했고, command로 돌려서 결과를 확인하는 방법을 찾았다.&lt;/p&gt;

&lt;p&gt;The command &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn clean test&lt;/code&gt; runs unit tests and creates the code coverage report for unit tests to the directory target/site/jacoco-ut.&lt;br /&gt;
The command &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn clean verify -P integration-test&lt;/code&gt; runs integration tests and creates the code coverage report for integration tests to the directory target/site/jacoco-it.&lt;br /&gt;
The command &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn clean verify -P all-tests&lt;/code&gt; runs unit and integration tests and creates code coverage reports for unit and integration tests.&lt;/p&gt;

&lt;p&gt;기본적으로 unit test에 대한 coverage를 측정하니까 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;mvn clean test&lt;/code&gt;를 통해 coverage report를 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;주의사항&lt;/strong&gt;&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;에서 surefire.skipTests를 true로 설정했다면 surefire가 돌지 않고,&lt;br /&gt;
surefire가 돌지 않는다면 jacoco는 test report를 만들 수 없다.&lt;/p&gt;

&lt;h2 id=&quot;jacocoexec&quot;&gt;jacoco.exec&lt;/h2&gt;

&lt;p&gt;위 agent에서 확인한 jacoco.exec 파일은 열어서 확인할 수 없었다.&lt;br /&gt;
jacoco.exec는 eclipse나 intellij에서 확인할 수 있었다.&lt;/p&gt;

&lt;p&gt;intellij 기준&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Run &amp;gt; Show Code Coverage Data&lt;/li&gt;
  &lt;li&gt;jacoco.exec 찾아서 선택&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;jacoco-exclude&quot;&gt;jacoco exclude&lt;/h2&gt;

&lt;p&gt;jacoco exclude가 이번 글의 목적이었다.&lt;br /&gt;
exclude를 확인하는데 굉장히 오랜 삽질을 했는데, 위에 적어둔 개념들이 부족했기 때문이다..&lt;/p&gt;

&lt;p&gt;jacoco.exec가 jacoco report인 줄 알았고, intellij에서 이거만 주구장창 보면서 exclude를 확인했으니.. 절대 확인할 수 없었다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;위를 다시 봐보자. jacoco.exec는 surefire의 coverage information이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그래서 결국 jacoco exclude를 확인하려면 report 결과물의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;index.html&lt;/code&gt; 이나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jacoco.xml&lt;/code&gt;을 확인해야 한다.&lt;/p&gt;

&lt;h3 id=&quot;jacoco-exclude-1&quot;&gt;jacoco exclude&lt;/h3&gt;

&lt;p&gt;jacoco plugin에서 exclude를 하면 test report에서 exclude를 시키는 것이다.&lt;br /&gt;
exclude rule은 굉장히 쉽다.
공식 docu를 보면 **, ?, * 등을 활용할 수 있음을 명시하고 있다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;excludes&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;exclude&amp;gt;&lt;/span&gt;**/protobuf/*&lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclude&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/excludes&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;surefire-exclude&quot;&gt;surefire exclude&lt;/h3&gt;

&lt;p&gt;surefire를 계속 얘기하는건.. 삽질을 많이 했다는거다.&lt;br /&gt;
그만큼 명확하게 정리된 글이 없었기도 한 것 같다.&lt;/p&gt;

&lt;p&gt;surefire에서도 exclude를 할 수 있는데,&lt;br /&gt;
surefire에서 exclude하면 test를 아예 돌려버리지 않는 것이다.&lt;/p&gt;

&lt;p&gt;즉 jacoco는 exclude로 coverage 대상에서 제외시켜 coverage를 올리지만,&lt;br /&gt;
surefire에서 exclude하면 작성된 &lt;strong&gt;test를 제외&lt;/strong&gt;시켜 coverage가 되려 떨어질 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://tech.asimio.net/2019/04/23/Reporting-Code-Coverage-using-Maven-and-JaCoCo-plugin.html#jacoco-rules&quot;&gt;jacoco 개념 참고&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.eclemma.org/jacoco/trunk/doc/maven.html&quot;&gt;jacoco 공식 document&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://tech.asimio.net/2019/04/23/Reporting-Code-Coverage-using-Maven-and-JaCoCo-plugin.html&quot;&gt;check goal 설정 관련 예제&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.petrikainulainen.net/programming/maven/creating-code-coverage-reports-for-unit-and-integration-tests-with-the-jacoco-maven-plugin/&quot;&gt;jacoco command line 확인&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/17973067/how-to-use-jacoco-exec-report&quot;&gt;jacoco.exec 확인&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/test/jacoco</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/test/jacoco</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #7</title>
        
          <description>&lt;h2 id=&quot;chapter-7-operator-overloading-and-other-conventions&quot;&gt;chapter 7. Operator overloading and other conventions&lt;/h2&gt;

&lt;h2 id=&quot;why-convensions&quot;&gt;why convensions?&lt;/h2&gt;

&lt;p&gt;Java에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Iterable&lt;/code&gt;을 구현하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for&lt;/code&gt; loop를 사용할 수 있고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AutoCloseable&lt;/code&gt;을 구현하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;try-with-resources&lt;/code&gt;를 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Java는 이처럼 어떤 type인지가 중요함.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Kotlin에서도 Kotlin은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plus&lt;/code&gt; 라는 함수를 정의하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt; 연산자로 사용할 수 있는 등의 방식으로 유사한 특성을 제공한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Kotlin 에서는 함수의 이름과 연관이 있다.&lt;/li&gt;
  &lt;li&gt;Kotlin이 이런 방식을 사용하는 건 기존의 Java class를 kotlin에 적용하기 위해서.
    &lt;ul&gt;
      &lt;li&gt;새로운 class를 만들 수는 없지만 새로운 함수는 추가할 수 있으니까.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;overloading-arithmetic-operators&quot;&gt;Overloading arithmetic operators&lt;/h2&gt;

&lt;p&gt;BigInteger class나 Point class에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plus&lt;/code&gt; 함수를 호출하는 대신 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt;로 사용하는 것이 이해하기에도 가독성 면에서도 좋다.&lt;/p&gt;

&lt;p&gt;예제를 보자.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;data class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;plus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;val p1 = Point(10, 20)&lt;br /&gt;
val p2 = Point(30, 40)&lt;br /&gt;
println(p1 + p2)&lt;br /&gt;
Point(x=40, y=60)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plus&lt;/code&gt; 함수 앞에는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator&lt;/code&gt;가 꼭 붙어야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;모든 operator를 정의할 때 필요함.&lt;/li&gt;
  &lt;li&gt;이게 없이 operator 함수 명들을 사용하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator modifier is required&lt;/code&gt;라는 에러가 발생.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a + b&lt;/code&gt;는 내부적으로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.plus(b)&lt;/code&gt;를 호출함.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;arithmetic-operators&quot;&gt;arithmetic operators&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;expression&lt;/th&gt;
      &lt;th&gt;Function name&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;a * b&lt;/td&gt;
      &lt;td&gt;times&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;a / b&lt;/td&gt;
      &lt;td&gt;div&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;a % b&lt;/td&gt;
      &lt;td&gt;rem&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;a + b&lt;/td&gt;
      &lt;td&gt;plus&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;a - b&lt;/td&gt;
      &lt;td&gt;minus&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;operator overloading을 하더라도 연산자 우선순위가 적용된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a + b * c&lt;/code&gt;에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b * c&lt;/code&gt;가 먼저 수행됨.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;different-operand-types&quot;&gt;different operand types&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;toInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;scale&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;toInt&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;val p = Point(10, 20)&lt;br /&gt;
println(p * 1.5)&lt;br /&gt;
Point(x=15, y=30)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;parameter의 type이 같지 않아도 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;여기서도 역시나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a * b&lt;/code&gt;는 내부적으로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.times(b)&lt;/code&gt;로 치환된다.
    &lt;ul&gt;
      &lt;li&gt;중요한 것은 &lt;strong&gt;교환 법칙&lt;/strong&gt;을 지원하지 않는다는 것.
        &lt;ul&gt;
          &lt;li&gt;즉, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;b * a&lt;/code&gt;는 다른 식이고 위의 method에 적용될 수 없음.&lt;/li&gt;
          &lt;li&gt;필요하다면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator fun Double.times(p: Point)&lt;/code&gt; method를 정의해야 함&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;different-result-type&quot;&gt;different result type&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Char&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;repeat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;println(‘a’ * 3)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;aaa&lt;/p&gt;

&lt;p&gt;유사하게 parameter들과 result의 type이 달라도 된다.&lt;/p&gt;

&lt;h3 id=&quot;bit-operator&quot;&gt;bit operator&lt;/h3&gt;

&lt;p&gt;kotlin은 standard number type에 대한 bit operator를 제공하지 않는다.&lt;br /&gt;
bit 연산이 필요한 경우 아래 함수들을 사용한다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;java bit operator&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;kotlin method&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;«&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;shl&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;»&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;shr&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;»&amp;gt;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;ushr&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;&amp;amp;&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;and&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;|&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;or&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;^&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;xor&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;~&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;inv&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;assign-operator&quot;&gt;assign operator&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+=&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-=&lt;/code&gt; 등의 함수들을 따로 정의할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plusAssign&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minusAssign&lt;/code&gt;과 같은 함수&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+=&lt;/code&gt; operator는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plus&lt;/code&gt;(a = a.plus(b)) 와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plusAssign&lt;/code&gt;(a.plusAssign(b)) 양쪽으로 컴파일될 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;어떤 class가 이 두 함수를 모두 정의하고 둘 다 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+=&lt;/code&gt;에 사용 가능한 경우 컴파일 에러가 발생.&lt;/li&gt;
  &lt;li&gt;class과 일관성있게 설계하는 것이 좋다.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plus&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plusAssign&lt;/code&gt;을 동시에 정의하는 것은 피하자.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plus&lt;/code&gt;의 경우 새로운 값을 반환하는 것이고,&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plusAssign&lt;/code&gt;의 경우 현재 값을 변경하는 것이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Point&lt;/code&gt;처럼 변경 불가능한 class라면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plus&lt;/code&gt;만 있는 것이 맞다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;builder&lt;/code&gt;같이 변경 가능한 class를 설계한다면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;plusAssign&lt;/code&gt;만 있는 것이 맞다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;kotlin collection은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;+=&lt;/code&gt;를 모두 제공한다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;val list = arrayListOf(1, 2)&lt;br /&gt;
list += 3&lt;br /&gt;
val newList = list + listOf(4, 5)&lt;br /&gt;
println(list)&lt;br /&gt;
[1, 2, 3]&lt;br /&gt;
println(newList)&lt;br /&gt;
[1, 2, 3, 4, 5]&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;unary-operator&quot;&gt;unary operator&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;expression&lt;/th&gt;
      &lt;th style=&quot;text-align: center&quot;&gt;function name&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;+a&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;unaryPlus&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;-a&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;unaryMinus&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;!a&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;not&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;++a, a++&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;inc&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;–a, a–&lt;/td&gt;
      &lt;td style=&quot;text-align: center&quot;&gt;dec&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;동일하게 unary operator에서도 overloading을 할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;comparison-operators&quot;&gt;comparison operators&lt;/h2&gt;

&lt;h3 id=&quot;equals&quot;&gt;equals&lt;/h3&gt;

&lt;p&gt;class에 대해 배울 때 kotlin은 &lt;a href=&quot;https://meansoup.github.io/2021/01/31/kotlin_in_action_ch4/#data-class&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;==&lt;/code&gt;로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals&lt;/code&gt;를 호출한다&lt;/a&gt;는 것을 배웠다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;!=&lt;/code&gt;도 동일하게 equals를 호출한다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kotlin&lt;/code&gt;은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;==&lt;/code&gt;에 대해서 null check를 하기 때문에 nullable 값에도 적용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java처럼 귀찮은 null 체크를 직접하거나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals&lt;/code&gt; 내부에서 구현하지 않아도 됨.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a == b&lt;/code&gt;가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a?.equals(b) ?: (b == null)&lt;/code&gt;로 컴파일 되기 때문.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Any&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;false&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Point의 equals를 구현하면 위와 같다.&lt;/p&gt;

&lt;p&gt;equals는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Any&lt;/code&gt;에 정의된 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals&lt;/code&gt;를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;override&lt;/code&gt; 하는 것이다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Any&lt;/code&gt;에는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals&lt;/code&gt;를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator&lt;/code&gt;를 붙이지만 여기서는 정의된 함수를 override하는 것이라서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator&lt;/code&gt;를 붙이지 않아도 상위 class(Any)의 operator 지정이 적용된다.&lt;/p&gt;

&lt;h3 id=&quot;compareto&quot;&gt;compareTo&lt;/h3&gt;

&lt;p&gt;Java에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comparable&lt;/code&gt; interface를 구현해서 sort 등의 작업을 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;e1.compareTo(e2)&lt;/code&gt; 와 같이 명시&lt;br /&gt;
Kotlin에서도 똑같은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comparable&lt;/code&gt; interface를 지원하고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compareTo&lt;/code&gt; 함수를 호출하는 &lt;strong&gt;convention&lt;/strong&gt;을 제공한다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;gt;&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;=&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;gt;=&lt;/code&gt;이 compareTo로 컴파일 됨.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a &amp;gt;= b&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.compareTo(b) &amp;gt;= 0&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a &amp;lt; b&lt;/code&gt;는  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.compareTo(b) &amp;lt; 0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Comparable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compareTo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;compareValuesBy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lastName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;firstName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;val p1 = Person(“Alice”, “Smith”)&lt;br /&gt;
val p2 = Person(“Bob”, “Johnson”)&lt;br /&gt;
println(p1 &amp;lt; p2)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals&lt;/code&gt;와 마찬가지로, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compareTo&lt;/code&gt;가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comparable&lt;/code&gt;에 정의되어 있으므로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;override&lt;/code&gt;를 한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comparable&lt;/code&gt;을 구현하지 않고 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator&lt;/code&gt;를 붙일 수도 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;compareValuesBy&lt;/code&gt;는 param으로 받은 함수의 결과를 0이 아닌 값이 나올 때까지 비교한다. 0이 아닌 값이 나오면 값을 반환하고, 끝까지 나오지 않으면 0을 반환한다.&lt;/p&gt;

&lt;h2 id=&quot;conventions-for-collection--ranges&quot;&gt;conventions for collection &amp;amp; ranges&lt;/h2&gt;

&lt;h3 id=&quot;index-as-get-set&quot;&gt;index as get, set&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set&lt;/code&gt;을 구현하면 index로 접근이 가능하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print(x[a])&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print(x.get(a))&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print(x[a, b])&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;print(x.get(a, b))&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x[a] = b&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x.set(a, b)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x[a, b] = c&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;x.set(a, b, c)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Map&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MutableMap&lt;/code&gt;에는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;set&lt;/code&gt;이 이미 있다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IndexOutOfBoundsException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Invalid coordinate $index&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;val p = Point(10, 20)&lt;br /&gt;
println(p[1])&lt;br /&gt;
20&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get&lt;/code&gt;의 param으로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Int&lt;/code&gt;가 아닌 type도 사용할 수 있다.&lt;br /&gt;
필요하다면 다른 type에 대해 overloading한 &lt;strong&gt;get 함수를 여러 개 정의&lt;/strong&gt;할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;data class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MutablePoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MutablePoint&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;when&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
    &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;vaule&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IndexOutOfBoundsException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Invalid coordinate $index&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;val p = MutablePoint(10, 20)&lt;br /&gt;
p[1] = 42&lt;br /&gt;
println(p)&lt;br /&gt;
MutablePoint(x=10, y=42)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;in&quot;&gt;in&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;contains&lt;/code&gt;를 구현하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;in&lt;/code&gt;으로 접근이 가능하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a in c&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;c.contains(a)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;data class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;upperLeft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;lowerRight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Rectangle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upperLeft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;until&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lowerRight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;upperLeft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;until&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lowerRight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;val rect = Rectangle(Point(10, 20), Point(50, 50))
println(Point(20, 30) in rect)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;true&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;println(Point(5, 5) in rect)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;false&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;10..20&lt;/code&gt;은 10 &amp;lt;= x &amp;lt;= 20 의 범위를 확인하고,&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;10 until 20&lt;/code&gt;은 10 &amp;lt;= x &amp;lt; 20 의 범위를 확인한다.&lt;/p&gt;

&lt;h3 id=&quot;rangeto&quot;&gt;rangeTo&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rangeTo&lt;/code&gt;를 구현하면 범위를 만들 때 사용하는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;..&lt;/code&gt;로 접근이 가능하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a..b&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a.rangeTo(b)&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comparable&lt;/code&gt; interface를 구현하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rangeTo&lt;/code&gt;를 정의할 필요가 없음.
    &lt;ul&gt;
      &lt;li&gt;kotlin standard library가 모든 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Comparable&lt;/code&gt;에 적용가능한 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rangeTo&lt;/code&gt;를 함수를 가지고 있음.&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator fun &amp;lt;T: Comparable&amp;lt;T&amp;gt;&amp;gt; T.rangeTo(that: T) ClosedRange&amp;lt;T&amp;gt;&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;kotlin.ranges.ComparableRange&lt;/code&gt; class를 보면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rangeTo&lt;/code&gt; 정의를 확인할 수 있음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ClosedRange&lt;/code&gt;는 범위를 가지고 있고 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;contains&lt;/code&gt;를 정의해서  &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a in b..c&lt;/code&gt;가 가능한 것.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a in b..c&lt;/code&gt; = &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;a in closedRange의 구현(b=start, c=end)&lt;/code&gt; = &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;closedRange의 구현(b=start, c=end).contains(a)&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rangeTo&lt;/code&gt;는 다른 연산자보다 우선순위가 낮으나 괄호를 써주는게 이해하기 좋다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0..n + 1&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0..(n + 1)&lt;/code&gt;과 같음&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0..n.forEach{}&lt;/code&gt;는 우선순위 문제로 compile할 수 없음.
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;(0..n).forEach{ print(it) }&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;iterator-for-loop&quot;&gt;iterator, for loop&lt;/h3&gt;

&lt;p&gt;for loop에서 사용하는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for (x in list) { ... }&lt;/code&gt;도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;in&lt;/code&gt;을 사용하지만 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;contains&lt;/code&gt;와는 다르다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;list.iterator()&lt;/code&gt;를 호출해서 java와 마찬가지로 hasNext와 next 호출을 반복하는 식으로 변환된다.&lt;/p&gt;

&lt;p&gt;Kotlin에서는 이 또한 convention으로 iterator 함수를 정의할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String&lt;/code&gt;의 상위 class &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CharSequence&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;iterator&lt;/code&gt; 확장 함수를 정의한다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator fun CharSequence.iterator(): CharIterator&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;따라서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for (c in &quot;abc&quot;) {}&lt;/code&gt; 이 가능하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ClosedRange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;LocalDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;LocalDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;LocalDate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;start&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;hasNext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;endInclusive&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// compareTo 사용&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;override&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;current&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;plusDays&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;val newYear = LocalDate.ofYearDay(2017, 1)&lt;br /&gt;
val daysOff = newYear.minusDays(1)..newYear&lt;br /&gt;
for (dayOff in daysOff) { println(dayOff) }&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;2016-12-31&lt;br /&gt;
2017-01-01&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/7</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/7</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리 #7-2</title>
        
          <description>&lt;h2 id=&quot;chapter-7-2-operator-overloading-and-other-conventions&quot;&gt;chapter 7-2. Operator overloading and other conventions&lt;/h2&gt;

&lt;h2 id=&quot;destructuring-declarations&quot;&gt;Destructuring declarations&lt;/h2&gt;

&lt;p&gt;Destructuring declaration(구조 분해 선언)을 사용하는 방법을 보자.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;py&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 여러 변수의 초기화가 가능한 방식이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;python도 여러 변수의 초기화를 하지만 kotlin과는 다르다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;destructuring은 다음과 같은 convention을 사용한다.&lt;br /&gt;
&lt;img src=&quot;/images/post/kotlin_in_action/7_1.JPG&quot; alt=&quot;destructuring&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;초기화 할 좌변의 변수들을 괄호로 묶어야 한다.&lt;/li&gt;
  &lt;li&gt;destructuring declaration은 초기화를 위해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;componentN&lt;/code&gt; 함수를 호출한다. 여기서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;N&lt;/code&gt;은 destructuring declaration의 변수 위치에 따라 붙는 번호다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data&lt;/code&gt; class는 생성자에 있는 property에 대해 자동으로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;componentN&lt;/code&gt; 함수를 만들어준다.&lt;/li&gt;
  &lt;li&gt;kotlin standard libary에서는 맨 앞의 다섯 property에 대해서만 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;componentN&lt;/code&gt;을 제공한다.&lt;/li&gt;
  &lt;li&gt;collection에 대해서도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;destructuring&lt;/code&gt;이 가능하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;data class가 아닌 경우의 구현&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;component1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;component2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;destructuring-in-loop&quot;&gt;Destructuring in loop&lt;/h3&gt;

&lt;p&gt;변수 선언이 들어갈 수 이쓴ㄴ 장소라면 어디든 구조 분해 선언을 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;for&lt;/code&gt; 안에서도 사용할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;특히 map에서 유용하게 사용할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;printEntries&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nf&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;$key -&amp;gt; $value&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;delegated-property&quot;&gt;delegated property&lt;/h2&gt;

&lt;p&gt;field에 단순 저장하는 것보다 더 복잡하게 작동하는 property를 쉽게 구현할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;delegate를 활용해서 값을 field가 아니라 db table이나 browers session, map 등에도 저장할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// delegate의 일반적인 문법&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// compiler에서 해석해서 생기는 코드&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;delegate&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Type&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위에서 예시로 사용한 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Delegate&lt;/code&gt; class 처럼 사용하려면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getValue&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setValue&lt;/code&gt; 함수를 가지고 있어야 된다.&lt;/p&gt;

&lt;h3 id=&quot;lazy-initialization&quot;&gt;lazy initialization&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;lazy initialization&lt;/strong&gt;는 객체의 일부를 초기화하지 않고 남겨뒀다가 필요할 경우 초기화할 때 쓰는 패턴이다.&lt;br /&gt;
아래는 email을 실제 사용할 때 한 번만 초기화하도록 구현한 class 이다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;_emails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 이런걸 backing property라고 함.&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;emails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Email&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_emails&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;_emails&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loadEmails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_emails&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;email&lt;/code&gt;은 not nullable하기 때문에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;_email&lt;/code&gt;을 사용해서 활용해야 한다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;emails&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lazy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;loadEmails&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lazy&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getValue&lt;/code&gt; 함수가 있는 객체를 반환한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lazy&lt;/code&gt;가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;by&lt;/code&gt;와 함께 사용되면 delegate property를 만들 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lazy&lt;/code&gt; 함수는 기본적으로 thread safe 하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;필요에 따라 동기화에 사용할 락을 lazy 함수에 전달할 수 있다.&lt;/li&gt;
  &lt;li&gt;multi thread에서 사용하지 않을 property를 위해 lazy 함수가 동기화하지 못하게 막을 수도 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;implement-delegate-property&quot;&gt;implement delegate property&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ObservableProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;propValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;changeSupport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PropertyChangeSupport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;propValue&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// KProp은 나중에 다룸. name을 가져올 수 있다는 것만 알자.&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;oldValue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;propValue&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;propValue&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;changeSupport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;firePropertyChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// noti하기 위한 따로 구현된 함수라고만 생각하자&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;salary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PropertyChangeAware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ObservableProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;changeSupport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;salary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ObservableProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;salary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;changeSupport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;by&lt;/code&gt; 오른쪽에 오는 객체를 delegate 객체라고 한다.&lt;br /&gt;
진짜 객체의 property를 읽거나 쓸 때마다 delegate 객체의 getValue와 setValue를 호출한다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getValue&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setValue&lt;/code&gt;에도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;operator&lt;/code&gt;가 붙는다.&lt;/p&gt;

&lt;p&gt;위 코드를 kotlin standard에 있는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Delegates&lt;/code&gt;를 이용해서 아래와 같이 바꿀 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;salary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PropertyChangeAware&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;observer&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;-&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;changeSupport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;firePropertyChange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;oldValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;newValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Delegates&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;salary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Delegates&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;observable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;salary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;observer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;by&lt;/code&gt;의 우항에는 꼭 새로운 instance가 생성되어야 하는 것은 아니다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getValue&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setValue&lt;/code&gt;를 포함하는 객체를 반환하는 함수 호출이나 다른 property, 다른 expression이 올 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;delegate-property-rule&quot;&gt;delegate property rule&lt;/h3&gt;

&lt;p&gt;delegate가 어떻게 동작하는지 정리해본다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Type&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;By&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyDelegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;compiler는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyDelegate&lt;/code&gt; class의 instance를 hidden property에 저장한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이걸 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;delegate&amp;gt;&lt;/code&gt;라고 부른다.&lt;br /&gt;
compiler는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;KProperty&lt;/code&gt; type의 object를 property를 표현하기 위해 사용한다.&lt;/li&gt;
  &lt;li&gt;이걸 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;property&amp;gt;&lt;/code&gt;라고 부른다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;C&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;MyDelegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;prop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Type&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;delegate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/7_2.JPG&quot; alt=&quot;delegate&quot; /&gt;&lt;/p&gt;

&lt;p&gt;이렇게 compiler가 property의 접근자에 대해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get/setValue&lt;/code&gt; 호출 코드를 생성해준다.&lt;/p&gt;

&lt;h3 id=&quot;framework에서-delegate-활용&quot;&gt;framework에서 delegate 활용&lt;/h3&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;object&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Users&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IdTable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// db table&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;length&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;index&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// property = column&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;age&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;age&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EntityID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 각 User instance는 table에 들어있는 구체적인 entity에 해당&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;age&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;age&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Users&lt;/code&gt;는 db 전체에 단 하나만 있는 table을 표현하므로 singleton으로 선언됨.&lt;br /&gt;
위 같은 코드에서는 User에 접근할 때 entity에 정의된 db에서 값을 가져오므로 편리하다.&lt;/p&gt;

&lt;p&gt;F/W는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Column&lt;/code&gt; class 안에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get/setValue&lt;/code&gt;를 정의한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;get/setValue&lt;/code&gt;는 kotlin delegate conventions의 요구사항을 만족한다.&lt;/p&gt;
&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;getValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// retrieve the value from the database&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;operator&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Column&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Entity&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;desc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KProperty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// update the value in the database&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action/7-2</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action/7-2</guid>
      </item>
    
      <item>
        <title>[OmitStackTraceInFastThrow] java stacktrace 안남는 문제 해결</title>
        
          <description>&lt;p&gt;java에서 &lt;strong&gt;NullPointException(NPE) 발생 시 stackTrace가 남지 않는 문제&lt;/strong&gt;가 발생했다.&lt;br /&gt;
흥미로운건 local test에서는 stackTrace가 남고, 실제 서버에서는 남지 않는다는 점이었다.&lt;/p&gt;

&lt;p&gt;이는 &lt;strong&gt;JVM의 최적화 옵션&lt;/strong&gt; 때문인데, JVM에서는 최적화와 log 관리를 위해 stack trace를 관리한다.&lt;br /&gt;
exception이 발생하면 full stack trace를 출력하고 이걸 저장했다가 같은 stack trace가 여러번 반복될 때 출력하지 않도록 한다.&lt;/p&gt;

&lt;p&gt;처음만 출력하는 것은 아니고, 충분히 반복된 이후부터 stack trace 출력을 멈춘다.&lt;br /&gt;
그렇기 때문에 local에서 띄운 경우 stack이 남고, 실제 서버에서는 이미 충분히 stack trace가 찍힌 후 이후의 exception이 남지 않고 있던 것.&lt;/p&gt;

&lt;p&gt;이런 문제를 해결하기 위해 java 실행 시 &lt;strong&gt;-XX:-OmitStackTraceInFastThrow&lt;/strong&gt; 옵션을 넣어주면 모든 경우에 대해 최적화 없이 stackTrace를 남길 수 있도록 한다.&lt;br /&gt;
최적화를 푸는게 맞을까하는 생각이 들 수 있지만 잘 준비된 서비스라면 처음 stackTrace의 에러가 발생했을 때 alert를 받고 바로 수정이 될 수 있는 구조여야 한다.&lt;/p&gt;

&lt;h2 id=&quot;테스트&quot;&gt;테스트&lt;/h2&gt;
&lt;p&gt;테스트 코드를 보고 돌려보면 이해가 잘된다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// test.java&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;test&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;nullStr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;13000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;++;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;makeException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nullStr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;printStackTrace&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;makeException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;a&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;stacktrace가-안남는-것-확인하기&quot;&gt;stackTrace가 안남는 것 확인하기&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;javac test.java&lt;/li&gt;
  &lt;li&gt;java test&lt;/li&gt;
  &lt;li&gt;print 결과를 보면 trace가 쭉 남다가 어느 순간부터 안남는 것 확인&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;stacktrace가-남도록-option-설정&quot;&gt;stackTrace가 남도록 option 설정&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;javac test.java&lt;/li&gt;
  &lt;li&gt;java -XX:-OmitStackTraceInFastThrow test&lt;/li&gt;
  &lt;li&gt;위와 다르게 끝까지 stackTrace가 남는 것 확인&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://stackoverflow.com/questions/2411487/nullpointerexception-in-java-with-no-stacktrace&lt;/li&gt;
  &lt;li&gt;https://www.oracle.com/java/technologies/javase/release-notes-introduction.html#hotspot&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/issue/stacktrace</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/issue/stacktrace</guid>
      </item>
    
      <item>
        <title>[kotlin error] cannot be invoked as a function. The function &apos;invoke()&apos; is not found</title>
        
          <description>&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cannot be invoked as a function. The function &apos;invoke()&apos; is not found&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;코드&quot;&gt;코드&lt;/h2&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ListNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;`val`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ListNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;base&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ListNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ListNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이런 코드에서 문제가 났다.&lt;br /&gt;
역시 책으로 공부하는거랑 써보는거랑 다르다..&lt;/p&gt;

&lt;p&gt;property의 경우엔 저렇게 쓰는게 아니었다.&lt;/p&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;base&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ListNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ListNode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;base&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/kotlin/cannot-be-invoked-as-a-function</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/kotlin/cannot-be-invoked-as-a-function</guid>
      </item>
    
      <item>
        <title>vue 3.0 global component</title>
        
          <description>&lt;p&gt;vue.js 3.x에서 global component를 사용하기.&lt;/p&gt;

&lt;p&gt;guide에 나온 내용은 vue.js 2.x 내용이어서 3.x에서는 조금 다른 부분이 있었다.&lt;/p&gt;

&lt;p&gt;java의 객체를 만들어서 클래스들에서 사용하는 것처럼, vue에서도 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.vue&lt;/code&gt; 파일을 생성하고 다른 곳에서 활용하고 싶었다.&lt;/p&gt;

&lt;p&gt;vue에서는 이런걸 &lt;strong&gt;component&lt;/strong&gt;라고 하고 등록하고 사용하고 있었다.&lt;/p&gt;

&lt;p&gt;component에는 두 가지 종류가 있는데, &lt;strong&gt;local&lt;/strong&gt;과 &lt;strong&gt;global&lt;/strong&gt;이 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;local component&lt;/strong&gt;:&lt;br /&gt;
쓸 때마다 각 vue에서 등록해서 사용하는 지역변수 같은 느낌&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;global component&lt;/strong&gt;:&lt;br /&gt;
한 번 등록하고 각 vue에서 사용하는 전역변수 같은 느낌&lt;/p&gt;

&lt;p&gt;몰라서 그렇지 한 번만 예제를 확인하면 적용하기는 쉽다.&lt;/p&gt;

&lt;h2 id=&quot;예제&quot;&gt;예제&lt;/h2&gt;

&lt;h3 id=&quot;객체처럼-사용할-childvue&quot;&gt;객체처럼 사용할 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Child.vue&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/template&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/style&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;local-component로-사용하는-vue-구현&quot;&gt;local component로 사용하는 vue 구현&lt;/h3&gt;

&lt;p&gt;local component를 사용할 vue 파일에서 component를 import하고 사용한다.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/template&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 상대주소로 기입&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;HelloWorld&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// 앞의 naming이 사용할 name, 뒤에는 import한 name&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/style&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;global-component로-사용하는-app-구현&quot;&gt;global component로 사용하는 app 구현&lt;/h3&gt;

&lt;p&gt;global component를 사용할 프로젝트의 main.js 파일에서 component를 import한다.
그러면 위 local component에서 사용하는 것처럼 각 vue에서 component를 쓸 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createApp&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;vue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./App.vue&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./components/Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;createApp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;component&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;mount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;#app&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;사용하는 쪽 vue에선 script에서 import 없이 바로 template에서 사용할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;참고&quot;&gt;참고&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://kr.vuejs.org/v2/guide/components.html#%EC%A7%80%EC%97%AD-%EB%93%B1%EB%A1%9D&quot;&gt;vue guide&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;현재는 3.x guide는 없음&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/vue/component</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/vue/component</guid>
      </item>
    
      <item>
        <title>vue 3.0 component props 전달하기</title>
        
          <description>&lt;p&gt;&lt;a href=&quot;/docs/vue/component&quot;&gt;component 적용&lt;/a&gt;을 한 뒤에 component의 props를 전달하는 방법이다.&lt;/p&gt;

&lt;p&gt;component에는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data&lt;/code&gt;가 있고 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prop&lt;/code&gt;이 있는데, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;prop&lt;/code&gt;은 component를 생성하는 쪽에서 각기 다른 값을 넣어줄 수 있는 것이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;내가 이해하기엔 java에서 생성자에 넣어주는 값 정도?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;component를 사용할 수 있게 적용하고 난 뒤 할 작업은 prop을 통해 각 component들을 구성하고 view를 꾸며주는 일이다.
이 또한 예제를 보면 간단한데, 문제를 찾는데 시간이 걸렸다.&lt;/p&gt;

&lt;h2 id=&quot;예제&quot;&gt;예제&lt;/h2&gt;
&lt;p&gt;예제 코드는 &lt;a href=&quot;/docs/vue/component&quot;&gt;component 적용&lt;/a&gt;의 내용을 참고하자.&lt;br /&gt;
component 구성이 완료되었다고 생각하고 코드를 일부만 작성하겠다.&lt;/p&gt;

&lt;h3 id=&quot;객체처럼-사용할-childvue&quot;&gt;객체처럼 사용할 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Child.vue&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/p&amp;gt; /&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;prop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;사용&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;require(`@/assets/${image}`)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;test image&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// prop 사용 - image, require가 필수이다.&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/template&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;component를-사용하는-vue&quot;&gt;component를 사용하는 vue&lt;/h3&gt;

&lt;p&gt;component에서는 prop들을 넣어준다&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;child test msg&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;1.png&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 여기서 1.png는 src/assets/1.png 에 있다.&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/template&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 상대주소로 기입&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;HelloWorld&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// 앞의 naming이 사용할 name, 뒤에는 import한 name&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;참고&quot;&gt;참고&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://kr.vuejs.org/v2/guide/components-props.html#%EC%A0%95%EC%A0%81-amp-%EB%8F%99%EC%A0%81-prop-%EC%A0%84%EB%8B%AC%ED%95%98%EA%B8%B0&quot;&gt;vue guide, props 전달하기&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/56624817/passing-and-binding-img-src-from-props-in-vue-js&quot;&gt;stackoverflow, image 보이기&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/vue/passing-props</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/vue/passing-props</guid>
      </item>
    
      <item>
        <title>vue emit으로 상위 컴포넌트로 click event 전달하기</title>
        
          <description>&lt;p&gt;vue 하위 컴포넌트에서 클릭한 이벤트를 전달해줄때,&lt;/p&gt;

&lt;h2 id=&quot;예제&quot;&gt;예제&lt;/h2&gt;
&lt;p&gt;예제 코드는 &lt;a href=&quot;/docs/vue/component&quot;&gt;component 적용&lt;/a&gt;의 내용을 참고하자.&lt;br /&gt;
component 구성이 완료되었다고 생각하고 코드를 일부만 작성하겠다.&lt;/p&gt;

&lt;h3 id=&quot;객체처럼-사용할-childvue&quot;&gt;객체처럼 사용할 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Child.vue&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/p&amp;gt; /&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;prop&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;사용&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;img&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;require(`@/assets/${image}`)&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;alt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;test image&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// prop 사용 - image, require가 필수이다.&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/template&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt; 
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;props&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;String&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;component를-사용하는-vue&quot;&gt;component를 사용하는 vue&lt;/h3&gt;

&lt;p&gt;component에서는 prop들을 넣어준다&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;div&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Child&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;child test msg&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;1.png&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&amp;gt;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 여기서 1.png는 src/assets/1.png 에 있다.&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/div&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/template&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;./Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 상대주소로 기입&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;HelloWorld&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;components&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Child&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;child&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// 앞의 naming이 사용할 name, 뒤에는 import한 name&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;

&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;sr&quot;&gt;/script&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;&amp;gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;참고&quot;&gt;참고&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://kr.vuejs.org/v2/guide/components-props.html#%EC%A0%95%EC%A0%81-amp-%EB%8F%99%EC%A0%81-prop-%EC%A0%84%EB%8B%AC%ED%95%98%EA%B8%B0&quot;&gt;vue guide, props 전달하기&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://stackoverflow.com/questions/56624817/passing-and-binding-img-src-from-props-in-vue-js&quot;&gt;stackoverflow, image 보이기&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/vue/emit-click</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/vue/emit-click</guid>
      </item>
    
      <item>
        <title>[spring error] java.lang.NoClassDefFoundError: graphql/execution/batched/Batched</title>
        
          <description>&lt;p&gt;graphql을 spring에서 사용하려고 하던 중 에러가 났다.&lt;br /&gt;
뭐가 잘못됐는지 시간을 한참 썼는데 원인은 허무하다.&lt;br /&gt;
뭐 이런 일들이 항상 그렇지..&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&quot;language-log&quot;&gt;Caused by: java.lang.NoClassDefFoundError: graphql/execution/batched/Batched
	at com.coxautodev.graphql.tools.MethodFieldResolver$Companion.isBatched(MethodFieldResolver.kt:24) ~[graphql-java-tools-5.2.4.jar:na]
	at com.coxautodev.graphql.tools.MethodFieldResolver.scanForMatches(MethodFieldResolver.kt:103) ~[graphql-java-tools-5.2.4.jar:na]
	at com.coxautodev.graphql.tools.SchemaClassScanner.scanResolverInfoForPotentialMatches(SchemaClassScanner.kt:230) ~[graphql-java-tools-5.2.4.jar:na]
	at com.coxautodev.graphql.tools.SchemaClassScanner.handleRootType(SchemaClassScanner.kt:122) ~[graphql-java-tools-5.2.4.jar:na]
	at com.coxautodev.graphql.tools.SchemaClassScanner.scanForClasses(SchemaClassScanner.kt:80) ~[graphql-java-tools-5.2.4.jar:na]
	at com.coxautodev.graphql.tools.SchemaParserBuilder.scan(SchemaParserBuilder.kt:151) ~[graphql-java-tools-5.2.4.jar:na]
	at com.coxautodev.graphql.tools.SchemaParserBuilder.build(SchemaParserBuilder.kt:157) ~[graphql-java-tools-5.2.4.jar:na]
	at com.oembedler.moon.graphql.boot.GraphQLJavaToolsAutoConfiguration.schemaParser(GraphQLJavaToolsAutoConfiguration.java:57) ~[graphql-spring-boot-autoconfigure-5.0.2.jar:na]
	at com.oembedler.moon.graphql.boot.GraphQLJavaToolsAutoConfiguration$$EnhancerBySpringCGLIB$$e208bf0b.CGLIB$schemaParser$2(&amp;lt;generated&amp;gt;) ~[graphql-spring-boot-autoconfigure-5.0.2.jar:na]
	at com.oembedler.moon.graphql.boot.GraphQLJavaToolsAutoConfiguration$$EnhancerBySpringCGLIB$$e208bf0b$$FastClassBySpringCGLIB$$fdb89603.invoke(&amp;lt;generated&amp;gt;) ~[graphql-spring-boot-autoconfigure-5.0.2.jar:na]
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-5.3.20.jar:5.3.20]
	at com.oembedler.moon.graphql.boot.GraphQLJavaToolsAutoConfiguration$$EnhancerBySpringCGLIB$$e208bf0b.schemaParser(&amp;lt;generated&amp;gt;) ~[graphql-spring-boot-autoconfigure-5.0.2.jar:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.3.20.jar:5.3.20]
	... 124 common frames omitted
Caused by: java.lang.ClassNotFoundException: graphql.execution.batched.Batched
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582) ~[na:na]
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]
	... 142 common frames omitted
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;코드&quot;&gt;코드&lt;/h2&gt;

&lt;p&gt;문제의 pom.xml은 이렇다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;project&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://maven.apache.org/POM/4.0.0&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns:xsi=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;
	&lt;span class=&quot;na&quot;&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
        ...
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.7.0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
    ...
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
        ...
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.graphql-java&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;graphql-spring-boot-starter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;5.0.2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.graphql-java&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;graphql-java-tools&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;5.2.4&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;위 pom.xml에서 문제는 springboot version 이었다.&lt;br /&gt;
com.graphql-java의 현재 최신 버전인 각각 5.0.2와 5.2.4가 springboot 2.7.0과 호환이 되지 않는 것이 문제였고,&lt;br /&gt;
springboot version을 2.6.7로 낮추면서 문제는 해결됐다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;p&gt;참고한 graphql 코드&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://www.baeldung.com/spring-graphql&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;해결 방법 stackoverflow&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://stackoverflow.com/questions/71039670/spring-boot-graphqlqueryresolver-wont-run-runs-on-test-project&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/graphql_execution_batched_Batched</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/graphql_execution_batched_Batched</guid>
      </item>
    
      <item>
        <title>java와 비교한 kotlin 장단점</title>
        
          <description>&lt;p&gt;kotlin을 공부하면서 확인한 장단점을 정리해보았다.&lt;br /&gt;
kotlin은 java의 많은 것들을 녹여내면서, 최대한 편리하고 간결하게 사용할 수 있다는 특징이 있다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;heavy_check_mark-장점&quot;&gt;:heavy_check_mark: 장점&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#java와의-호환&quot;&gt;java와의 호환&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#안전한-코드&quot;&gt;안전한 코드&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#간결하고-명확한-코드&quot;&gt;간결하고 명확한 코드&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#확장-함수&quot;&gt;확장 함수&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#구글-공식-언어&quot;&gt;구글 공식 언어&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;java와의-호환&quot;&gt;java와의 호환&lt;/h2&gt;

&lt;p&gt;java와 유사하여 java 개발자가 쉽게 kotlin을 사용할 수 있다.&lt;br /&gt;
즉 러닝커브가 낮다는 것.&lt;/p&gt;

&lt;p&gt;또한 컴파일하여 java와 완벽히 호환이 가능하다.&lt;br /&gt;
java와 kotlin 코드를 하나의 프로젝트에서 같이 사용할 수도 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/kotlin_in_action/1_1.jpg&quot; alt=&quot;kotlin-compile&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;안전한-코드&quot;&gt;안전한 코드&lt;/h2&gt;

&lt;p&gt;kotlin에서 가장 대표적인 특징 중 하나는 nullable type의 지원이다.&lt;br /&gt;
kotlin은 nullable type과 not nullable type을 구분한다.&lt;/p&gt;

&lt;p&gt;not nullable type은 compile 시점에서 NPE를 발생시키기 때문에 runtime에 의도치 않은 NPE가 날 확률이 줄어든다.&lt;/p&gt;

&lt;p&gt;type을 그냥쓰면 not nullable type이고, type에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?&lt;/code&gt;를 붙여서 nullable type을 사용할 수 있다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;아래처럼 not nullable type에 null을 넣으면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Kotlin: Null can not be a value of a non-null type&lt;/code&gt;과 같은 compile error가 발생한다.&lt;/p&gt;

  &lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;nullable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;notNullable&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;간결하고-명확한-코드&quot;&gt;간결하고 명확한 코드&lt;/h2&gt;

&lt;p&gt;kotlin은 java에서 불편하고 가독성이 떨어지는 코드들을 많이 개선했다.&lt;br /&gt;
그 중 가장 대표적인 것이 nullable type operator와 type cast operator이다.&lt;/p&gt;

&lt;p&gt;실제로 kotlin 코드 적용 이후 &lt;u&gt;코드가 줄어든 통계&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;가 있다.&lt;/p&gt;

&lt;h3 id=&quot;보일러-플레이팅&quot;&gt;보일러 플레이팅&lt;/h3&gt;

&lt;p&gt;kotlin의 class는 type에 따라  class를 제공하여 보일러 플레이팅 코드가 굉장히 줄어든다.&lt;/p&gt;

&lt;p&gt;kotlin은 class 생성 시 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Getter/Setter&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;AllArgsConstructor&lt;/code&gt;를 기본으로 제공한다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;data class&lt;/code&gt;를 사용하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@lombok.Data&lt;/code&gt; 처럼 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;equals()&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hashCode()&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;toString()&lt;/code&gt;을 제공한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Car&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;위 코드에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Car&lt;/code&gt;은 아래와 같은 기능이 제공된다.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;AllArgsConstructor&lt;/li&gt;
    &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;model&lt;/code&gt;에 대한 getter&lt;/li&gt;
    &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;number&lt;/code&gt;에 대한 getter/setter&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;h3 id=&quot;safe-call-operator&quot;&gt;safe call operator&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?.&lt;/code&gt;으로 간단하고 명료하게 null 검사와 함수 호출을 가능하게 한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;country&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Company&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Address&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Company&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;country&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;country&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;위 kotlin 코드는 아래 java 코드와 같다.&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;company&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;elvis-operator&quot;&gt;elvis operator&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?.&lt;/code&gt;와 유사한데, default value를 명시해준다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;address&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;country&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;kr&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;위 kotlin 코드는 아래 java 코드와 같다.&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;company&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kr&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kr&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kr&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;company&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getAddress&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getCountry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;smart-cast&quot;&gt;smart cast&lt;/h3&gt;

&lt;p&gt;kotlin은 type cast에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;is&lt;/code&gt;와 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;as&lt;/code&gt;를 제공한다.&lt;br /&gt;
이 중에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;is&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;instanceof&lt;/code&gt;와 유사한데, compiler가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;smart cast&lt;/code&gt;를 해줘서 더 편리하다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;java 코드로 작성할 경우 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;instanceof&lt;/code&gt; 이후에 명시적으로 type cast를 해주어야 하는 코드를 kotlin에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;is&lt;/code&gt;를 통해 처리할 수 있다.&lt;/p&gt;

  &lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Expr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Num&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;left&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;eval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;right&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;확장-함수&quot;&gt;확장 함수&lt;/h2&gt;

&lt;p&gt;확장 함수는 클래스 밖에 선언된 함수를 말한다.&lt;br /&gt;
기존의 api들을 재작성하지 않고 기능을 사용할 수 있어서, kotlin에서 &lt;strong&gt;java의 클래스들을 그대로 사용하면서 기능을 추가&lt;/strong&gt;하기 위한 목적으로도 사용된다.&lt;br /&gt;
확장 함수에서는 private, protected로 선언되지 않은 변수나 함수를 모두 자연스럽게 (내것 마냥) 호출할 수 있다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isNullOrBlank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Boolean&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;isBlank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;위 코드처럼 기본 타입에 대해서도 확장 함수를 작성할 수 있다.&lt;br /&gt;
실제로 위와 유사한 코드가 코틀린에 이미 정의되어 있고 이를 통해 kotlin은 다양한 기능을 제공한다.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;확장 함수로 kotlin은 &lt;a href=&quot;https://kotlinlang.org/docs/faq.html#is-kotlin-an-object-oriented-language-or-a-functional-one&quot;&gt;OO와 FP 모두 사용할 수 있다&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;구글-공식-언어&quot;&gt;구글 공식 언어&lt;/h2&gt;

&lt;p&gt;무료 오픈소스 언어이자, 구글 공식 언어로의 채택.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;x-단점&quot;&gt;:x: 단점&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#빌드-시간--크기&quot;&gt;빌드 시간 &amp;amp; 크기&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#자바가-아니다&quot;&gt;자바가 아니다&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#학습-리소스의-제한&quot;&gt;학습 리소스의 제한&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;빌드-시간--크기&quot;&gt;빌드 시간 &amp;amp; 크기&lt;/h2&gt;

&lt;p&gt;clean build의 경우 java보다 시간이 더 오래걸린다.&lt;br /&gt;
kotlin은 &lt;a href=&quot;https://blog.jetbrains.com/ko/kotlin/2020/10/the-dark-secrets-of-fast-compilation-for-kotlin/&quot;&gt;증분 컴파일(incremental build)&lt;/a&gt;을 제공해서 partial build가 가능한 경우 java보다 더 빠르다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java는 컴파일 회피만을 제공&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;컴파일 회피&lt;/strong&gt;: 모듈 단위의 dirty 체크&lt;br /&gt;
&lt;strong&gt;증분 컴파일&lt;/strong&gt;: 파일 단위의 dirty 체크&lt;/p&gt;

&lt;p&gt;kotlin runtime이 package에 들어가야 해서 배포 시 파일 사이즈가 더 커진다.&lt;/p&gt;

&lt;h2 id=&quot;자바가-아니다&quot;&gt;자바가 아니다&lt;/h2&gt;

&lt;p&gt;java와 유사하지만 자바가 아니다.&lt;br /&gt;
분명히 세세한 사용들에 공부와 검색이 필요할 것이다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;java 6&lt;/strong&gt;을 베이스로 코틀린이 만들어졌다.&lt;br /&gt;
&lt;strong&gt;java 6&lt;/strong&gt;이후의 버전들과 다른 개념들이 존재한다.&lt;/p&gt;

&lt;h2 id=&quot;학습-리소스의-제한&quot;&gt;학습 리소스의 제한&lt;/h2&gt;

&lt;p&gt;아무래도 java 보다는 자료들이 부족하다.&lt;br /&gt;
검색하는데 더 많은 시간이 필요할 것이다.&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;kotlinlang에서는 &lt;a href=&quot;https://kotlinlang.org/docs/faq.html#what-advantages-does-kotlin-give-me-over-the-java-programming-language&quot;&gt;rough하게 40%&lt;/a&gt; 정도의 라인 수가 줄어드는 것을 확인.&lt;br /&gt; google home 팀은 &lt;a href=&quot;https://developer.android.com/kotlin/first&quot;&gt;코드 size 33%&lt;/a&gt; 줄어듦. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-vs-java</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-vs-java</guid>
      </item>
    
      <item>
        <title>[spring error] javax.websocket.server.ServerContainer not available</title>
        
          <description>&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;java.lang.IllegalStateException: Failed to load ApplicationContext

	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:195)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1654)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:474)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:312)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:658)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;serverEndpointExporter&apos; defined in class path resource [com/oembedler/moon/graphql/boot/GraphQLWebAutoConfiguration.class]: Invocation of init method failed; nested exception is java.lang.IllegalStateException: javax.websocket.server.ServerContainer not available
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:740)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:415)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:144)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 69 more
Caused by: java.lang.IllegalStateException: javax.websocket.server.ServerContainer not available
	at org.springframework.util.Assert.state(Assert.java:76)
	at org.springframework.web.socket.server.standard.ServerEndpointExporter.afterPropertiesSet(ServerEndpointExporter.java:107)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)
	... 84 more


Process finished with exit code -1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;에러 코드&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@AutoConfigureMockMvc&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ApiTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;RandomPort environment 추가해서 해결&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootTest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;webEnvironment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SpringBootTest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;WebEnvironment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;RANDOM_PORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nd&quot;&gt;@AutoConfigureMockMvc&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ApiTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;random_port&quot;&gt;RANDOM_PORT?&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;nc&quot;&gt;SpringBootTest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;WebEnvironment&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;webEnvironment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SpringBootTest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;WebEnvironment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;MOCK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WebEnvironment&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;MOCK&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;RANDOM_PORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;DEFINED_PORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt;
        &lt;span class=&quot;no&quot;&gt;NONE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        
        &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;embedded&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;SpringBootTest 코드를 보면 기본적으로 embedded tomcat을 사용하는 것이 false이다. &lt;br /&gt;
RANDOM_PORT를 사용해서 embedded tomcat을 random port로 사용하도록 하는 것.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/javax-websocket-server-ServerContainer-not-available</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/javax-websocket-server-ServerContainer-not-available</guid>
      </item>
    
      <item>
        <title>static method class와 spring bean</title>
        
          <description>&lt;p&gt;며칠 전 리팩토링을 위해 코드를 보던 중 이상한 걸 발견했다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~validator&lt;/code&gt;라고 명시된 두 개의 클래스가 같은 패키지에 있었는데,&lt;br /&gt;
하나는 static method로 구성된 class였고 다른 하나는 bean으로 사용되고 있었다.&lt;/p&gt;

&lt;p&gt;어떤게 옳을까라는 판단은 금방내릴 수 있었다.&lt;br /&gt;
&lt;strong&gt;정확하게 어떤 근거&lt;/strong&gt;로 이런 판단을 내린걸까? 에 대해선 선뜻 대답이 되지 않았다.&lt;/p&gt;

&lt;p&gt;대부분의 개발자들이 감각적으로 내리는 이런 결정들은 옳은 것 같다.&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;실제로 DDD를 공부하면서 배운 개발 방법들을 우리 팀에선 이미 해오고 있던 방식이 있던 것처럼 경험이 쌓인 개발자일수록 더더욱 그렇다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;static-method-class-vs-spring-bean&quot;&gt;static method class vs spring bean&lt;/h2&gt;

&lt;p&gt;구글링해보니, 생각보다 이런 토론이 많이 있었다.&lt;br /&gt;
토론의 결과를 참고하여 내가 내린 결론은 이렇다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;static은 종속성이 없을 때, 객체 생성이 필요 없을 때 사용해야 한다.&lt;/li&gt;
  &lt;li&gt;조금이라도 의존성이 외부에 있거나, 내부에서 외부에 접근하는 경우(property)엔 static을 사용하면 안된다.&lt;/li&gt;
  &lt;li&gt;어떤 이유로든 input에 따른 output이 동일하지 않은 경우 static을 사용하면 안된다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이렇게 static을 사용할 수 있는 경우를 확인하고 사용할 수 있다.&lt;br /&gt;
위와 같이 static을 사용할 수 있을 때는 최대한 static을 사용하는 것이 좋을 듯 하다.&lt;/p&gt;

&lt;h2 id=&quot;토론-주제&quot;&gt;토론 주제&lt;/h2&gt;

&lt;p&gt;사실 너무 당연한 이야기들이다.&lt;br /&gt;
평소에 잠시 잊었을 뿐이지.&lt;/p&gt;

&lt;p&gt;명확한 기준에도 토론의 주제가 되는 것들이 있었다.&lt;/p&gt;

&lt;h3 id=&quot;1-dependency가-생길-수-있으니-bean으로-해야-한다&quot;&gt;1. dependency가 생길 수 있으니 bean으로 해야 한다.&lt;/h3&gt;

&lt;p&gt;이 경우는 static method를 사용하다가 dependency가 생겨서 bean을 사용해야하는 경우가 있을 수 있다는 것이다.
이런 경우 변경을 위한 코드 작업이 너무 번거롭다는 주장.&lt;/p&gt;

&lt;p&gt;실제로 나는 이런 케이스를 겪었던 적이 있다.&lt;br /&gt;
static method class가 아니어야 할 class가 static method class로 되어있어 bean으로 변경한 적이 있는데, 코드 작업이 확실히 번거로웠다.&lt;br /&gt;
대부분의 케이스는 이렇지 않기 때문에 예측해서 bean을 사용하는 것은 좋지 않고, 이런 케이스는 처음부터 bean이어야 할 클래스를 잘못 사용했을 가능성이 높다.&lt;/p&gt;

&lt;p&gt;그렇지만 나는 &lt;strong&gt;나중에 변경될 것이라고 하는 미래의 변화를 예측하려고 하는건 잘못&lt;/strong&gt; 이라는 의견에 동의한다.&lt;br /&gt;
&lt;strong&gt;YAGNI&lt;/strong&gt; 원칙에 따라 당연히 static method class 방향이 맞다고 생각한다.&lt;/p&gt;

&lt;h3 id=&quot;2-변경-될만한-로직을-정적-메소드로-구현하는게-맞나&quot;&gt;2. 변경 될만한 로직을 정적 메소드로 구현하는게 맞나?&lt;/h3&gt;

&lt;p&gt;위와 동일한 답변으로 정리할 수 있다.&lt;/p&gt;

&lt;p&gt;설계 단계에서부터 이미 bean으로 설계하는게 적절한 상황이라면 bean으로 가는게 맞지만 나중에 변경될 것을 예측하여 &lt;strong&gt;YAGNI&lt;/strong&gt; 원칙을 어겨선 안된다.&lt;/p&gt;

&lt;h3 id=&quot;3-bean이면-mock으로-쉽게-할-수-있는-테스트들이-static은-어렵다&quot;&gt;3. bean이면 mock으로 쉽게 할 수 있는 테스트들이 static은 어렵다.&lt;/h3&gt;

&lt;p&gt;실제로 자주 겪게 되는 문제이다.&lt;br /&gt;
실제로 테스트를 위해 bean으로 바꾸고 싶다는 생각도 했다.&lt;br /&gt;
base64Utils 를 사용하는 함수에 대한 테스트를 작성할 때, 인코딩/디코딩 된 값들을 준비해놔야 테스트가 가능한 경우가 있었다.&lt;/p&gt;

&lt;p&gt;하지만 이런 테스트는 실제로 필요한 데이터의 테스트가 맞다.&lt;br /&gt;
되려 무작위로 mock을 사용해서 테스트 되어야할 부분을 감추게 될 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;bean과-static-method의-목적&quot;&gt;bean과 static method의 목적&lt;/h2&gt;

&lt;p&gt;실제로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bean&lt;/code&gt;과 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;static method&lt;/code&gt;의 목적을 보면 더 명확하게 사용할 수 있지 싶다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;bean&lt;/strong&gt;: 의존성 역전을 위해 사용&lt;br /&gt;
&lt;strong&gt;static method&lt;/strong&gt;: 종속성이 없을 때, 객체 생성이 필요 없을 때 사용&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://kwon37xi.egloos.com/4844149&quot;&gt;http://kwon37xi.egloos.com/4844149&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://softwareengineering.stackexchange.com/questions/360525/dependency-injection-vs-static-methods&quot;&gt;https://softwareengineering.stackexchange.com/questions/360525/dependency-injection-vs-static-methods&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.baeldung.com/spring-bean&quot;&gt;https://www.baeldung.com/spring-bean&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2671496/when-to-use-static-methods&quot;&gt;https://stackoverflow.com/questions/2671496/when-to-use-static-methods&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/spring/static-method-vs-bean</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/spring/static-method-vs-bean</guid>
      </item>
    
      <item>
        <title>Uncaught SyntaxError: Unexpected token &apos;&lt;&apos; 에러</title>
        
          <description>&lt;p&gt;vue에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Uncaught SyntaxError: Unexpected token &apos;&amp;lt;&apos;&lt;/code&gt;에러를 받을 때,&lt;br /&gt;
srcipt의 src를 잘못 명시한 경우이다.&lt;/p&gt;

&lt;p&gt;index.html의 header에 script를 넣고 싶은 경우에는,&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;public&lt;/code&gt; path 밑에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.js&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;css&lt;/code&gt; 파일들을 두어야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;favicon.ico가 있는 그 위치&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/vue/unexpected-token</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/vue/unexpected-token</guid>
      </item>
    
      <item>
        <title>jq로 가장 빠르게 터미널에서 json 파싱하기</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;Linux Commands&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/dev-tools/linux-commands/terminal&quot; class=&quot;btn&quot;&gt;Terminal Shortcut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/tmux&quot; class=&quot;btn&quot;&gt;tmux&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/cut&quot; class=&quot;btn&quot;&gt;cut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/jq&quot; class=&quot;btn btn-purple&quot;&gt;jq&lt;/a&gt;
&lt;a href=&quot;/docs/tools/linux-commands/screen&quot; class=&quot;btn&quot;&gt;screen&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/split&quot; class=&quot;btn&quot;&gt;split&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;는 linux 기본 command가 아니지만 내가 정말 편하게 사용하는 command 중 하나다.&lt;br /&gt;
여러 서비스를 하면서 인스턴스마다 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;가 깔려있지 않은 서비스가 간혹있는데, 그럼 정말 굉장한 불편함을 느낀다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;는 그렇게 편하다.&lt;/p&gt;

&lt;h2 id=&quot;설치&quot;&gt;설치&lt;/h2&gt;

&lt;p&gt;sudo apt install jq&lt;/p&gt;

&lt;h2 id=&quot;사용성&quot;&gt;사용성&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;는 이름 값을 한다.&lt;br /&gt;
json format의 data processing을 해주는 녀석이다.&lt;/p&gt;

&lt;p&gt;log 등의 데이터에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;가 없다면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;awk&lt;/code&gt;나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cut&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sed&lt;/code&gt; 등으로 데이터 파싱을 해야하는데 굉장히 귀찮고 커맨드가 길어지기 쉽다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;json&lt;/code&gt; data에 대해 lightweight, flexible한 command를 제공한다.&lt;br /&gt;
실제로 pipe를 같이 쓰면 이렇게 훌륭한게 없다.&lt;/p&gt;

&lt;p&gt;단점은 기본 command도 아니고, json을 파싱해서 그런지, 대용량 파일을 파싱하면 아무래도 느려지기 쉽다.&lt;br /&gt;
그치만 이 느려진다는건 비교 대상이 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;cut&lt;/code&gt; 이런 녀석들이지 python으로 json parsing 하는 거보단 훨씬 빠르다.&lt;/p&gt;

&lt;h2 id=&quot;사용법&quot;&gt;사용법&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;는 사용법이 많다.&lt;br /&gt;
다 배우면 엄청 많고 복잡할 것 같은데, 자주 쓰는 것만 예시와 함께 정리한다.&lt;/p&gt;

&lt;h2 id=&quot;예시&quot;&gt;예시&lt;/h2&gt;

&lt;p&gt;cat info&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;{“date”: “2021-08-11T15:12:18.195Z”, “site”: “meansoup.github.io”, “owner”: “meansoup”, “detail”: {“type”: “markdown”, “length”:623}}&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;jq-date-info&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq .date info&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;“2021-08-11T15:12:18.195Z”&lt;/p&gt;

&lt;p&gt;json data의 key를 이용해서 value를 쉽게 가져올 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;jq-detaillength-info&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq .detail.length info&lt;/code&gt;&lt;/h3&gt;

&lt;p&gt;623&lt;/p&gt;

&lt;p&gt;depth가 있어도 쉽게 가져온다.&lt;/p&gt;

&lt;h3 id=&quot;jq--info&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq . info&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;date&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2021-08-11T15:12:18.195Z&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;site&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;meansoup.github.io&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;owner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;meansoup&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;detail&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;markdown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;length&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;623&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;beautify 처럼 사용할 수도 있다.&lt;br /&gt;
한 라인으로 된 json을 라인을 분리해서 beautiful하게 꾸며준 것.&lt;/p&gt;

&lt;h3 id=&quot;jq-site-site-detailtype-detailtype-info&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq &apos;{site: .site, detailType: .detail.type}&apos; info&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;site&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;meansoup.github.io&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;detailType&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;markdown&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 새로운 json 형식을 만들어 주거나 필요한 값만 꺼내올 수도 있다.&lt;/p&gt;

&lt;h3 id=&quot;jq--c-site-site-detailtype-detailtype-info&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq -c &apos;{site: .site, detailType: .detail.type}&apos; info&lt;/code&gt;&lt;/h3&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;site&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;meansoup.github.io&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;detailType&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;markdown&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위와 동일한 command에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-c&lt;/code&gt; 옵션을 주면 단일 라인으로 출력을 해준다.&lt;br /&gt;
실제 사용할 땐 이렇게 단일 라인으로 하는 경우가 많다.&lt;br /&gt;
(pipeline에 여러 json을 태우고 다시 한 줄로 뽑아내도록)&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;몇 가지 써본건 더 있지만 최근엔 익숙해진 이후에 이 정도만 사용하는 것 같다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;json&lt;/code&gt;이 표준처럼 사용되고 있는 요즘엔 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;는 기본 command 만큼이나 필수적인 것 같다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux-commands/jq</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux-commands/jq</guid>
      </item>
    
      <item>
        <title>DNS는 무엇이고 어떻게 동작하는가?</title>
        
          <description>&lt;h2 id=&quot;dns의-목적&quot;&gt;DNS의 목적&lt;/h2&gt;

&lt;p&gt;DNS 서버는 ip 주소를 기억하기 어려우니까.&lt;br /&gt;
domain이나 hostname을 기억하고 사용하기 위해 사용된다.&lt;/p&gt;

&lt;h2 id=&quot;dns-flow&quot;&gt;DNS flow&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/internet/dns.JPG&quot; alt=&quot;dns server flow&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;dns-서버들&quot;&gt;DNS 서버들&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Recursive Resolver&lt;/strong&gt;:&lt;br /&gt;
브라우저나 앱을 통해 query를 받는 서버.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Authoritative nameserver&lt;/code&gt;에 도달할 때까지 request들을 만들어서 수행한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Root nameserver&lt;/strong&gt;:&lt;br /&gt;
DNS root nameserver는 전 세계에 13개만 존재한다.&lt;br /&gt;
그렇지만 각 서버가 대규모 클러스터로 구성되어 안정적이게 서비스한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;TLD nameserver&lt;/strong&gt;:&lt;br /&gt;
top-level-domain server로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;com&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;net&lt;/code&gt; 과 같은 hostname의 마지막 부분을 호스팅한다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Authoritative nameserver&lt;/strong&gt;:&lt;br /&gt;
final nameserver로서 요청한 hostname에 대해 ip주소를 가지고 있다면 반환한다.&lt;br /&gt;
실제로 DNS resource record를 가지고 있는 서버.&lt;/p&gt;

&lt;h2 id=&quot;캐싱-caching&quot;&gt;캐싱 (caching)&lt;/h2&gt;

&lt;p&gt;캐싱의 목적은 분명히 시간과 비용을 줄이기 위함.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Browser DNS caching&lt;/strong&gt;:&lt;br /&gt;
브라우저에서 정해진 시간동안 DNS record를 캐싱하도록 설계되어있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;OS level DNS caching&lt;/strong&gt;:&lt;br /&gt;
OS 내부에 query를 핸들링하는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;stub resolver&lt;/code&gt; (혹은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;DNS client&lt;/code&gt; 라고 불리는)가 cache에 record가 있는지 확인한다.&lt;/p&gt;

&lt;p&gt;또, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;recursive resolver&lt;/code&gt;도 caching 해놓은 record가 있는지 확인한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Authoritative nameserver&lt;/code&gt;의 주소를 갖는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;NS record&lt;/code&gt;가 있으면 바로 저기로 간다.&lt;/li&gt;
  &lt;li&gt;없으면 TLD의 cache가 있으면 TLD로 간다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;통신-communication&quot;&gt;통신 (communication)&lt;/h2&gt;

&lt;p&gt;DNS는 기본적으로 UDP를 사용한다.&lt;br /&gt;
TCP handshake 등의 오버헤드를 줄이기 위해서 UDP로 고안되었다.&lt;/p&gt;

&lt;p&gt;그래서 512 bytes를 약속처럼 사용하고 있는데,&lt;br /&gt;
이는 ipv4 표준에서 576 bytes 이상이면 여러 개의 ip packet으로 fragmented 되는 것과 관련이 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;단일 packet일 경우 하나만 유실되면 전체 유실 등으로 핸들링이 편하기 때문.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;최근에는 512 bytes를 넘어가기도 하는데 그럴땐 tcp를 사용한다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://www.cloudflare.com/learning/dns/what-is-dns&quot;&gt;https://www.cloudflare.com/learning/dns/what-is-dns&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://www.lifewire.com/what-is-a-dns-server-2625854&quot;&gt;https://www.lifewire.com/what-is-a-dns-server-2625854&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://www.lifewire.com/dns-root-name-servers-3971336&quot;&gt;https://www.lifewire.com/dns-root-name-servers-3971336&lt;/a&gt; &lt;br /&gt;
&lt;a href=&quot;https://serverfault.com/questions/587625/why-dns-through-udp-has-a-512-bytes-limit&quot;&gt;https://serverfault.com/questions/587625/why-dns-through-udp-has-a-512-bytes-limit&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/internet/dns</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/internet/dns</guid>
      </item>
    
      <item>
        <title>easyRandom - Java에서 테스트 객체 만들기</title>
        
          <description>&lt;p&gt;테스트 객체를 관리하는 패턴 중 &lt;a href=&quot;/docs/pattern/object-mother&quot;&gt;ObjectMother 패턴&lt;/a&gt;이 있다.&lt;br /&gt;
java에서는 이 패턴을 구현하기 위한 방식으로 &lt;strong&gt;EasyRandom&lt;/strong&gt;을 사용하면 효율적이다.&lt;/p&gt;

&lt;p&gt;ObjectMother와 EasyRandom을 우리 팀 서비스 코드에 적용해 보았는데 적용 후 테스트 작성에 대한 효율이 눈에 띄기 좋아졌다.&lt;br /&gt;
지금은 팀 내에서 ObjectMother 패턴이 자연스럽게 사용된다.&lt;/p&gt;

&lt;h2 id=&quot;장점&quot;&gt;장점&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ObjectMother 패턴&lt;/strong&gt;을 설명하는 페이지에도 적혀 있지만 이 간단한 패턴으로 얻은 명확한 장점들이 있다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;이곳저곳 산개되었던 객체 생성 로직을 하나로 묶을 수 있었다.
    &lt;ul&gt;
      &lt;li&gt;test Class/Method마다 객체를 만들던 로직이 있었는데, &lt;strong&gt;ItemMother&lt;/strong&gt;와 같이 mother 패턴을 적용하면서 이런 로직이 사라졌다.&lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Item&lt;/strong&gt;의 테스트 객체를 만들기 전에 &lt;strong&gt;ItemMother&lt;/strong&gt;가 있는지를 보고 없으면 만들고 있으면 사용하는 방식.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;위와 같은 이유로 테스트 객체 생성에 드는 시간과 비용이 줄어들었고, 이는 테스트를 짜는 시간에 영향을 미쳤다.&lt;/li&gt;
  &lt;li&gt;위와 같은 장점으로 완성도 높은 테스트 객체 생성 로직을 갖게 되었다.
    &lt;ul&gt;
      &lt;li&gt;원래는 귀찮아서 대충 생성하던 것도 같은 생성 코드를 사용하기 때문에 점진적으로 완성도가 올라간다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;객체 생성 로직이 숨겨지면서 가독성이 올라갔다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;우리 코드가 어떻게 되었고, 어떻게 바뀌었는지를 예를 들어서 설명해보겠다.&lt;br /&gt;
예를 들면서 EasyRandom의 사용 방법도 설명한다.&lt;/p&gt;

&lt;h2 id=&quot;java에서-테스트-객체-만들기&quot;&gt;java에서 테스트 객체 만들기&lt;/h2&gt;

&lt;p&gt;우리가 테스트에서 만들었던 item 생성 코드들을 보자.&lt;/p&gt;

&lt;h3 id=&quot;코드-sample-1&quot;&gt;코드 sample 1&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setCreatetime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setItemId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;testItemId&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;testOwner&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;테스트에서 이런 코드 반복이 많다. 언제까지 이런 코드를 &lt;strong&gt;반복&lt;/strong&gt;할 것인가?&lt;/li&gt;
  &lt;li&gt;테스트의 value들이 random data가 아니다. 테스트가 특정 케이스만 커버할 수 있을지도 모른다. 모든 테스트가 random data로 이뤄져야 하는 건 아니지만 필요한 상황에 모르고 놓치는 경우보다 귀찮아서 안하는 경우일 때가 많다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;코드-sample-2&quot;&gt;코드 sample 2&lt;/h3&gt;

&lt;p&gt;오래된 프로젝트의 테스트 코드에서 심심찮게 보이는 반복 호출을 위한 테스트 함수.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;createItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dto&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dto&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setItemId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;testItemId&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dto&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setCreatetime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0L&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;dto&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;testOwner&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dto&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;이전 코드보다 조금 낫다고 할 수 있지만 이런 코드틑 프로젝트 테스트의 곳곳에 있다.&lt;/li&gt;
  &lt;li&gt;누가 만들었는지, 있는지 없는지 조차 알지 못한다. 심한 경우는 test class 마다 존재한다.&lt;/li&gt;
  &lt;li&gt;여전히 &lt;strong&gt;random value&lt;/strong&gt;는 아니다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;코드-sample-3&quot;&gt;코드 sample 3&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initTestValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemDTO&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;itemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setCtime&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RandomUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;nextLong&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100L&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;currentTimeMillis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;itemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setItemId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RandomStringUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;randomAlphanumeric&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;itemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setOwner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;RandomStringUtils&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;randomAlphanumeric&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;itemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;이 정도면 일종의 objectMother라고 할 수 있을 것 같다.&lt;/li&gt;
  &lt;li&gt;그렇지만 언제까지 random data를 &lt;strong&gt;한땀 한땀&lt;/strong&gt; 넣어줄건지.&lt;/li&gt;
  &lt;li&gt;생성로직이 산개되어 있고 네이밍이 명확하지 않다는 문제는 여전하다. 즉 다른 사람이 동일한 코드를 다시 만들 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;object-mother&quot;&gt;Object Mother&lt;/h3&gt;

&lt;p&gt;ObjectMother는 테스트 객체의 생성에 대한 패턴을 제공하며 이는 눈에 띄는 확연한 약속으로 테스트 데이터 생성 로직의 산개를 막는다.&lt;br /&gt;
테스트 코드 중복과 관리에 대한 문제를 &lt;a href=&quot;/docs/pattern/object-mother&quot;&gt;ObjectMother 패턴&lt;/a&gt;으로 풀어낼 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;easyrandom&quot;&gt;EasyRandom&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;ObjectMother&lt;/strong&gt;를 효율적으로 사용하기 위한 테스트 데이터를 생성하는 프로젝트들이 찾아보았다.&lt;/p&gt;

&lt;p&gt;Naver에서 관리하고 있는 &lt;strong&gt;FixtureMonkey&lt;/strong&gt; 도 있었고,&lt;br /&gt;
약간은 올드한 네이밍의 &lt;strong&gt;PODAM&lt;/strong&gt;,&lt;br /&gt;
조금 궤가 다르지만 param test에 random하게 값을 채워주는 &lt;strong&gt;AutoParams&lt;/strong&gt; 들을 사용해봤다.&lt;/p&gt;

&lt;p&gt;가장 쓰기 편하고 효율적인 프로젝트는 &lt;strong&gt;EasyRandom&lt;/strong&gt;이었다.&lt;br /&gt;
EasyRandom은 github star 수도 가장 많았고, 이름 값 하는 프로젝트다.&lt;/p&gt;

&lt;p&gt;EasyRandom은 굉장히 강력한데 다음과 같은 특징들이 있다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;setter가 없어도 된다.&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;contructor가 없어도 된다&lt;/strong&gt;. (private contructor only인 경우)&lt;/li&gt;
  &lt;li&gt;자동으로 &lt;strong&gt;sub class들의 값도 random하게 채워준다.&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;test object &lt;strong&gt;list 생성이 간단하다.&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;setter와 constructor가 없어도 된다는 점이 굉장히 좋았다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;가독성++&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;특정 entity의 경우 private consturctor만 갖고 factory에서 생성을 하는데, factory는 또 dto를 받는 번거로운 구조를 갖는 경우가 있었다.&lt;br /&gt;
이런 경우 항상 테스트에서 dto 생성 후 entity를 만드는 test 이해도를 떨어뜨리는 작업을 했어야 했다.&lt;br /&gt;
&lt;strong&gt;EasyRandom&lt;/strong&gt;은 이런 단점들을 보완해준다.&lt;/p&gt;

&lt;h2 id=&quot;사용법&quot;&gt;사용법&lt;/h2&gt;

&lt;p&gt;우선 dependency를 추가한다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.jeasy&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;easy-random-core&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;4.0.0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;기본-사용&quot;&gt;기본 사용&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;nc&quot;&gt;EasyRandom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EasyRandom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;nextObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;persons&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;간단하게 사용할 수 있고 List나 다른 Collection을 만들기도 쉽다.&lt;/p&gt;

&lt;h3 id=&quot;parameter와-함께-사용&quot;&gt;parameter와 함께 사용&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;nc&quot;&gt;EasyRandomParameters&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EasyRandomParameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;stringLengthRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;collectionSizeRange&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;EasyRandom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EasyRandom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parameters&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;nextObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;아주 간단하게 특정 param이나 value에 조건을 더할 수도 있다.&lt;/p&gt;

&lt;h3 id=&quot;적용된-코드-예시&quot;&gt;적용된 코드 예시&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTOMother&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;EasyRandom&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;easyRandom&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;EasyRandom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;easyRandom&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;nextObject&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;generateDeleted&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ItemDTO&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setStatus&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DELETED&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;item&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 되면 모두 동일한 생성 로직(&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;XXMother&lt;/code&gt;)를 보게 되고 완성도 높고 재사용률 높은 테스트 코드가 완성된다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Quick Guide to EasyRandom, &lt;a href=&quot;https://www.baeldung.com/java-easy-random&quot;&gt;https://www.baeldung.com/java-easy-random&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;EasyRandom github, &lt;a href=&quot;https://github.com/j-easy/easy-random&quot;&gt;https://github.com/j-easy/easy-random&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/library/easyrandom</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/library/easyrandom</guid>
      </item>
    
      <item>
        <title>Object Mother, 테스트에 가장 중요한 패턴</title>
        
          <description>&lt;p&gt;이번엔 &lt;strong&gt;ObjectMother&lt;/strong&gt;라는 패턴에 대해서 정리한다.&lt;br /&gt;
&lt;strong&gt;ObjectMother&lt;/strong&gt;는 우리가 코드를 개발하면서 한 번쯤은 생각해봤고, 또 편의를 위해 조금씩은 작성해봤을 내용의 패턴이다.&lt;br /&gt;
사실 패턴이란게 다 그렇지 않나 싶다.&lt;/p&gt;

&lt;p&gt;간단히 표현하자면 test object를 만들어주는 class라고 할 수 있을 것이다.&lt;br /&gt;
패턴을 잘 정의하는 &lt;a href=&quot;https://martinfowler.com/bliki/ObjectMother.html&quot;&gt;Martin Fowler의 글&lt;/a&gt;을 참고해서 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;object-mother-란&quot;&gt;Object Mother 란?&lt;/h2&gt;

&lt;p&gt;테스트에 사용되는 여러 &lt;strong&gt;example objects&lt;/strong&gt;를 생성하는데 도움을 주는 클래스이다.&lt;/p&gt;

&lt;p&gt;테스트를 작성할 때 많은 예제 데이터가 필요하고,&lt;br /&gt;
이런 &lt;strong&gt;data set&lt;/strong&gt;을 &lt;strong&gt;test fixture&lt;/strong&gt;라고 부른다.&lt;/p&gt;

&lt;p&gt;여러 테스트 클래스에서 유사한 &lt;strong&gt;data&lt;/strong&gt;가 필요한 경우가 많다.&lt;br /&gt;
테스트 시점에서 &lt;strong&gt;standard fixtures&lt;/strong&gt;를 만들 수 있는 &lt;strong&gt;factory object&lt;/strong&gt;를 만드는 것이 합리적이다.&lt;br /&gt;
&lt;strong&gt;Object Mother&lt;/strong&gt;는 이런 factory를 말한다.&lt;/p&gt;

&lt;p&gt;이렇게 만들어진 object는 일부 test case에서는 적절하지 않을 수 있다.&lt;br /&gt;
그렇지만 Folwer는 이런 경우에서 조차도 새로운 object 생성보다 &lt;strong&gt;Object Mother&lt;/strong&gt;로 생성한 객체를 수정하는 방향이 더 이해하기 쉽다고 말한다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;참고로 Object Mother라는 단어는 &lt;strong&gt;Thoughtworks&lt;/strong&gt; 프로젝트에서 처음 쓰였다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;object-mother-장-단점&quot;&gt;Object Mother 장 단점&lt;/h2&gt;

&lt;p&gt;장 단점은 오역의 여지가 없도록 &lt;u&gt;ThoughWorks 논문&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;의 내용을 그대로 발췌했다.&lt;/p&gt;

&lt;h3 id=&quot;장점&quot;&gt;장점&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;Simplified and standardized test object creation&lt;/li&gt;
  &lt;li&gt;Ease of maintenance, because test object creation is entrusted to a specific class or group of classes.&lt;/li&gt;
  &lt;li&gt;test object clean-up.&lt;/li&gt;
  &lt;li&gt;the pattern recovers even greater amounts of time that would otherwise be spent writing and maintaining unit tests.&lt;/li&gt;
  &lt;li&gt;by removing a significant hurdle from the test-writing process, ObjectMother encourages developers to write more tests.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;단점&quot;&gt;단점&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;added time spent building the pattern&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;주의-사항&quot;&gt;주의 사항&lt;/h3&gt;

&lt;p&gt;ObjectMother 패턴의 힘은 강력하다.&lt;br /&gt;
프로젝트에 도입한 뒤 팀원들은 자발적으로 ObjectMother에 테스트 객체를 추가하기 시작했다.&lt;/p&gt;

&lt;p&gt;그러나 ObjectMother를 온전히 이해하지 못하고 작성하는 Mother 패턴들은 ObjectMother의 본질을 흐리게 한다.&lt;br /&gt;
ObjectMother는 &lt;strong&gt;standard fixtures&lt;/strong&gt;를 만드는 것이다.&lt;br /&gt;
개념을 온전히 이해하지 못하고 사용하는 경우엔 standard fixture를 만드는 것이 아니라 모든 fixture를 Object Mother에 추가하는 경우가 많다.&lt;br /&gt;
&lt;strong&gt;standard fixture가 아니라 아무 fixture나 추가된 ObjectMother는 사용되지 않는 것보다는 낫지만 Mother 패턴의 가독성과 신뢰성, 확장성을 많이 떨어뜨린다.&lt;/strong&gt;&lt;/p&gt;

&lt;h3 id=&quot;java에서-objectmother-적용하기&quot;&gt;Java에서 objectMother 적용하기&lt;/h3&gt;

&lt;p&gt;ObjectMother를 공부하면서 &lt;a href=&quot;/docs/java/library/easyrandom&quot;&gt;Java에서 ObjectMother 패턴 적용&lt;/a&gt;하기 위해 도움이 되는 라이브러리들을 찾아보았고, 실제 우리 팀 코드에 적용을 해 보았다.&lt;br /&gt;
굉장히 간단한데 실제 패턴을 적용해서 얻는 이점이 많았다. java에서 적용하며 얻은 이점들은 위 페이지에 정리한다.&lt;/p&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Thoughtworks 논문 &lt;a href=&quot;http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.18.4710&amp;amp;rep=rep1&amp;amp;type=pdf&quot;&gt;ObjectMother, Easing Test Object Creation in XP&lt;/a&gt; 참고 &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/pattern/object-mother</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/pattern/object-mother</guid>
      </item>
    
      <item>
        <title>Server Developer, 2021 yearly Retrospection</title>
        
          <description>&lt;p&gt;The year 2021 went by fast.&lt;br /&gt;
I sorted out three things that I remember this year and organized them.&lt;/p&gt;

&lt;h2 id=&quot;batch-jobs&quot;&gt;Batch Jobs&lt;/h2&gt;

&lt;p&gt;Batch jobs are essential for server developers. This year, there were many changes in our service operations, and I ended up designing and developing a lot of batch jobs for more efficient management.&lt;br /&gt;
Rather than using any specific advanced technology, I feel that the most valuable thing I learned this year was &lt;strong&gt;improving design&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Here are the lessons I learned from working on batch jobs:&lt;/p&gt;

&lt;h3 id=&quot;1-split-deployments-whenever-possible&quot;&gt;1. &lt;strong&gt;Split Deployments Whenever Possible&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Deployments in our company is a bit cumbersome. While it varies by module, the processes of verification and approval make deployments tiring and uninteresting.&lt;br /&gt;
Because of this, when multiple changes were deployed at once, it became challenging to pinpoint where issues originated. (Though this is something that might need a change in our deployment system itself.)&lt;/p&gt;

&lt;h3 id=&quot;2-ensure-migration-batches-are-rollback-friendly&quot;&gt;2. Ensure Migration Batches Are &lt;strong&gt;Rollback-Friendly&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;While working on many migration batches, I occasionally became overconfident with simple migrations and neglected the rollback process. However, the thought of not being able to roll back after deployment is terrifying.&lt;br /&gt;
Since migrations handle user data, it’s crucial to clearly define the pre-check and post-check steps before execution.&lt;/p&gt;

&lt;h3 id=&quot;3-design-for-scalability&quot;&gt;3. &lt;strong&gt;Design for Scalability&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Most of the batches we manage have fixed deadlines.&lt;br /&gt;
To meet deadlines or adjust resource usage (e.g., CPU or the number of instances), scalability of batch workers (instances or threads) is critical.&lt;br /&gt;
For example, if you need to add instances but can’t or must restart everything, it’s inefficient.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;It’s helpful to track metrics like TPS (Transactions Per Second) and estimated batch completion time to ensure deadlines are met.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;4-consider-resumability-and-idempotency&quot;&gt;4. Consider &lt;strong&gt;Resumability and Idempotency&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Batch jobs often need to be paused or restarted for various reasons.&lt;br /&gt;
For instance, an instance might go down, memory issues may require changing instance types, or DB throttling might force you to shuffle input data and retry.&lt;br /&gt;
In such cases, batch jobs must be designed with &lt;strong&gt;idempotency&lt;/strong&gt; in mind to handle repeated processing gracefully.&lt;br /&gt;
Idempotency here means not only that repeated tasks won’t cause issues but also that tasks already processed can be flagged to avoid unnecessary reprocessing.&lt;/p&gt;

&lt;h3 id=&quot;5-confirm-the-data-flow&quot;&gt;5. Confirm the &lt;strong&gt;Data Flow&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;We currently operate across five global regions.&lt;br /&gt;
For batch jobs involving file transfers, binary data may cross regions. Efficiently managing this binary flow is critical.&lt;br /&gt;
Once, despite having a well-designed system, we overlooked binary flow optimization, which significantly hurt performance and required redevelopment.&lt;/p&gt;

&lt;h3 id=&quot;6-dont-separate-code-for-batches-sharing-the-same-life-cycle&quot;&gt;6. Don’t Separate Code for Batches Sharing the Same &lt;strong&gt;Life Cycle&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Minimizing code duplication is a developer’s mission.&lt;br /&gt;
For batch jobs with shared life cycles, separating code can lead to significant problems.&lt;br /&gt;
For example, this year, a new feature was deployed on our WAS, but the batch didn’t include the corresponding code update, which almost resulted in user data loss.&lt;/p&gt;

&lt;h2 id=&quot;design&quot;&gt;Design&lt;/h2&gt;

&lt;p&gt;As mentioned earlier, I learned a lot about design in 2021.&lt;br /&gt;
Rather than listing specific lessons, I focused on studying and applying DDD (Domain-Driven Design), which noticeably improved my design skills.&lt;/p&gt;

&lt;h3 id=&quot;1-the-more-you-learn-ddd-the-harder-it-feels&quot;&gt;1. The More You Learn DDD, the Harder It Feels&lt;/h3&gt;

&lt;p&gt;Previously, I thought I had designed modules following DDD principles. However, after studying more, I realized there were many areas for improvement.&lt;br /&gt;
While I feel I’m getting better, I still find parts of DDD unclear.&lt;/p&gt;

&lt;h3 id=&quot;2-include-statistics-in-the-design&quot;&gt;2. Include &lt;strong&gt;Statistics&lt;/strong&gt; in the Design&lt;/h3&gt;

&lt;p&gt;When extracting requirements for design, I didn’t include statistics as part of the requirements.&lt;br /&gt;
This resulted in inconvenient workarounds, like analyzing logs or creating additional batch jobs, every time statistics were needed.&lt;br /&gt;
Services should be designed to quickly and easily provide relevant statistics.&lt;/p&gt;

&lt;h3 id=&quot;3-use-first-class-objects&quot;&gt;3. Use &lt;strong&gt;First-Class Objects&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;We have older modules developed before our team took over, and they’re often hard to read due to excessive use of structures like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HashMap&amp;lt;String, Object&amp;gt;&lt;/code&gt;.&lt;br /&gt;
Worse, these objects sometimes contain nested HashMaps, making them extremely confusing.&lt;br /&gt;
By introducing wrapper classes (e.g., using an &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ID&lt;/code&gt; class instead of plain strings), we reduced errors and improved clarity.&lt;/p&gt;

&lt;h2 id=&quot;database&quot;&gt;Database&lt;/h2&gt;

&lt;p&gt;This year involved a lot of database-related work.&lt;/p&gt;

&lt;h3 id=&quot;1-database-consolidation&quot;&gt;1. Database Consolidation&lt;/h3&gt;

&lt;p&gt;One module stored a single entity across two databases.&lt;br /&gt;
While having interfaces that support multiple databases is good for flexibility, &lt;strong&gt;using multiple databases without a clear purpose should be avoided&lt;/strong&gt;.&lt;br /&gt;
For example, using Cassandra for pages and DynamoDB for comments might make sense. However, we were storing the same page data in both Cassandra and DynamoDB (due to historical decisions).&lt;br /&gt;
Consolidating databases was challenging but greatly improved &lt;strong&gt;efficiency in development, code reviews, and testing&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;2-dynamodb-table-consolidation&quot;&gt;2. DynamoDB Table Consolidation&lt;/h3&gt;

&lt;p&gt;We merged multiple DynamoDB tables that were previously split unnecessarily (e.g., separate tables for page main data and page metadata).&lt;br /&gt;
This brought significant &lt;strong&gt;efficiency in development, code reviews, and testing&lt;/strong&gt;, and even reduced &lt;strong&gt;elapsed time by half&lt;/strong&gt;.&lt;br /&gt;
This reminded me of the saying, “The database is the most critical factor for service response time.”&lt;/p&gt;

&lt;h3 id=&quot;3-dynamodb-blob-limit-issues&quot;&gt;3. DynamoDB Blob Limit Issues&lt;/h3&gt;

&lt;p&gt;I gained a deeper understanding of DynamoDB this year.&lt;br /&gt;
For example, creating LSI (Local Secondary Indexes) can lead to issues if not handled carefully.&lt;br /&gt;
For more details, refer to &lt;a href=&quot;/docs/aws/dynamo/DynamoSizeLimitException&quot;&gt;DynamoSizeLimitException&lt;/a&gt;.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Looking back, 2021 felt less exciting than 2020 in terms of the work I got to do.&lt;br /&gt;
While I feel like I accomplished a lot, there are still tasks that weigh on me.&lt;/p&gt;

&lt;p&gt;For 2022, I hope to further improve my design skills and explore and master new technologies.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/retrospect/2021</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/retrospect/2021</guid>
      </item>
    
      <item>
        <title>[jekyll] Dependency Error, Jekyll::Errors::MissingDependencyException</title>
        
          <description>&lt;p&gt;Dependency 추가 후 jekyll local build 중 에러가 발생했다.&lt;/p&gt;

&lt;h2 id=&quot;빌드-에러-메세지&quot;&gt;빌드 에러 메세지&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Dependency Error: Yikes! It looks like you don&apos;t have jekyll-sitemap or one of its dependencies installed. In order to use Jekyll as currently configured, you&apos;ll need to install this gem. If you&apos;ve run Jekyll with `bundle exec`, ensure that you have included the jekyll-sitemap gem in your Gemfile as well. The full error message from Ruby is: &apos;cannot load such file -- jekyll-sitemap&apos; If you run into trouble, you can find helpful resources at https://jekyllrb.com/help/!
                    ------------------------------------------------
      Jekyll 4.2.1   Please append `--trace` to the `serve` command
                     for any additional information or backtrace.
                    ------------------------------------------------
Traceback (most recent call last):
        21: from C:/Ruby27-x64/bin/jekyll:23:in `&amp;lt;main&amp;gt;&apos;
        20: from C:/Ruby27-x64/bin/jekyll:23:in `load&apos;
        19: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/exe/jekyll:15:in `&amp;lt;top (required)&amp;gt;&apos;
        18: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary.rb:21:in `program&apos;
        17: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/program.rb:44:in `go&apos;
        16: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `execute&apos;
        15: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `each&apos;
        14: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `block in execute&apos;
        13: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/commands/serve.rb:86:in `block (2 levels) in init_with_program&apos;
        12: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/command.rb:91:in `process_with_graceful_fail&apos;
        11: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/command.rb:91:in `each&apos;
        10: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/command.rb:91:in `block in process_with_graceful_fail&apos;
         9: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/commands/build.rb:30:in `process&apos;
         8: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/commands/build.rb:30:in `new&apos;
         7: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/site.rb:36:in `initialize&apos;
         6: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/site.rb:131:in `setup&apos;
         5: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/plugin_manager.rb:22:in `conscientious_require&apos;
         4: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/plugin_manager.rb:30:in `require_gems&apos;
         3: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:57:in `require_with_graceful_fail&apos;
         2: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:57:in `each&apos;
         1: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:60:in `block in require_with_graceful_fail&apos;
C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:60:in `require&apos;: cannot load such file -- jekyll-sitemap (LoadError)
        21: from C:/Ruby27-x64/bin/jekyll:23:in `&amp;lt;main&amp;gt;&apos;
        20: from C:/Ruby27-x64/bin/jekyll:23:in `load&apos;
        19: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/exe/jekyll:15:in `&amp;lt;top (required)&amp;gt;&apos;
        18: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary.rb:21:in `program&apos;
        17: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/program.rb:44:in `go&apos;
        16: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `execute&apos;
        15: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `each&apos;
        14: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/mercenary-0.4.0/lib/mercenary/command.rb:221:in `block in execute&apos;
        13: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/commands/serve.rb:86:in `block (2 levels) in init_with_program&apos;
        12: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/command.rb:91:in `process_with_graceful_fail&apos;
        11: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/command.rb:91:in `each&apos;
        10: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/command.rb:91:in `block in process_with_graceful_fail&apos;
         9: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/commands/build.rb:30:in `process&apos;
         8: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/commands/build.rb:30:in `new&apos;
         7: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/site.rb:36:in `initialize&apos;
         6: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/site.rb:131:in `setup&apos;
         5: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/plugin_manager.rb:22:in `conscientious_require&apos;
         4: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/plugin_manager.rb:30:in `require_gems&apos;
         3: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:57:in `require_with_graceful_fail&apos;
         2: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:57:in `each&apos;
         1: from C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:58:in `block in require_with_graceful_fail&apos;
C:/Ruby27-x64/lib/ruby/gems/2.7.0/gems/jekyll-4.2.1/lib/jekyll/external.rb:73:in `rescue in block in require_with_graceful_fail&apos;: jekyll-sitemap (Jekyll::Errors::MissingDependencyException)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;원인&quot;&gt;원인&lt;/h2&gt;

&lt;p&gt;해결이 좀 어처구니가 없다.&lt;/p&gt;

&lt;p&gt;sitemap dependency는 이미 추가해놓았었는데 새로운 dependency 추가 후 local build로 테스트하려다가 실패했다.
sitemap은 이미 gh-pages에서 정상동작 하고 있었고..&lt;/p&gt;

&lt;p&gt;원인을 보자면,&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;sitemap은 gemfile에 add 되어있지 않았는데 gh-pages에서 동작함. (gh-pages에서 기본적으로 가지고 있나보다)&lt;/li&gt;
  &lt;li&gt;새로운 dependency를 &lt;strong&gt;gemfile&lt;/strong&gt;과 &lt;strong&gt;_config.yml&lt;/strong&gt;에 추가 후 빌드.&lt;/li&gt;
  &lt;li&gt;sitemap이 gemfile에 없어서 애러 발생.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;GemFile에 아래 코드 추가
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; gem &apos;jekyll-sitemap&apos;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
  &lt;li&gt;bundle update&lt;/li&gt;
  &lt;li&gt;jekyll serve&lt;/li&gt;
  &lt;li&gt;문제 해결&lt;/li&gt;
&lt;/ol&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/kotlin/jekyll-cannot-load-such-file</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/kotlin/jekyll-cannot-load-such-file</guid>
      </item>
    
      <item>
        <title>query를 쉽게하기, ORMs</title>
        
          <description>&lt;h2 id=&quot;ormobject-relational-mapping-이란&quot;&gt;ORM(Object Relational Mapping) 이란?&lt;/h2&gt;

&lt;p&gt;SQL Database를 사용하게 되면 아래와 같이 SQL query를 사용할 일들이 많아진다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;SELECT * FROM users WHERE email = &apos;backencbrew@test.com&apos;;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ORM&lt;/strong&gt;은 이런 복잡하고 번거로운 query들을 &lt;strong&gt;Object-Oriented&lt;/strong&gt; 개념을 사용해서 data를 query/manipulate하는 기술을 말한다.
즉, SQL이 아니라 &lt;strong&gt;우리가 사용하는 언어로 database를 사용하는 기술&lt;/strong&gt;이다.&lt;/p&gt;

&lt;p&gt;예를 들면 Java의 ORMs의 표준 스펙인 &lt;strong&gt;JPA&lt;/strong&gt;가 있다.&lt;br /&gt;
ORMs를 생각할 때 JPA를 떠올리면 ORMs가 더 명확하게 그려진다.&lt;/p&gt;

&lt;h2 id=&quot;flow&quot;&gt;flow&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/database/orm.png&quot; alt=&quot;orm&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ORM은 query를 작성해주는 소프트웨어라고 했다.&lt;br /&gt;
위와 같이 코드로 작성된 object들이 ORM을 통해 database에 query로 변환된다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;pre&gt;&lt;code class=&quot;language-SQL&quot;&gt;SELECT * FROM users WHERE email = &apos;backencbrew@test.com&apos;;
&lt;/code&gt;&lt;/pre&gt;

  &lt;p&gt;위의 query가 아래 java 코드처럼 접근이 가능하다.&lt;br /&gt;
물론 간단한 setup이 필요하다.&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findByEmail&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;orm-장점&quot;&gt;ORM 장점&lt;/h2&gt;

&lt;h3 id=&quot;원래-사용하던-언어를-사용할-수-있다&quot;&gt;원래 사용하던 언어를 사용할 수 있다.&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;SQL은 powerful 하지만 훌륭하게 활용하지 못하는 경우가 많다.&lt;/li&gt;
  &lt;li&gt;그치만 원래 사용하던 언어들(Java ..)은 SQL보다 더 훌륭하게 활용할 수 있다.&lt;/li&gt;
  &lt;li&gt;함수를 호출하는 것 만큼 쉽다. (원래 db는 사용자 친화적이진 않으니까)&lt;/li&gt;
  &lt;li&gt;그래서 결국 가독성이 굉장히 올라간다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;시간을-절약할-수-있다&quot;&gt;시간을 절약할 수 있다.&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;ORM에서 제공하는 많은 feature들(transaction, connection pooling, streams)을 &lt;strong&gt;out of the box&lt;/strong&gt;로 사용할 수 있다.&lt;/li&gt;
  &lt;li&gt;많은 기본적인 query들이 직접 query를 작성하는 것보다 효율적으로 동작한다.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;DRY&lt;/strong&gt;로 데이터를 한 곳에서만 작성해서 유지 관리와 재사용이 쉽다.&lt;/li&gt;
  &lt;li&gt;번거로운 SQL을 직접 작성하지 않아도 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;유연하다&quot;&gt;유연하다.&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;database를 추상화할 수 있어 종속성이 줄어들고 database의 변경이 비교적 편하다.&lt;/li&gt;
  &lt;li&gt;코드를 작성하는 방식과 자연스럽게 연결된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;orm-단점&quot;&gt;ORM 단점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;SQL을 훌륭하게 잘 쓴다면 더 좋은 성능의 query를 짤 수 있는 경우가 있다.&lt;/li&gt;
  &lt;li&gt;ORM에서 수행할 수 없는 query도 존재한다.&lt;/li&gt;
  &lt;li&gt;ORM을 배우기 위한 overhead가 있다.&lt;/li&gt;
  &lt;li&gt;initial confiugration을 위한 작업들이 필요하다.&lt;/li&gt;
  &lt;li&gt;ORM이 많은 것을 해주기 때문에 무슨 작업들이 ORM과 DB에서 벌어지는지에 대한 이해도가 떨어질 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;정리&quot;&gt;정리&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;JPA&lt;/strong&gt;를 자주 사용하는 나한테 &lt;strong&gt;ORM&lt;/strong&gt;의 개념은 굉장히 친숙하고 당연하다.&lt;br /&gt;
&lt;strong&gt;ORM&lt;/strong&gt;을 쓰면서도 일부 지원하지 않는 기능을 위한 &lt;strong&gt;native query&lt;/strong&gt;를 작성하여 사용하고 있는데, 이런 방식이 가장 적절하지 않나 싶다.&lt;/p&gt;

&lt;p&gt;결국 ORM은 굉장히 유용하고 꼭 쓰여야 한다고 본다.&lt;br /&gt;
위에서 말한 단점처럼 DB query에 대한 이해도가 많이 줄어드는건 문제이긴 하다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/1279613/what-is-an-orm-how-does-it-work-and-how-should-i-use-one&quot;&gt;https://stackoverflow.com/questions/1279613/what-is-an-orm-how-does-it-work-and-how-should-i-use-one&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.bitsrc.io/what-is-an-orm-and-why-you-should-use-it-b2b6f75f5e2a&quot;&gt;https://blog.bitsrc.io/what-is-an-orm-and-why-you-should-use-it-b2b6f75f5e2a&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://openclassrooms.com/en/courses/5671811-implement-a-relational-database-with-asp-net-core/6588450-identify-object-relational-mapping-orm-tools-for-net&quot;&gt;https://openclassrooms.com/en/courses/5671811-implement-a-relational-database-with-asp-net-core/6588450-identify-object-relational-mapping-orm-tools-for-net&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/List_of_object%E2%80%93relational_mapping_software#Java&quot;&gt;https://en.wikipedia.org/wiki/List_of_object%E2%80%93relational_mapping_software#Java&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/db/concept/orms</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/db/concept/orms</guid>
      </item>
    
      <item>
        <title>multi terminal tmux 효율적으로 사용하기</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;Linux Commands&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/dev-tools/linux-commands/terminal&quot; class=&quot;btn&quot;&gt;Terminal Shortcut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/tmux&quot; class=&quot;btn btn-purple&quot;&gt;tmux&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/cut&quot; class=&quot;btn&quot;&gt;cut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/jq&quot; class=&quot;btn&quot;&gt;jq&lt;/a&gt;
&lt;a href=&quot;/docs/tools/linux-commands/screen&quot; class=&quot;btn&quot;&gt;screen&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/split&quot; class=&quot;btn&quot;&gt;split&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;tmux는 원격에서 background에서 작업을 수행할 때 사용하는 command 이다.  &lt;br /&gt;
이전에 정리했던 &lt;a href=&quot;/docs/91.dev-tools/linux-commands/screen&quot;&gt;linux screen&lt;/a&gt;와 유사하다.&lt;/p&gt;

&lt;p&gt;나는 요새 &lt;strong&gt;screen&lt;/strong&gt; 보다는 &lt;strong&gt;tmux&lt;/strong&gt;를 사용하려고 한다.&lt;br /&gt;
지금 나는 5개 region에서 운영하는 서비스들을 개발하고 있는데, tmux는 여러 batch instance로 들어가서 작업하기가 screen 보다 편리했다.&lt;/p&gt;

&lt;h2 id=&quot;tmux-terminal-multiplexer&quot;&gt;tmux; terminal multiplexer&lt;/h2&gt;

&lt;p&gt;man page의 설명을 참고하면, &lt;a href=&quot;http://man.openbsd.org/OpenBSD-current/man1/tmux.1&quot;&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;man tmux&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;strong&gt;DESCRIPTION&lt;/strong&gt;&lt;br /&gt;
     tmux is a terminal multiplexer: it enables a number of terminals to be created, accessed, and controlled from a single screen.  tmux may be detached from a screen and continue running in the background, then later reattached.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;장점&quot;&gt;장점&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;terminal windows가 여러 개가 되지 않도록 관리할 수 있다.&lt;/li&gt;
  &lt;li&gt;window 하나에 pane들을 여러 개 나누기가 쉽다.&lt;/li&gt;
  &lt;li&gt;나누어진 pane들에 동시에 입력하기가 편하다.&lt;/li&gt;
  &lt;li&gt;shell program이기 때문에 remote server에서도 동작한다. 즉, terminal windows를 새로 따기 위해 다시 접속하지 않아도 된다.&lt;/li&gt;
  &lt;li&gt;terminal을 project 단위로 organize 할 수 있다.&lt;/li&gt;
  &lt;li&gt;session이 만료되지 않고 &lt;strong&gt;in-state&lt;/strong&gt; 상태로 저장된다.&lt;/li&gt;
  &lt;li&gt;session을 공유할 수 있어서 다른 사람이 들어오면 typing 하는 것을 실시간으로 볼 수 있다.&lt;/li&gt;
  &lt;li&gt;script를 작성해두면 여러 pane이 설정된 tmux session을 바로 생성할 수 있다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;개념&quot;&gt;개념&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/terminal-commands/tmux.png&quot; alt=&quot;tmux hierarchy&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;sessions&quot;&gt;Sessions&lt;/h3&gt;

&lt;p&gt;완전히 분리된 tmux의 최상위 hierarchy.
user는 여러 개의 session 을 만들고, attach, detach 할 수 있다.&lt;/p&gt;

&lt;p&gt;프로젝트를 관리하는 단위로 session을 할당하는 편이다.&lt;/p&gt;

&lt;h3 id=&quot;windows&quot;&gt;Windows&lt;/h3&gt;

&lt;p&gt;각 session은 여러 window를 가질 수 있다.
브라우저의 tab이랑 비슷하다.&lt;/p&gt;

&lt;p&gt;프로젝트의 특정 task 들을 관리하는 단위로 쓰이는 편이다.&lt;/p&gt;

&lt;h3 id=&quot;panes&quot;&gt;Panes&lt;/h3&gt;

&lt;p&gt;각 window는 여러 pane으로 화면이 나뉠 수 있다.
동시에 여러 pane을 보게되는 것이고, 현재 작업에 맞게 화면 배열을 할 수 있다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;자주-사용하는-명령어들&quot;&gt;자주 사용하는 명령어들&lt;/h2&gt;

&lt;h3 id=&quot;세션-명령어&quot;&gt;세션 명령어&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;동작&lt;/th&gt;
      &lt;th&gt;명령어&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;새로운 세션 생성&lt;/td&gt;
      &lt;td&gt;tmux new -s &lt;session_name&gt;&lt;/session_name&gt;&lt;/td&gt;
      &lt;td&gt;session을 생성하고 들어가기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;세션 목록&lt;/td&gt;
      &lt;td&gt;tmux ls&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;세션 attach&lt;/td&gt;
      &lt;td&gt;tmux attach -t &lt;session-name&gt;&lt;/session-name&gt;&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;세션 detach&lt;/td&gt;
      &lt;td&gt;(ctrl + b) d&lt;/td&gt;
      &lt;td&gt;세션을 종료하지 않고 나가기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;세션 kill&lt;/td&gt;
      &lt;td&gt;tmux kill-session -t &lt;session-name&gt;&lt;/session-name&gt;&lt;/td&gt;
      &lt;td&gt;세션을 종료하기&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;윈도우-명령어&quot;&gt;윈도우 명령어&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;동작&lt;/th&gt;
      &lt;th&gt;명령어&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;새로운 윈도우 생성&lt;/td&gt;
      &lt;td&gt;(ctrl + b) + c&lt;/td&gt;
      &lt;td&gt;윈도우를 새로 추가하기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;윈도우 리스트 확인&lt;/td&gt;
      &lt;td&gt;(ctrl + b) + w&lt;/td&gt;
      &lt;td&gt;세션에서 생성된 윈도우를 리스트업&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;pane-명령어&quot;&gt;pane 명령어&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;동작&lt;/th&gt;
      &lt;th&gt;명령어&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;pane 나누기&lt;/td&gt;
      &lt;td&gt;(ctrl + b) %&lt;/td&gt;
      &lt;td&gt;Pane을 좌우로 나누기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;(ctrl + b) “&lt;/td&gt;
      &lt;td&gt;Pane을 상하로 나누기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pane 커서 이동&lt;/td&gt;
      &lt;td&gt;(ctrl + b) 방향키&lt;/td&gt;
      &lt;td&gt;현재 작업하는 커서의 Pane을 이동&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pane 사이즈 조정&lt;/td&gt;
      &lt;td&gt;(ctrl + b) 누르고 방향키&lt;/td&gt;
      &lt;td&gt;현재 커서가 있는 Pane의 사이즈를 변경&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pane 지우기&lt;/td&gt;
      &lt;td&gt;(ctrl + b) x&lt;/td&gt;
      &lt;td&gt;현재 커서의 pane을 지움 &lt;br /&gt; exit으로 나가서 지울 수도 있음 &lt;br /&gt; 현재 pane이 jumphost를 반복해서 들어간다면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;exit&lt;/code&gt;을 여러번 해야하는데 이걸 사용하면 좋음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pane에서 스크롤 사용하기&lt;/td&gt;
      &lt;td&gt;(ctrl + b) [&lt;/td&gt;
      &lt;td&gt;tmux는 기본이 스크롤이 안되는데 이걸로 스크롤 사용 설정 &lt;br /&gt; 그치만 여기서 스크롤을 써도 편한 스크롤은 아님&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;모든 pane에 입력하기&lt;/td&gt;
      &lt;td&gt;1. (ctrl + b) : &lt;br /&gt; 2. 하단 command에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setw synchronize-panes on&lt;/code&gt; &lt;br /&gt; 3. 입력 &lt;br /&gt;&lt;/td&gt;
      &lt;td&gt;tmux를 사용하는 가장 편리하게 사용하는 방법 중 하나 &lt;br /&gt; 이렇게 쓰면 지금 열려 있는 모든 pane에 커서가 공유되고 동일한 입력이 가능 &lt;br /&gt; 나는 여러 region/instance에 동일한 배치 작업을 수행할 때 주로 사용함&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;모든 pane에 입력끄기&lt;/td&gt;
      &lt;td&gt;1. (ctrl + b) : &lt;br /&gt; 2. 하단 command에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;setw synchronize-panes off&lt;/code&gt;&lt;/td&gt;
      &lt;td&gt;쓰고나서 필요할 땐 끄자&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;모든 pane의 크기 맞추기&lt;/td&gt;
      &lt;td&gt;(ctrl + b) , (Alt + 2)&lt;/td&gt;
      &lt;td&gt;vertical 하게 모든 pace이 동일한 크기를 갖도록 맞추기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt;(ctrl + b) , (Alt + 1)&lt;/td&gt;
      &lt;td&gt;horizontal 하게 모든 pace이 동일한 크기를 갖도록 맞추기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pane 뷰 형상 변경하기&lt;/td&gt;
      &lt;td&gt;(ctrl + b) , space&lt;/td&gt;
      &lt;td&gt;위의 horizontal, vertical 등의 뷰 형상을 변경해줌&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;pane 전체화면으로 변경하기&lt;/td&gt;
      &lt;td&gt;(ctrl + b) + z&lt;/td&gt;
      &lt;td&gt;현재 pane을 전체화면으로 변경. 한번 더 수행하면 다시 여러 pane 뷰로 변경&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;현재 pane을 별도 window로 분리&lt;/td&gt;
      &lt;td&gt;(ctrl + b) + !&lt;/td&gt;
      &lt;td&gt;pane이 여러개인 window에서 현재 pane만 새로운 window를 만들어 분리&lt;br /&gt;아래 스크립트와 효율이 좋다&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;자주-사용하지-않는데-한-번은-쓴-명령어&quot;&gt;자주 사용하지 않는데 한 번은 쓴 명령어&lt;/h2&gt;

&lt;h3 id=&quot;현재-세션-이름-알기&quot;&gt;현재 세션 이름 알기&lt;/h3&gt;
&lt;p&gt;tmux display-message -p ‘#S’&lt;/p&gt;

&lt;h3 id=&quot;현재-window-이름-알기&quot;&gt;현재 window 이름 알기&lt;/h3&gt;
&lt;p&gt;tmux display-message -p ‘#I’&lt;/p&gt;

&lt;h2 id=&quot;tmux-script&quot;&gt;tmux script&lt;/h2&gt;

&lt;p&gt;내가 만들어서 사용하는 script.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;echo&lt;/code&gt;라고 입력한 부분에 ssh command를 넣는다.&lt;/p&gt;

&lt;p&gt;나는 주로 batch instance를 접속할 수 있도록 command를 꾸려놓고,&lt;br /&gt;
위에서 언급한 pane 크기를 맞추고 필요한 경우 동시 입력으로 사용하는 편이다.&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#session을 항상 새롭게 만들고 싶다면 date를 사용할 수 있다.&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#DATE=`date +%s`&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#SESSIONNAME=&quot;meansoup_${DATE}&quot;&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;SESSIONNAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;meansoup&quot;&lt;/span&gt;
tmux has-session &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt; &amp;amp;&amp;gt; /dev/null

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$?&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; 0 &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;tmux new-session &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt; split-window &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt; split-window &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-pane&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; 0 &lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt; split-window &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt; split-window &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\;&lt;/span&gt;

    tmux send-keys &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt;:0.0 C-z &lt;span class=&quot;s1&quot;&gt;&apos;echo kr&apos;&lt;/span&gt; Enter
    tmux send-keys &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt;:0.1 C-z &lt;span class=&quot;s1&quot;&gt;&apos;echo uw&apos;&lt;/span&gt; Enter
    tmux send-keys &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt;:0.2 C-z &lt;span class=&quot;s1&quot;&gt;&apos;echo ew&apos;&lt;/span&gt; Enter
    tmux send-keys &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt;:0.3 C-z &lt;span class=&quot;s1&quot;&gt;&apos;echo sg&apos;&lt;/span&gt; Enter
    tmux send-keys &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt;:0.4 C-z &lt;span class=&quot;s1&quot;&gt;&apos;echo cn&apos;&lt;/span&gt; Enter
&lt;span class=&quot;k&quot;&gt;fi

&lt;/span&gt;tmux attach &lt;span class=&quot;nt&quot;&gt;-t&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$SESSIONNAME&lt;/span&gt;:0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/32986/how-do-i-equally-balance-tmux1-split-panes&quot;&gt;https://unix.stackexchange.com/questions/32986/how-do-i-equally-balance-tmux1-split-panes&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github-wiki-see.page/m/dkoes/docs/wiki/Using-tmux&quot;&gt;https://github-wiki-see.page/m/dkoes/docs/wiki/Using-tmux&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://protechnotes.com/comprehensive-tmux-tutorial-for-beginners-with-a-cheat-sheet/&quot;&gt;https://protechnotes.com/comprehensive-tmux-tutorial-for-beginners-with-a-cheat-sheet/&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://snipcademy.com/linux-command-line-tmux#pane-management-ex-commands&quot;&gt;https://snipcademy.com/linux-command-line-tmux#pane-management-ex-commands&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux-commands/tmux</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux-commands/tmux</guid>
      </item>
    
      <item>
        <title>database transaction model, ACID</title>
        
          <description>&lt;h2 id=&quot;database-transaction&quot;&gt;database transaction&lt;/h2&gt;

&lt;p&gt;database system에서 상호작용의 단위를 말한다.&lt;br /&gt;
data의 추가, 수정, 삭제의 단계들을 하나로 단일 실행 단위의 작업 집합을 말한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;A가 B에게 100원을 이체하는 작업에 대해서 아래의 SQL이 모여 하나의 transaction이 된다.&lt;/p&gt;

  &lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;BEGIN&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TRANSACTION&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accounts&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;balance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;balance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;A&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;UPDATE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;accounts&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;SET&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;balance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;balance&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;WHERE&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;B&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;COMMIT&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TRANSACTION&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;이론적으로 database system은 각각의 transaction에 대해 &lt;strong&gt;ACID&lt;/strong&gt;를 보장한다.&lt;br /&gt;
실제로는 성능 향상을 위해 각 특성들이 종종 완화 되기도 한다.&lt;/p&gt;

&lt;p&gt;이런 transaction을 지원하는 database를 transactional database라고 부른다.&lt;br /&gt;
대부분의 RDB(Relational DB)는 transactional database이다.&lt;/p&gt;

&lt;h2 id=&quot;acid-이란&quot;&gt;ACID 이란?&lt;/h2&gt;

&lt;p&gt;database transaction이 안전하게 수행된다는 것을 보장하기 위한 성질이다.&lt;br /&gt;
아래의 네 가지 속성을 따서 ACID라고 부른다.&lt;/p&gt;

&lt;h3 id=&quot;atomicity-원자성&quot;&gt;Atomicity (원자성)&lt;/h3&gt;

&lt;p&gt;data의 변경 operation이 &lt;strong&gt;single operation으로&lt;/strong&gt; 수행되었는지를 보장하는 속성이다.&lt;br /&gt;
single operation이라는 것은 &lt;strong&gt;부분적인 성공이 없이&lt;/strong&gt; 하나의 operation이라는 것을 말한다.&lt;br /&gt;
즉, &lt;strong&gt;모든 변경이 수행되거나 아무 변경도 수행되지 않는 것&lt;/strong&gt;을 말한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;A가 B에게 100원을 이체할 때 Transaction T는 두 작업을 갖게 된다.&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;A := A - 100&lt;/li&gt;
    &lt;li&gt;B := B + 100&lt;/li&gt;
  &lt;/ol&gt;

  &lt;p&gt;A에서 출금은 성공하고, B에 입금이 실패한다면 &lt;strong&gt;A에서는 돈이 빠졌지만 B에는 이체되지 않는 문제가 발생&lt;/strong&gt;한다.&lt;/p&gt;

  &lt;p&gt;원자성은 이런 문제를 해결해준다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;consistency-일관성&quot;&gt;Consistency (일관성)&lt;/h3&gt;

&lt;p&gt;transaction이 성공적으로 완료되면 database가 항상 일관성있는 상태로 유지된다는 속성이다.&lt;br /&gt;
일관성이라는건 data의 손상이나 오류 등으로 인해 database의 rule을 깨지 않는 것을 말한다.&lt;/p&gt;

&lt;p&gt;나는 일관성이 이해하기가 가장 어려웠는데, 쉽게 말하자면 &lt;strong&gt;invalid 한 data를 갖는 transaction 을 받아들이지 않는다는 것&lt;/strong&gt;이다.
즉, valid data가 database에 쓰일 수 있다는 것이다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;A가 B에게 100원을 이체할 때, A 가지고 있지 않다면 A는 -10원을 갖게 된다.&lt;br /&gt;
계좌 table의 rule이 - 값을 가질 수 없다면 이 transaction은 실패하는 것이다.&lt;br /&gt;
여기서 일관성을 말하자면 계좌는 항상 0 이상의 값을 갖는다 라는 &lt;strong&gt;일관된 규칙이 유지되는 것&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;isolation-고립성&quot;&gt;Isolation (고립성)&lt;/h3&gt;

&lt;p&gt;transaction이 다른 transaction과 별개로 동작하는 것을 보장하는 속성이다.&lt;br /&gt;
동일한 table에서 여러 transaction이 발생하더라도 &lt;strong&gt;서로 간섭하거나 영향을 끼치지 않도록&lt;/strong&gt; 한다.&lt;br /&gt;
구체적으로는 &lt;strong&gt;하나의 tranascation의 수정이 반영되기 이전까지 다른 transaction에서 변경 사항을 확인할 수 없는 것&lt;/strong&gt;을 말한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;A가 B에게 100원을 출금하는 작업과, A와 B의 계좌를 조회하는 작업이 동시에 발생한다고 가정하자.&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;T1 - A := A - 100&lt;/li&gt;
    &lt;li&gt;T2 - Read(A)&lt;/li&gt;
    &lt;li&gt;T2 - Read(B)&lt;/li&gt;
    &lt;li&gt;T1 - B := B + 100&lt;/li&gt;
  &lt;/ol&gt;

  &lt;p&gt;T1에서 A에서 이체하는 작업만 수행된 사이에 A와 B의 &lt;strong&gt;계좌를&lt;/strong&gt; 읽는 작업이 수행되는 경우.&lt;br /&gt;
tranaction이 종료되지 않은 상황에서 서로 변경사항을 확인할 수 있다면, &lt;strong&gt;순간적으로 A에서는 돈이 빠졌지만 B에는 이체되지 않은 문제가 발생&lt;/strong&gt;한다.&lt;/p&gt;

  &lt;p&gt;고립성은 이런 문제를 해결해준다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;durability-지속성&quot;&gt;Durability (지속성)&lt;/h3&gt;

&lt;p&gt;transaction이 성공적으로 수행된 경우 영구적으로 반영되고 시스템 오류가 발생하더라도 변경사항이 유지되고 취소되지 않는다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;계좌 이체가 성공하면 이후에 오류가 발생해도 이체된 data는 변경되지 않는다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;http://www.jidum.com/jidums/view.do?jidumId=906&quot;&gt;http://www.jidum.com/jidums/view.do?jidumId=906&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.ibm.com/docs/ko/cics-ts/5.4?topic=processing-acid-properties-transactions&quot;&gt;https://www.ibm.com/docs/ko/cics-ts/5.4?topic=processing-acid-properties-transactions&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://ko.wikipedia.org/wiki/데이터베이스_트랜잭션&quot;&gt;https://ko.wikipedia.org/wiki/데이터베이스_트랜잭션&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.geeksforgeeks.org/acid-properties-in-dbms/&quot;&gt;https://www.geeksforgeeks.org/acid-properties-in-dbms/&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://mariadb.com/resources/blog/acid-compliance-what-it-means-and-why-you-should-care/&quot;&gt;https://mariadb.com/resources/blog/acid-compliance-what-it-means-and-why-you-should-care/&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.geeksforgeeks.org/sql-transactions/&quot;&gt;https://www.geeksforgeeks.org/sql-transactions/&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/db/concept/acid</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/db/concept/acid</guid>
      </item>
    
      <item>
        <title>Curl to Code (Python/Java ..)</title>
        
          <description>&lt;p&gt;api 테스트나 여러 서버의 작업을 위해 request를 curl로 짜는 일이 많다.&lt;br /&gt;
이렇게 작성한 curl로 python 코드를 짜려고 할 때 번거롭거나 귀찮은 경우가 많다.&lt;/p&gt;

&lt;p&gt;나 같은 경우는 간단한 스크립트를 작성하려고 curl을 짜다가,&lt;br /&gt;
생각보다 귀찮아지면 python으로 옮기는 경우가 있는데 이럴 때 참고하는 편이다.&lt;/p&gt;

&lt;p&gt;opensource 프로젝트인 &lt;strong&gt;curlconverter&lt;/strong&gt;를 소개한다.&lt;br /&gt;
curl을 입력하면 code를 작성해주는 프로젝트.&lt;br /&gt;
내가 주로 쓰는 python, java, go를 모두 지원한다.&lt;/p&gt;

&lt;h2 id=&quot;사용법&quot;&gt;사용법&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://curlconverter.com/#python&quot;&gt;curlconverter.com&lt;/a&gt; 에 접속해서 사용한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/tips/curl-converter.JPG&quot; alt=&quot;curlconverter&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;h1 id=&quot;reference&quot;&gt;reference&lt;/h1&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/42604586/converting-a-curl-to-python-requests&quot;&gt;https://stackoverflow.com/questions/42604586/converting-a-curl-to-python-requests&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://curlconverter.com/&quot;&gt;https://curlconverter.com/&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/site/curl-to-code</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/site/curl-to-code</guid>
      </item>
    
      <item>
        <title>GraphQL이란?</title>
        
          <description>&lt;p&gt;기술이 발전하면서 인터넷은 곳곳에서 쓰이게 되었다.&lt;br /&gt;
와중에 많은 문제가 발생하고 해결되었는데 아직도 해결중인 문제는 &lt;strong&gt;데이터 전송 속도를 올리는 일&lt;/strong&gt;이다.&lt;br /&gt;
더 많은 데이터를 손실 없이 빠르게 전송하는 일은 인터넷의 역사와 같이 발전해왔다.&lt;/p&gt;

&lt;p&gt;현 시점에서 가장 현대적인 해결책이 바로 &lt;strong&gt;graphQL&lt;/strong&gt;이다.&lt;/p&gt;

&lt;h2 id=&quot;graphql-이란&quot;&gt;graphQL 이란?&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;graphQL은 API용 query 언어이자 data를 가져오기 위한 query를 수행하는 runtime을 말한다&lt;/strong&gt;.&lt;br /&gt;
이름에서 느껴지듯 &lt;strong&gt;Graph Query Language&lt;/strong&gt;의 약자이자 &lt;strong&gt;SQL&lt;/strong&gt;과 마찬가지로 query 언어이다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;여기선 graphQL이 어떻게 생겼는지 맛만 보자.&lt;br /&gt;
graphQL에서의 query는 다음과 같다.&lt;br /&gt;
sql의 query 처럼 필요한 값들을 query해 올 수 있다.&lt;/p&gt;

  &lt;div class=&quot;language-graphql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hero&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mass&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;그렇다면, 응답은&lt;/p&gt;

  &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;hero&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Luke Skywalker&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.72&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;mass&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;77&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;mass 값이 필요하지 않은 경우&lt;/p&gt;

  &lt;div class=&quot;language-graphql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hero&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;그렇다면, 응답은&lt;/p&gt;

  &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;hero&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Luke Skywalker&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;height&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mf&quot;&gt;1.72&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;graphql의-탄생&quot;&gt;graphQL의 탄생&lt;/h2&gt;

&lt;p&gt;facebook에서는 RESTful 서버를 사용하고 있었는데 당시 성능도 별로였고 앱에서의 충돌도 잦았다.&lt;br /&gt;
이 때 개발자들이 데이터 전송 방식을 개선해야 한다는 것을 깨닫고 데이터를 다른 시각을 바라보기 시작하면서 탄생한 것이 facebook의 &lt;strong&gt;client 및 server의 data model 요구사항과 기능을 정립하기 위한 query 언어&lt;/strong&gt;였다.&lt;br /&gt;
2015년 graphQL의 초기 명세가 나왔고, 현재 facebook은 내부의 data fetch는 대부분 graphQL로 이루어지고 있다고 한다.&lt;/p&gt;

&lt;p&gt;이렇게 탄생한 것이 &lt;strong&gt;여러 다발의 데이터 전송을 graph로 묶어 request 수를 줄이고 효율성을 확보하여 문제를 해결하는 목적을 가진&lt;/strong&gt; graphQL이다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/apis/graphql/rest-vs-graph.png&quot; alt=&quot;rest vs graphql&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;REST는 각각의 container에 대해 call을 요청한다.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;posts, comments, authors&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;GraphGL은 graph를 만들어서 필요한 모든 값들을 한 번에 요청한다.&lt;/p&gt;

&lt;/div&gt;

&lt;h3 id=&quot;rest의-단점&quot;&gt;REST의 단점&lt;/h3&gt;

&lt;p&gt;현재의 데이터 전송 방식은 RPC, SOAP를 거쳐 REST를 정석처럼 사용하는 분위기다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;내가 서비스하는 서버도 REST를 사용하고 있기도 하고.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;당연히 GraphQL이 탄생하는데는 위에서 말했듯 REST의 단점이 보였기 때문이다. REST의 단점을 명확히 짚어보면 graphQL의 장점이 또렷하게 보인다.&lt;/p&gt;

&lt;h4 id=&quot;over-fetching&quot;&gt;Over Fetching&lt;/h4&gt;

&lt;p&gt;Over Fetch는 RESTful API를 디자인하면 전형적으로 만나볼 수 있는 rest의 단점이다.&lt;br /&gt;
나는 이게 되게 불필요하고 손해가 있는 작업이라고 생각하면서도 이걸 바꿀 수 있다는 생각을 못했던 것 같다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;github의 REST api를 호출해보자.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;curl &lt;a href=&quot;https://api.github.com/users/meansoup&quot;&gt;https://api.github.com/users/meansoup&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;

  &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;meansoup&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;24368552&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;node_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MDQ6VXNlcjI0MzY4NTUy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;avatar_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://avatars.githubusercontent.com/u/24368552?v=4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gravatar_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/meansoup&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;html_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://github.com/meansoup&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;followers_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/meansoup/followers&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;following_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/meansoup/following{/other_user}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gists_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/meansoup/gists{/gist_id}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;문제는, 만약 내가 만들 서비스가 여기서 id와 avatar_url, url 세 가지 값만 필요한 경우에 발생한다.&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;&lt;strong&gt;내가 구현한 client는 필요없는 전체 데이터를 모두 받아야 한다&lt;/strong&gt;.&lt;/li&gt;
    &lt;li&gt;&lt;strong&gt;github server도 필요없는 데이터를 내려주기 위해 네트워크를 낭비해야 한다&lt;/strong&gt;.&lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;

&lt;p&gt;RESTful api server를 운영해본 개발자라면 공감하겠지만, 사실 대부분의 api에서 over fetch는 굉장히 쉽게 자주 발생한다.&lt;/p&gt;

&lt;h4 id=&quot;under-fetching&quot;&gt;under fetching&lt;/h4&gt;

&lt;p&gt;그렇다면 under fetch는 뭘까?&lt;br /&gt;
fetching을 하고 추가 데이터를 또 다시 요청해야 하는 상황을 말한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;이번엔 github의 followers api를 호출해보자.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;curl &lt;a href=&quot;https://api.github.com/users/meansoup/followers&quot;&gt;https://api.github.com/users/meansoup/followers&lt;/a&gt;&lt;/li&gt;
  &lt;/ul&gt;

  &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;chanhyeong&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10507662&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;node_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MDQ6VXNlcjEwNTA3NjYy&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;avatar_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://avatars.githubusercontent.com/u/10507662?v=4&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gravatar_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/chanhyeong&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;html_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://github.com/chanhyeong&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;followers_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/chanhyeong/followers&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;following_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/chanhyeong/following{/other_user}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gists_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/chanhyeong/gists{/gist_id}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;나는 이번엔 follower들의 정보를 얻어와서 서비스를 만들려고 한다.&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;followers 요청을 하고 나온 user들을 가지고 다시 user 정보를 요청해야 한다.
      &lt;ul&gt;
        &lt;li&gt;curl https://api.github.com/users/follower1&lt;/li&gt;
        &lt;li&gt;curl https://api.github.com/users/follower2&lt;/li&gt;
        &lt;li&gt;curl https://api.github.com/users/follower3&lt;/li&gt;
        &lt;li&gt;curl https://api.github.com/users/follower4&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li&gt;&lt;strong&gt;follower가 많아질 경우 내 call은 n 번이나 증가하게 된다&lt;/strong&gt;.&lt;/li&gt;
    &lt;li&gt;&lt;strong&gt;증가되는 call 만큼 resource를 사용하고 데이터는 매번 over fetching되며 응답 시간은 늘어진다&lt;/strong&gt;.&lt;/li&gt;
  &lt;/ol&gt;

&lt;/div&gt;

&lt;p&gt;under fetching도 쉽게 자주 볼 수 있다.&lt;br /&gt;
folder 안에 있는 item들을 반환하거나, post의 comment에서도 볼 수 있고.&lt;br /&gt;
&lt;strong&gt;under fetching의 주요 문제는 응답 시간을 늘어지게 하는 api call 수의 증가&lt;/strong&gt;이고, 이는 graphQL에서 굉장히 효과적으로 처리할 수 있다.&lt;/p&gt;

&lt;h4 id=&quot;endpoint-관리&quot;&gt;endpoint 관리&lt;/h4&gt;

&lt;p&gt;REST API의 단점은 &lt;strong&gt;유연성이 부족하다&lt;/strong&gt;는 것이다.&lt;br /&gt;
client에서 변경사항이 생기면 endpoint를 새로 만들어야 하고, 이렇게 되면 endpoint의 수가 몇 배로 늘어나기도 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;우리 서비스는 v1 api, v2 api로 버전업을 하면서 제공하는 편.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이렇게 되면 &lt;strong&gt;개발 속도가 느려진다&lt;/strong&gt;.&lt;br /&gt;
새로운 endpoint를 만들기 위해 client &amp;amp; server 팀이 협업을 해야하고, 추후 보수 작업에서도 endpoint에 따른 작업이 많아지기 때문이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;graphQL은 단일 endpoint를 사용하여 이런 문제점에서 자유롭다&lt;/strong&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;웹 앱 API 개발을 위한 GraphQL, Eve Porcello / Alex Banks&lt;br /&gt;
&lt;a href=&quot;https://graphql.org/&quot;&gt;https://graphql.org/&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://tech.kakao.com/2019/08/01/graphql-basic/&quot;&gt;https://tech.kakao.com/2019/08/01/graphql-basic/&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.apollographql.com/blog/graphql/basics/graphql-vs-rest/&quot;&gt;https://www.apollographql.com/blog/graphql/basics/graphql-vs-rest/&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/graphql/what_is_graphql</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/graphql/what_is_graphql</guid>
      </item>
    
      <item>
        <title>jekyll gh page 폰트 설정하기</title>
        
          <description>&lt;h2 id=&quot;tldr&quot;&gt;TL;DR&lt;/h2&gt;

&lt;p&gt;jekyll theme 마다 font custom이 다를 수 있다.&lt;br /&gt;
검색은 참고만 하되 기본적으로는 theme guide 페이지와 github 코드를 보자.&lt;/p&gt;

&lt;h2 id=&quot;font-적용-안되는-경우&quot;&gt;font 적용 안되는 경우&lt;/h2&gt;

&lt;p&gt;github blog를 다시 관리하기 시작하면서 참 맘에 안드는 부분이 글씨체다.&lt;br /&gt;
tistory나 국내 서비스 블로그들은 알아서 이쁜 폰트들을 제공하지만 github은 아니니까.&lt;br /&gt;
&lt;strong&gt;기본 폰트 킹받는다&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;페이지에 폰트를 적용하기 위해 부단한 노력을 했다.&lt;br /&gt;
역시나 구글에 검색을 많이 했는데 내 검색어는 다음과 같다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;jekyll font&lt;/li&gt;
  &lt;li&gt;jekyll 폰트&lt;/li&gt;
  &lt;li&gt;jekyll 한글 폰트&lt;/li&gt;
  &lt;li&gt;jekyll github font&lt;/li&gt;
  &lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;결론을 말하자면 여기서 나온 해결책들이 나한텐 하나도 적용되지 않았다.&lt;br /&gt;
아마 이런 사람들이 많지 않을까?&lt;/p&gt;

&lt;h2 id=&quot;font-적용-안되는-이유&quot;&gt;font 적용 안되는 이유&lt;/h2&gt;

&lt;p&gt;jekyll은 테마마다 포맷들이 참 다르다.&lt;br /&gt;
이전에 내가 사용하던 유명한 테마인 lanyon이랑 현재 사용하는 just-the-docs 테마랑은 페이지를 꾸며주는 포맷부터 다르니까.&lt;/p&gt;

&lt;p&gt;그러니까,&lt;br /&gt;
&lt;strong&gt;css를 custom으로 적용하는 방식도 다른 경우가 제법 된다&lt;/strong&gt;는 것이다.&lt;br /&gt;
그래서 위의 방식들이 나한텐 통하지 않았다.&lt;/p&gt;

&lt;h2 id=&quot;해결책&quot;&gt;해결책&lt;/h2&gt;

&lt;p&gt;나 같은 경우는 해답을 테마 가이드 페이지에서 찾았다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://pmarsceill.github.io/just-the-docs/docs/customization/&quot;&gt;jekyll custom theme guide page&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;아니면 github directory 구조에서도 힌트를 얻는다 (&lt;a href=&quot;https://github.com/pmarsceill/just-the-docs/tree/master/_sass&quot;&gt;theme gitub code&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;몇 번이고 봤던 페이지인데도 대충봐서 놓쳤던 것을.. 한참 시간을 버리고서야 다시 보게 되었다.&lt;br /&gt;
가이드를 따라서 해결한 나의 &lt;a href=&quot;https://github.com/meansoup/meansoup.github.io/blob/master/_sass/custom/custom.scss&quot;&gt;코드&lt;/a&gt;는 아래와 같다.&lt;/p&gt;

&lt;div class=&quot;language-scss highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// path: /_sass/custom/custom.scss&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@font-face&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;GowunDodum-Regular&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;url(&apos;https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/GowunDodum-Regular.woff&apos;)&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;&apos;woff&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-weight&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;normal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-style&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;normal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nt&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h4&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;h6&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;GowunDodum-Regular&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;font-list-참고&quot;&gt;font list 참고&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://noonnu.cc/font_page&quot;&gt;https://noonnu.cc/font_page&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/blog/font</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/blog/font</guid>
      </item>
    
      <item>
        <title>diagram 그리는 가장 쉬운 방법, 코드로 그리는 uml plantuml</title>
        
          <description>&lt;p&gt;학교를 다녔을 때보다, 회사에서는 설계를 위해서 코드 분석을 위해서 diagram을 그릴 일들이 많아졌다.&lt;br /&gt;
‘왜 학교에서 이런걸 가르쳤나?’를 깨닫기도 하고.&lt;/p&gt;

&lt;p&gt;내가 처음 배치받은 부서는 flow가 굉장히 복잡한 부서였다.&lt;br /&gt;
sequence diagram으로 flow를 그리기 시작했고 편의성을 위해 여러 툴들을 찾았다.&lt;/p&gt;

&lt;p&gt;그러다 마지막에 만난 툴이 바로 &lt;strong&gt;plantuml&lt;/strong&gt;.&lt;br /&gt;
나는 팀을 옮기고 파트 내 세미나에서 plantuml을 소개했고 반응이 좋아서 그룹에서도 한 차례 더 세미나를 가졌다.&lt;br /&gt;
2년이 지난 지금 우리 그룹의 대부분의 diagram은 plantuml로 그려지고 있다.&lt;/p&gt;

&lt;h2 id=&quot;기존의-diagram-그리기&quot;&gt;기존의 diagram 그리기&lt;/h2&gt;

&lt;p&gt;기존에 diagram을 그리는 방법은 다들 비슷하다.&lt;br /&gt;
나 역시도 그랬고, 우리 파트원들과 그룹원들도 그랬다.&lt;/p&gt;

&lt;p&gt;대부분이 &lt;strong&gt;draw.io&lt;/strong&gt;로 그리고 있었고 &lt;strong&gt;MS visio&lt;/strong&gt;를 사용하기도 했다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;https://draw.io&quot;&gt;draw.io&lt;/a&gt;에서 그린 sequence diagram.&lt;/p&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/draw.JPG&quot; alt=&quot;draw.io&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;MS visio에서 그린 sequence diagram.&lt;/p&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/visio.JPG&quot; alt=&quot;visio&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;내가 두 가지 툴을 쓰면서 느꼈던 점.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;직접 &lt;strong&gt;손으로 그려야해서&lt;/strong&gt; 많은 시간을 필요로 한다&lt;/li&gt;
  &lt;li&gt;visio의 경우 프로그램이 무겁고, draw.io는 웹이라 편하지 않다&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;추가/수정의 작업이 어렵다&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;version up으로 코드가 바뀌는 경우, 중간 flow를 바꿀 때 손이 굉장히 많이 간다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;위의 이유들로 굉장히 귀찮고 재미가 없다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;그렇다면, 쉽고 빠르게 diagram을 그리고 수정할 방법이 없을까?&lt;/p&gt;

&lt;h2 id=&quot;plantuml&quot;&gt;plantUML&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;plantUML&lt;/strong&gt;을 내가 팀 내에 소개할 때 나는 plantUML을 &lt;strong&gt;uml 계의 markdwon&lt;/strong&gt; 이라고 표현했다.&lt;br /&gt;
그럼 plantUml을 알아보자.&lt;/p&gt;

&lt;h3 id=&quot;markdown은-왜-쓰는가&quot;&gt;markdown은 왜 쓰는가?&lt;/h3&gt;

&lt;p&gt;vs &lt;strong&gt;MS Word&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;간단한 구조와 문법을 지원하기 때문에 직관적이다&lt;/li&gt;
  &lt;li&gt;쉽게 작성할 수 있다&lt;/li&gt;
  &lt;li&gt;쉽게 html이나 jpg로 변경이 가능하다&lt;/li&gt;
  &lt;li&gt;프로그램과 파일 모두 가볍다&lt;/li&gt;
  &lt;li&gt;Git(version 관리 시스템)에서 변경 이력 관리가 편리하다&lt;/li&gt;
  &lt;li&gt;문서 편집기의 모든 기능을 지원하지는 못한다&lt;/li&gt;
  &lt;li&gt;그치만 문서 편집기의 디테일한 기능들이 우리한테 필요하진 않다&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;plantuml-1&quot;&gt;plantUML&lt;/h3&gt;

&lt;p&gt;그래서 plantUML이 왜 uml 계의 markdown일까?&lt;/p&gt;

&lt;p&gt;PlantUML은 사용자가 플레인 텍스트 언어로부터 UML 다이어그램을 만들 수 있게 하는 오픈 소스 도구이다.&lt;br /&gt;
PlantUML의 언어는 도메인 특화 언어의 한 예이다.  &lt;em&gt;-Wiki-&lt;/em&gt;&lt;br /&gt;
PlantUML 은 다이어그램을 빠르게 작성하기 위한 오픈 소스 프로젝트이다.  &lt;em&gt;-Home-&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;즉, plantUML은 텍스트 언어로 uml을 만든다.&lt;/p&gt;

&lt;h3 id=&quot;장점&quot;&gt;장점&lt;/h3&gt;

&lt;p&gt;장점을 보면 MS word와 비교한 markdown과 굉장히 유사하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;간단한 구조와 문법을 지원하기 때문에 직관적이다&lt;/li&gt;
  &lt;li&gt;쉽게 작성할 수 있다&lt;/li&gt;
  &lt;li&gt;쉽게 html이나 jpg로 변경이 가능하다&lt;/li&gt;
  &lt;li&gt;프로그램과 파일 모두 가볍다&lt;/li&gt;
  &lt;li&gt;Git(version 관리 시스템)에서 변경 이력 관리가 편리하다&lt;/li&gt;
  &lt;li&gt;draw.io나 visio의 모든 기능을 지원하지는 못한다&lt;/li&gt;
  &lt;li&gt;그치만 draw.io나 visio의 모든 기능이 우리한테 필요하진 않다&lt;/li&gt;
  &lt;li&gt;&lt;u&gt;plantuml로 아키텍처를 테스트할 수 있다.&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;설치&quot;&gt;설치&lt;/h3&gt;

&lt;p&gt;plantuml은 editor만 있으면 된다.&lt;br /&gt;
주로 나는 vscode에서 작성하는데 intellij 에서도 작성할 수 있다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;vscode - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;extensions &amp;gt; PlantUML&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;intellij - &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Settings &amp;gt; Plugins &amp;gt; PlantUML integration&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;web - &lt;a href=&quot;http://www.plantuml.com/plantuml/uml/SyfFKj2rKt3CoKnELR1Io4ZDoSa70000&quot;&gt;web plantuml&lt;/a&gt; 에서 테스트 가능.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;사용법&quot;&gt;사용법&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://pdf.plantuml.net/PlantUML_Language_Reference_Guide_ko.pdf&quot;&gt;plantUML 가이드&lt;/a&gt; 참고.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;vscode&lt;/strong&gt; 및 &lt;strong&gt;intellij&lt;/strong&gt; 에서 preview, 및 file export.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;작성한 uml과 그려진 diagram을 보면 쉽게 이해할 수 있다.&lt;br /&gt;
나는 보통 sequence diagram을 가장 많이 그리는데 위 가이드를 보면 class diagram이나 다른 diagram들도 참고할 수 있다.&lt;/p&gt;

  &lt;p&gt;기본 사용법.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@startuml
client-&amp;gt; server: invalid msg
client&amp;lt;--server: &amp;lt;color #red&amp;gt;400&amp;lt;/color&amp;gt; invalid request
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/uml1.JPG&quot; alt=&quot;uml1&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;조건문의 사용은 이렇게.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@startuml
client-&amp;gt; server: msg
alt validate(msg)
client&amp;lt;--server: &amp;lt;color #blue&amp;gt;200&amp;lt;/color&amp;gt; result
else
client&amp;lt;--server: &amp;lt;color #red&amp;gt;400&amp;lt;/color&amp;gt; invalid request
end
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/uml2.JPG&quot; alt=&quot;uml2&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;activate 상태 표시.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@startuml
client-&amp;gt; server: msg
activate server
server-&amp;gt; requestValidator: validate(header)
server&amp;lt;--requestValidator: validateResult
server-&amp;gt; requestValidator: validate(msg)
server&amp;lt;--requestValidator: validateResult
deactivate server
alt validateResult == True
client&amp;lt;--server: &amp;lt;color #blue&amp;gt;200&amp;lt;/color&amp;gt; result
else
client&amp;lt;--server: &amp;lt;color #red&amp;gt;400&amp;lt;/color&amp;gt; invalid request
end
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/uml3.JPG&quot; alt=&quot;uml3&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;넘버링 하는 방법과 indentation에 대한 팁.&lt;br /&gt;
그리고 메모를 적는 방법.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@startuml
autonumber
client-&amp;gt; server: msg
note right: msg must have valid header &amp;amp; msg

activate server
    server-&amp;gt; requestValidator: validate(header)
    server&amp;lt;--requestValidator: validateResult
    server-&amp;gt; requestValidator: validate(msg)
    server&amp;lt;--requestValidator: validateResult
deactivate server

alt validateResult == True
    client&amp;lt;--server: &amp;lt;color #blue&amp;gt;200&amp;lt;/color&amp;gt; result
else
    client&amp;lt;--server: &amp;lt;color #red&amp;gt;400&amp;lt;/color&amp;gt; invalid request
end
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/uml4.JPG&quot; alt=&quot;uml4&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;메모에 개행이 필요한 경우 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;\n&lt;/code&gt;을 쓸 수도 있지만 아래와 같이 하는게 좋다.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@startuml
autonumber
client-&amp;gt; server: msg
note left
   msg must have valid header &amp;amp; msg
   header: appId, appVersion
   msg: must have resourceId
end note

activate server
    server-&amp;gt; requestValidator: validate(header)
    server&amp;lt;--requestValidator: validateResult
    server-&amp;gt; requestValidator: validate(msg)
    server&amp;lt;--requestValidator: validateResult
deactivate server

alt validateResult == True
    client&amp;lt;--server: &amp;lt;color #blue&amp;gt;200&amp;lt;/color&amp;gt; result
else
    client&amp;lt;--server: &amp;lt;color #red&amp;gt;400&amp;lt;/color&amp;gt; invalid request
end
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/uml5.JPG&quot; alt=&quot;uml5&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;상태 구분과 지연되는 상황에 대한 표시를 아래와 같이 나눌 수 있다.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@startuml
autonumber
== intialize ==
[-&amp;gt; server: set properties
[-&amp;gt; server: remove requestInfo
...
autonumber
== request come-in ==
client-&amp;gt; server: msg
note left
   msg must have valid header &amp;amp; msg
   header: appId, appVersion
   msg: must have resourceId
end note

activate server
    server-&amp;gt; requestValidator: validate(header)
    server&amp;lt;--requestValidator: validateResult
    server-&amp;gt; requestValidator: validate(msg)
    server&amp;lt;--requestValidator: validateResult
deactivate server

alt validateResult == True
    client&amp;lt;--server: &amp;lt;color #blue&amp;gt;200&amp;lt;/color&amp;gt; result
else
    client&amp;lt;--server: &amp;lt;color #red&amp;gt;400&amp;lt;/color&amp;gt; invalid request
end
@enduml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/design/plantuml/uml6.JPG&quot; alt=&quot;uml6&quot; /&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;http://vanco.github.io/SequencePlugin/&quot;&gt;intellij SequenceDiagram&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ko.wikipedia.org/wiki/PlantUML&quot;&gt;plantUML Wiki&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://pdf.plantuml.net/PlantUML_Language_Reference_Guide_ko.pdf&quot;&gt;plantUML 가이드&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;java에서 plantuml로 architecture를 테스트할 수 있도록 제공하는 &lt;a href=&quot;https://meansoup.github.io/docs/java/library/archunit&quot;&gt;archunit&lt;/a&gt; 참고. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/design/plantuml</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/design/plantuml</guid>
      </item>
    
      <item>
        <title>python slack bot 개발하기</title>
        
          <description>&lt;p&gt;서버를 담당하고 있다보면 PM이나 app, front 개발자로부터 요청이 오곤 한다.&lt;br /&gt;
주로 VOC를 확인하기 위한 서버 동기화 data 혹은 log 조회에 관한 내용이다.&lt;/p&gt;

&lt;p&gt;이게 시간은 많이 걸리지 않지만 반복되서 재미 없고 귀찮은 일이기도 한데 최근에는 이런 요청이 부쩍 많아져서 이번에 slack bot을 개발하게 되었다.&lt;/p&gt;

&lt;h2 id=&quot;tutorial&quot;&gt;tutorial&lt;/h2&gt;

&lt;p&gt;이전에는 slack web hook을 사용하는 script를 작성해서 batch와 server에 붙였었다.&lt;br /&gt;
slack bot을 검색해보니 web hook을 call 하는 것들이 많이 나왔는데, 최신 문서에서는 bolt라는 slack library를 사용하는 것을 제안하고 있었다.&lt;/p&gt;

&lt;p&gt;bolt는 javascript 등을 지원하는데, 나는 python으로 작성했다.&lt;br /&gt;
bolt로 python app(bot)을 만드는 tutorial을 따라하면 어렵지 않다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://api.slack.com/start/building/bolt-python&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;tutorial만 보고 부족한 부분들을 추가로 정리한다.&lt;/p&gt;

&lt;h2 id=&quot;bolt-spec&quot;&gt;bolt spec&lt;/h2&gt;

&lt;p&gt;bolt는 이전에 사용하던 web api 호출과 약간 다르다.&lt;br /&gt;
api가 wrapping 되어 있기도 하고 event 등 설정이 있어서 spec을 조금 보고 bolt를 이해하면 사용하기 더 편하다.&lt;/p&gt;

&lt;p&gt;python libary로 사용되는 bolt spec.&lt;br /&gt;
여기서 bolt가 지원하는 기능들이 무엇이 있는지 보고, 원하는 것을 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://slack.dev/bolt-python/api-docs/slack_bolt/app/app.html#slack_bolt.app.app.App.event&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;bolt의-param-들&quot;&gt;bolt의 param 들&lt;/h3&gt;

&lt;p&gt;bolt에서 param들로 여러 작업들을 할 수 있는데, 이걸 알면 일이 한참 수월하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;say&lt;/code&gt;나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;logger&lt;/code&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt; 등 bolt에서 param들이 뭔지 알아야 잘 쓸 수 있다.&lt;/li&gt;
  &lt;li&gt;https://github.com/slackapi/bolt-python#making-things-happen&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;가장 많이쓰는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;say()&lt;/code&gt;를 이해하자면 say는 channel에 말을 하는 것이다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;say()&lt;/code&gt;에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;thread_ts&lt;/code&gt;를 명시하면 thread에 말할 수 있다.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;bolt에서 argument로 모든 기능을 지원하지는 않는다.&lt;br /&gt;
지원하지 않는 기능들은 webApi를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;client&lt;/code&gt;를 통해 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;api-spec&quot;&gt;api spec&lt;/h2&gt;

&lt;p&gt;api list를 여기서 확인할 수 있다.&lt;br /&gt;
bolt가 지원하지 않는 것들을 client에서 사용하려면 api spec을 참고할 필요가 있다.&lt;br /&gt;
아래 spec에서 python 탭을 보면 나오는 api들이 client에서 사용할 수 있는 값이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://api.slack.com/methods?filter=chat&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;예전에 사용하던 custom integration은 이제 사용하지 않는다.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;custom integration은 지원하지 않는 기능들이 많다.&lt;/li&gt;
    &lt;li&gt;https://api.slack.com/legacy/custom-integrations#migrating_to_apps&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;h2 id=&quot;설정&quot;&gt;설정&lt;/h2&gt;

&lt;p&gt;설정하는데 시간을 제일 많이 썼다.&lt;br /&gt;
당연히 설정을 제대로 하지 않으면 동작하지 않는데, 추가해야 할 것들이 몇 가지 있다.&lt;/p&gt;

&lt;p&gt;이 설정들은 모두 &lt;a href=&quot;https://api.slack.com/apps&quot;&gt;slack app page&lt;/a&gt;에서 사용할 app에 대해 설정하는 것이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#tutorial&quot;&gt;tutorial&lt;/a&gt;에서 만든 app&lt;/li&gt;
&lt;/ul&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;OAuth &amp;amp; Permissions&lt;/code&gt;에서 permisison 추가
    &lt;ul&gt;
      &lt;li&gt;여기 필요한 permission들은 &lt;a href=&quot;#api-spec&quot;&gt;api spec&lt;/a&gt;에서 확인&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;event를 사용하는 경우 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Event Subscriptions&lt;/code&gt;에서 subscripption 추가
    &lt;ul&gt;
      &lt;li&gt;permission 이야 이전에 간단한 app 작업을 할 때 추가해봤는데, event를 쓰는건 이번이 처음이어서 여기서 시간을 많이 버렸다.&lt;/li&gt;
      &lt;li&gt;내가 이번에 사용한 event는 mention listening이 있는데, 이 외에도 여러 event 들이 있다.&lt;/li&gt;
      &lt;li&gt;event에 대해서는 아래 링크를 보면 좋다
        &lt;ul&gt;
          &lt;li&gt;&lt;a href=&quot;https://api.slack.com/apis/connections/events-api#the-events-api__subscribing-to-event-types&quot;&gt;https://api.slack.com/apis/connections/events-api#the-events-api__subscribing-to-event-types&lt;/a&gt;&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;socket mode 설정
    &lt;ul&gt;
      &lt;li&gt;app에서 &lt;strong&gt;Event API&lt;/strong&gt;와 Interactive component를 사용할 수 있게 해주는 모드&lt;/li&gt;
      &lt;li&gt;http url을 endpoint로 사용하지 않고 web socket으로 통신하는 모드&lt;/li&gt;
      &lt;li&gt;https://api.slack.com/apis/connections/socket&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;slack-app-bot-개발에-도움을-주는-library&quot;&gt;slack app bot 개발에 도움을 주는 library&lt;/h2&gt;

&lt;p&gt;내가 구현한 bot의 구조는 이렇다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/automation/bot-structure.png&quot; alt=&quot;bot structure&quot; /&gt;&lt;/p&gt;

&lt;p&gt;이렇기 때문에, 2 tunnel ssh가 필요해서 알아보다가 발견한 것이 &lt;strong&gt;sshtunnel&lt;/strong&gt;.
&lt;a href=&quot;https://pypi.org/project/sshtunnel/&quot;&gt;sshtunnel&lt;/a&gt;에 설명된 예제를 보면 쉽게 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;슬랙 공식 tutorial, https://api.slack.com/start/building/bolt-python&lt;/li&gt;
  &lt;li&gt;bolt python argument, https://github.com/slackapi/bolt-python#making-things-happen&lt;/li&gt;
  &lt;li&gt;bolt say, https://github.com/slackapi/bolt-js/issues/559&lt;/li&gt;
  &lt;li&gt;bolt web api client, https://slack.dev/bolt-python/concepts#web-api&lt;/li&gt;
  &lt;li&gt;sshtunnel, https://pypi.org/project/sshtunnel/&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/automation/python-bot</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/automation/python-bot</guid>
      </item>
    
      <item>
        <title>CIDR이란? CIDR을 알고 subnet 이해하기</title>
        
          <description>&lt;h1 id=&quot;cidr-이란&quot;&gt;CIDR 이란?&lt;/h1&gt;

&lt;p&gt;CIDR(Classless Inter-Domain Routing)으로 말 그대로 클래스 없는 도메인 간 라우팅 기법이다.&lt;/p&gt;

&lt;p&gt;클래스가 있는 도메인 라우팅은 CIDR 이전 기법이다.&lt;br /&gt;
CIDR을 이해하려면 CIDR 이전에 ip routing을 어떻게 해왔는지를 같이 공부하면 좋다.&lt;/p&gt;

&lt;h2 id=&quot;ip-address와-network--host&quot;&gt;IP address와 network &amp;amp; host&lt;/h2&gt;

&lt;p&gt;IP address는 32-bit number로 이루어져 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;10 진수 기준 &lt;strong&gt;0.0.0.0&lt;/strong&gt; 부터 &lt;strong&gt;255.255.255.255&lt;/strong&gt; 까지&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;TCP/IP WAN에서 효율적인 네트워크 관리를 위해 &lt;strong&gt;router는 host의 exact location을 알지 못한다.&lt;/strong&gt;&lt;br /&gt;
&lt;strong&gt;router는 host의 network 만을 아는데&lt;/strong&gt;, 이 network 까지 data packet을 보내면 network가 host의 exact location까지 전달된다.&lt;/p&gt;

&lt;p&gt;그래서 IP의 앞 부분 일부를 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;network field&lt;/code&gt;로 나머지 뒷 부분을 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;host field&lt;/code&gt;로 나누어서 사용한다.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;이제부턴 IP address의 사용 역사라고 볼 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;1-class-도입-이전&quot;&gt;1. Class 도입 이전&lt;/h2&gt;

&lt;p&gt;class가 도입되기 이전에는 위에서 언급하는 network field로 &lt;strong&gt;8-bit&lt;/strong&gt;를 사용했다.&lt;br /&gt;
이 말은, 256(\(2^8\))개의 network field만이 존재한다는 뜻이고, 각 network은 \(2^{24}\)개의 host를 가질 수 있다는 의미이다.&lt;/p&gt;

&lt;p&gt;이 형식은 LAN도 보급되기 이전의 초기 인터넷인 ARPANET(미국국방부에서 만든) 에서 사용되던 방식이었다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;문제점&lt;/strong&gt;: 250 여개의 network field만 사용할 수 있는 방식은 금방 network 주소가 고갈되었고 새로운 방식이 필요하게 되었다.&lt;/p&gt;

&lt;h2 id=&quot;2-classful-network&quot;&gt;2. Classful network&lt;/h2&gt;

&lt;p&gt;그게 바로 &lt;strong&gt;Classful network&lt;/strong&gt;인데, class로 나누어 network field를 관리하는 방식이다.&lt;/p&gt;

&lt;p&gt;A~E의 5가지 class가 존재한다.&lt;br /&gt;
이 중 D, E의 경우 존재하지만 예약 &amp;amp; 연구 목적으로 실제 end user가 사용하는 값은 아니다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Class&lt;/th&gt;
      &lt;th&gt;Leading bits&lt;/th&gt;
      &lt;th&gt;size of network field&lt;/th&gt;
      &lt;th&gt;size of host field&lt;/th&gt;
      &lt;th&gt;start address&lt;/th&gt;
      &lt;th&gt;end address&lt;/th&gt;
      &lt;th&gt;subnet mask&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;A&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;24&lt;/td&gt;
      &lt;td&gt;0.0.0.0&lt;/td&gt;
      &lt;td&gt;127.255.255.255&lt;/td&gt;
      &lt;td&gt;255.0.0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;B&lt;/td&gt;
      &lt;td&gt;10&lt;/td&gt;
      &lt;td&gt;16&lt;/td&gt;
      &lt;td&gt;16&lt;/td&gt;
      &lt;td&gt;128.0.0.0&lt;/td&gt;
      &lt;td&gt;191.255.255.255&lt;/td&gt;
      &lt;td&gt;255.255.0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;C&lt;/td&gt;
      &lt;td&gt;110&lt;/td&gt;
      &lt;td&gt;24&lt;/td&gt;
      &lt;td&gt;8&lt;/td&gt;
      &lt;td&gt;192.0.0.0&lt;/td&gt;
      &lt;td&gt;223.255.255.255&lt;/td&gt;
      &lt;td&gt;255.255.255.0&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;위 표가 Classful network의 내용이다.&lt;/p&gt;

&lt;p&gt;Class A의 경우 network field로 8-bit를 사용한다.&lt;br /&gt;
이 중 첫 bit는 0으로 시작해서 address는 0.0.0.0부터 127.255.255.255까지가 가능하다.&lt;br /&gt;
그렇다면 Class A에서 \(2^7\)개의 network가 사용될 수 있고 각 network는 \(2^{24}\)개의 host를 가질 수 있다는 의미이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;start address와 end address를 잘보면 class 마다 사용하는 address가 다른 걸 확인할 수 있는데 이 주소만 가지고 class를 판별할 수 있다는 의미이다.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;0.0.0.0&lt;/strong&gt; 이나 &lt;strong&gt;127.0.0.0&lt;/strong&gt; 등과 같은 특수한 주소들은 예약되어 사용할 수 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;유사하게 B, C로 갈수록 더 많은 network를 가질 수 있으면서 각 network가 가질 수 있는 host의 개수는 줄어든다.&lt;/p&gt;

&lt;h3 id=&quot;subnet-mask&quot;&gt;subnet mask&lt;/h3&gt;

&lt;p&gt;subnet mask는 host가 local subnet에 있는지, remote network에 있는지 확인하기 위해 TCP/IP에서 사용된다.&lt;br /&gt;
subnet mask를 통해 network field와 host field를 구분할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;network IP의 부분은 1로, host IP의 부분은 0으로 표기한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;subnet mask는 위 표에서 설명되어 있어서 예를 들면 쉽게 이해할 수 있을 것 같다.&lt;/p&gt;
&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;192.168.123.132 라는 IP가 있다.&lt;/p&gt;

  &lt;p&gt;network IP가 192.168.123.0 이고, host IP가 0.0.0.132 라면, subnet은 255.255.255.0 이 된다. &lt;br /&gt;
network IP가 192.168.0.0 이고, host IP가 0.0.123.132 라면, subnet은 255.255.0.0 이 된다.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;문제점:&lt;/strong&gt;&lt;br /&gt;
Class C의 경우 약 250(\(2^8\))개의 host를 가질 수 있는데 대부분의 경우 Class C는 너무 작았다.&lt;br /&gt;
Class B의 경우 host는 비교적 넉넉하나, network 개수가 약 16000(\(2^{14}\))개로 인터넷이 발전하며 network가 부족해지는 문제가 발생했다.&lt;/p&gt;

&lt;h2 id=&quot;3-cidr&quot;&gt;3. CIDR&lt;/h2&gt;

&lt;p&gt;클래스 없는 도메인 간 라우팅 기법으로 위 문제를 해결하기 위해 1993년 도입되기 시작한 최신의 IP 주소 할당 방법이다.&lt;br /&gt;
CIDR는 IP의 field를 Classful에 비해 더 &lt;strong&gt;유연하게&lt;/strong&gt; 나눌 수 있게 한다.&lt;/p&gt;

&lt;h3 id=&quot;cidr-block&quot;&gt;CIDR block&lt;/h3&gt;

&lt;p&gt;CIDR은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;A.B.C.D/E&lt;/code&gt; 와 같은 방식으로 표기한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;A.B.C.D&lt;/code&gt;는 IP 주소이다.&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/E&lt;/code&gt;는 0~32까지의 숫자이다.&lt;/li&gt;
  &lt;li&gt;IP의 첫 bit부터 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;E&lt;/code&gt; bit 만큼 일치하면 CIDR block의 일부라고 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;10.10.1.32/27&lt;/code&gt; 라고 표기한다면 27-bit까지 일치하는 IP를 포함하는 것이다.&lt;/p&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/internet/cidr1.png&quot; alt=&quot;cidr1&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;208.130.29.33&lt;/code&gt; 라는 웹 서버를 호출하는 경우,&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;208.128.0.0/11&lt;/code&gt;를 갖는 MCI에 routing 되고,&lt;/li&gt;
    &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;208.130.28.0/22&lt;/code&gt;를 갖는 sub-network에서 routing 되고,&lt;/li&gt;
    &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;208.130.29.0/24&lt;/code&gt;에서 routing 되어&lt;/li&gt;
    &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;208.130.29.33/32&lt;/code&gt;인 www.freesoft.org로 routing 된다.&lt;/li&gt;
  &lt;/ol&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/internet/cidr2.png&quot; alt=&quot;cidr2&quot; /&gt;&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;장점:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;부족한 IPv4 주소를 효율적으로 사용할 수 있게 한다&lt;/li&gt;
  &lt;li&gt;routing table의 크기가 커지는 문제를 해결해서 router의 부담을 줄인다&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;p&gt;https://ko.wikipedia.org/wiki/사이더_(네트워킹)&lt;br /&gt;
https://namu.wiki/w/CIDR
https://ko.wikipedia.org/wiki/네트워크_클래스&lt;br /&gt;
https://docs.microsoft.com/en-us/troubleshoot/windows-client/networking/tcpip-addressing-and-subnetting&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/internet/cidr</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/internet/cidr</guid>
      </item>
    
      <item>
        <title>Java GC 기본 개념 잡기</title>
        
          <description>&lt;p&gt;&lt;strong&gt;GC(Garbage Collection)&lt;/strong&gt;는 memory의 garbage를 찾고 지우는 역할을 한다.&lt;br /&gt;
현재까지 Java의 GC는 발전을 거듭해 여러 종류가 있다.&lt;br /&gt;
그치만 그 종류를 알기 전에, GC의 기본 개념과 용어들 GC가 생긴 이유들을 아는 것이 중요하다.&lt;/p&gt;

&lt;p&gt;이번 글에선 그 내용을 정리한다.&lt;/p&gt;

&lt;p&gt;우선, GC를 왜 쓸까?&lt;/p&gt;

&lt;h2 id=&quot;장점&quot;&gt;장점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;memory의 allication/deallocation을 직접 핸들링 하지 않아도 된다.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Dangling Pointer&lt;/strong&gt;를 걱정하지 않아도 된다.
    &lt;ul&gt;
      &lt;li&gt;Dangling Pointer: GC 된 memory를 객체가 참조하는 것x&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Double free&lt;/strong&gt; 를 걱정하지 않아도 된다.
    &lt;ul&gt;
      &lt;li&gt;Double free: GC 된 memory를 다시 GC 하는 것&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;memory leak&lt;/strong&gt;을 알아서 관리해준다.
    &lt;ul&gt;
      &lt;li&gt;memory leak: GC 되어야 하는 memory가 GC 되지 않은 것&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;단점&quot;&gt;단점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;JVM이 객체 생성을 추적하기 때문에 CPU를 더 사용한다.&lt;/li&gt;
  &lt;li&gt;개발자가 GC의 CPU 시간을 조정할 수 없다.&lt;/li&gt;
  &lt;li&gt;적절하게 직접 memory를 관리하는 것보다 성능이 떨어질 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;초기 Java에서 GC는 개발자가 핸들링 할 수 없는 등의 이유로 많은 논란이 되었다고 한다.&lt;br /&gt;
현재는 논란의 여지가 없이 GC는 Go 등의 최신 언어에서도 채택된다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;기본-원칙&quot;&gt;기본 원칙&lt;/h2&gt;

&lt;p&gt;모든 언어의 모든 GC는 두 가지 원칙을 기본으로 설계된다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;모든 garbage를 수집해야 한다.&lt;/li&gt;
  &lt;li&gt;살아있는 객체는 절대로 수집해선 안된다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;stw-stop-the-world&quot;&gt;STW (Stop The World)&lt;/h2&gt;

&lt;p&gt;GC에서 가장 중요한 것은 STW 이다.&lt;/p&gt;

&lt;p&gt;GC를 실행하기 위해 JVM이 application을 멈추는 것을 &lt;strong&gt;stop-the-world&lt;/strong&gt;라고 하는데,&lt;br /&gt;
stop-the-world가 발생하면 GC를 실행하는 thread를 제외한 나머지 thread는 모두 작업을 멈춘다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;즉, &lt;strong&gt;GC 완료 시까지 모든 application thread가 중지된다&lt;/strong&gt;는 말이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그리고 GC 작업이 완료된 이후에 다시 작업을 시작한다.&lt;/p&gt;

&lt;p&gt;어떤 GC를 사용하더라도 STW는 발생할 수 밖에 없는데,&lt;br /&gt;
STW 시간을 줄이는 것이 GC 선택과 튜닝의 중요한 목표가 된다.&lt;/p&gt;

&lt;h2 id=&quot;gc-기본-동작&quot;&gt;GC 기본 동작&lt;/h2&gt;

&lt;p&gt;GC 알고리즘마다 동작의 차이는 있지만 기본적인 GC 동작은 아래와 같다.&lt;br /&gt;
기본 GC 동작을 완벽히 이해하면 다른 알고리즘들이 왜 생겼고 어떻게 동작하는지 이해하기 쉽다.&lt;/p&gt;

&lt;h3 id=&quot;1-marking&quot;&gt;1. Marking&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/basic/marking.PNG&quot; alt=&quot;marking&quot; /&gt;&lt;/p&gt;

&lt;p&gt;어떤 memory가 사용중인지 확인하는 과정이다.&lt;/p&gt;

&lt;h3 id=&quot;2-normal-deletion&quot;&gt;2. Normal Deletion&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/basic/normal_deletion.PNG&quot; alt=&quot;Normal Deletion&quot; /&gt;&lt;/p&gt;

&lt;p&gt;참조되지 않은 객체를 제거해서 여유 공간 확보한다.&lt;/p&gt;

&lt;h3 id=&quot;2a-deletion-with-compacting&quot;&gt;2a. Deletion with Compacting&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/basic/delete_with_compacting.PNG&quot; alt=&quot;Deletion with Compacting&quot; /&gt;&lt;/p&gt;

&lt;p&gt;성능 향상을 위해 객체를 압축한다.&lt;br /&gt;
이렇게 하면 새로운 memory allocation이 쉽고 빨라진다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;gc-발생-요인&quot;&gt;GC 발생 요인&lt;/h2&gt;

&lt;p&gt;어떤 요인들이 Java app에서 GC 발생에 영향을 주는지를 알면,&lt;br /&gt;
GC의 구조를 이해하는데 더 도움이 된다.&lt;/p&gt;

&lt;p&gt;Java app에서 GC 발생에 영향을 주는 주요 요인은 두 가지이다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;할당률&lt;/li&gt;
  &lt;li&gt;객체 수명&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;할당률&lt;/strong&gt;은 일정 기간(MB/s) 새로 생성된 객체가 사용한 memory 크기이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;비교적 쉽게 측정할 수 있고 툴을 사용하면 정확하게 구할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;객체 수명&lt;/strong&gt;은 측정하기 어렵다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;대부분의 객체는 short-lived 객체인 것이 실험적으로 파악되었다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;weak-generational-hypothesis&quot;&gt;Weak Generational Hypothesis&lt;/h2&gt;

&lt;p&gt;GC에서는 위 요인 중 &lt;strong&gt;객체 수명&lt;/strong&gt;이 굉장히 중요하다.&lt;br /&gt;
객체가 얼마나 살아있냐에 따라 GC의 수행 여부와 대상이 정해지기 때문이다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/basic/ObjectLifetime.gif&quot; alt=&quot;object lifetime&quot; /&gt;&lt;/p&gt;

&lt;p&gt;그래프에서 볼 수 있듯 실험적으로 확인한 결과 대부분의 객체는 short-lived 객체이다.&lt;/p&gt;

&lt;p&gt;여기서 하나의 가설이 나오는데 이게 바로 &lt;strong&gt;Weak Generational Hypothesis&lt;/strong&gt;이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;대부분의 객체는 아주 짧은 시간 동안 살아있고(short-lived) 나머지 객체는 훨씬 수명이 길다(long-lived)는 가설이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 가설의 결론은 short-lived 객체를 쉽게 빠르게 수집할 수 있고,
long-lived 객체를 short-lived 객체와 분리해 놓는 설계가 좋다는 결론으로 이어진다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;jvm-generations&quot;&gt;JVM Generations&lt;/h2&gt;

&lt;p&gt;모든 객체에 대해서 매번 위와 같이 &lt;a href=&quot;#GC-기본-동작&quot;&gt;GC 동작&lt;/a&gt;을 수행하는건 효율적이지 않다.&lt;br /&gt;
그리고 &lt;a href=&quot;#Weak-Generational-Hypothesis&quot;&gt;Weak Generational&lt;/a&gt; 가설의 결론으로 보다 효율적인 GC 구조를 설계하게 된다.&lt;/p&gt;

&lt;p&gt;generation으로 heap의 part를 나누는 방식이다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/basic/heap_structure.PNG&quot; alt=&quot;heap structure&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;young-generation&quot;&gt;Young Generation&lt;/h3&gt;

&lt;p&gt;새로 생성된 대부분의 객체가 할당되는 영역이다.&lt;br /&gt;
Young Generation을 정리하는 GC를 &lt;strong&gt;minor garbage collection&lt;/strong&gt;라고 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;minor garbage collection은 &lt;strong&gt;STW&lt;/strong&gt; event 이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;사용되지 않는 memory는 GC 처리되고, 살아남은 객체는 &lt;strong&gt;Old Generation&lt;/strong&gt;으로 이동한다.&lt;/p&gt;

&lt;p&gt;Young은 3가지 영역으로 나뉜다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;eden&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;survivor1&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;survivor2&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;generational-process&quot;&gt;Generational Process&lt;/h3&gt;

&lt;p&gt;Young이 3가지 영역으로 나뉘는 이유가 중요하다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;새로 생성한 객체는 eden 영역에 위치한다.&lt;br /&gt;
&lt;img src=&quot;/images/post/java/gc/basic/filling-the-eden-space.PNG&quot; alt=&quot;filling the eden space&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;eden 영역에서 GC가 발생하면 survivor 영역 중 하나로 이동한다.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;eden 영역에서 GC가 발생하면 객체가 이미 존재하는 survivor 영역에 객체가 쌓인다.
&lt;img src=&quot;/images/post/java/gc/basic/coping-referenced-objects.PNG&quot; alt=&quot;copying referenced objects&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;하나의 survivor 영역이 가득차면 살아남은 객체를 다른 survivor 영역으로 이동한다.
    &lt;ul&gt;
      &lt;li&gt;이 로직으로 survivor 영역 중 한 곳은 항상 비어있는 상태를 유지한다.
&lt;img src=&quot;/images/post/java/gc/basic/object-aging.PNG&quot; alt=&quot;object aging&quot; /&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;이런 동작이 반복되는 것을 &lt;strong&gt;aging&lt;/strong&gt;이라 표현한다.
&lt;img src=&quot;/images/post/java/gc/basic/additional-aging.PNG&quot; alt=&quot;additional aging&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;aging을 반복하며 &lt;strong&gt;generation&lt;/strong&gt;이 변한다.&lt;br /&gt;
계속 살아남은 객체는 &lt;strong&gt;Old Generation&lt;/strong&gt;으로 이동한다.
&lt;img src=&quot;/images/post/java/gc/basic/promotion1.PNG&quot; alt=&quot;promotion1&quot; /&gt;
&lt;img src=&quot;/images/post/java/gc/basic/promotion2.PNG&quot; alt=&quot;promotion2&quot; /&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;old-generation&quot;&gt;Old Generation&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;#Weak-Generational-Hypothesis&quot;&gt;Weak Generational&lt;/a&gt;가설과 &lt;a href=&quot;#Generational-Process&quot;&gt;Generational Process&lt;/a&gt;를 잘 봤다면 Old Generation은 명확하다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Young Generation&lt;/strong&gt;에서 임계값 만큼의 GC가 처리되고 나서 살아남은 객체가 이동하는 곳이다.&lt;/p&gt;

&lt;p&gt;Old Generation은 보통 Young보다 큰 heap을 할당받고, 따라서 Old Generation의 GC는 느리다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;여기서 발생하는 GC를 &lt;strong&gt;major garbage collection&lt;/strong&gt;라고 하며 이 또한 STW event 이다.&lt;/li&gt;
  &lt;li&gt;따라서 major GC 수행이 최소화 되는 것이 성능에 유리하다.&lt;/li&gt;
  &lt;li&gt;Weak Generational 가설에 따라 분리되는 것이 성능상 유리하다.&lt;/li&gt;
  &lt;li&gt;major GC는 GC 알고리즘 종류에 영향을 받는다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;permanent-generation&quot;&gt;Permanent Generation&lt;/h3&gt;

&lt;p&gt;JVM에서 Class와 Method를 사용하기 위해 필요한 metadata들이 있는 곳이다.&lt;br /&gt;
application에 사용되는 class를 기반으로 runtime에 JVM에 의해서 생성된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Java SE library의 Class와 Method도 여기에 위치한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;tlab-thread-local-allocation-buffer&quot;&gt;TLAB (Thread-Local Allocation Buffer)&lt;/h2&gt;

&lt;p&gt;multi-thread를 효율적으로 사용하기 위한 방식으로 현재는 GC의 기본적인 기술이다.&lt;/p&gt;

&lt;p&gt;GC에 memory를 할당할 때 multi-thread인 경우 thread-safe 하도록 memory를 할당하는 것은 비용이 크다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;global lock을 잡는다고 하면 bottlenect이 걸리고 성능이 떨어진다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이를 해결하기 위해 도입된 것이 TLAB이다.&lt;br /&gt;
JVM은 eden을 여러 buffer로 나누어서 각 thread가 새 객체를 할당하는 구역으로 활용하도록 한다.&lt;br /&gt;
thread마다 사용하는 buffer가 정해져 있기 때문에 thread-safe를 위한 계산을 하지 않아도 된다.&lt;/p&gt;

&lt;p&gt;이와 함께 &lt;strong&gt;Bump-The-Pointer&lt;/strong&gt;가 사용되는데,&lt;br /&gt;
이는 할당된 메모리 바로 뒤에 메모리를 할당하고 pointer는 비어있는 memory 주소를 가리키도록 업데이트 하는 방식이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;TLAB + BTP 를 통해 JVM thread의 memory allocation 복잡도가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;O(1)&lt;/code&gt;이 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 외에도 여러 기술들이 사용되어 TLAB에서 memory 낭비가 최소화 되었고 평균적으로 eden의 1% 미만이 낭비된다고 한다. (굉장하다..)&lt;/p&gt;

&lt;p&gt;특정 thread의 buffer가 초과되는 경우 일반적으로 더 큰 크기의 TLAB를 할당하는 방식으로 해결한다.&lt;/p&gt;

&lt;h2 id=&quot;죄짓기&quot;&gt;죄짓기&lt;/h2&gt;

&lt;p&gt;Java에서 아래와 같이 명시적으로 gc를 호출할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;gc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;하지만 gc는 위에서 말했듯 시스템 성능에 영향을 미치므로 절대로 사용해서는 안된다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.baeldung.com/jvm-garbage-collectors&lt;/li&gt;
  &lt;li&gt;https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html&lt;/li&gt;
  &lt;li&gt;https://d2.naver.com/helloworld/1329&lt;/li&gt;
  &lt;li&gt;Optimizing Java, chapter6&lt;/li&gt;
  &lt;li&gt;https://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf&lt;/li&gt;
  &lt;li&gt;https://dzone.com/articles/thread-local-allocation-buffers#:~:text=TLAB%20stands%20for%20Thread%20Local,new%20objects%20in%20this%20area.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc/basic</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc/basic</guid>
      </item>
    
      <item>
        <title>Java GC의 가장 기본이 되는 Serial GC</title>
        
          <description>&lt;blockquote class=&quot;note-title&quot;&gt;
  &lt;p&gt;Java GC Type&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/java/gc/serial_gc&quot; class=&quot;btn btn-purple&quot;&gt;Serial GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/parallel_gc&quot; class=&quot;btn&quot;&gt;Parallel GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/cms_gc&quot; class=&quot;btn&quot;&gt;CMS GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/g1_gc&quot; class=&quot;btn&quot;&gt;G1 GC&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Java의 Garbage Collection은 CPU의 발전에 따라 새로운 알고리즘들이 생기고 있다.&lt;br /&gt;
그 중 가장 기본이되고 간단한 GC가 &lt;strong&gt;Serial Garbage Collector&lt;/strong&gt; 이다.&lt;/p&gt;

&lt;h2 id=&quot;serial-gc-란&quot;&gt;Serial GC 란?&lt;/h2&gt;

&lt;p&gt;Serial GC는 기본적으로 &lt;strong&gt;single virtual CPU&lt;/strong&gt;를 사용하여 minor &amp;amp; major GC를 처리하도록 설계되었다.&lt;br /&gt;
따라서 GC가 수행될 때 모든 application thread가 멈추지만 단일 CPU로 GC를 진행한다.&lt;br /&gt;
그렇기 때문에 많은 CPU core를 가진 환경에서는 적절하지 않다.&lt;/p&gt;

&lt;h2 id=&quot;usage&quot;&gt;usage&lt;/h2&gt;

&lt;p&gt;CPU가 많은 환경에서 적절하지 않으므로 주로 client style 시스템에서 사용되기도 하는데,&lt;br /&gt;
&lt;a href=&quot;/docs/41.java/gc/basic#stw-stop-the-world&quot;&gt;STW&lt;/a&gt;가 긴 편이므로 STW가 상관없는 환경에서 사용된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Java SE5, 6에서 client style machine에 대해 default로 사용되었던 GC 이기도 하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;따라서 client에서는 종종 사용할 수 있지만 운영 서버에서는 절대 사용하면 안되는 방식이다.&lt;br /&gt;
운영 서버에서 Serial을 사용하면 application 성능이 많이 떨어질 수 밖에 없다.&lt;/p&gt;

&lt;h2 id=&quot;young&quot;&gt;Young&lt;/h2&gt;

&lt;p&gt;young 영역에서는 앞서 설명한 &lt;a href=&quot;/docs/41.java/gc/basic#generational-process&quot;&gt;Generational Process&lt;/a&gt;에 따라 GC를 수행한다.&lt;/p&gt;

&lt;h2 id=&quot;old&quot;&gt;Old&lt;/h2&gt;

&lt;p&gt;old 영역에서는 &lt;strong&gt;Mark Sweep Compact&lt;/strong&gt;라는 알고리즘을 사용한다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;mark - 살아있는 객체 식별&lt;/li&gt;
  &lt;li&gt;sweep - 살아있는 것만을 남기는 동작&lt;/li&gt;
  &lt;li&gt;compact - heap의 앞 부분부터 채우는 압축&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;command&quot;&gt;command&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-XX:+UseSerialGC&lt;/code&gt;으로 serialGC를 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java -XX:+UseSerialGC -jar demo.jar&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;공통-command&quot;&gt;공통 command&lt;/h3&gt;

&lt;p&gt;아래 command는 모든 GC에서 공통으로 사용되는 command 이다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;command&lt;/th&gt;
      &lt;th&gt;desc&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;-Xms&lt;/td&gt;
      &lt;td&gt;Sets the initial heap size for when the JVM starts.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-Xmx&lt;/td&gt;
      &lt;td&gt;Sets the maximum heap size.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-Xmn&lt;/td&gt;
      &lt;td&gt;Sets the size of the Young Generation.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:PermSize&lt;/td&gt;
      &lt;td&gt;Sets the starting size of the Permanent Generation.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:MaxPermSize&lt;/td&gt;
      &lt;td&gt;Sets the maximum size of the Permanent Generation&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc/serial_gc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc/serial_gc</guid>
      </item>
    
      <item>
        <title>DDD의 Domain Events란? DDD에서 transaction을 관리하는 방법</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;DDD tactical components&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/ddd/tactical/vo&quot; class=&quot;btn&quot;&gt;VO&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/entity&quot; class=&quot;btn&quot;&gt;Entity&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain-service&quot; class=&quot;btn&quot;&gt;Domain Service&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain_events&quot; class=&quot;btn btn-purple&quot;&gt;Domain Events&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/aggregate&quot; class=&quot;btn&quot;&gt;Aggregate&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;일단 &lt;strong&gt;domain events&lt;/strong&gt;를 사용하는 법을 알고나면 이에 중독되서 어떻게 &lt;strong&gt;domain events&lt;/strong&gt; 없이 살아왔는지 의아해질 것이다. - Vaughn Vernon&lt;/em&gt;&lt;/p&gt;

&lt;h3 id=&quot;event란&quot;&gt;event란?&lt;/h3&gt;

&lt;p&gt;우선 event가 뭔지 알아보자.&lt;br /&gt;
event에는 이런 특성들이 있다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;event란 과거에 발생한 것을 말한다.
    &lt;ul&gt;
      &lt;li&gt;그렇기 때문에 항상 과거형으로 쓰인다.&lt;/li&gt;
      &lt;li&gt;요청과 혼동하기 쉽기 때문에 과거형을 지키는 것이 좋다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;event는 변경할 수 없다.
    &lt;ul&gt;
      &lt;li&gt;이미 발생했기 때문에 바꿀 수 없다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;event는 한 번만 발생할 수 있다.
    &lt;ul&gt;
      &lt;li&gt;다시 발생하더라도 이건 다른 event이다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;domain-event란&quot;&gt;domain event란?&lt;/h2&gt;

&lt;p&gt;말 그대로 domain에서 발생한 event.&lt;br /&gt;
domain의 변화를 다른 곳에 알리기 위해 event로 만드는 것이다.&lt;/p&gt;

&lt;p&gt;domain event도 domain model의 일부이다.&lt;br /&gt;
domain event는 aggregate에 의해 생성된다.&lt;/p&gt;

&lt;p&gt;아래와 같은 장점 때문에 사용된다.&lt;/p&gt;

&lt;h3 id=&quot;장점&quot;&gt;장점&lt;/h3&gt;

&lt;p&gt;domain의 변경에 대한 side effect를 명시적으로 구현할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;유비쿼터스 언어에 기반한 도메인 규칙을 도메인 이벤트로 명시적으로 표현할 수 있는 것.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;다른 aggregate에 대한 수정이 필요한 경우 이를 분리할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;DDD에서는 하나의 transaction에서 하나의 aggregate만 수정해야 한다. 이 규칙을 지킬 수 있는 방법이면서 꼭 사용해야하는 케이스이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;domain-event-맞나&quot;&gt;domain event 맞나?&lt;/h3&gt;

&lt;p&gt;event와 domain event를 헷갈리기 쉽다.&lt;br /&gt;
아래와 같은 조건들로 domain event 인지 파악하는데 참고할 수 있다.&lt;/p&gt;

&lt;h4 id=&quot;맞는-근거&quot;&gt;맞는 근거&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;stakeholders와 business가 관심이 있나?&lt;/li&gt;
  &lt;li&gt;우리 system에서 결정된 event 인가?&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;틀린-근거&quot;&gt;틀린 근거&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;기술적인 이슈인가?&lt;/li&gt;
  &lt;li&gt;bounded context 밖에서 일어났나?&lt;/li&gt;
  &lt;li&gt;system에 대한 요청인가?
    &lt;ul&gt;
      &lt;li&gt;이건 command 이지 event가 아니기 때문&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;domain-event-뽑기&quot;&gt;domain event 뽑기&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;… 할 때&lt;/li&gt;
  &lt;li&gt;이런 일이 일어나면 …&lt;/li&gt;
  &lt;li&gt;… 하면&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;과 같은 경우 domain event modeling을 해야할 가능성이 크다.&lt;/p&gt;

&lt;h3 id=&quot;modeling-하기&quot;&gt;modeling 하기&lt;/h3&gt;

&lt;p&gt;event를 전달하는 목적이 크기 때문에 event는 보통 immutable이고 모델링이 간단하다.&lt;/p&gt;

&lt;p&gt;앞서 말했듯 과거에 발생했다는 것을 이름에 반영하는게 중요하다.&lt;/p&gt;

&lt;p&gt;발생한 시점(date)이 들어가는 편이고,&lt;br /&gt;
그 외의 event의 의미를 나타내기 위한 속성들이 무엇이 필요한지 생각해봐야 한다.&lt;/p&gt;

&lt;h3 id=&quot;이벤트-발행&quot;&gt;이벤트 발행&lt;/h3&gt;

&lt;p&gt;domain model이 event messaging infra에 노출(coupling)되어선 안된다.&lt;/p&gt;

&lt;h3 id=&quot;publisher&quot;&gt;publisher&lt;/h3&gt;

&lt;p&gt;publisher는 domain이 modeling 되지 않는다.&lt;br /&gt;
즉, DomainEventPublisher는 모든 domain event를 받아서 처리해줄 수 있지, 특정 domain model과 연결되지 않는다는 것이다.&lt;/p&gt;

&lt;h3 id=&quot;subscriber&quot;&gt;subscriber&lt;/h3&gt;

&lt;p&gt;domain event의 handling은 application이 해야할 일이다.&lt;br /&gt;
domain은 domain logic에만 집중하기 때문이다.&lt;br /&gt;
event handler나 side-effect action들은 domain이 신경쓰지 않는다.&lt;/p&gt;

&lt;h3 id=&quot;diagram&quot;&gt;diagram&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/ddd/strategic/events_sequence.JPG&quot; alt=&quot;sequence&quot; /&gt;&lt;/p&gt;

&lt;p&gt;위 sequence에서 &lt;strong&gt;aggregate&lt;/strong&gt;가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;publish()&lt;/code&gt; 하지만,&lt;br /&gt;
&lt;strong&gt;DomainEventPublisher&lt;/strong&gt;가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;publish()&lt;/code&gt;를 받아서 &lt;strong&gt;DomainEventSubscriber&lt;/strong&gt;에게 전달한다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/ddd/strategic/events_class.JPG&quot; alt=&quot;class&quot; /&gt;&lt;/p&gt;

&lt;p&gt;publisher는 여러 subscriber에게 event를 전달할 수 있다.&lt;br /&gt;
event를 어떻게 처리하는지는 subscriber(application service)의 몫이다.&lt;/p&gt;

&lt;p&gt;그림에 나오진 않지만 마찬가지로 publisher도 aggregate 들의 event를 받을 수 있다.&lt;br /&gt;
그래서 domain이 들어가서는 안된다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;event-생성과-전달을-분리하기&quot;&gt;event 생성과 전달을 분리하기&lt;/h3&gt;

&lt;p&gt;transaction을 commit 하기 직전에 event를 handler에 전달하는 방식이 바로 event를 전달하는 것보다 좋다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;event 바로 전달되면 side-effect이 클 수 있고, domain model을 test하기 어렵다.&lt;/li&gt;
  &lt;li&gt;event 발생과 handler로 보내는 작업을 분리할 수 있다.&lt;/li&gt;
  &lt;li&gt;발생과 전달을 분리하면 model 캡슐화에 도움이 된다.&lt;/li&gt;
  &lt;li&gt;event 전달에 유연성을 준다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://lostechies.com/jimmybogard/2014/05/13/a-better-domain-events-pattern/&lt;/li&gt;
  &lt;li&gt;https://docs.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/domain-events-design-implementation&lt;/li&gt;
  &lt;li&gt;https://serialized.io/ddd/domain-event/&lt;/li&gt;
  &lt;li&gt;Implement Domain Driven Design (chapter8 Domain Events), Vaughn Vernon&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/tactical/domain_events</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/tactical/domain_events</guid>
      </item>
    
      <item>
        <title>Parallel GC는 무엇이고 언제 쓰기 좋은걸까?</title>
        
          <description>&lt;blockquote class=&quot;note-title&quot;&gt;
  &lt;p&gt;Java GC Type&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/java/gc/serial_gc&quot; class=&quot;btn&quot;&gt;Serial GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/parallel_gc&quot; class=&quot;btn btn-purple&quot;&gt;Parallel GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/cms_gc&quot; class=&quot;btn&quot;&gt;CMS GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/g1_gc&quot; class=&quot;btn&quot;&gt;G1 GC&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;앞서 본 &lt;a href=&quot;/docs/41.java/gc/2022-04-16-serial_gc.md&quot;&gt;Serial Garbage Collection&lt;/a&gt;은 단점이 명확하다.&lt;br /&gt;
Serial은 thraed의 낭비가 크다.&lt;br /&gt;
multiple CPU 로부터 성능을 뽑아내기 위해 Parallel GC를 사용한다.&lt;/p&gt;

&lt;h2 id=&quot;serial-vs-parallel&quot;&gt;Serial vs Parallel&lt;/h2&gt;

&lt;p&gt;serial GC STW&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;img src=&quot;/images/post/java/gc/serial.jpg&quot; alt=&quot;serial&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;parallel GC STW&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;img src=&quot;/images/post/java/gc/parallel.jpg&quot; alt=&quot;parallel&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;serial은 GC를 단일 thread로 하기 때문에 위와 같이 thread의 낭비가 크다.&lt;br /&gt;
parallel은 thread를 효율적으로 사용하고 더 빠르게 GC를 수행할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;parallel-gc-란&quot;&gt;Parallel GC 란?&lt;/h2&gt;

&lt;p&gt;Parallel GC는 Serial GC와 비슷하다.&lt;br /&gt;
multiple CPU를 사용해서 application throughput을 향상시킬 수 있기 때문에 &lt;strong&gt;throughput collector&lt;/strong&gt;라고도 불린다.&lt;/p&gt;

&lt;p&gt;Young GC를 수행하는데 multiple thread를 사용하는게 특징이다.&lt;br /&gt;
default로 N개의 CPU일 때 collection에서 N개의 GC thread를 사용한다.&lt;/p&gt;

&lt;h2 id=&quot;usage&quot;&gt;usage&lt;/h2&gt;

&lt;p&gt;Parallel GC는 GC가 발생하면 모든 thread를 중지하고 multi-thread를 사용하여 GC 작업을 수행한다.&lt;br /&gt;
따라서 GC 작업은 중단 없이 효율적으로 수행된다.&lt;br /&gt;
일반적으로 application 에 사용되는 시간 대비 GC 시간을 최소화할 수 있는 방법이다.&lt;br /&gt;
그러나 이후에 나오는 다른 GC들에 비해 한 번의 &lt;a href=&quot;/docs/41.java/gc/2022-04-14-gc_basic.md#stw-stop-the-world&quot;&gt;STW&lt;/a&gt;는 긴 편이다.&lt;/p&gt;

&lt;p&gt;위와 같은 이유로 &lt;strong&gt;개별의 STW가 길어지는 것은 수용할 수 있으나 전체적인 성능이 중요한 작업을 진행할 때 Parallel GC가 사용되기 적합&lt;/strong&gt;하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;대표적으로 &lt;strong&gt;batch process&lt;/strong&gt;나 대량의 &lt;strong&gt;database query&lt;/strong&gt;가 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;command&quot;&gt;command&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-XX:+UseParallelGC&lt;/code&gt;으로 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java -XX:+UseParallelGC -jar demo.jar&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GC thread의 수를 조절하기 위해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;XX:ParallelGCThreads&lt;/code&gt;를 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;-XX:ParallelGCThreads=&lt;strong&gt;N&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Maximum garbage collection pause time&lt;/strong&gt;을 설정하기 위해 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-XX:MaxGCPauseMillis&lt;/code&gt;을 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;-XX:MaxGCPauseMillis=&lt;strong&gt;N&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;기본적으로는 maxGcPause time은 설정되어 있지 않다.&lt;/li&gt;
  &lt;li&gt;이 값이 설정되면 maxGcPause 시간을 맞추기 위해 heap size 등의 parameter가 조정된다.&lt;/li&gt;
  &lt;li&gt;이를 통해 GC의 &lt;strong&gt;Throughput&lt;/strong&gt;이 줄어들 수 있다.&lt;/li&gt;
  &lt;li&gt;이 시간이 항상 충족되지는 않을 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;GC에 사용되는 시간의 비율을 &lt;strong&gt;Throughput&lt;/strong&gt;이라고 한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-XX:GCTimeRatio&lt;/code&gt;를 통해 ratio를 설정할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;-XX:GCTimeRatio=&lt;strong&gt;N&lt;/strong&gt;
    &lt;ul&gt;
      &lt;li&gt;\(\frac{1}{1 + N}\) 으로 세팅되며, default &lt;strong&gt;N&lt;/strong&gt; = 99로, GC에서 전체 시간의 1%를 사용하는 것을 목표로 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;이는 \(\frac{GC time}{application time}\) 을 의미한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;priorify&quot;&gt;priorify&lt;/h3&gt;

&lt;p&gt;Parallel 에서의 우선순위는 아래와 같다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Maximum garbage collection pause time&lt;/li&gt;
  &lt;li&gt;Throughput&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;Maximum garbage collection pause time&lt;/strong&gt;이 충족된 이후에만 &lt;strong&gt;Throughput&lt;/strong&gt;을 고려한다.&lt;br /&gt;
마찬가지로 &lt;strong&gt;Throughput&lt;/strong&gt;이 충족되어야 max heap size를 고려한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;/docs/41.java/gc/2022-04-16-serial_gc.md#공통-command&quot;&gt;GC 공통 command&lt;/a&gt;에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-Xmx&lt;/code&gt;를 통해 max heap size를 설정할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;parallel-old-gc-란&quot;&gt;Parallel Old GC 란?&lt;/h2&gt;

&lt;p&gt;Young GC와 Old GC 모두 multithread를 사용하는 GC이다.&lt;br /&gt;
지금은 Parallel GC하면 Parallel Old GC를 언급하는 경우가 많다.&lt;/p&gt;

&lt;h3 id=&quot;command-1&quot;&gt;command&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-XX:+UseParallelOldGC&lt;/code&gt;으로 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java -XX:+UseParallelOldGC -jar demo.jar&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.oracle.com/webfolder/technetwork/tutorials/obe/java/gc01/index.html&lt;/li&gt;
  &lt;li&gt;https://docs.oracle.com/en/java/javase/18/gctuning/parallel-collector1.html&lt;/li&gt;
  &lt;li&gt;https://www.informit.com/articles/article.aspx?p=2496621&amp;amp;seqNum=2&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc/parallel_gc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc/parallel_gc</guid>
      </item>
    
      <item>
        <title>Spring CRUD vs JPA 차이</title>
        
          <description>&lt;p&gt;스프링에서 &lt;a href=&quot;https://meansoup.github.io/docs/db/concept/orms&quot;&gt;ORMs&lt;/a&gt; 개념을 적용한 표준이 JpaRepository이다.&lt;br /&gt;
JpaRepository와 CrudRepository의 개념을 명확하게 모르고 사용해왔는데 차이를 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;구조&quot;&gt;구조&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/spring/crud-vs-jpa.png&quot; alt=&quot;crud vs jpa&quot; /&gt;&lt;/p&gt;

&lt;p&gt;우선 위와 같이 상속 구조를 갖는다.&lt;/p&gt;

&lt;h2 id=&quot;crudrepository&quot;&gt;CrudRepository&lt;/h2&gt;

&lt;p&gt;기본적인 CRUD 기능을 제공한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Create, Read, Update, Delete&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@NoRepositoryBean&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Repository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;saveAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;existsById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAllById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deleteById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;delete&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deleteAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deleteAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;pagingandsortingrepository&quot;&gt;PagingAndSortingRepository&lt;/h2&gt;

&lt;p&gt;pagination과 sorting을 제공한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;pagination할 때 Pageable은 page size, current page number, sorting을 포함해야 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@NoRepositoryBean&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PagingAndSortingRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sort&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Page&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Pageable&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;jparepository&quot;&gt;JpaRepository&lt;/h2&gt;

&lt;p&gt;flushing the persistence context과 delete records in a batch 같은 JPA와 관련된 기능을 제공한다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flush()&lt;/code&gt;는 database에 entity의 save 요청을 바로 밀어넣는 것을 의미한다.&lt;br /&gt;
flush가 없다면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;save()&lt;/code&gt; 요청은 &lt;strong&gt;persistence context&lt;/strong&gt;에 남아있다가 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;flush()&lt;/code&gt;나 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;commit()&lt;/code&gt;이 들어오면 database에 밀어 넣는다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;JPA에서 성능상 최적화되게 flush를 하기 때문에 일반적으로 flush를 사용하는 일은 없다.&lt;/li&gt;
  &lt;li&gt;성능 저하가 올 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;deleteBatch&lt;/code&gt;는 대량의 삭제를 의미한다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@NoRepositoryBean&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;JpaRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;PagingAndSortingRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;QueryByExampleExecutor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sort&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAllById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;saveAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;flush&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;saveAndFlush&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entity&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;saveAllAndFlush&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deleteAllInBatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;entities&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deleteAllByIdInBatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Iterable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deleteAllInBatch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getById&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;ID&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;findAll&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Example&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;S&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;example&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Sort&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sort&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;당연히 상속 때문에 JpaRepository는 모든 기능을 제공한다.&lt;br /&gt;
따라서 기능이 필요하지 않은 경우에만 상위 repository를 사용하면 된다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h3 id=&quot;norepositorybean&quot;&gt;@NoRepositoryBean&lt;/h3&gt;

&lt;p&gt;repository 마다 붙어있는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@NoRepositoryBean&lt;/code&gt;은 뭘까?&lt;/p&gt;

&lt;p&gt;실제 entity의 repository로 사용하지 않을 interface 역할을 하는 repository들이 instance로 생성되는 것을 제외하기 위한 annotation이다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;stackoverflow의 답변의 예시를 가져왔다.&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;foobar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;MyBaseInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CrudRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;…&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;foo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;foobar&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;CustomerRepository&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyBaseInterface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Customer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Long&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;위와 같은 코드에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@EnableJpaRepositories(basePackages = {&quot;com.foobar&quot;})&lt;/code&gt;으로 jpa repository를 등록한 것이다.&lt;/p&gt;

  &lt;p&gt;이렇게 있을 때 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;@NoRepositoryBean&lt;/code&gt;가 명시되지 않는다면 spring은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;MyBaseInterface&lt;/code&gt;가 실제 사용할 repository 구현체가 아니라는 것을 알 수 없다.&lt;br /&gt;
그러면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CustomerRepository&lt;/code&gt;을 생성하는데 실패한다.&lt;/p&gt;

  &lt;p&gt;이런 문제를 해결하기 위해 @NoRepositoryBean를 사용한다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.baeldung.com/spring-data-repositories&lt;/li&gt;
  &lt;li&gt;https://stackoverflow.com/questions/14014086/what-is-difference-between-crudrepository-and-jparepository-interfaces-in-spring&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;https://www.baeldung.com/spring-data-jpa-save-saveandflush&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;https://stackoverflow.com/questions/11576831/-understanding-the-spring-data-jpa-norepositorybean-interface&lt;/li&gt;
  &lt;li&gt;https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/NoRepositoryBean.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/spring/jpa/crud-vs-jpa</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/spring/jpa/crud-vs-jpa</guid>
      </item>
    
      <item>
        <title>Spring Connection Pool 확인하기</title>
        
          <description>&lt;p&gt;spring 에서는 몇 가지 connection pool을 제공한다.&lt;br /&gt;
DB를 사용할 때는 connection pool 설정은 필수인데 어떤 pool을 쓰느냐에 따라 property가 달라지기 때문에 어떤 connection pool을 쓰는지 확인하는 방법을 찾아봤다.&lt;/p&gt;

&lt;h2 id=&quot;default-connection-pool&quot;&gt;default connection pool&lt;/h2&gt;

&lt;p&gt;Spring Boot에서는 아래와 같은 우선순위로 connection pool을 사용한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;HikariCP&lt;/li&gt;
  &lt;li&gt;Tomcat pooling&lt;/li&gt;
  &lt;li&gt;DBCP2&lt;/li&gt;
  &lt;li&gt;Oracle UCP&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;HikariCP&lt;/strong&gt;가 performance &amp;amp; concurrency가 가장 우수해서 default로 사용된다.&lt;br /&gt;
&lt;strong&gt;HikariCP&lt;/strong&gt;를 사용할 수 없는 경우 &lt;strong&gt;Tomcat pooling&lt;/strong&gt;을 사용하고 차례대로 각 CP를 사용한다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-boot-starter-jdbc&lt;/code&gt; 혹은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring-boot-starter-data-jpa&lt;/code&gt;을 사용하면 자동으로 HikariCP를 사용한다고 보면된다.&lt;/p&gt;

&lt;h2 id=&quot;connection-pool-직접-확인하기&quot;&gt;connection pool 직접 확인하기&lt;/h2&gt;

&lt;p&gt;connection pool을 default로 &lt;strong&gt;Hikari&lt;/strong&gt;를 쓰겠지만 서비스를 운영하는 입장에서 확인하지 않고 설정하기엔 찝찝했다.&lt;br /&gt;
Spring에서 어떤 connection pool을 쓰는지 확인하는 방법을 알고 싶기도 했다.&lt;/p&gt;

&lt;h3 id=&quot;1-test에서-확인하기&quot;&gt;1. test에서 확인하기&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@SpringBootTest&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AnyThingTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;checkCP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DATASOURCE = &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;printed:  &lt;strong&gt;DATASOURCE = HikariDataSource (HikariPool-1)&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;2-service에서-확인하기&quot;&gt;2. service에서 확인하기&lt;/h3&gt;

&lt;p&gt;test는 환경이 다를까 못 미더워서 추가로 확인해보기&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;nd&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AnyThing&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@PostConstruct&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;System&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;out&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;println&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DATASOURCE = &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;printed:  &lt;strong&gt;DATASOURCE = HikariDataSource (HikariPool-1)&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;p&gt;spring boot의 default connection pool 우선순위&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#data.sql.datasource.connection-pool&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;connection pool 확인하기&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://mkyong.com/spring-boot/spring-boot-how-to-know-which-connection-pool-is-used/&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/spring/jpa/find-connection-pool</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/spring/jpa/find-connection-pool</guid>
      </item>
    
      <item>
        <title>Spring JPA connection pool 조정하기</title>
        
          <description>&lt;p&gt;DB를 사용한다면 connection pool을 설정하는 것은 필수이다.&lt;br /&gt;
분명 작년에도 했던 작업인데 이번에 Mysql connection pool을 조정하면서 기억이 나지 않아서 기록한다.&lt;/p&gt;

&lt;h2 id=&quot;connection-pool-확인&quot;&gt;connection pool 확인&lt;/h2&gt;

&lt;p&gt;setting 전에 &lt;a href=&quot;/docs/spring/jpa/find-connection-pool&quot;&gt;어떤 connection pool을 사용하고 있는지 확인&lt;/a&gt;해야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;default는 &lt;strong&gt;Hikari&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;현재-db의-connection-확인&quot;&gt;현재 db의 connection 확인&lt;/h2&gt;

&lt;p&gt;database 접속 후 아래 명령어로 connection을 확인할 수 있다.&lt;/p&gt;
&lt;div class=&quot;language-sql highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;show&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;like&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;&quot;%connect%&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;jpa-property-setting&quot;&gt;JPA property setting&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties.data&quot;&gt;Spring Common Property&lt;/a&gt;를 참고한다.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;spring.datasource&lt;/code&gt;로 검색하면 datasource property를 찾을 수 있다.&lt;br /&gt;
여기서 어떤 connection pool을 사용하느냐에 따라 세팅해야 하는 property가 다르다.&lt;/p&gt;

&lt;p&gt;일반적으로는 hikari이고 max pool size와 minimum idle을 세팅해준다.&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-property&quot;&gt;spring.datasource.hikari.maximum-pool-size=10 # 최대 pool size
spring.datasource.hikari.minimum-idle=10 # 최소 pool size
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
  &lt;li&gt;hikari에서는 minimum과 maximum을 같게 커넥션 수를 고정하여 최적의 성능을 뽑을 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;connection-pool-주의사항&quot;&gt;connection pool 주의사항&lt;/h2&gt;

&lt;p&gt;당연하게도 JPA의 property 세팅은 instance 단위이고 maximum 10이고 instance가 20 대이면 200개의 connection이 생길 수 있다.&lt;br /&gt;
이를 고려하여 DB(Mysql 등)의 Max Connection을 넉넉하게 유지해야 한다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;p&gt;spring common property&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/spring/jpa/set-connection-pool</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/spring/jpa/set-connection-pool</guid>
      </item>
    
      <item>
        <title>DDD의 VO란? 쉽지만 어려운 VO 완벽하게 이해하기</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;DDD tactical components&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/ddd/tactical/vo&quot; class=&quot;btn btn-purple&quot;&gt;VO&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/entity&quot; class=&quot;btn&quot;&gt;Entity&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain-service&quot; class=&quot;btn&quot;&gt;Domain Service&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain_events&quot; class=&quot;btn&quot;&gt;Domain Events&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/aggregate&quot; class=&quot;btn&quot;&gt;Aggregate&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;DDD를 꽤나 공부했다고 생각했는데도 개발/설계를 해보면 DDD는 정말 어렵다.&lt;br /&gt;
개발 사이트나 블로그, 책을 훑어보듯 보면 VO는 참 쉽다.&lt;br /&gt;
value를 저장하고 바뀌면 안되는 녀석.&lt;/p&gt;

&lt;p&gt;쉬워보이지만 설계할 때 보면 정말 명확하지 않다.&lt;br /&gt;
개념을 명확하게 잡아야 설계에서 써먹을 수 있다는 생각이 이번에 들었다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Vaughn Vernon의 Implement Domain Driven Design&lt;/em&gt;의 &lt;strong&gt;Value Object&lt;/strong&gt; 챕터를 작년에도 읽고 올해도 읽는데,&lt;br /&gt;
DDD 설계와 논의를 진행하고 나서 읽으니까 더 와 닿는 것들이 많아 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;valueobjectvo&quot;&gt;ValueObject(VO)&lt;/h2&gt;

&lt;p&gt;Value Object는 말 그대로 값을 갖는 객체를 말한다.&lt;br /&gt;
값을 갖기 때문에 이 값 자체가 변할 수는 없다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;계좌에 100원이라는 값이 있다고 치자.&lt;br /&gt;
친구가 10원을 이체해줬으면 110원이 된다.&lt;br /&gt;
이건 100원이라는 값 자체가 110원이 된게 아니다.&lt;br /&gt;
내 계좌가 가지고 있는 값이 100원이라는 값에서 110원이라는 값으로 바뀐 것이다.&lt;/p&gt;

  &lt;p&gt;즉, 값 자체는 바뀌지 않는다.&lt;br /&gt;
값이 대체되는 것 뿐이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;vo의-특징&quot;&gt;VO의 특징&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Value Object&lt;/strong&gt;의 특징은 가볍지 않다.&lt;br /&gt;
어떤 글보다 이 책에서 명확하게 설명하고 있는데 이걸 잘 이해해야 개발에서 VO를 잘 녹여낼 수 있지 않을까 싶다.&lt;/p&gt;

&lt;p&gt;아래의 특징들은 VO의 특징이기도 하고,&lt;br /&gt;
이런 특징들이 없거나 필요하지 않은 모델은 VO가 아닐 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;domain의-어떤-대상을-측정하고-수량화하고-설명한다&quot;&gt;domain의 어떤 대상을 측정하고 수량화하고 설명한다&lt;/h3&gt;

&lt;p&gt;모든 VO는 &lt;strong&gt;model의 특성의 의미&lt;/strong&gt;를 가지고 있고 이를 측정, 수량화, 설명한다.&lt;br /&gt;
이 말은 &lt;strong&gt;domain model의 어떤 값이 측정, 수량화, 설명을 한다면&lt;/strong&gt; VO일 가능성이 크다는 것이다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;나이&lt;/strong&gt;를 예로 들어보자.&lt;br /&gt;
나이는 실제하는 대상은 아니지만 대상이 살아온 햇수를 &lt;strong&gt;측정하거나 수량화&lt;/strong&gt;한다.&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;이름&lt;/strong&gt;을 예로 들어보자.&lt;br /&gt;
이름도 실제하는 대상은 아니지만 대상을 어떻게 부를지를 &lt;strong&gt;설명&lt;/strong&gt;해준다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;immutable하다&quot;&gt;immutable하다&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;절대로 변하지 않는 것&lt;/strong&gt;. 가장 대표적인 VO의 특징이다.&lt;br /&gt;
이 특성과 밀접하게 관련있는 중요한 특징들이 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그냥 변하지 않아야 돼 하는게 아니라, 관련된 특성들을 잘 알고 이해하는게 중요하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;aggregate의 Id도 절대 변하면 안되니까 VO를 사용할 수도 있다.&lt;/p&gt;

&lt;h3 id=&quot;관련-특성을-모은-필수-단위로-개념적-전체conceptual-whole를-모델링한다&quot;&gt;관련 특성을 모은 필수 단위로 개념적 전체(Conceptual Whole)를 모델링한다&lt;/h3&gt;

&lt;p&gt;대상을 나타내기 위해 &lt;strong&gt;개별적인 특성이 아닌 하나의 전체 값으로 모델링 되어야 한다&lt;/strong&gt;는 것을 &lt;strong&gt;개념적 전체(Conceptual Whole)&lt;/strong&gt;라고 한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;금액을 말할 때 &lt;strong&gt;100&lt;/strong&gt;은 의미가 없고 &lt;strong&gt;원&lt;/strong&gt;도 의미가 없다.&lt;br /&gt;
&lt;strong&gt;100원&lt;/strong&gt;이 합쳐져야 금액이라고 할 수 있다. 이게 바로 개념적 전체이다.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;이 개념이 중요한게 Value Object는 불변하는 값이야 라고 해서 하나의 VO에 때려박는건 개념적 전체를 무시한 DDD의 Value Object가 아닌 그저 Value에 불과한 것이다.&lt;br /&gt;
각 VO가 유비쿼터스 언어에 따라 적절하게 이름 붙여진 응집도 높은 개념적 전체를 구성해야 한다.&lt;/p&gt;

&lt;p&gt;개념적 전체는 불변성과도 밀접하게 관련이 있다.&lt;br /&gt;
위의 예시에서 금액(money) 객체에 &lt;strong&gt;100&lt;/strong&gt;을 넣어두고 나중에 &lt;strong&gt;원&lt;/strong&gt;을 붙이는 건 안된다.&lt;br /&gt;
개념적 전체를 위해 constructor에서 한번에 완성된 VO가 나와야 한다.&lt;/p&gt;

&lt;h3 id=&quot;측정이나-설명이-변경될-땐-완벽히-대체-가능하다&quot;&gt;측정이나 설명이 변경될 땐 완벽히 대체 가능하다&lt;/h3&gt;

&lt;p&gt;Entity가 VO를 가지고 있는데 올바른 상태의 VO가 아니라면 새로운 값으로 대체되어야 한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;숫자를 예로 들어보자.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;int total = 3;&lt;/code&gt; 에서 total의 값이 변경되면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;total = 4;&lt;/code&gt;를 한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;3 = 4;&lt;/code&gt;와 같이 3의 값을 바꾸는게 아니라 total에 새로운 value로 대체하는 것이다.&lt;/p&gt;

  &lt;p&gt;이름을 예로 들어보자.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FullName fullName = new FullName(&quot;임&quot;, &quot;꺽정&quot;);&lt;/code&gt;에서 이름을 개명해서 임걱정으로 바꾼다고 하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;FullName fullName = new FullName(&quot;임&quot;, &quot;걱정&quot;);&lt;/code&gt;과 같이 한다.&lt;br /&gt;
&lt;del&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fullName.setFirstName(&quot;걱정&quot;);&lt;/code&gt;&lt;/del&gt;과 같이 한다면 VO가 아닌 것이고 하면 안되는 짓이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;다른-값과-등가성을-사용해-비교할-수-있다&quot;&gt;다른 값과 등가성을 사용해 비교할 수 있다&lt;/h3&gt;

&lt;p&gt;VO에는 entity처럼 id가 없다.&lt;br /&gt;
두 객체의 모든 &lt;strong&gt;property가 같다면 같은 객체로 간주한다&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;collaborator에게-side-effect-free한-행동을-제공한다&quot;&gt;collaborator에게 side effect free한 행동을 제공한다&lt;/h3&gt;

&lt;p&gt;VO의 함수는 불변성을 침해하면 안되기 때문에 side-effect free한 함수만 제공해야 한다.&lt;br /&gt;
side-effect free method라는 것은 &lt;strong&gt;함수를 수행할 때 어떤 수정도 발생하지 않는 함수&lt;/strong&gt;를 말한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;내 값(함수를 가진 VO)을 바꿔야 한다면 &lt;strong&gt;대체를 적용&lt;/strong&gt;한다.
    &lt;ul&gt;
      &lt;li&gt;VO의 함수 내부에서 값을 계산한 새로운 VO를 반환할 수 있다. 그치만 수정은 절대 일어나선 안된다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;중요한건 &lt;strong&gt;남의 값(parameter로 들어오는 객체의 property)도 바꿔서는 안된다&lt;/strong&gt;.
    &lt;ul&gt;
      &lt;li&gt;간과하기 쉬운 부분인데 VO가 Entity를 받아서 entity의 값을 수정한다면 이건 side-effect를 한참 만드는 설계이다.&lt;/li&gt;
      &lt;li&gt;VO가 Entity를 받아선 안되고 연산이 필요하다면 Entity에서 필요한 Value를 만들어서 받아야 한다.&lt;/li&gt;
    &lt;/ul&gt;
    &lt;ul&gt;
      &lt;li&gt;설령 entity가 수정되지 않는다고 하더라도 &lt;strong&gt;코드를 읽는 사람은 entity의 값을 바꾸는지 바꾸지 않는지를 알 수 없기 때문&lt;/strong&gt;이고 이를 테스트하기도 어려워진다.&lt;/li&gt;
      &lt;li&gt;모델의 명확성을 약화시키는 설계이기도 하다.
      - 그니까 사실은 가능한 &lt;strong&gt;VO의 parameter로 mutable한 객체가 들어오면 안된다&lt;/strong&gt;.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;primitive는-vo가-아니다&quot;&gt;primitive는 VO가 아니다&lt;/h3&gt;

&lt;p&gt;Value Object라고 생각하고 primitive나 wrapper type을 VO 대신 사용해선 안된다.&lt;br /&gt;
primitive는 Domain으로 modeling된 naming을 가지고 있지도 않고 side-effect이 없는 함수를 정의할 수도 없다.&lt;br /&gt;
&lt;strong&gt;이는 domain 모델을 속이는 것이다&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;vo의-이점&quot;&gt;VO의 이점&lt;/h2&gt;

&lt;p&gt;VO의 특징들을 이해하고 나면 이점들은 명확하다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;생성이 쉽다.&lt;/li&gt;
  &lt;li&gt;테스트가 쉽다.&lt;/li&gt;
  &lt;li&gt;사용이 쉽다.&lt;/li&gt;
  &lt;li&gt;최적화가 쉽다.&lt;/li&gt;
  &lt;li&gt;유지관리가 쉽다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이건 VO 대신 Entity를 사용해서 생성, 테스트, 사용, 최적화, 유지관리를 해보면 쉽게 느낄 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;vo-저장하기&quot;&gt;VO 저장하기&lt;/h2&gt;

&lt;p&gt;VO도 영속성 저장소에 저장할 수 있다.&lt;br /&gt;
알다시피 대부분은 부모 entity에 담겨서 저장된다.&lt;/p&gt;

&lt;p&gt;그러나 놀랍지만 vo가 반드시 repository의 entity로 저장되어야 할 때가 있다.
나는 이 부분이 굉장히 헷갈렸는데, &lt;strong&gt;Repository의 Entity와 Domain의 Entity를 헷갈려선 안된다&lt;/strong&gt;.&lt;br /&gt;
VO가 저장이 필요한 경우 repository의 entity로 저장된다고 하더라도 domain에서는 VO인 상태를 유지해야 한다.&lt;/p&gt;

&lt;p&gt;DB model은 부차적인 것이고 domain model을 위해 DB model을 설계해야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;VO가 repository에서 entity로 저장된다고 domain도 entity로 모델링하는 것은 db의 구조를 따라가는 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;persistance repository에서는 결국 Id를 가져야 하는데 VO는 Id가 없어야하는 부분이 거슬릴 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그래도 VO는 VO.&lt;/li&gt;
  &lt;li&gt;protected Id를 갖는 abstract class를 VO가 extends 하는 방식 등으로 id를 VO class에서 숨길 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;vo-구현하기&quot;&gt;VO 구현하기&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;setter가 있을 수 있지만 private으로 constructor에서만 호출되어야 한다.
    &lt;ul&gt;
      &lt;li&gt;잘못된 값이 세팅될 때 assertion을 여기서 진행할 수 있는데 이걸 guard라고 한다.&lt;/li&gt;
      &lt;li&gt;난 무조건 없어야 된다고 생각했는데 &lt;strong&gt;guard와 같은 명확한 구분을 위해 private setter&lt;/strong&gt;는 좋은 것 같다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;아래서 말할 copy constructor&lt;/li&gt;
  &lt;li&gt;getValue() 보다는 value() 같은 유창하게(fluent) 읽을 수 있는 표현을 사용한다
    &lt;ul&gt;
      &lt;li&gt;String을 보면 charAt(), compareTo(), contaions() 등 get이 들어가는 경우는 거의 없다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;vo-테스트하기&quot;&gt;VO 테스트하기&lt;/h2&gt;

&lt;p&gt;VO의 테스트는 domain 전문가 입장에서 &lt;strong&gt;의미가 있어야 한다&lt;/strong&gt;.&lt;br /&gt;
VO의 함수는 모든 경우에서 불변성이 보장되어야 한다.&lt;br /&gt;
따라서 모든 VO 함수 테스트 전 후에 vo의 값이 변하지 않았는지를 테스트하는게 좋다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이건 새롭게 배운건데 되게 중요한 것 같다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;TestVo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;testVo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(...);&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;TestVo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copyTestVo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;testVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;testVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copyTestVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;testVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;anyMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(..);&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;assertEquals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;testVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copyTestVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;testVo의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;anyMethod()&lt;/code&gt;를 테스트하는 코드에서 anyMethod에 대한 테스트는 기본적으로 하면서 VO가 바뀌지는 않았는지를 테스트한다.&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;예시와 같은 이유로 위에서 언급했듯 copy constructor를 구현한다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Implement Domain Driven Design (chapter6 Domain Events), Vaughn Vernon&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/tactical/vo</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/tactical/vo</guid>
      </item>
    
      <item>
        <title>DDD의 Domain Service란? Domain Service를 모른다면 DDD를 할 줄 모르는 것이다</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;DDD tactical components&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/ddd/tactical/vo&quot; class=&quot;btn&quot;&gt;VO&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/entity&quot; class=&quot;btn&quot;&gt;Entity&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain-service&quot; class=&quot;btn btn-purple&quot;&gt;Domain Service&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain_events&quot; class=&quot;btn&quot;&gt;Domain Events&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/aggregate&quot; class=&quot;btn&quot;&gt;Aggregate&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;개념만 보면 domain은 domain 로직이 있는 곳이다.&lt;br /&gt;
막상 개발/설계를 해보니 어디까지가 domain service이고 어디까지가 application service 인지의 분간하는게 쉽지가 않다.&lt;br /&gt;
어떤 팀원들은 domain service는 모르고 entity나 vo에 domain service의 로직이 들어가거나, domain 로직을 domain 밖에 구현하는 경우도 있다.&lt;/p&gt;

&lt;p&gt;설계 할때는 이게 맞다 저게 맞다 토론을 하곤 하는데 항상 돌이켜보면 어딘가는 잘못 설계된 것 같다.&lt;br /&gt;
DDD의 도메인을 이해하는데 절대 빠질 수 없는 요소는 domain service이다.&lt;br /&gt;
domain service에 대해 명확하게 이해해야 domain 로직을 지키는 온전한 도메인 개발을 해낼 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;도메인-서비스-domain-service&quot;&gt;도메인 서비스 (domain service)&lt;/h2&gt;

&lt;p&gt;domain 내에서 service란 도메인 고유의 작업을 수행하는 stateless operation이다.&lt;br /&gt;
당연히 domain service는 유비쿼터스 언어에 맞게 모델링 되어야 한다.&lt;/p&gt;

&lt;p&gt;domain service는 필요에 따라 어떤 도메인 객체든 사용할 수 있다.&lt;/p&gt;

&lt;p&gt;말 그대로 도메인 로직을 가지고 있는 서비스인데,&lt;br /&gt;
그렇다면 어떤 로직이 domain service에 들어가고 어떤 로직이 entity/vo에 들어가는지를 알아야 한다.&lt;/p&gt;

&lt;h2 id=&quot;도메인-모델에서-서비스가-생성되는-경우&quot;&gt;도메인 모델에서 서비스가 생성되는 경우&lt;/h2&gt;

&lt;p&gt;일반적으로 이런 상황에서 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Perform a significant business process&lt;/li&gt;
  &lt;li&gt;Transform a domain object from one composition to another&lt;/li&gt;
  &lt;li&gt;Calculate a Value requiring input from more than one domain object&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;아래와 같은 상황에서는 필수로 사용해야 한다.&lt;/p&gt;

&lt;h3 id=&quot;1-entityvo에서-적절하지-않은-함수&quot;&gt;1. Entity/VO에서 적절하지 않은 함수&lt;/h3&gt;

&lt;p&gt;도메인 내의 함수 중 Entity나 VO의 자연스러운 책임이 아닌 경우 독립된 인터페이스로서 서비스로 선언된 operation model을 선언한다.&lt;br /&gt;
그러니까 Aggregate이나 VO에서 수행되어야 하는 &lt;strong&gt;operation이 각 Aggregate/VO의 함수로 적절하지 않다고 느껴질 때&lt;/strong&gt;가 도메인 서비스를 사용할 때이다.&lt;/p&gt;

&lt;p&gt;대표적인 경우는 함수로 부적절하다고 느껴질 때 &lt;strong&gt;static method를 생성하는&lt;/strong&gt; 경향이 있다.&lt;br /&gt;
이런 경우를 Vaughn Vernon은 &lt;strong&gt;냄새나는 코드&lt;/strong&gt;라고 표현했다. 도메인 서비스를 써야한다는 냄새!&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;최근에 VO에 추가한 static method가 생각이 났다.&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CountVo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CountVo&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;CountVo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;CountVo&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;CountVo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;imageCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;imageCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;augend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;videoCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;addend&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;videoCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;위와 같은 코드가 들어갔는데, CountVo에 대한 로직을 CountVo가 갖도록하기 위함이었다.&lt;br /&gt;
나는 반대했던 코드인데 뭔가 이상했기 때문이다.&lt;br /&gt;
이 책을 보면서 명확한 것은 이런 &lt;strong&gt;이상한 느낌(책에서 말하는 냄새나는?)&lt;/strong&gt;이 도메인 서비스를 써야한다는 신호인 것 같다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;2-domain-로직이-밖으로-유출되는-경우&quot;&gt;2. domain 로직이 밖으로 유출되는 경우&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;domain 로직은 domain 영역 밖으로는 절대로 유출되서는 안된다&lt;/strong&gt;.&lt;br /&gt;
즉, client로 유출되서는 안된다는 말이다. 심지어 client가 application service라고 할지라도.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;client의 책임은 모든 세부사항을 다루는 domain operation을 호출하는 역할 뿐이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;여기서 절대로의 의미는 &lt;strong&gt;아주 당연하다고 생각되는 작은 로직도 비즈니스 로직이면 application service에 존재해서는 안된다&lt;/strong&gt;는 말이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;예를 들면 위와 같이 값을 더하는 단순 덧셈 연산 로직일지라도.&lt;/li&gt;
  &lt;li&gt;application은 이 domain 로직(덧셈 연산)을 요청할 책임이 있는 것.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;도메인-서비스가-아닌-경우&quot;&gt;도메인 서비스가 아닌 경우&lt;/h2&gt;

&lt;p&gt;무엇보다 중요한 것은 domain service가 과하면 안된다는 것이다.&lt;br /&gt;
적절한 상황에만 service로 domain 로직을 모델링 해야지, 지나치게 되면 domain 로직이 Entity와 VO에 흩어지지 못하고 service에만 몰리게 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이건 제대로 모델링 된 domain이라고 할 수 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;service라는 단어가 뭔가 거창해보일 수 있다.&lt;br /&gt;
domain service에서 service라는 단어가 들어있다고해서 대단위이거나 원격 기능이 있는 무거운 트랜잭션 오퍼레이션이라는 의미가 아니다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;아닌 경우&lt;/strong&gt;:&lt;br /&gt;
트랜잭션이나 보안은 애플리케이션 서비스내에서 다뤄질 애플리케이션의 문제이지 도메인 서비스에서 다뤄선 안 된다.&lt;br /&gt;
애플리케이션 서비스는 당연히 아니다.&lt;br /&gt;
복잡한 비즈니스 시스템과 상호교류 하도록 해주는 단위의 큰 컴포넌트.&lt;/p&gt;

&lt;h2 id=&quot;도메인-서비스-분리&quot;&gt;도메인 서비스 분리&lt;/h2&gt;

&lt;p&gt;서비스에 분리된 인터페이스가 있어야 하는지 판단해야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;인터페이스 구현체는 domain 영역 밖에 있을 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;분리된 인터페이스는 반드시 필요한 것은 아니다. 단일 클래스를 사용해도 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;여기에 대해선 논란이 많다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;java 프로젝트에서 interface를 접두사로 하고 &lt;strong&gt;-impl&lt;/strong&gt;을 접미사로 하는 방식이 꽤 보편적이다.
그리고 심지어 같은 package에 위치하기도 한다.
이런 네이밍이라면 인터페이스 분리가 필요가 없다거나 네이밍을 신중하게 생각해야한다는 의미일 수 있다.
&lt;strong&gt;-impl&lt;/strong&gt;, &lt;strong&gt;Default-&lt;/strong&gt;는 좋지 않다.&lt;/p&gt;

&lt;p&gt;여러 특정한 구현을 제공하고 그 구현에 맞게 분리하게 된다면 그에 맞게 이름을 붙여야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;repository -&amp;gt; mysqlRepository&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;혹은 의존성 분리를 위해 인터페이스를 나눌 수 있다.&lt;/p&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;예제-코드로-이해하기&quot;&gt;예제 코드로 이해하기&lt;/h2&gt;

&lt;p&gt;책에 있는 코드가 domain service를 더 명확하게 이해하게 도와주는 것 같다.&lt;/p&gt;

&lt;p&gt;client code&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;UserDescriptor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;DomainRegistry&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;authenticationService&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aTenantId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aUsername&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;service code&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;package&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;com.saasovation.identityaccess.infrastructure.services&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;DefaultEncryptionAuthenticationService&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AuthenticationService&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserDescriptor&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;authenticate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;TenantId&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aTenantId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aUsername&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aTenantId&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;TenantId must not be null.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aUsername&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Username must not be null.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aPassword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Password must not be null.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;UserDescriptor&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;nc&quot;&gt;Tenant&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tenant&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
                &lt;span class=&quot;nc&quot;&gt;DomainRegistry&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tenantRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
                        &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tenantOfId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aTenantId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tenant&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tenant&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isActive&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;encryptedPassword&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
                    &lt;span class=&quot;nc&quot;&gt;DomainRegistry&lt;/span&gt;
                            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;encryptionService&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
                            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;encryptedValue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
                    &lt;span class=&quot;nc&quot;&gt;DomainRegistry&lt;/span&gt;
                            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;userRepository&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
                            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;userFromAuthenticCredentials&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
                                    &lt;span class=&quot;n&quot;&gt;aTenantId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                                    &lt;span class=&quot;n&quot;&gt;aUsername&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                                    &lt;span class=&quot;n&quot;&gt;encryptedPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isEnabled&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;userDescriptor&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;userDescriptor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;userDescriptor&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;코드에서 배운 점:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;service가 없다면 client가 tenant, user, encrypt domain을 호출해서 어떻게 인증할지를 알아야 한다.
    &lt;ul&gt;
      &lt;li&gt;이건 너무 과하다.&lt;/li&gt;
      &lt;li&gt;세부 사항은 모두 domain으로 넣어야 한다. 이를 위해 domain service를 사용한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;domain service가 필요에 따라 구현체는 다른 package(domain 밖)에 존재할 수 있다.&lt;/li&gt;
  &lt;li&gt;생각한 것보다 많은 부분이 domain service일 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Implement Domain Driven Design (chapter7 Domain Events), Vaughn Vernon&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/tactical/domain-service</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/tactical/domain-service</guid>
      </item>
    
      <item>
        <title>CMS GC란? CMS GC를 이해하고 차이점 알기</title>
        
          <description>&lt;blockquote class=&quot;note-title&quot;&gt;
  &lt;p&gt;Java GC Type&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/java/gc/serial_gc&quot; class=&quot;btn&quot;&gt;Serial GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/parallel_gc&quot; class=&quot;btn&quot;&gt;Parallel GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/cms_gc&quot; class=&quot;btn btn-purple&quot;&gt;CMS GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/g1_gc&quot; class=&quot;btn&quot;&gt;G1 GC&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;cms-concurrent-mark-sweep&quot;&gt;CMS (Concurrent Mark Sweep)&lt;/h2&gt;

&lt;p&gt;Parallel Garbage Collection은 결과적인 효율(전체 시간 대비 STW 시간)은 좋지만 하나의 STW이 긴 편이다.&lt;br /&gt;
이를 해결하기 위해 &lt;strong&gt;CMS GC&lt;/strong&gt;가 도입되었다.&lt;br /&gt;
CMS GC는 &lt;strong&gt;전체적인 성능이 비교적 조금 떨어질 수 있지만 STW로 인해 응답하지 못하는 시간이 길어지지 않도록 하는 것이 목표&lt;/strong&gt;이다.&lt;/p&gt;

&lt;p&gt;Java 9부터 deprecated 되었고, Java 14에서 drop 되었다.&lt;/p&gt;

&lt;h2 id=&quot;parallel-vs-cms&quot;&gt;Parallel vs CMS&lt;/h2&gt;

&lt;p&gt;Minor GC(young)의 경우 Parallel과 유사하다.&lt;br /&gt;
모든 thread가 Minor GC 수행 시 중단되고 GC 작업은 multi thread로 수행된다.&lt;/p&gt;

&lt;p&gt;Major GC(old)의 경우 Parallel과 다르다.&lt;br /&gt;
CMS의 목적은 STW를 방지하는 것이고 이를 위해 짧은 STW를 제외하고는 GC를 application thread 수행과 동시에 수행된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;GC로 인한 모든 thread의 STW가 최대한 발생하지 않도록&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;gc-process&quot;&gt;GC process&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;img src=&quot;/images/post/java/gc/cms.jpg&quot; alt=&quot;cms&quot; /&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;initial-mark&quot;&gt;Initial-Mark&lt;/h3&gt;

&lt;p&gt;여기서는 Old GC가 STW로 initial-mark를 진행한다.&lt;/p&gt;

&lt;h3 id=&quot;markingpre-cleaning&quot;&gt;Marking/Pre-Cleaning&lt;/h3&gt;

&lt;p&gt;initial-mark가 끝나면 application thread가 동작하면서 일부 CMS thread에서만 을 진행한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이때부터 STW는 끝난 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 때 hardware thread가 충분하면 CMS thread의 실행 overhead가 성능에 거의 영향을 미치지 않는다.&lt;br /&gt;
그러나 충분하지 않을 경우에는 application thread랑 CPU 경합을 벌이면서 성능에 영향을 미치게 된다.&lt;/p&gt;

&lt;h3 id=&quot;remark&quot;&gt;Remark&lt;/h3&gt;

&lt;p&gt;initial-mark 이후에 marking/pre-cleaning 동안 누락되었을 수 있는 objects를 mark한다.&lt;/p&gt;

&lt;h3 id=&quot;concurrent-sweeping&quot;&gt;Concurrent Sweeping&lt;/h3&gt;

&lt;p&gt;모든 dead object의 memory를 free 한다.&lt;/p&gt;

&lt;h2 id=&quot;cms-gc-특징&quot;&gt;CMS GC 특징&lt;/h2&gt;

&lt;p&gt;짧은 STW를 유지하기 위해 사용하는 concurrent 방식을 위해 parallel GC보다 10~20% 더 많은 heap을 필요로 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;heap이 부족해지기 전에 GC 작업이 완료될 수 있도록 tuning 하는 것이 중요하다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Major GC가 진행되는 동안 Minor GC가 발생할 수 있다.  &lt;br /&gt;
이런 경우 Major GC가 중단되고, Minor GC가 완료된 이후에 다시 시작된다.&lt;/p&gt;

&lt;p&gt;기본적으로 parallel GC에 비해 application thread가 멈추는 시간이 짧다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그렇지만 GC에 소모되는 시간은 더 길다.&lt;/li&gt;
  &lt;li&gt;GC cycle 동안 application 처리율은 감소한다.&lt;/li&gt;
  &lt;li&gt;GC가 객체를 추적해야하므로 CPU/memory를 더 많이 쓴다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;cmf-concurrent-mode-failure&quot;&gt;CMF (Concurrent Mode Failure)&lt;/h2&gt;

&lt;p&gt;할당률이 급증하면 young GC 시에 조기 승격(premature promotion)이 발생하고 승격된 객체가 너무 많아 tenured 영역도 부족한 상태가 벌어질 수 있다.&lt;br /&gt;
이런 현상을 CMF라고 하고 JVM은 어쩔 수 없이 full STW를 유발하는 Parallel GC로 돌아간다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;새로 승격된 객체를 old에서 처리하여 memory를 확보 할 시간도 없이 새로운 객체가 생성되는 현상.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;CMS는 compaction을 하지 않기 때문에 비어잇는 공간들(fragmentation)이 새로운 객체를 할당하기 위한 공간보다 작을 수 있고, 이것도 CMF로 가는데 영향을 미칠 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;fragmentation은 예측 불가능하기 때문에 더 문제&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Parallel GC로 가면 STW의 시간이 길어지기 때문에 CMS를 쓰는 장점이 사라진다.&lt;br /&gt;
CMF가 자주 일어나지 않게 하려면 tenured가 차기 전에 CMS GC가 돌아야 한다.&lt;br /&gt;
CMS GC는 tenured가 default 75%가 차면 도는데 값을 지정할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;command&quot;&gt;command&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-XX:+UseConcMarkSweepGC&lt;/code&gt;으로 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;java -XX:+UseConcMarkSweepGC -jar demo.jar&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.baeldung.com/jvm-garbage-collectors&lt;/li&gt;
  &lt;li&gt;https://www.informit.com/articles/article.aspx?p=2496621&amp;amp;seqNum=4&lt;/li&gt;
  &lt;li&gt;https://docs.oracle.com/javase/8/docs/technotes/guides/vm/gctuning/cms.html&lt;/li&gt;
  &lt;li&gt;Optimizing Java, chapter7&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc/cms_gc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc/cms_gc</guid>
      </item>
    
      <item>
        <title>intellij 의미 없는 시간 줄이기 live template 편</title>
        
          <description>&lt;p&gt;intellij는 개발 시간을 단축할 수 있는 여러 기능들을 제공한다.&lt;br /&gt;
그 중 내가 가장 많이 사용하는 것 중 하나가 &lt;strong&gt;live template&lt;/strong&gt;이다.&lt;/p&gt;

&lt;p&gt;이게 뭔지는 중요하지 않다.&lt;br /&gt;
써보면 안다.&lt;/p&gt;

&lt;h3 id=&quot;live-template-확인하기&quot;&gt;live template 확인하기&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;(ctrl + alt + s) 로 settings 진입&lt;/li&gt;
  &lt;li&gt;Editor &amp;gt; Live Templates&lt;/li&gt;
  &lt;li&gt;각 언어 확인&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;여기서 각 언어를 들어가면 intellij에서 기본적으로 제공하는 live template 들을 확인할 수 있다.&lt;br /&gt;
몇 개를 써보면 금방 감이 온다. 개발 시간을 단축시킬 수 있는 유용한 template 들이 많아서 template 리스트를 확인하는 것도 의미가 있다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/intellij/live-template/live-template-basic.gif&quot; alt=&quot;live template basic&quot; /&gt;&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sout&lt;/code&gt;을 입력하고 enter 혹은 tab을 누르면 java에서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;System.out.println();&lt;/code&gt;이 완성된다.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;이렇게 &lt;strong&gt;자주 쓰이는 template들을 약어로 등록하는 것을 live template이라고 한다&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;live-template-설정하기&quot;&gt;live template 설정하기&lt;/h3&gt;

&lt;p&gt;나는 TDD 개발에서 자주 사용하는 given-when-then template을 사용한다.&lt;br /&gt;
이게 단순한데 매번 테스트 생성이 번거로워 live template으로 등록하는데 이걸 예로 들어보자.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;(ctrl + alt + s) 로 settings 진입&lt;/li&gt;
  &lt;li&gt;Editor &amp;gt; Live Templates&lt;/li&gt;
  &lt;li&gt;언어 선택 -&amp;gt; kotlin&lt;/li&gt;
  &lt;li&gt;add&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;아래와 같이 &lt;strong&gt;tm&lt;/strong&gt;, &lt;strong&gt;tc&lt;/strong&gt;에 대해 추가하기&lt;/p&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Abbreviation: tm&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Description: make test method&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;testname&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// given&lt;/span&gt;
     
    &lt;span class=&quot;c1&quot;&gt;// when&lt;/span&gt;
     
    &lt;span class=&quot;c1&quot;&gt;// then&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Abbreviation: tc&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Description: make test class&lt;/span&gt;

&lt;span class=&quot;nd&quot;&gt;@Nested&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$classname$ {
 
}
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/intellij/live-template/tc_tm.JPG&quot; alt=&quot;tc tm 추가&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;동작-확인&quot;&gt;동작 확인&lt;/h3&gt;

&lt;p&gt;간단하지만 정말 많은 시간을 줄일 수 있는 template.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/intellij/live-template/tc_tm.gif&quot; alt=&quot;tc tm 확인&quot; /&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/intellij/live-template</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/intellij/live-template</guid>
      </item>
    
      <item>
        <title>Java naming convention &amp; Abbreviations rules with Google, MS, Oracle</title>
        
          <description>&lt;p&gt;Naming conventions should be clear and straightforward, regardless of class, variable, or method.&lt;br /&gt;
If there are no rules for naming within the team, there is a high possibility of a dispute over naming, and other team members may have different opinions, making it difficult to find an agreement.&lt;/p&gt;

&lt;p&gt;Recently, there has been a debate in our team about abbreviation conventions.&lt;br /&gt;
In order to organize different thoughts, I organized naming conventions of companies such as Google, ms, oracle.&lt;br /&gt;
Ultimately, our team defined naming rules based on the compiled abbreviation conventions.&lt;/p&gt;

&lt;h3 id=&quot;package&quot;&gt;Package&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Only lowercase letters and numbers are allowed in packages. &lt;em&gt;(Oracle / Google)&lt;/em&gt; &lt;br /&gt;
✔️ com.example.deepspace&lt;br /&gt;
⚠️ com.example.deepSpace&lt;br /&gt;
⚠️ com.example.deep_space&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;class&quot;&gt;Class&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Class names should be nouns or noun phrases. &lt;em&gt;(W3 / Oracle / Google)&lt;/em&gt;&lt;br /&gt;
✔️ SpaceShip&lt;br /&gt;
⚠️ launchSpaceship&lt;/li&gt;
  &lt;li&gt;The first letter of the class name should be capitalized. UpperCamelCase &lt;em&gt;(W3 / Oracle / Google)&lt;/em&gt;&lt;br /&gt;
✔️ SpaceShip&lt;br /&gt;
⚠️ spaceship&lt;br /&gt;
⚠️ spaceShip&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;variable&quot;&gt;Variable&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Variables should be in &lt;u&gt;lowerCamelCase&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. &lt;em&gt;(W3 / Google / Oracle)&lt;/em&gt;&lt;br /&gt;
✔️ speed&lt;br /&gt;
⚠️ Speed&lt;br /&gt;
⚠️ SPEED&lt;/li&gt;
  &lt;li&gt;Variables should be nouns or noun phrases. &lt;em&gt;(W3 / Google)&lt;/em&gt;&lt;br /&gt;
✔️ fuelLevel&lt;br /&gt;
⚠️ calculateFuel&lt;/li&gt;
  &lt;li&gt;Single-letter variables are not allowed except for temporary variables. &lt;em&gt;(Oracle)&lt;/em&gt;&lt;br /&gt;
✔️ point&lt;br /&gt;
⚠️ p&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;method&quot;&gt;Method&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Methods should be verbs or verb phrases. &lt;em&gt;(Oracle / Google)&lt;/em&gt;&lt;br /&gt;
✔️ calculateDistance&lt;br /&gt;
⚠️ distance&lt;/li&gt;
  &lt;li&gt;Methods should be in &lt;u&gt;lowerCamelCase&lt;/u&gt;&lt;sup id=&quot;fnref:1:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;. &lt;em&gt;(Oracle / Google)&lt;/em&gt;&lt;br /&gt;
✔️ calculateDistance&lt;br /&gt;
⚠️ CalculateDistance&lt;br /&gt;
⚠️ calculate_distance&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;constant&quot;&gt;Constant&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Constants should be all uppercase with words separated by &lt;strong&gt;_&lt;/strong&gt;. &lt;em&gt;(Oracle / Google)&lt;/em&gt;&lt;br /&gt;
✔️ MAX_SPEED&lt;br /&gt;
⚠️ MaxSpeed&lt;br /&gt;
⚠️ max_speed&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;test&quot;&gt;Test&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Test class names should end with the postfix “Test”. &lt;em&gt;(Google)&lt;/em&gt;&lt;br /&gt;
✔️ CalculatorTest&lt;br /&gt;
⚠️ TestCalculator&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;common-rules&quot;&gt;Common Rules&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;The first letter of each word should be capitalized when multiple words are used internally. &lt;em&gt;(Oracle / Google)&lt;/em&gt;&lt;br /&gt;
✔️ DeepSpaceMissionControlCenter&lt;br /&gt;
⚠️ deepspacemissioncontrolcenter&lt;br /&gt;
⚠️ deep_space_mission_control_center&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Meaningless prefixes and postfixes should not be used. &lt;em&gt;(Google)&lt;/em&gt;&lt;br /&gt;
✔️ name  &lt;br /&gt;
⚠️ name_&lt;br /&gt;
⚠️ mName&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;abbreviation-conventions&quot;&gt;Abbreviation Conventions&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Full words should be used instead of abbreviations unless the abbreviation is more common and easily understood. &lt;em&gt;(W3 / MS)&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;Even when using abbreviations, &lt;u&gt;CamelCase&lt;/u&gt;&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt; should be applied. &lt;em&gt;(MS)&lt;/em&gt;
    &lt;ul&gt;
      &lt;li&gt;For example, when creating a variable named &lt;strong&gt;UUIDIP&lt;/strong&gt;, &lt;strong&gt;uuidIp&lt;/strong&gt; is correct, and this applies even when using a single abbreviation like &lt;strong&gt;Id&lt;/strong&gt;.&lt;/li&gt;
      &lt;li&gt;The reason for applying camelCase even to abbreviations is primarily because:
        &lt;ol&gt;
          &lt;li&gt;It greatly enhances &lt;strong&gt;readability&lt;/strong&gt;.&lt;/li&gt;
          &lt;li&gt;Abbreviations are not confused. (For example, with abbreviations such as AB, CDE, ABC, DE, when there is ABCDE, it is unclear which abbreviation it is.)&lt;/li&gt;
        &lt;/ol&gt;
      &lt;/li&gt;
    &lt;/ul&gt;

    &lt;p&gt;✔️ JSON&lt;br /&gt;
⚠️ ID -&amp;gt; ️✔️ Id  &lt;br /&gt;
⚠️ Win -&amp;gt; ️✔️ Window  &lt;br /&gt;
⚠️ UUIDIPJSON -&amp;gt; ️✔️ UuidIpJson&lt;br /&gt;
⚠️ ABCDE -&amp;gt; ️✔️ AbcDe&lt;br /&gt;
⚠️ ABCDE -&amp;gt; ️✔️ AbCde&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;reference&quot;&gt;Reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.w3.org/2005/rules/wg/wiki/Arch/Naming_Conventions&quot;&gt;W3 Naming Conventions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html&quot;&gt;Oracle Naming Conventions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/previous-versions/dotnet/netframework-1.1/141e06ef(v=vs.71)?redirectedfrom=MSDN&quot;&gt;Microsoft Naming Conventions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://google.github.io/styleguide/javaguide.html#s5-naming&quot;&gt;Google Java Style Guide&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Unlike CamelCase, lowerCamelCase starts with a lowercase letter. The first letter of each subsequent word is capitalized. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt; &lt;a href=&quot;#fnref:1:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;CamelCase is a naming convention that mimics the humps of a camel, capitalizing the first letter of each word in a multi-word phrase. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/naming-conventions</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/naming-conventions</guid>
      </item>
    
      <item>
        <title>intellij 의미 없는 시간 줄이기 test file 편</title>
        
          <description>&lt;p&gt;intellij는 개발 시간을 단축할 수 있는 여러 기능들을 제공한다.&lt;br /&gt;
한 번 설정해두면 짜잘짜잘한 시간들을 아낄 수 있는 방법 중 하나는 test file 생성을 template화 하는 것이다.&lt;/p&gt;

&lt;p&gt;이게 뭔지는 중요하지 않다.&lt;br /&gt;
써보면 안다.&lt;/p&gt;

&lt;h3 id=&quot;설정-확인하기&quot;&gt;설정 확인하기&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;(ctrl + alt + s) 로 settings 진입&lt;/li&gt;
  &lt;li&gt;Editor &amp;gt; File and Code Templates&lt;/li&gt;
  &lt;li&gt;JUnit5 Test Class 확인&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;여기서는 어떤 test를 쓰느냐에 따라 다르다.&lt;br /&gt;
JUnit5를 기준으로 설명한다.&lt;/p&gt;

&lt;h3 id=&quot;이해하기&quot;&gt;이해하기&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.junit.jupiter.api.Assertions.*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;File Header.java&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;BODY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;우선 설정을 보면 위와 같이 되어있는 것을 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;이건 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;import org.junit.jupiter.api.Assertions.*;&lt;/code&gt;를 자동으로 import하고, class 골격을 만든다는 뜻이다.&lt;/p&gt;

&lt;p&gt;기본적으로 source code에서 &lt;strong&gt;Ctrl + Shift + T&lt;/strong&gt;를 누르면 template으로 생성된 test class file을 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;오늘 목표는 자주 사용되는 import 들을 미리 추가하는 것.&lt;/p&gt;

&lt;h3 id=&quot;설정하기&quot;&gt;설정하기&lt;/h3&gt;

&lt;p&gt;위 template을 아래와 같이 바꾼다.&lt;br /&gt;
나 같은 경우는 junit5의 기본 Test 등과 mock 설정을 위한 import를 추가했다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.junit.jupiter.api.Assertions.*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.junit.jupiter.api.Test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.junit.jupiter.api.Nested&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.junit.jupiter.api.extension.ExtendWith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.assertj.core.api.Assertions.assertThat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.mockito.Mockito.*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.mockito.Mock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.mockito.InjectMocks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;org.mockito.junit.jupiter.MockitoExtension&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;File Header.java&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;BODY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;이득&quot;&gt;이득&lt;/h3&gt;

&lt;p&gt;intelij에서는 간단하게 import를 할 수 있지만 테스트 클래스를 자주 생성하는 경우 은근히 도움이 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;그리고 일단 귀찮지 않다.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;intelij에서는 &lt;strong&gt;Optimize Import&lt;/strong&gt;를 하면 사용하지 않는 import는 모두 제거해주니까 추가해두는 것이 아무 문제가 되지 않는다.&lt;/li&gt;
  &lt;li&gt;Junit5를 설정하면 Java, Kotlin 모두 적용된다.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/intellij/test-file-template</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/intellij/test-file-template</guid>
      </item>
    
      <item>
        <title>SQL vs NoSQL</title>
        
          <description>&lt;p&gt;AWS에서 진행하는 dynamodb immersion day 세션에 참여할 수 있는 기회가 생겼다.&lt;br /&gt;
강사님께서 왜 nosql을 사용하게 되었고 쓰는지에 대한 배경을 설명해주신 것이 인상적어서 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;sql-with-normalization&quot;&gt;SQL with Normalization&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;RDBS에서 가장 중요하게 생각하는 것은 정규화&lt;/strong&gt;이다.&lt;br /&gt;
그렇다면 왜 정규화를 하는가? 이 것이 중요하다.&lt;/p&gt;

&lt;p&gt;정규화를 하는 &lt;strong&gt;목적은 당연히 데이터의 중복을 제거하는 것&lt;/strong&gt;이 가장 크다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;물론 이를 통한 데이터의 일관성을 유지하는 목적도 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;얼핏 보면 당연하지만 데이터의 중복을 제거하는 것이 왜 중요했는지는 시대적 배경을 보면 이해가 된다.&lt;/p&gt;

&lt;h3 id=&quot;hard-drive로-보는-normalization&quot;&gt;hard drive로 보는 Normalization&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/database/why-use-nosql/5mbharddrive1956.jpg&quot; alt=&quot;5mb hard&quot; /&gt;&lt;/p&gt;

&lt;p&gt;1956년 IBM의 5MB hard drive를 한 달 대여하는 비용이 $3200 이었다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;2019년 가격으로 환산하면 약 $30000 이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;당시에는 hard disk가 이와 같이 굉장히 비쌌기 때문에 &lt;strong&gt;hard disk를 효율적으로 사용하는 것이 가장 중요한 일&lt;/strong&gt;이 되었다.&lt;br /&gt;
따라서 당시에 개발되고 주로 사용되던 &lt;strong&gt;RDBS에서는 데이터의 중복을 최소화하는 방향으로&lt;/strong&gt; 개발 되었다.&lt;br /&gt;
사실, &lt;strong&gt;정규화하는 operation은 CPU를 사용하는 것인데 CPU를 더 사용하는 비용을 지불하여 disk 비용을 줄이는 것&lt;/strong&gt;이라고 볼 수 있다.&lt;/p&gt;

&lt;p&gt;그치만 현재에 와서는 hard disk 값은 굉장히 싸졌다.&lt;/p&gt;

&lt;h2 id=&quot;그래서-sql-vs-nosql&quot;&gt;그래서 SQL vs NoSQL&lt;/h2&gt;

&lt;p&gt;그래서 CPU 비용이 되려 비싼 현재에서는 정규화로 과도한 disk 비용을 줄이는 것보다 CPU 비용을 줄이고 disk 비용을 늘리는 방향의 NoSQL이 틀리지 않다.&lt;/p&gt;

&lt;h2 id=&quot;아마존의-dynamodb&quot;&gt;아마존의 dynamodb&lt;/h2&gt;

&lt;p&gt;NoSQL은 최근에 와서야 개발되기 시작한 기술이다.&lt;br /&gt;
다른 NoSQL들도 비슷한 상황에서 개발되었는데 아마존에서는 어떻게 dynamodb를 개발하게 되었는지를 보면 이해가 된다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;2004년 12월
    &lt;ul&gt;
      &lt;li&gt;12월은 아마존 쇼핑에서 트래픽이 가장 큰 달이다.&lt;/li&gt;
      &lt;li&gt;DB scalability 이슈가 발생했다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;2007년 10월
    &lt;ul&gt;
      &lt;li&gt;현재의 dynamodb와는 다르지만 dynamo 논문이 발표되었다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;2012년 1월
    &lt;ul&gt;
      &lt;li&gt;dynamodb genaral availability&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;SQL에서는 ACID 때문에 scale을 늘리는 것이 더 쉽지 않고,&lt;br /&gt;
최근의 enterprise급 service들은 scale이 굉장히 크기 때문에 NoSQL이 발전하게 되었다.&lt;/p&gt;

&lt;h2 id=&quot;scale-up-vs-scale-out&quot;&gt;Scale up vs Scale out&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/database/why-use-nosql/scaleup-scaleout.png&quot; alt=&quot;scale up vs scale out&quot; /&gt;&lt;/p&gt;

&lt;p&gt;위와 같이 sql은 ACID 지원등을 이유로 scale up(vertical-scaling)을 해야 하는게 기본이다.&lt;br /&gt;
반면에 nosql들은 scale out(horizontal scaling)으로 관리할 수 있어 scale 관리가 쉽다.&lt;/p&gt;

&lt;h2 id=&quot;결론&quot;&gt;결론&lt;/h2&gt;

&lt;p&gt;규모있는 서비스를 하는 경우는 scalable하게 사용 가능한지를 따져봐야하고 그런 면에서 NoSQL이 용이하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;scaling이 쉽기 때문&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그러나 global 대기업들에서 여전히 SQL을 많이 쓰고 있다. (보통 둘 다 쓴다)&lt;br /&gt;
그럴 수 있는 이유는 SQL을 scalable하게 사용할 수 있도록 managing 하는 내부 service들을 이미 가지고 있기 때문이다.&lt;/p&gt;

&lt;p&gt;nosql을 선택하는데는 여러 기준이 있겠지만 scaling을 고려한다면 enterprise 급인데 SQL을 scalable하게 관리하는 service가 없다면 nosql을 충분히 고려해볼만 하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;우리 회사도 그렇다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;현재는 SQL이 NoSQL의 장점을, NoSQL이 SQL의 장점을 따라가고 있어 경계가 모호해지는 부분들도 있다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;AWS immersion day session 강의&lt;/li&gt;
  &lt;li&gt;https://proftomcrick.com/2011/12/26/in-1956-5mb-was-big-enough-for-anyone/&lt;/li&gt;
  &lt;li&gt;https://softwareengineering.stackexchange.com/questions/194340/why-are-nosql-databases-more-scalable-than-sql&lt;/li&gt;
  &lt;li&gt;https://www.iunera.com/kraken/uncategorized/what-is-a-nosql-database/&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/db/why-use-nosql</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/db/why-use-nosql</guid>
      </item>
    
      <item>
        <title>Instagram, Facebook에서 배우는 유저 제한 정책, 서비스 정책의 중요성</title>
        
          <description>&lt;p&gt;규모 있는 서비스를 관리하다보면 unnormal case에 대한 처리가 batch 작업마다 꼭 생기곤 한다.&lt;br /&gt;
이런 이슈 중 상당 수는 &lt;strong&gt;user limit에 대한 제한&lt;/strong&gt;이 없기 때문이 아닌가 싶다.&lt;/p&gt;

&lt;p&gt;최근 회사에서 abusing user 이슈를 겪었다.&lt;br /&gt;
내가 관리하는 서비스 중 일정을 동기화 하는 서비스가 있는데,&lt;br /&gt;
batch 작업 중 사용자 한 명이 100만 개 이상의 일정을 가지고 있는 케이스를 발견했다.&lt;/p&gt;

&lt;p&gt;반복 일정(매주 화요일 10시 회의) 같은건 하나의 일정으로 치는 것을 감안했을 때 일반 사용자가 만들어낸 일정이라고 볼 수 없었다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;심지어 10분 만에 1000개의 일정을 만들기도 했다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;덕분에 batch 로직의 변경과 instance type 변경 등의 별도 작업과 시간을 써야했다.&lt;/p&gt;

&lt;p&gt;전부터 우리 회사 서비스에서 아쉬웠던 것은 이런 정책적인 제한이 (거의) 없다는 것이다.&lt;br /&gt;
최근 인스타그램과 페이스북의 api를 보면서 우리 문제를 돌아보게 되었다.&lt;/p&gt;

&lt;h2 id=&quot;인스타그램-사례&quot;&gt;인스타그램 사례&lt;/h2&gt;

&lt;p&gt;limits (제약 사항)에 대해 잘 적용된 서비스는 인스타그램만한 예시가 없을 것 같다. 이해하기도 쉽고.&lt;/p&gt;

&lt;p&gt;&lt;u&gt;instagram의 Inauthentic Activity과 spam 정책&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;에서 instagram은 Inauthentic Activity이 결국 사용자와 서비스를 위한 것이라고 말한다.&lt;br /&gt;
이런 허위 활동이 결국 서비스의 질을 떨어트리고 커뮤니티를  망가뜨린다는 것이다.&lt;/p&gt;

&lt;p&gt;실제로 초기 페이스북에서 spam이 굉장히 많아 사용자가 이탈한 사건들이 있으니 이런 것들을 만들게 된 것이라고 예상해본다.&lt;br /&gt;
&lt;strong&gt;허위 활동이라는 것은 서비스 관리도 어렵지만 서비스 질도 떨어뜨린다는 것&lt;/strong&gt;이 페이스북도 주목한 문제인 것 같다.&lt;/p&gt;

&lt;p&gt;인스타그램은 사용자와 api에 대해 적절하게 제한을 두고 있다.&lt;/p&gt;

&lt;h3 id=&quot;사용자에-대한-제한&quot;&gt;사용자에 대한 제한&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;제한 대상&lt;/th&gt;
      &lt;th&gt;제한&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;follow 숫자 제한&lt;/td&gt;
      &lt;td&gt;7500명&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;likes 제한&lt;/td&gt;
      &lt;td&gt;시간 당 120개 &lt;br /&gt;하루에 300-500개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;comments 제한&lt;/td&gt;
      &lt;td&gt;하루에 200개&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;people tag 제한&lt;/td&gt;
      &lt;td&gt;post 하나에 20명&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;DM 제한&lt;/td&gt;
      &lt;td&gt;하루에 50-70명&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;신뢰성이 높은 유저(가입한지 6개월이 지난 유저 등)인지에 따라 제한이 다르지만, 전체 제한 및 시간/일 별 제한 정책을 가지고 있다.&lt;/p&gt;

&lt;p&gt;여기서 follow 숫자를 제외한 다른 정책들은 instagram에서 공식적으로 open한 내용은 아니다.&lt;br /&gt;
다만 관련된 많은 글들을 통해 정책을 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;예상하건데 시간당 제한은 abusing 유저나 사용할 수 있을만한 숫자이기 때문에 공식적으로 발표하지 않은 것으로 생각한다.&lt;/p&gt;

&lt;h3 id=&quot;api에-대한-제한&quot;&gt;Api에 대한 제한&lt;/h3&gt;

&lt;p&gt;developer에게 open한 api에서는 24시간에 25개의 post만 생성할 수 있도록 제한한다.&lt;/p&gt;

&lt;h2 id=&quot;facebook-사례&quot;&gt;facebook 사례&lt;/h2&gt;

&lt;p&gt;흥미로운 점은 &lt;u&gt;facebook은 abusing, spam, sexual post 등에 대해 지표&lt;/u&gt;&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;를 관리하고 공개하고 있다.&lt;br /&gt;
우리 서비스는 더 완성도 높아지고 있다는걸 보여주기 위함인 것 같다.&lt;/p&gt;

&lt;p&gt;잘못 abusing으로 체크한 경우까지 open하고 있는데 공개하지 못하더라도 배워야할 부분인 것은 분명하다.&lt;/p&gt;

&lt;h2 id=&quot;limits에-대해-생각-정리하기&quot;&gt;limits에 대해 생각 정리하기&lt;/h2&gt;

&lt;p&gt;허위 활동을 막기 위해 인스타그램에서는 여러가지 limit을 두고 있다.&lt;br /&gt;
limit의 숫자들을 어떻게 잡았는지는 모르지만 이걸 정책으로 잡았다는 점이 중요하다.&lt;br /&gt;
계산이야 서비스마다 다르겠지만, abusing이 아닌 경우 사용할 수 없는 양을 계산하고 제한하는 것.&lt;/p&gt;

&lt;p&gt;서비스를 하기 이전에는 &lt;em&gt;“설마 이런 유저가 있겠어?”&lt;/em&gt; 라는 생각을 하지만&lt;br /&gt;
그치만 대규모 서비스를 한다면 진짜 무조건 있다.&lt;br /&gt;
그런 사람들. 꼭 여럿이 있다.&lt;br /&gt;
혹은 봇일 수도 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;“없겠지”가 아니라 “있을 수 없어”라고 만드는 것&lt;/strong&gt;이 정책이다.&lt;br /&gt;
그리고 이러한 정책은 반드시 서비스에 반영되어야 한다.&lt;/p&gt;

&lt;p&gt;이로 인한 장점들은 잠깐만 생각해도 명확하다.&lt;/p&gt;

&lt;h2 id=&quot;limit으로-인한-장점들&quot;&gt;limit으로 인한 장점들&lt;/h2&gt;

&lt;p&gt;간단하게 운영 관점과 서비스 관점에서 이슈들을 볼 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;운영-이슈&quot;&gt;운영 이슈&lt;/h3&gt;

&lt;p&gt;인스타그램 기준으로 정책이 없다면 follow 하는 수가 100만, 10억 명이 되었을 때 구조를 다시 잡아야 할 것이다. (여기서 follow는 내가 follow하는 수)&lt;br /&gt;
내가 팔로우 하는 사람이 100만 명인 것은 말이 안된다.&lt;br /&gt;
100만 명을 팔로우 하는건 애초에 정상적이지 않으며, 이게 가능하다면 매일 업로드 되는 피드와 스토리를 감당할 수도 없다.&lt;/p&gt;

&lt;p&gt;여기서도 &lt;em&gt;“당연히 100만 명을 팔로우하지 않을거야”&lt;/em&gt; 가 아니라, 당연한 것을 불가능하게 만드는 정책의 반영이 중요하다.&lt;br /&gt;
&lt;strong&gt;정책으로 제한하는 것은 쉽지만, 100만 명을 만든 계정이 생겼을 때 후처리하는 것은 법적인 문제와 더불어 굉장한 골칫덩어리다.&lt;/strong&gt;&lt;br /&gt;
어뷰징을 위한 별도의 아키텍처 설계가 필요할 수도 있다.&lt;/p&gt;

&lt;h3 id=&quot;서비스-이슈&quot;&gt;서비스 이슈&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;서비스 이슈가 생긴다는 것은 결국 품질 하락을 의미한다.&lt;/strong&gt;&lt;br /&gt;
품질 하락은 서비스 경쟁력을 떨어트리며 소비자 이탈과 결국 서비스의 성패와도 이어진다.&lt;/p&gt;

&lt;p&gt;인스타그램의 사례를 다시 가져오면 follow를 마구 할 수 있어  follow count를 어지럽히는 abusing 사용자가 늘어난다면.&lt;br /&gt;
현재도 있는 follow를 늘려주는 abusing service들이 더 날뛰게 될 것이며 그로 인해 bot들이 만드는 post와 의미없는 광고의 비율이 늘어날 것이다.&lt;br /&gt;
이는 결국 떨어진 품질로 인한 서비스 품질 하락으로 이어진다.&lt;/p&gt;

&lt;h2 id=&quot;limit-정하기&quot;&gt;limit 정하기&lt;/h2&gt;

&lt;p&gt;limit은 빨리 정해야 한다.&lt;br /&gt;
나중가면 limit을 넣기 힘들기 때문에 개발자라고 할지라도 서비스를 오픈하는 단계라면 먼저 제안할 수 있어야 한다.&lt;/p&gt;

&lt;p&gt;현재 내가 맡은 서비스는 abusing 때문에 서비스 이슈가 나는 경우는 잘 없지만 운영 이슈가 너무 명확하고 비용을 크게 잡아 먹고 있다.&lt;br /&gt;
아쉬운 점은 이런 정책들을 서버 개발자가 정하기는 어렵다는 것.&lt;br /&gt;
특히 서비스 중간에 정책을 반영하기란 쉽지 않다. PM님 설득좀 되세요! :scream:&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;전체 follow 수 제한
    &lt;ul&gt;
      &lt;li&gt;https://help.instagram.com/408167069251249?locale=ko_KR&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;공식적으로 open하지 않은 제한
    &lt;ul&gt;
      &lt;li&gt;https://goinstagram.com/instagram-follow-unfollow-limit/&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;api 제한
    &lt;ul&gt;
      &lt;li&gt;https://developers.facebook.com/docs/instagram-api/guides/content-publishing&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://business.instagram.com/blog/reducing-inauthentic-activity-on-instagram&quot;&gt;허위 활동에 대한 instagram의 글&lt;/a&gt;을 통해 &lt;em&gt;Inauthentic Activity&lt;/em&gt;를 대하는 instagram의 태도를 알 수 있다. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;&lt;a href=&quot;https://transparency.fb.com/data/community-standards-enforcement/spam/facebook/&quot;&gt;facebook 지표&lt;/a&gt;를 통해 페이스북은 스팸 block을 고지한다. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/service-management/user-limits</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/service-management/user-limits</guid>
      </item>
    
      <item>
        <title>dynamo 내부구조 이해하기</title>
        
          <description>&lt;p&gt;dynamo를 사용하기 위해서 꼭 알고있어야 하는 값들이 있다.&lt;br /&gt;
WCU, RCU, partition의 max size.&lt;br /&gt;
&lt;strong&gt;AWS immersion day session 강의&lt;/strong&gt;를 들으면서 원래는 외우고 있었던 것들을 이해할 수 있는 시간이 되었다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/docs/33.database/2022-06-15-why-use-nosql.md&quot;&gt;왜 nosql?&lt;/a&gt;의 내용도 도움이 된다.&lt;/p&gt;

&lt;h2 id=&quot;partitioning&quot;&gt;partitioning&lt;/h2&gt;

&lt;p&gt;mysql에서는 sharding을 하지만 비슷한 목적으로 dynamodb는 partitioning을 한다.&lt;br /&gt;
즉 data를 partition 단위로 나눈다는 것이다.&lt;/p&gt;

&lt;p&gt;이 partition 하나는 10GB를 저장할 수 있고, WCU는 1KB, RCU는 3KB까지 수용할 수 있다.&lt;br /&gt;
따라서 저장공간이 10GB가 넘거나 WCU/RCU가 넘치는 경우 partition을 다시 나누도록 한다.&lt;/p&gt;

&lt;h2 id=&quot;dynamodb-내부구조&quot;&gt;dynamodb 내부구조&lt;/h2&gt;

&lt;p&gt;dynamo의 내부 architecture에 대해서 배우면 partition에 대한 제약들을 더 잘 이해할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/aws/dynamodb/dynamo-architecture.JPG&quot; alt=&quot;dynamo architecture&quot; /&gt;&lt;/p&gt;

&lt;p&gt;위 그림처럼&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;dynamodb로 request가 들어오면 requestRouter 중에 한 곳으로 할당된다.&lt;/li&gt;
  &lt;li&gt;requestRouter에서 storageNode로 routing을 한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;여기서 중요한 점은 storage node는 3개의 node로 이루어져 있다는 것인데, leaderNode와 2개의 followerNode이다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;db write가 발생하면 leaderNode가 업데이트되고 leaderNode가 followerNode에 data를 복제한다.&lt;/li&gt;
  &lt;li&gt;3개 중 2개의 node가 업데이트가 되면 node에서 ack를 보낸다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;내부구조-보고-제약사항-이해하기&quot;&gt;내부구조 보고 제약사항 이해하기&lt;/h2&gt;

&lt;p&gt;위 개념을 이해하면 제약들을 이해하기 쉽다.&lt;/p&gt;

&lt;p&gt;하나의 node는 1KB의 CU만을 갖는다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;read는 3개의 node에서 이뤄질 수 있으므로 RCU는 \(1KB * 3 = 3KB\).&lt;/li&gt;
  &lt;li&gt;write는 leaderNode에서만 이뤄지므로 WCU는 1KB.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;각 node는 10GB의 저장공간을 가지므로 하나의 partition의 max size는 10GB.&lt;/p&gt;

&lt;p&gt;eventually consistancy에서 read를 할 경우&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;read 요청이 \(1/3\) 확률로 각 node로 가게 된다.&lt;/li&gt;
  &lt;li&gt;위에서 말했듯 3개 중 2개의 node가 업데이트 되면 ack를 보내기 때문에 나머지 하나는 업데이트 되지 않았을 수 있다.&lt;/li&gt;
  &lt;li&gt;\(1/3\) 확률 &amp;amp; 1/3의 노드가 아직 업데이트 되기 이전에, read 요청이 들어온 경우 old data를 가져갈 수 있다.&lt;/li&gt;
  &lt;li&gt;물론 대부분의 case는 그 전에 업데이트 되는 편이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;strong consistance는 read를 할 경우 항상 leader node로 간다.&lt;/p&gt;

&lt;h2 id=&quot;partitioning-참고사항&quot;&gt;partitioning 참고사항&lt;/h2&gt;

&lt;p&gt;10GB가 되지 않는 경우 하나의 partition은 여러 개의 partition key를 가질 수 있다.&lt;br /&gt;
여러 개의 partition key를 가진 data set(partition)이 커질 경우 partition key를 기반으로 두 개의 partition으로 분리된다.&lt;br /&gt;
하나의 partition key에 대한 data set이 커지는 경우에도 역시 partition key를 기반으로 partition이 분리된다. dynamodb가 내부적으로 hash된 값을 key로 사용하기 때문에 동일한 partition key에 대해 데이터가 커지는 경우도 커버할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;AWS immersion day session 강의&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/dynamo/structure</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/dynamo/structure</guid>
      </item>
    
      <item>
        <title>[kotlin error] ClassNotFoundException: kotlin.jvm.JvmInline</title>
        
          <description>&lt;p&gt;kotlin에서 &lt;strong&gt;jackson-module-kotlin&lt;/strong&gt;를 사용할 때 에러.&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Caused by: java.lang.ClassNotFoundException: kotlin.jvm.JvmInline
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)
	... 80 more
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;코드&quot;&gt;코드&lt;/h2&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- pom.xml --&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.fasterxml.jackson.module&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jackson-module-kotlin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.13.3&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;&amp;lt;!-- pom.xml --&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.fasterxml.jackson.module&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jackson-module-kotlin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.12.7&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;원인&quot;&gt;원인&lt;/h2&gt;

&lt;p&gt;jackson-module-kotlin에서 2.13 version 부터 kotlin 1.5를 사용하기 시작했다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;참고로 JvmInline이 kotlin 1.5에서 나왔음.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;dependency version을 내리거나, kotlin verison을 올리면 된다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;https://github.com/FasterXML/jackson-module-kotlin/issues/523&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/kotlin/ClassNotFoundException_kotlin_jvm_JvmInline</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/kotlin/ClassNotFoundException_kotlin_jvm_JvmInline</guid>
      </item>
    
      <item>
        <title>[spring error] Unable to find a @SpringBootConfiguration</title>
        
          <description>&lt;p&gt;spring에서 &lt;strong&gt;Unable to find a @SpringBootConfiguration&lt;/strong&gt;가 발생할 때 에러.&lt;/p&gt;

&lt;p&gt;나 같은 경우는 multi module project를 구성할 때 에러 메세지가 나왔다.&lt;br /&gt;
multi module에서 library module과 project module을 나눠서 구성할 때.&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;java.lang.IllegalStateException: Unable to find a @SpringBootConfiguration, you need to use @ContextConfiguration or @SpringBootTest(classes=...) with your test

	at org.springframework.util.Assert.state(Assert.java:76)
	at org.springframework.boot.test.context.SpringBootTestContextBootstrapper.getOrFindConfigurationClasses(SpringBootTestContextBootstrapper.java:236)
	at org.springframework.boot.test.context.SpringBootTestContextBootstrapper.processMergedContextConfiguration(SpringBootTestContextBootstrapper.java:152)
	at org.springframework.test.context.support.AbstractTestContextBootstrapper.buildMergedContextConfiguration(AbstractTestContextBootstrapper.java:392)
	at org.springframework.test.context.support.AbstractTestContextBootstrapper.buildDefaultMergedContextConfiguration(AbstractTestContextBootstrapper.java:309)
	at org.springframework.test.context.support.AbstractTestContextBootstrapper.buildMergedContextConfiguration(AbstractTestContextBootstrapper.java:262)
	at org.springframework.test.context.support.AbstractTestContextBootstrapper.buildTestContext(AbstractTestContextBootstrapper.java:107)
	at org.springframework.boot.test.context.SpringBootTestContextBootstrapper.buildTestContext(SpringBootTestContextBootstrapper.java:102)
	at org.springframework.test.context.TestContextManager.&amp;lt;init&amp;gt;(TestContextManager.java:137)
	at org.springframework.test.context.TestContextManager.&amp;lt;init&amp;gt;(TestContextManager.java:122)
	at org.junit.jupiter.engine.execution.ExtensionValuesStore.lambda$getOrComputeIfAbsent$4(ExtensionValuesStore.java:86)
	at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.computeValue(ExtensionValuesStore.java:223)
	at org.junit.jupiter.engine.execution.ExtensionValuesStore$MemoizingSupplier.get(ExtensionValuesStore.java:211)
	at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.evaluate(ExtensionValuesStore.java:191)
	at org.junit.jupiter.engine.execution.ExtensionValuesStore$StoredValue.access$100(ExtensionValuesStore.java:171)
	at org.junit.jupiter.engine.execution.ExtensionValuesStore.getOrComputeIfAbsent(ExtensionValuesStore.java:89)
	at org.junit.jupiter.engine.execution.ExtensionValuesStore.getOrComputeIfAbsent(ExtensionValuesStore.java:93)
	at org.junit.jupiter.engine.execution.NamespaceAwareStore.getOrComputeIfAbsent(NamespaceAwareStore.java:61)
	at org.springframework.test.context.junit.jupiter.SpringExtension.getTestContextManager(SpringExtension.java:294)
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeAll(SpringExtension.java:113)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeBeforeAllCallbacks$10(ClassBasedTestDescriptor.java:381)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeBeforeAllCallbacks(ClassBasedTestDescriptor.java:381)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:205)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.before(ClassBasedTestDescriptor.java:80)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:148)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;코드&quot;&gt;코드&lt;/h2&gt;

&lt;p&gt;spring에서 multi module 이슈라면 kotlin인지 java인지는 중요하지 않다.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Kotlin&quot;&gt;@ExtendWith(SpringExtension::class)
@SpringBootTest
class JpaRepositoryTest {

    @Autowired
    lateinit var sut: MysqlJpaRepository

	...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;pre&gt;&lt;code class=&quot;language-Kotlin&quot;&gt;@ExtendWith(SpringExtension::class)
@Import(TestConfig::class)
@SpringBootTest
class JpaRepositoryTest {

    @SpringBootConfiguration
    @ComponentScan(&quot;com.meansoup&quot;) // 여기는 base package name
    class TestConfig

    @Autowired
    lateinit var sut: MysqlJpaRepository

	...
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;원인&quot;&gt;원인&lt;/h2&gt;

&lt;p&gt;library가 되는 모듈에는 &lt;strong&gt;@SpringBootApplication&lt;/strong&gt;이 없다.&lt;br /&gt;
따라서 &lt;strong&gt;@SpringBootConfiguration&lt;/strong&gt;도 없는데 그렇기 때문에 bean이 있다는 것을 알지 못한다.&lt;/p&gt;

&lt;p&gt;위와 같이 테스트에서 &lt;strong&gt;@SpringBootConfiguration&lt;/strong&gt;를 명시해주므로써 bean을 인지하고 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;https://github.com/spring-guides/gs-multi-module&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;위 프로젝트의 코드를 확인&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;https://www.baeldung.com/springbootconfiguration-annotation&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;SpringBootConfiguration에 대해&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/Unable_to_find_a_SpringBootConfiguration</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/Unable_to_find_a_SpringBootConfiguration</guid>
      </item>
    
      <item>
        <title>[spring error] JpaRepository NoSuchBeanDefinitionException</title>
        
          <description>&lt;p&gt;spring에서 Jpa bean이 잘 생성되지 않은 경우&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &apos;com.meansoup.whatisthebetter.application.port.out.like.mysql.MysqlLikeJpaRepository&apos; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveDependency(AbstractAutowireCapableBeanFactory.java:489)
	at org.springframework.beans.factory.annotation.ParameterResolutionDelegate.resolveDependency(ParameterResolutionDelegate.java:136)
	at org.springframework.test.context.junit.jupiter.SpringExtension.resolveParameter(SpringExtension.java:270)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameter(ExecutableInvoker.java:216)
	... 54 more
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;JpaConfiguration을 위한 class를 생성해준다.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Kotlin&quot;&gt;@Configuration
@EnableJpaAuditing
@EnableJpaRepositories(&quot;com.meansoup.whatisthebetter&quot;)
class JpaConfiguration {}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;원인&quot;&gt;원인&lt;/h2&gt;

&lt;p&gt;spring에서 jpa repository를 enable 하기 위해서 필요하다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/NoSuchBeanDefinitionException_JpaRepository</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/NoSuchBeanDefinitionException_JpaRepository</guid>
      </item>
    
      <item>
        <title>[spring error] kotlin cannot be returned by findById(), findById() should return Optional</title>
        
          <description>&lt;p&gt;kotlin에서 jpa findById 사용하기.&lt;/p&gt;

&lt;p&gt;kotlin spring에서 java에서 사용하던 것처럼 jpa를 사용하려고 하면 만나는 에러에 대한 해결이다.&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;org.mockito.exceptions.misusing.WrongTypeOfReturnValue: 
MysqlUser cannot be returned by findById()
findById() should return Optional
***
If you&apos;re unsure why you&apos;re getting above error read on.
Due to the nature of the syntax above problem might occur because:
1. This exception *might* occur in wrongly written multi-threaded tests.
   Please refer to Mockito FAQ on limitations of concurrency testing.
2. A spy is stubbed using when(spy.foo()).then() syntax. It is safer to stub spies - 
   - with doReturn|Throw() family of methods. More in javadocs for Mockito.spy() method.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;해결 방법은 두 가지다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;mockK 적용&lt;/li&gt;
  &lt;li&gt;test와 code가 조금 이상하게 적용&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;나는 mockK를 적용하고 싶지 않아서 기존 mockito로 하는 방법을 설명한다.&lt;/p&gt;

&lt;h3 id=&quot;원래-코드&quot;&gt;원래 코드&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Kotlin&quot;&gt;
// main code
	val found = mysqlUserJpaRepository.findByIdOrNull(uid.toString())


// test code
	doReturn(mysqlUser).`when`(mysqlUserJpaRepository).findByIdOrNull(safeEq(uuid.toString()))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;원래 코드는 이렇다.&lt;br /&gt;
Optional이 나오면 안되서 findByIdOrNull을 사용하는데, 에러는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;findById&lt;/code&gt;에 대한 에러를 받는 것.&lt;/p&gt;

&lt;h3 id=&quot;해결-코드&quot;&gt;해결 코드&lt;/h3&gt;

&lt;pre&gt;&lt;code class=&quot;language-Kotlin&quot;&gt;
// main code
	val found = mysqlUserJpaRepository.findByIdOrNull(uid.toString())


// test code
	doReturn(Optional.of(mysqlUser)).`when`(mysqlUserJpaRepository).findById(safeEq(uuid.toString()))
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;해결 코드는 main code는 findByIdOrNull을 적용하고, test code에는 findById로 테스트한다.&lt;/p&gt;

&lt;h2 id=&quot;원인&quot;&gt;원인&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;findByIdOrNull&lt;/strong&gt;은 kotlin에서 정의한 extension code이다.&lt;br /&gt;
mockito는 static method에 대한 mocking(kotlin의 extension code)를 지원할 계획이 없으며,&lt;br /&gt;
따라서 findByIdOrNull의 실제 코드인 findById가 mockito에서 잡히는 상황.&lt;/p&gt;

&lt;p&gt;테스트에서는 findById를 사용해줘야 한다.&lt;br /&gt;
혹은 mockK를 사용하면 해결할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;https://stackoverflow.com/questions/59562177/mockito-findbyidornull-issue	
https://github.com/mockito/mockito/issues/1481&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/kotlin_cannot_be_Returned_by_findById</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/kotlin_cannot_be_Returned_by_findById</guid>
      </item>
    
      <item>
        <title>intellij toggle case shortcut (upper -&gt; lower, lower -&gt; upper)</title>
        
          <description>&lt;p&gt;There is a shortcut in IntelliJ that changes uppercase to lowercase and vice versa.&lt;br /&gt;
This seems like a small thing, but it maximizes efficiency when used with vertical editing.&lt;/p&gt;

&lt;p&gt;I was trying to find and perform this shortcut on Ubuntu, but I couldn’t solve the issue. So I will summarize what I did to solve it.&lt;/p&gt;

&lt;h3 id=&quot;how-i-use-the-shortcut-for-changing-case&quot;&gt;How I use the shortcut for changing case&lt;/h3&gt;

&lt;p&gt;I usually use vertical editing very often.&lt;br /&gt;
It is very efficient for changing getters &amp;amp; setters, mapping between Entities and DTOs, and creating factories. If you add a shortcut for changing case to uppercase and lowercase, it’s great.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/intellij/toggle-case/intellij_toggle.gif&quot; alt=&quot;intellij toogle&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;toggle-case-shortcut&quot;&gt;Toggle case Shortcut&lt;/h3&gt;

&lt;p&gt;In IntelliJ, this shortcut is called as &lt;strong&gt;toggle case&lt;/strong&gt;.&lt;br /&gt;
You can change uppercase to lowercase and lowercase to uppercase using &lt;strong&gt;ctrl + shift + U&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;issue-in-ubuntu&quot;&gt;Issue in Ubuntu&lt;/h3&gt;

&lt;p&gt;This shortcut works on Windows and Mac, but not on Ubuntu.&lt;br /&gt;
I recently found out that &lt;strong&gt;ctrl + shift + U&lt;/strong&gt; is already used as an emoji shortcut in Ubuntu.&lt;br /&gt;
This shortcut(emoji) is rarely used, so you can change or delete it.&lt;/p&gt;

&lt;h3 id=&quot;fix-issue-in-ubuntu&quot;&gt;Fix issue in Ubuntu&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;Enter &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ibus-setup&lt;/code&gt; in the command&lt;/li&gt;
  &lt;li&gt;Go to the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Emoji tab&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Select the Unicode code point where &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ctrl + shift + U&lt;/code&gt; is set&lt;/li&gt;
  &lt;li&gt;Delete or move it&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;In my case, I deleted the corresponding code.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;p&gt;https://youtrack.jetbrains.codm/issue/IDEA-112533&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/intellij/upper-case</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/intellij/upper-case</guid>
      </item>
    
      <item>
        <title>G1GC란? G1GC를 이해하고 다른 GC랑 비교하기</title>
        
          <description>&lt;blockquote class=&quot;note-title&quot;&gt;
  &lt;p&gt;Java GC Type&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/java/gc/serial_gc&quot; class=&quot;btn&quot;&gt;Serial GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/parallel_gc&quot; class=&quot;btn&quot;&gt;Parallel GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/cms_gc&quot; class=&quot;btn&quot;&gt;CMS GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/g1_gc&quot; class=&quot;btn btn-purple&quot;&gt;G1 GC&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;g1&quot;&gt;G1&lt;/h2&gt;

&lt;p&gt;G1은 Garbage First 라는 이름으로 지어진 GC이다.
큰 memory를 갖는 multiprocessor machine을 타겟으로 높은 throughput과 작은 pause-time 목표로 만들어져서 현재는 java의 default GC이다.&lt;/p&gt;

&lt;p&gt;java 6에서 처음 선보이고 7에서 광범위하게 수정됐고 8u40 부터 안정된 GC가 되었다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;workload에 상관없이 8u40 이전 버전에선 G1을 쓰지 않는게 좋다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;G1 특징&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;CMS 보다 훨씬 튜닝하기 쉽다.&lt;/li&gt;
  &lt;li&gt;조기 승격에 덜 취약하다.&lt;/li&gt;
  &lt;li&gt;대용량 heap에서 확장성(특히 중단시간)이 우수하다.&lt;/li&gt;
  &lt;li&gt;full STW GC를 없애거나 확 줄일 수 있다.&lt;/li&gt;
  &lt;li&gt;Java 9 부터 default GC&lt;/li&gt;
  &lt;li&gt;이전의 GC와 다르다.
    &lt;ul&gt;
      &lt;li&gt;generation 마다 경계가 명확한 memory가 없다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;g1-heap&quot;&gt;G1 heap&lt;/h3&gt;

&lt;p&gt;G1의 heap은 region으로 구성된다.&lt;br /&gt;
region은 default 1MB인 memory 공간이고 heap이 커질수록 크기가 커진다. (세팅 가능)&lt;br /&gt;
region을 이용해서 generation 별로 연속적인 메모리 공간을 갖지 않아도 되고 GC 수행마다 매번 전체 garbage를 collect 하지 않아도 된다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/g1Heap.PNG&quot; alt=&quot;g1 heap&quot; /&gt;&lt;/p&gt;

&lt;p&gt;G1 에서는 1, 2, 4, 6, 8, 16, 32, 64MB 크기의 region을 사용할 수 있고, 기본적으로 heap에는 2048~4095 개의 region을 가질 수 있다.&lt;br /&gt;
모든 region의 크기는 동일하고 JVM 실행 중에 크기가 변경되지 않는다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;region의 크기는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;heap size / 2048&lt;/code&gt;에서 허용된 값으로 반올림하여 계산&lt;/li&gt;
  &lt;li&gt;region 개수는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;heap size / region size&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;g1-알고리즘&quot;&gt;G1 알고리즘&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/g1Cycle.png&quot; alt=&quot;g1 cycle&quot; /&gt;&lt;/p&gt;

&lt;p&gt;young-only&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;object를 old generation으로 승격시키는 단계&lt;/li&gt;
  &lt;li&gt;old generation의 occupancy가 특정 임계점(Initial Heap Occupancy)을 넘을 때 young only에서 space reclamation 단계로 전환된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;initial mark&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;young GC와 동시에 marking을 시작한다.&lt;/li&gt;
  &lt;li&gt;space reclamation 단계를 위해 old generation에서의 live object를 결정한다.&lt;/li&gt;
  &lt;li&gt;marking이 끝나지 않더라도 young collection은 발생할 수 있다.&lt;/li&gt;
  &lt;li&gt;marking은 remark와 cleanup으로 완료된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;remark&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;STW&lt;/li&gt;
  &lt;li&gt;marking을 끝내는 단계&lt;/li&gt;
  &lt;li&gt;global reference를 수행하고 class unloading 함&lt;/li&gt;
  &lt;li&gt;remark와 cleanup에서 liveness information을 계산하고 내부 데이터 구조를 업데이트 하기 위해 사용되고 마무리 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;cleanup&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;STW&lt;/li&gt;
  &lt;li&gt;완전히 비어있는 region을 정리하고 space-reclamation을 수행할지 결정한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;space reclamation&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;young과 old의 live object를 evacuate 하는 단계&lt;/li&gt;
  &lt;li&gt;old region을 더 만힝 비워도 노력할만한 공간이 나오지 않는다고 판단될 때 종료&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;region-set&quot;&gt;Region Set&lt;/h3&gt;

&lt;p&gt;G1은 region 별로 GC 작업을 수행하므로 대규모 Java heap에 적합하다.&lt;br /&gt;
Java heap이 크더라도 GC 작업의 양은 작은 Region set으로 제한되기 때문.&lt;/p&gt;

&lt;p&gt;G1에는 RSet(Remembered Set)라는 장치가 있음.&lt;br /&gt;
region 별로 하나씩 외부에서 region 내부 region을 참조하는 레퍼런스를 관리하기 위한 장치.&lt;br /&gt;
G1에서는 region 내부를 바라보는 레퍼런스를 찾기 위해 전체 heap을 뒤질 필요 없이 RSet만 보면 된다.&lt;/p&gt;

&lt;h3 id=&quot;humongous-objects&quot;&gt;Humongous Objects&lt;/h3&gt;

&lt;p&gt;G1은 Region size의 50% 가 넘는 객체에 대해 연속되게 할당할 수 있는 region들을 찾는다.&lt;br /&gt;
사용할 수 있는 연속된 region이 충분하지 않는 경우 full GC를 통해 heap을 compaction 한다.&lt;br /&gt;
humongous object의 region은 old region 중 하나로 간주되고 하나의 object만 포함한다.&lt;br /&gt;
full GC 중에도 움직이지 않는다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;region을 통채로 쓰니 당연한 것 같다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;사용하지 않을 경우 cleanup 단계나 full GC에서 수집될 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;예외적으로 java primitive type에 대한 array인 경우 어떤 gc 단계에서도 수집할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;G1에서 humongous는 old gc에서 수집되니까 수명이 짧은 humongous는 참조되지 않는 시점을 훨씬 지나서 회수될 수 있는 문제가 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;경우에 따라 young GC에서 수집하는 방법이 구현됨&lt;/li&gt;
  &lt;li&gt;그러나 G1에선 잦은 houmongous 할당은 좋지 않음&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;다른-gc와-비교&quot;&gt;다른 GC와 비교&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Parallel GC는 전체적으로만 Old Generation의 GC가 가능하다.
    &lt;ul&gt;
      &lt;li&gt;반면 G1은 이 작업을 훨씬 더 짧게 여러번에 걸쳐 수행된다. 이렇게 하면 STW가 크게 줄어든다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;CMS와 유사하게 G1은 Old Generation GC의 일부를 동시에 수행합니다.
    &lt;ul&gt;
      &lt;li&gt;그렇지만 CMS는 Old generation heap을 조각 모음할 수 없으므로 결국 긴 Full GC가 필요하다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;G1은 다른 수집기보다 높은 오버헤드가 있을 수 있고 동시 특성으로 인해 처리량에 영향이 있다.&lt;/li&gt;
  &lt;li&gt;G1은 old generation의 비어있는 넓은 영역을 GC 할 수 있고, 이는 불필요한 GC 노력 없이 큰 공간을 확보할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;command&quot;&gt;command&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;+XX:UseG1GC
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;G1의 주 목표는 중단 시간의 단축이고 GC 마다 application의 최대 중단 시간을 설정할 수 있다.&lt;br /&gt;
그러나 이 값은 목표치이고 실제 이 기준에 맞춘다고 보장하진 못한다.&lt;br /&gt;
100ms 이하는 현실성이 너무 떨어져 GC가 지키지 못할 가능성이 크다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-XX:MaxGCPauseMillis=200 // 중단 시간을 200ms로 설정
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;1부터 64까지(MB)의 수로 region size를 변경할수도 있다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-XX:G1HeapRegionSize=&amp;lt;n&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector.htm#JSGCT-GUID-AC383806-7FA7-4698-8B92-4FD092B9F368&lt;/li&gt;
  &lt;li&gt;https://www.informit.com/articles/article.aspx?p=2496621&amp;amp;seqNum=5&lt;/li&gt;
  &lt;li&gt;Optimizing Java, chapter7&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc/g1_gc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc/g1_gc</guid>
      </item>
    
      <item>
        <title>slack에서 스마트하게 추정하기</title>
        
          <description>&lt;p&gt;원격 근무가 많아지면서 회의하는 방식에 대한 변화도 당연히 생기기 마련이다.&lt;br /&gt;
우리는 agile하게 일을 진행하는데, sprint를 할 때는 story에 대한 추정을 한다.&lt;/p&gt;

&lt;p&gt;추정 방식은 핸드폰의scrum pocker 앱을 통해 해왔었는데,&lt;br /&gt;
원격 근무를 하게 되면 회의할 때 ‘하나 둘 셋’ 하고 자기가 선택한 포커 숫자를 화면에 공개하고 있었다.&lt;/p&gt;

&lt;p&gt;최근 회사 보안 문제로 카메라를 켜지 못하는 상황이 되어 웃긴 상황이 벌어졌다.&lt;br /&gt;
‘하나 둘 셋’ 하고 슬랙 쓰레드에 각자 추정하는 값을 입력하는 방식…&lt;/p&gt;

&lt;p&gt;최첨단을 달리고자 하는 개발자들이 하기에 조금 아쉽지 않나 싶다.&lt;/p&gt;

&lt;p&gt;더 스마트하게 추정을 할 수 없을까 싶어 찾다가 발견한 슬랙 앱.&lt;/p&gt;

&lt;h2 id=&quot;demo&quot;&gt;demo&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/slack/slack_pocker_planner.gif&quot; alt=&quot;pocker&quot; /&gt;&lt;/p&gt;

&lt;p&gt;공식 사이트에서 제공하는 demo를 그대로 가져왔다.&lt;br /&gt;
직접 사용해도 동일하게 편하게 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;slack-pocker-planner&quot;&gt;slack pocker planner&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://deniz.co/slack-poker-planner/&quot;&gt;https://deniz.co/slack-poker-planner/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;옛날 방식의 앱이긴 하나 굉장히 효율적이었다.&lt;br /&gt;
팀 내에서도 좋은 반응을 받았다.&lt;/p&gt;

&lt;h2 id=&quot;사용법&quot;&gt;사용법&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;위 사이트에서 add to slack&lt;/li&gt;
  &lt;li&gt;add 완료 (권한이 없다면 권한 요청)&lt;/li&gt;
  &lt;li&gt;install slack app&lt;/li&gt;
  &lt;li&gt;slack 채널에 &lt;strong&gt;pocker planner&lt;/strong&gt; 추가&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/pp {title}&lt;/code&gt;으로 사용&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://deniz.co/slack-poker-planner&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/slack/pocker-planner</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/slack/pocker-planner</guid>
      </item>
    
      <item>
        <title>[spring error] ConflictingBeanDefinitionException: Annotation-specified bean name</title>
        
          <description>&lt;p&gt;spring에서 테스트 수행중 발생한 에러.&lt;br /&gt;
아마 server를 띄우는 중에도 유사한 에러가 발생하는 것 같다.&lt;/p&gt;

&lt;p&gt;나 같은 경우는 multi module project를 구성하는 중 에러가 발생했다.&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;org.junit.jupiter.api.extension.ParameterResolutionException: Failed to resolve parameter [org.springframework.test.web.reactive.server.WebTestClient webClient] in constructor [public com.meansoup.whatisthebetter.was.rest.post.CreatePostControllerTest(org.springframework.test.web.reactive.server.WebTestClient)]: Failed to load ApplicationContext

	at org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameter(ExecutableInvoker.java:239)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameters(ExecutableInvoker.java:183)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:74)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestClassConstructor(ClassBasedTestDescriptor.java:355)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateTestClass(ClassBasedTestDescriptor.java:302)
	at org.junit.jupiter.engine.descriptor.ClassTestDescriptor.instantiateTestClass(ClassTestDescriptor.java:79)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:280)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)
	at java.base/java.util.Optional.orElseGet(Optional.java:369)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1540)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:71)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:220)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:53)
Caused by: java.lang.IllegalStateException: Failed to load ApplicationContext
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)
	at org.springframework.test.context.junit.jupiter.SpringExtension.getApplicationContext(SpringExtension.java:283)
	at org.springframework.test.context.junit.jupiter.SpringExtension.resolveParameter(SpringExtension.java:269)
	at org.junit.jupiter.engine.execution.ExecutableInvoker.resolveParameter(ExecutableInvoker.java:216)
	... 54 more
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to parse configuration class [com.meansoup.whatisthebetter.was.WhatisthebetterApplication]; nested exception is org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name &apos;createPostController&apos; for bean class [com.meansoup.whatisthebetter.adapter.in.rest.post.CreatePostController] conflicts with existing, non-compatible bean definition of same name and class [com.meansoup.whatisthebetter.was.rest.post.CreatePostController]
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:189)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:331)
	at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:247)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:311)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:112)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)
	... 58 more
Caused by: org.springframework.context.annotation.ConflictingBeanDefinitionException: Annotation-specified bean name &apos;createPostController&apos; for bean class [com.meansoup.whatisthebetter.adapter.in.rest.post.CreatePostController] conflicts with existing, non-compatible bean definition of same name and class [com.meansoup.whatisthebetter.was.rest.post.CreatePostController]
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.checkCandidate(ClassPathBeanDefinitionScanner.java:349)
	at org.springframework.context.annotation.ClassPathBeanDefinitionScanner.doScan(ClassPathBeanDefinitionScanner.java:287)
	at org.springframework.context.annotation.ComponentScanAnnotationParser.parse(ComponentScanAnnotationParser.java:128)
	at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:296)
	at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:250)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:207)
	at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:175)
	... 71 more
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;exception 이름에서 알 수 있다시피 동일한 이름의 bean이 생성된 문제.&lt;br /&gt;
일반적으로 동일한 bean이 존재하는 경우인데, 나 같은 경우는 multi module을 구성하면서 동일한 name의 bean을 양 module에서 생성하면서 문제가 발생했다.&lt;br /&gt;
사실 하나는 이전에 모듈에 있다가 지웠는데 빌드된게 남아있었던 듯.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;mvn clean
    &lt;ul&gt;
      &lt;li&gt;대부분의 사람들은 이걸로 해결했다고 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;target directory 삭제
    &lt;ul&gt;
      &lt;li&gt;mvn clean이 원활하게 되지 않았고, target directory를 삭제해서 빌드된 파일들을 제거해서 해결했다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/ConflictingBeanDefinitionException</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/ConflictingBeanDefinitionException</guid>
      </item>
    
      <item>
        <title>[intellij error] Maven 3.3.1+ requires JDK 1.7+</title>
        
          <description>&lt;p&gt;intellij에서 maven build 혹은 package 시 발생한 에러.&lt;/p&gt;

&lt;h2 id=&quot;환경&quot;&gt;환경&lt;/h2&gt;

&lt;p&gt;windows,&lt;br /&gt;
intellij 2020 and 2022,&lt;br /&gt;
kotlin spring,&lt;br /&gt;
multi-module project&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;p&gt;왼쪽 하단에 팝업 노티로 아래와 같은 메세지가 출력.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Error running &apos;whatisthebetter-was [package]&apos;: Maven 3.3.1+ requires JDK 1.7+. Please set appropriate JDK
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;Settings(Ctrl + Alt + S) 진입&lt;/li&gt;
  &lt;li&gt;Build, Execution, Deployment &amp;gt; Build Tools &amp;gt; maven &amp;gt; importing 진입&lt;/li&gt;
  &lt;li&gt;JDK for importer를 내가 가지고 있는 java 버전으로 설정
    &lt;ul&gt;
      &lt;li&gt;나 같은 경우는 openjdk 11.&lt;/li&gt;
      &lt;li&gt;윈도우 default 인지 모르겠으나, 초기 설정은 &lt;strong&gt;Use Project JDK&lt;/strong&gt;으로 되어있었음.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이래도 해결되지 않았다면,&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Build, Execution, Deployment &amp;gt; Build Tools &amp;gt; maven &amp;gt; Runner 진입&lt;/li&gt;
  &lt;li&gt;위와 동일하게 내가 가지고 있는 java 버전으로 설정&lt;/li&gt;
&lt;/ol&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/intellij/maven-jdk-version</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/intellij/maven-jdk-version</guid>
      </item>
    
      <item>
        <title>DDD의 Entity란? Entity와 ID를 제대로 이해하기</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;DDD tactical components&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/ddd/tactical/vo&quot; class=&quot;btn&quot;&gt;VO&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/entity&quot; class=&quot;btn btn-purple&quot;&gt;Entity&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain-service&quot; class=&quot;btn&quot;&gt;Domain Service&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain_events&quot; class=&quot;btn&quot;&gt;Domain Events&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/aggregate&quot; class=&quot;btn&quot;&gt;Aggregate&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;DDD에서 가장 중심이 되는 부분이 바로 Vo와 Entity이다.&lt;br /&gt;
Entity는 Vo와 identity를 기준으로 구분되곤 하는데, 실제 설계를 하다보면 entity의 범위는 어디까지인지 aggregate과 entity와의 관계 등이 나에게는 모호해서 entity를 더 공부하게 됐다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Vaughn Vernon의 Implement Domain Driven Design&lt;/em&gt;의 &lt;strong&gt;Entity&lt;/strong&gt; 챕터를 다시 읽게 되었는데 DDD를 적용하는 프로젝트를 몇 건 진행한 후에 다시 보니 보이는 것들이 있었다.&lt;/p&gt;

&lt;p&gt;Entity의 가장 중요한 부분은 identity를 갖는 것이지만 그게 entity의 전부는 아니다.&lt;br /&gt;
ID 부터 우선 설계해아한다는 것, constructor에 query에 사용되는 parameter들이 모두 포함되어야 한다는 것 등을 배웠다.&lt;/p&gt;

&lt;p&gt;DDD를 얕게 아는 대부분의 사람들이 “entity는 id가 있고 vo는 없어” 정도로 이해하고 말곤 하지만 VO와 Entity를 제대로 이해하고 개발하는데는 경험이 많이 필요하다.&lt;/p&gt;

&lt;h2 id=&quot;why-use-entities&quot;&gt;Why use Entities&lt;/h2&gt;

&lt;p&gt;우리가 entity를 사용하는 이유.&lt;br /&gt;
&lt;strong&gt;domain 개념에서 다른 모든 객체외 반드시 구분해야 하는 경우&lt;/strong&gt;, 즉 individuality가 필요할 때 entity로 설계한다.&lt;/p&gt;

&lt;p&gt;entity는 긴 시간에 걸쳐 계속 변화할 수 있는 model.&lt;br /&gt;
처음 모습과 많이 달라질 수 있지만 같은 식별자를 가진다면 같은 객체다.&lt;/p&gt;

&lt;p&gt;VO와 명확하게 구분되는 개념은 ID와 mutability.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그치만 대부분의 domain model은 VO로 모델링 되는게 맞다.&lt;/li&gt;
  &lt;li&gt;Vaughn Vernon은 모든 model이 Entity로 모델링 될 바에는 Vo로 모델링 되는게 맞다고 했다. 그만큼 Vo로 최대한 모델링을 진행하라는 것.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;id&quot;&gt;ID&lt;/h2&gt;

&lt;p&gt;entity는 반드시 고유하게 식별되고 구분되어야 한다.&lt;br /&gt;
따라서 entity를 설계할 때는 같은 타입의 여러 객체 중에 원하는 &lt;strong&gt;entity를 찾을 때 필요한 속성&lt;/strong&gt;이 무엇인지 아는게 중요하다.&lt;br /&gt;
&lt;strong&gt;그냥 모델링을 해놓고 ID를 붙이면 안된다&lt;/strong&gt;는 말이다.&lt;/p&gt;

&lt;p&gt;ID는 안정성 확보를 위해 immutable 해야 한다.&lt;br /&gt;
그렇기 때문에 entity의 ID로서 VO가 사용될 수 있다.&lt;br /&gt;
그리고 ID는 setter가 open 되지 않게 보호되어야 한다.&lt;/p&gt;

&lt;p&gt;ID가 탐색이나 매칭에 사용될 수 있지만 그렇지 않을 가능성도 높다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;인물 정보에 대한 검색을 예로들면 사람의 이름을 ID로 쓰는 일은 거의 없을 것이다.&lt;br /&gt;
당연히 중복된 이름이 존재할 수 있고 이는 entity의 특성에 어긋난다.&lt;br /&gt;
따라서 human readable하지 않은 ID가 내부적으로 존재할 수 있다.&lt;br /&gt;
위에서 설명한 &lt;strong&gt;원하는 entity를 찾을 때 필요한 속성&lt;/strong&gt;이 여기서는 &lt;strong&gt;이름&lt;/strong&gt;이 될 것이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;id-생성-방법&quot;&gt;ID 생성 방법&lt;/h2&gt;

&lt;h3 id=&quot;1-사용자가-입력한-초기-고유-값을-사용&quot;&gt;1. 사용자가 입력한 초기 고유 값을 사용&lt;/h3&gt;

&lt;p&gt;ID를 생성하는 일을 사용자에게 의지하겠다는 것.&lt;br /&gt;
이런 방식은 사실 양질의 ID를 만들 생각이 없다는 것.&lt;br /&gt;
ID를 사용자가 바꿔선 안되는데 이런 약속이 지켜져야 한다.&lt;/p&gt;

&lt;p&gt;사실 이 방법은 쓰면 안되겠지.&lt;/p&gt;

&lt;h3 id=&quot;2-application-내부에-고유성이-보장되는-알고리즘을-사용&quot;&gt;2. application 내부에 고유성이 보장되는 알고리즘을 사용&lt;/h3&gt;

&lt;p&gt;library나 framework를 사용할 수도 있다.&lt;br /&gt;
UUID, GUID를 사용할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;신뢰도가 높고&lt;/li&gt;
  &lt;li&gt;32bytes의 사람이 읽을 수 없는 값&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 방법이 가장 많이 쓰이는 방법일 것이다.&lt;/p&gt;

&lt;h3 id=&quot;3-db-같은-영속성-저장소를-사용해-id-생성&quot;&gt;3. DB 같은 영속성 저장소를 사용해 ID 생성&lt;/h3&gt;

&lt;p&gt;db는 필요한 범위에 따라 고유 값을 생성해준다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;도메인 모델이 db에 의존하게 된다.&lt;/li&gt;
  &lt;li&gt;ID를 얻기 위해 db까지 가야하니 성능상 단점이 될 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;대리-식별자&quot;&gt;대리 식별자&lt;/h4&gt;

&lt;p&gt;hibiernate 같은 경우는 숫자 시퀀스 같은 db primitive type을 식별자로 선호한다.
도메인에서 다른 유형의 식별자가 필요하다면 두 개의 식별자를 사용해야 한다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;도메인 모델에 맞춰 설계된 식별자&lt;/li&gt;
  &lt;li&gt;hibernate를 위한 식별자, 대리 식별자&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;대리 속성은 도메인 모델의 일부가 아니기 때문에 감추는 편이 바람직하다.
대리 속성을 감추기 위해 abstract Entity class 같은 것을 만들어서 구현하도록 하는 방식으로 감출 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;4-다른-바운디드-컨텍스트가-id-할당&quot;&gt;4. 다른 바운디드 컨텍스트가 ID 할당&lt;/h3&gt;

&lt;p&gt;다른 바운디드 컨텍스트가 ID를 할당할 때는 ID의 검색과 매칭이 필요하다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;ID를 찾기위해 계좌번호, 사용자 명, 이메일 주소 등의 속성을 제공해야 하고,&lt;br /&gt;
이 속성들과 ID가 1대 1로 매칭되는 것이 가장 이상적이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;식별자-생성-시점&quot;&gt;식별자 생성 시점&lt;/h3&gt;

&lt;p&gt;클라이언트가 도메인 이벤트를 구독하는 경우 새로운 entity의 인스턴스화가 완료되면 이벤트가 발생할 수 있다.&lt;br /&gt;
도메인 이벤트가 올바르게 초기화 되기 위해선 식별자 생성을 빠르게 완료해야 한다.&lt;/p&gt;

&lt;h2 id=&quot;entity-설계&quot;&gt;entity 설계&lt;/h2&gt;

&lt;p&gt;entity 설계 초기에는 &lt;strong&gt;ID를 중심으로 우선적인 특성과 행동을 비롯해 쿼리에 도움을 주는 요소&lt;/strong&gt;에 집중한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;entity를 다른 entity들과 구분할 수 있는 특성에 먼저 집중해서 ID를 확인하는 것.&lt;/li&gt;
  &lt;li&gt;비지니스적 속성을 먼저 해결하려고하면 문제가 생길 수 있다.&lt;/li&gt;
  &lt;li&gt;ID와 엑세스 컨텍스트, entity를 찾기 위한 필수적인 속성을 먼저 고려해야 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;entity가 이름이나 설명과 같은 다른 수단으로도 query가 된다면 그 property들도 contructor에 포함시킨다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이렇게 생성이 성공적으로 이뤄지면 이 변수들은 절대 null이 되지 않는다. 이를 constructor와 constructor의 setter가 보장해야 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;user 객체는 tenantId, username, password, person 등을 포함해야 한다.&lt;br /&gt;
person의 정보와 username으로 query가 가능해야 하기 때문에.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;setter&quot;&gt;setter&lt;/h3&gt;

&lt;p&gt;setter를 설계할 수 있지만 요구사항의 용어를 제대로 표현하는 것이라고 볼 수 없다.&lt;br /&gt;
절대적으로 부적절한 것은 아니지만 하나의 요청을 완수하기 위해 여러 setter를 사용할 필요가 없을 때 사용한다.&lt;br /&gt;
&lt;strong&gt;다수의 setter는 의도를 모호하게 하기 때문이다.&lt;/strong&gt;&lt;br /&gt;
또 이런 setter는 하나의 논리적인 커맨드가 되어야 하는 결과를 의미있는 도메인 이벤트로 게시하기 어렵게 만든다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;setActive(boolean) -&amp;gt; activate(), deactivate() 로 변경.&lt;/p&gt;

  &lt;p&gt;activate 내부에서 active(boolean) 값의 변경과 updatedTime(time) 값의 변경이 동시에 이뤄질 수 있다.&lt;br /&gt;
이런 경우 setActive(), setUpdatedTime()을 호출하는건 안좋은 방향이다.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;위에서 말한 하나의 요청을 완수하기 위해 여러 setter를 사용해서 의도를 모호하게 하는 것.
setActive() 내부에서 updatedTime을 수행하는 것도 안좋다.&lt;/li&gt;
    &lt;li&gt;setActive()라는 함수가 active만 set할 것 같은데 숨겨진 기능이 있는 것과 같음.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;h3 id=&quot;자가-캡슐화-self-encapsulation&quot;&gt;자가 캡슐화, Self Encapsulation&lt;/h3&gt;

&lt;p&gt;contructor에서 각 property의 할당을 setter에 위임하는 방식.&lt;br /&gt;
각 setter가 property의 validation을 책임지는 방식으로 각 변수에 대한 자가 캡슐을 지원한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;null이면 안된다.&lt;/li&gt;
  &lt;li&gt;id인 경우 setter가 두번 호출될 수 없다. (set된 값이 null이 아니면 다시 호출하면 에러)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이런 검사를 하는 assertion들이 guard라고 불린다.&lt;/p&gt;

&lt;p&gt;복잡한 constructor에 대해 property 별로 명확한 assertion을 제공하는 방향이 될 수 있는 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;유효성-검사&quot;&gt;유효성 검사&lt;/h2&gt;

&lt;p&gt;도메인 객체의 모든 특성이 개별적으로 유효하다고 해서 객체 전체가 하나의 대상으로 유효하다는 의미는 아니다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;test에서 &lt;u&gt;mother&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;를 짜다보면 많이 느끼는 것.&lt;/li&gt;
  &lt;li&gt;옳은 데이터끼리 짜집어도 결국 틀리는 부분이 있기 마련.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;하나 이상의 단계로 이뤄진 유효성 검사를 통해 가능한 모든 문제를 다뤄야 한다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;객체의 인스턴스 변수를 추상화할 수 있도록 해준다.&lt;/li&gt;
  &lt;li&gt;이를 통해 해당 객체를 담고 있는 많은 다른 객체에서 손쉽게 특성/속성을 가져오는 방법을 제공한다.&lt;/li&gt;
  &lt;li&gt;유효성 검사의 단순한 형태를 지원한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;property-유효성-검사&quot;&gt;property 유효성 검사&lt;/h3&gt;

&lt;p&gt;반 버논은 자가 캡슐화를 추천한다.&lt;br /&gt;
그치만 이걸 유효성 검사라고 하면 거부감이 든다고 한다.&lt;br /&gt;
유효성 검사는 도메인 객체가 아닌 유효성 검사 클래스의 책임이어야 하기 때문이다.&lt;br /&gt;
반 버논은 이걸 계약에 의한 설계 접근법 측면에서 assertion이라고 말한다.&lt;/p&gt;

&lt;p&gt;entity의 단순한 특성도 entity의 일부인 것처럼, &lt;strong&gt;이런 guard(자가 캡슐화된 setter)도 entity의 일부이다&lt;/strong&gt;.
작은 특성들을 guard하지 않는다면 정신 나간 값이 설정되는 상황을 가드할 수 없다.&lt;/p&gt;

&lt;p&gt;빈 문자열에 대한 확인은 동의하지만, 문자열 길이나 숫자의 범위 확인은 동의하지 않는 사람들이 있다.&lt;br /&gt;
이런 경우는 db에 확인을 맡기는게 최선이라고 생각하기도 한다.&lt;br /&gt;
문자열 길이가 모델과 관련이 없다고 생각하는 것인데, 이런 검사가 무결성 점검이라고 볼 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;전체-객체의-유효성-검사&quot;&gt;전체 객체의 유효성 검사&lt;/h3&gt;

&lt;p&gt;전체 객체에서 유용한 방법은 마지막으로 확인 가능한 순간까지 확인을 지연시킨다.&lt;br /&gt;
유효성 검사에는 엔티티의 전체 상태가 사용 가능해야 하므로 유효성 검사 로직을 엔티티에 직접 넣으려고 할 수도 있다.&lt;br /&gt;
그치만 도메인 객체 자체보다 도메인 객체의 유효성 검사가 더 자주 변경된다 (번 바논 의견)&lt;br /&gt;
엔티티 내부에 유효성 검사를 넣으면 너무 많은 책임을 갖기도 한다.&lt;br /&gt;
이미 엔티티는 자신의 상태를 유지해 도메인 행동을 다뤄야 하는 책임을 갖고 있다.&lt;br /&gt;
엔티티는 유효성을 검사하는 방법을 알 필요는 없고 유효한지 결과만 알면된다.&lt;/p&gt;

&lt;p&gt;유효성 검사 컴포넌트는 엔티티 상태가 유효한지 결정하는 책임을 갖는다.&lt;br /&gt;
자바에서는 엔티티랑 같은 패키지에 위치해서 package private으로 entity의 속성에 접근할 수 있도록 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;유효성 검사를 위해 public이 되어야 하는 방향은 바람직하지 않다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;유효성 검사에서 첫 문제가 발생할 때 예외를 던지기 보단 절체 결과를 수집하는 것이 중요하다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;Vaughn Vernon이 예를 든 validator 코드.&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Warble&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Entity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ValidationNotificationHandler&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WarbleValidator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;WarbleValidator&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Validator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Validator&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Warble&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aWarble&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ValidationNotificationHandler&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aHandler&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setWarble&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aWarble&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;validate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;checkForWarpedWarbleCondition&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;checkForWackyWarbleState&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;변화-추적&quot;&gt;변화 추적&lt;/h3&gt;

&lt;p&gt;엔티티의 정의에 따라 수명주기에 걸쳐 일어나는 모든 상태 변경을 추적할 필요는 없다.
모델에서 일어나는 중요한 사건에 신경을 써야할 때가 있다.
이럴 때 엔티티에서 일어나는 특정 변경의 추적이 도움이 된다.&lt;/p&gt;

&lt;p&gt;정확하고 유용하면서 실용적인 변경 추적은 도메인 이벤트와 이벤트 저장소를 사용하는 것이다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Implement Domain Driven Design (chapter5 Entity), Vaughn Vernon&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;테스트 객체를 생성하는 기술, &lt;a href=&quot;/docs/pattern/object-mother&quot;&gt;ObjectMother 패턴&lt;/a&gt; 참고 &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/tactical/entity</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/tactical/entity</guid>
      </item>
    
      <item>
        <title>[spring error] repackage failed: Unable to find main class</title>
        
          <description>&lt;p&gt;intellij에서 maven package 시 발생한 에러.&lt;/p&gt;

&lt;h2 id=&quot;환경&quot;&gt;환경&lt;/h2&gt;

&lt;p&gt;windows,&lt;br /&gt;
intellij 2022,&lt;br /&gt;
kotlin spring,&lt;br /&gt;
multi-module project&lt;/p&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;p&gt;mvn으로 package를 하려고 하다가 발생했다.&lt;br /&gt;
나는 multi-module로 core 모듈과, was 모듈을 가지고 있는데, project 상위 pom으로 build를 시도했다가 에러를 받았다.&lt;/p&gt;

&lt;p&gt;project packaging 중 core 모듈 packaing에서 에러가 발생한 것.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.7.0:repackage (repackage) on project whatisthebetter-core: Execution repackage of goal org.springframework.boot:spring-boot-maven-plugin:2.7.0:repackage failed: Unable to find main class

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;spring-boot-maven-plugin&lt;/strong&gt;에 대해 알 필요가 있다.&lt;br /&gt;
spring-boot-maven-plugin은 springboot에서 executable jar &amp;amp; war를 packaging 하는 것을 지원한다.&lt;/p&gt;

&lt;p&gt;따라서 multi-module에서 core나 library 같은 module은 해당 dependency를 빼주면 된다.
core/library module에서 아래 plugin 제거.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;			&lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/&lt;/li&gt;
  &lt;li&gt;https://stackoverflow.com/questions/42937577/unable-to-find-main-class-with-maven-on-spring-boot-project-in-eclipse&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/repackage-failed-Unable-to-find-main-class</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/repackage-failed-Unable-to-find-main-class</guid>
      </item>
    
      <item>
        <title>[spring error] log4j2, Class path contains multiple SLF4J bindings</title>
        
          <description>&lt;p&gt;intellij에서 log를 설정한 뒤 test 실행 혹은 application run 중에 경고 같은 에러 발생.&lt;/p&gt;

&lt;h2 id=&quot;환경&quot;&gt;환경&lt;/h2&gt;

&lt;p&gt;windows,&lt;br /&gt;
intellij 2022,&lt;br /&gt;
kotlin spring,&lt;br /&gt;
log4j2&lt;/p&gt;

&lt;h2 id=&quot;pomxml&quot;&gt;pom.xml&lt;/h2&gt;

&lt;p&gt;내 pom 파일 일부.&lt;br /&gt;
gradle로 해도 같은 에러가 났다면 동일하게 해결할 수 있을 것 같다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-web&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusions&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusion&amp;gt;&lt;/span&gt;
					&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
					&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-logging&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusion&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusions&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-log4j2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.7.2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;에러-메세지&quot;&gt;에러 메세지&lt;/h2&gt;

&lt;p&gt;mvn으로 package를 하려고 하다가 발생했다.&lt;br /&gt;
나는 multi-module로 core 모듈과, was 모듈을 가지고 있는데, project 상위 pom으로 build를 시도했다가 에러를 받았다.&lt;/p&gt;

&lt;p&gt;project packaging 중 core 모듈 packaing에서 에러가 발생한 것.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/C:/Users/soup/.m2/repository/ch/qos/logback/logback-classic/1.2.11/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/C:/Users/soup/.m2/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.17.2/log4j-slf4j-impl-2.17.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [ch.qos.logback.classic.util.ContextSelectorStaticBinder]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;에러 메세지 그대로, slf4j에 binding된 dependency가 하나가 아니어서 발생한 에러다.&lt;br /&gt;
해결을 위해서는 추가된 slf4j가 의도된 dependency만 추가되도록, 그렇지 않은건 제거해줄 필요가 있다.&lt;/p&gt;

&lt;p&gt;maven dependency를 확인해보자.&lt;/p&gt;

&lt;p&gt;내 maven dependency&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/issue/spring/Class-path-contains-multiple-SLF4J-bindings.png&quot; alt=&quot;Class path contains multiple SLF4J bindings&quot; /&gt;&lt;/p&gt;

&lt;p&gt;보다시피 내가 추가한 &lt;strong&gt;org.springframework.boot:spring-boot-starter-log4j2:2.7.2&lt;/strong&gt; 외에도,&lt;br /&gt;
&lt;strong&gt;org.springframework.boot:spring-boot-starter:2.7.0&lt;/strong&gt; 이 가지고 있는 logging이 있다.&lt;br /&gt;
여기서 에러가 발생한 것.&lt;/p&gt;

&lt;p&gt;spring-boot-starter-web에서는 exclude를 해줬는데, spring-boot-starter에서는 누락한 것을 추가해준다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusions&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusion&amp;gt;&lt;/span&gt;
					&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
					&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-logging&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusion&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusions&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-web&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusions&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;exclusion&amp;gt;&lt;/span&gt;
					&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
					&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-logging&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
				&lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusion&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;/exclusions&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;

		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-boot-starter-log4j2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.7.2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.baeldung.com/slf4j-classpath-multiple-bindings&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/Class-path-contains-multiple-SLF4J-bindings</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/Class-path-contains-multiple-SLF4J-bindings</guid>
      </item>
    
      <item>
        <title>[spring error] log4j2.yml, yaml property not work</title>
        
          <description>&lt;p&gt;spring에서 log4j2.yml, log4j2.yaml를 설정했는데 되지 않는 상황.&lt;br /&gt;
아무 에러도 뜨지 않고 console이 그냥 멈춘 상태였다.&lt;/p&gt;

&lt;h2 id=&quot;환경&quot;&gt;환경&lt;/h2&gt;

&lt;p&gt;windows,&lt;br /&gt;
intellij 2022,&lt;br /&gt;
kotlin spring,&lt;br /&gt;
log4j2.yaml&lt;/p&gt;

&lt;h2 id=&quot;현상&quot;&gt;현상&lt;/h2&gt;

&lt;p&gt;console이 멈췄다.&lt;br /&gt;
run했다는 메세지만 남고 에러도 없고 시작도 안했다.&lt;/p&gt;

&lt;p&gt;혹시나 싶어서 동일한 log4j2를 xml로 작성해보면 제대로 동작하는 것도 확인 가능했다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;테스트를 위한다면 인터넷에 샘플로 제공된 아무 xml이나 넣고 run해서 console 출력을 확인.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;아주 기본적인 실수를 셋업할 땐 참 많이도 한다.&lt;br /&gt;
회사에선 xml만 쓰는데 log4j2의 경우 yml이 가독성이나 라인 수가 더 효율적일 것 같아서 시도했다가 시간을 많이도 버렸따.
yaml를 읽어주는 dependency가 빠졌던 것.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.fasterxml.jackson.dataformat&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jackson-dataformat-yaml&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.5.0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://stackoverflow.com/questions/28101903/what-is-a-sample-default-config-file-in-yaml-for-log4j2&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug/spring/yaml-property-not-work</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug/spring/yaml-property-not-work</guid>
      </item>
    
      <item>
        <title>spring multimodule에서 library module의 test class 사용하기</title>
        
          <description>&lt;p&gt;springboot multimodule을 사용하면서, test class가 dependency에 추가되지 않는 것을 확인했다.&lt;br /&gt;
처음에는 그냥 그러려니 하고 조금 번거롭게 테스트 코드를 다시 작성했는데,&lt;br /&gt;
테스트를 점점 추가하다보니 mother 패턴을 적용했던 코드들을 재사용하는 것이 맞다고 생각됐다.&lt;/p&gt;

&lt;h2 id=&quot;현상&quot;&gt;현상&lt;/h2&gt;

&lt;p&gt;src 코드는 잘 추가되어 사용하지만, test 코드들은 추가되지 않는 상황.&lt;/p&gt;

&lt;p&gt;현재 maven pom&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.meansoup&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;whatisthebetter-core&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.0.1-SNAPSHOT&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;compile&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;해결&quot;&gt;해결&lt;/h2&gt;

&lt;p&gt;현재 dependency는 그대로 두고 test dependency를 추가하면 사용할 수 있다.&lt;br /&gt;
이렇게 되면 scope이 test여서 compile할 때 빨려들어가지도 않을거라 좋은 방향이다.&lt;/p&gt;

&lt;p&gt;수정된 maven pom&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.meansoup&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;whatisthebetter-core&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.0.1-SNAPSHOT&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;compile&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.meansoup&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;whatisthebetter-core&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;0.0.1-SNAPSHOT&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;type&amp;gt;&lt;/span&gt;test-jar&lt;span class=&quot;nt&quot;&gt;&amp;lt;/type&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;nt&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;nt&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;dependency의-type&quot;&gt;dependency의 type&lt;/h2&gt;

&lt;p&gt;dependency의 artifact’s packaging type을 명시하는 것이다.&lt;br /&gt;
default는 jar.&lt;br /&gt;
jar, pom, war, test-jar 등이 있고, test-jar를 통해 test package를 명시하였다.&lt;/p&gt;

&lt;h2 id=&quot;attach-test-jar&quot;&gt;attach test-jar&lt;/h2&gt;

&lt;p&gt;위처럼하면 test를 돌리는데는 문제 없으나, mvn package / deploy 시에 test-jar가 core에서 생성되지 않아 에러가 발생한다.&lt;br /&gt;
아래와 같이 plugin을 추가해서 해결한다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-jar-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.0.2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;nt&quot;&gt;&amp;lt;executions&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;execution&amp;gt;&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;&amp;lt;goals&amp;gt;&lt;/span&gt;
             &lt;span class=&quot;nt&quot;&gt;&amp;lt;goal&amp;gt;&lt;/span&gt;test-jar&lt;span class=&quot;nt&quot;&gt;&amp;lt;/goal&amp;gt;&lt;/span&gt;
           &lt;span class=&quot;nt&quot;&gt;&amp;lt;/goals&amp;gt;&lt;/span&gt;
         &lt;span class=&quot;nt&quot;&gt;&amp;lt;/execution&amp;gt;&lt;/span&gt;
       &lt;span class=&quot;nt&quot;&gt;&amp;lt;/executions&amp;gt;&lt;/span&gt;
     &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://stackoverflow.com/questions/174560/sharing-test-code-in-maven&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;maven type&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://zditect.com/blog/54005418.html&lt;/li&gt;
  &lt;li&gt;https://www.quora.com/What-is-the-purpose-to-use-type-in-a-maven-dependency&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;test jar build&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://maven.apache.org/guides/mini/guide-attached-tests.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/spring/multimodule-test-dependency</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/spring/multimodule-test-dependency</guid>
      </item>
    
      <item>
        <title>OKE docker registry github action 적용하기</title>
        
          <description>&lt;h2 id=&quot;docker-login-github-action&quot;&gt;docker login github action&lt;/h2&gt;

&lt;p&gt;우선 docker에서 제공하는 github action이 있다.&lt;br /&gt;
&lt;strong&gt;docker/login-action&lt;/strong&gt;을 사용하면 굉장히 쉽게 container registry에 접근할 수 있다.&lt;/p&gt;

&lt;p&gt;그런데 나는 oracle에서 이게 잘 안됐고, 다음엔 안까먹기 위해 정리해본다.&lt;br /&gt;
여기서 의미하는 여러 value들에 대한 정의가 나한테는 명확하지 않았고 리소스도 많지 않았다.&lt;/p&gt;

&lt;div class=&quot;language-yml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Login to Oracle Container Registry&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;docker/login-action@v2&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;registry&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;icn.ocir.io&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;username&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;password&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;icnocirio&quot;&gt;icn.ocir.io:&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;icn&lt;/strong&gt;의 자리는 region name이다.&lt;br /&gt;
region name은 reference에 명시한 url에서 확인할 수 있다.&lt;br /&gt;
한국은 icn.&lt;/p&gt;

&lt;h3 id=&quot;oci_docker_name&quot;&gt;OCI_DOCKER_NAME:&lt;/h3&gt;

&lt;p&gt;여기서 OCI_DOCKER_NAME은 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;&amp;lt;tenancy-namespace&amp;gt;/&amp;lt;username&amp;gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;tenancy-namespace는 oracle에서 관리하는 tenancy의 id를 가리킨다.&lt;br /&gt;
&lt;strong&gt;Profile &amp;gt; Tenancy &amp;gt; Object storage namespace&lt;/strong&gt; 에서 확인 가능.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;나는 cn********ev (12자리)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;username은 email 형식의 계정이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;나는 ~@gmail.com&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그래서 DOCER_NAME은&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;나는 cn********ev/~@gmail.com&lt;/li&gt;
  &lt;li&gt;혹은 cn********ev/oracleidentitycloudservice/~@gmail.com 이기도 하다는데 난 잘 안됐다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;oci_auth_token&quot;&gt;OCI_AUTH_TOKEN:&lt;/h3&gt;

&lt;p&gt;OCI_AUTH_TOKEN은 oracle cloud에서 발급한 토큰을 말한다.&lt;br /&gt;
&lt;strong&gt;Profile &amp;gt; My profile &amp;gt; Auth tokens&lt;/strong&gt; 에서 발급 가능.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;당연히 발급받은 토큰은 발급 시점에만 key를 확인할 수 있다.&lt;/li&gt;
  &lt;li&gt;발급 시에 복사해두고, 그렇지 못했다면 재발급.&lt;/li&gt;
  &lt;li&gt;나는 3&amp;amp;****************!8 (특수문자 포함 20자리)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;확인-추천&quot;&gt;확인 추천&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;우선 아래 reference 처럼 docker login을 cmd에서 해본다.&lt;/li&gt;
  &lt;li&gt;git action에서 key를 yml에 명시해서 해본다.&lt;/li&gt;
  &lt;li&gt;key를 secrets로 넣어서 해본다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;git action에서 그냥 하려다가 몇 번 실패하면 스트레스가 이만 저만이 아니다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://docs.oracle.com/en-us/iaas/Content/Functions/Tasks/functionslogintoocir.htm&lt;/li&gt;
  &lt;li&gt;https://docs.oracle.com/en-us/iaas/Content/Registry/Concepts/registryprerequisites.htm#regional-availability&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/oci/docker-login</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/oci/docker-login</guid>
      </item>
    
      <item>
        <title>map key로 쉽게 remove 하는 trick과 outer.this 하기</title>
        
          <description>&lt;p&gt;오늘 일하는데 hashmap에서 key들을 받아서 map의 entry를 지우는 코드가 굉장히 지저분했다.&lt;br /&gt;
iterator로 entry를 받아서 조건에 맞는다면 remove.&lt;br /&gt;
그런데 이런 remove가 지저분하게 여러개.&lt;/p&gt;

&lt;p&gt;이 코드를 고치기 위해 방법을 찾다가 재밌는 코드를 발견했다.&lt;/p&gt;

&lt;h2 id=&quot;remove-multiple-keys-from-map-efficiently&quot;&gt;remove multiple keys from map efficiently&lt;/h2&gt;

&lt;p&gt;효율적으로 그리고 깔끔하게 key들로 map을 지워내기.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;removeIf&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;startsWith&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;prefix&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;keySet은 map과 연결되어 keySet에서만 지워도 map이 지워진다는 것이다.
흥미롭다. 어떻게 이게 가능할까.&lt;/p&gt;

&lt;h2 id=&quot;hashmap과-hashmapkeyset-코드-분석&quot;&gt;HashMap과 HashMap.keySet 코드 분석&lt;/h2&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AbstractMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cloneable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Serializable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KeySet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;keySet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ks&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KeySet&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AbstractSet&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;                 &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;               &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;iterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;     &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KeyIterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;containsKey&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;removeNode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Spliterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;spliterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KeySpliterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Consumer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;super&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nc&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;[]&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;NullPointerException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;table&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;modCount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;V&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tab&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;accept&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;modCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mc&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ConcurrentModificationException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;HashMap 코드 내부에 위치한 keySet 코드이다.&lt;br /&gt;
흥미로운건 size, iterator, contains 등 모든 반환 값은 HashMap의 함수나 값을 쓰고 있다는 것.&lt;br /&gt;
그리고 HashMap.this.clear() 와 같은 코드.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;확인할 포인트:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;우선 keySet은 HashMap과 별개라고 생각했는데 keySet이 생성된 이후에도 HashMap을 자유롭게 접근할 수 있다는 점에서 놀랐다. 이게 static도 아닌데 접근이 되서 놀랐는데 덕분에 java에 대한 이해도가 늘었다.&lt;/li&gt;
  &lt;li&gt;HashMap.this 코드가 이해가 안됐다. static도 아니고 이렇게 쓴다니. 이거에 대해선 아래에 다룬다.&lt;/li&gt;
  &lt;li&gt;inner class를 가장 효율적으로 짜는 아주 좋은 예시 코드인 것 같다. 가끔 개발에 쓸 수 있을 것 같다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;java-parentthis-하기&quot;&gt;java parent.this 하기&lt;/h2&gt;

&lt;p&gt;HashMap.this에 대해 이해가 되지 않아서 찾아봤다.&lt;br /&gt;
keySet이 HashMap의 값을 사용할 수 있는 것을 아우르는 중요한 개념이 있다.&lt;/p&gt;

&lt;p&gt;non static inner class는 outer class에 대한 참조를 갖는다.&lt;br /&gt;
그리고 outer class name과 this를 함께 사용하면 이 참조를 얻을 수 있다.&lt;/p&gt;

&lt;p&gt;요긴하게 쓰일 수 있는 개념이자 팁.&lt;br /&gt;
좀 더 이해하기 쉬운 예시를 첨부한다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Outer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
     &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Inner&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
         &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Inner&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;inner&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
             &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
 
         &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Outer&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;outer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
             &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Outer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
         &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
     &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
 &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;결론&quot;&gt;결론&lt;/h2&gt;

&lt;p&gt;그래서 keySet을 사용해서 하는 모든 remove 연산은 실제 hashMap에 영향을 미친다.&lt;br /&gt;
이게 미치는 과정이 흥미롭고 배울점이 많다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;p&gt;multiple keys로 map remove 하기&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://stackoverflow.com/questions/17675804/remove-multiple-keys-from-map-in-efficient-way&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;hashmap.this에 대한 설명&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://stackoverflow.com/questions/16999611/hashmap-this-clear-what-does-this-mean-how-does-this-work&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/tip/java_map_key_remove_and_outer_this</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/tip/java_map_key_remove_and_outer_this</guid>
      </item>
    
      <item>
        <title>OCI cloud shell에서 kubectl 설정하기</title>
        
          <description>&lt;h2 id=&quot;설정하기&quot;&gt;설정하기&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;oci ce cluster create-kubeconfig&lt;/strong&gt;을 통해 cloud shell이 kubectl을 통해 접근할 수 있는 config를 setup한다.&lt;br /&gt;
oci는 낯선데 당연히 aws cli 같은 역할을 하겠지.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;oci ce cluster create-kubeconfig --cluster-id {clusterId} --file $HOME/.kube/config --region ap-seoul-1 --token-version 2.0.0&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이 명령어를 cloud shell에 치면 된다.&lt;/li&gt;
  &lt;li&gt;clusterId는 oracle console에서 확인&lt;/li&gt;
  &lt;li&gt;region은 cluster가 있는 region&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;수행&quot;&gt;수행&lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;userId@cloudshell:~ &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;ap-seoul-1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;oci ce cluster create-kubeconfig &lt;span class=&quot;nt&quot;&gt;--cluster-id&lt;/span&gt; ocid1.cluster.oc1.ap-seoul-1..... &lt;span class=&quot;nt&quot;&gt;--file&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$HOME&lt;/span&gt;/.kube/config &lt;span class=&quot;nt&quot;&gt;--region&lt;/span&gt; ap-seoul-1 &lt;span class=&quot;nt&quot;&gt;--token-version&lt;/span&gt; 2.0.0
New config written to the Kubeconfig file /home/userId/.kube/config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이후에 kubectl이 잘 동작한다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.oracle.com/webfolder/technetwork/tutorials/obe/oci/oke-cloudshell/index.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/oci/kubectl_shell</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/oci/kubectl_shell</guid>
      </item>
    
      <item>
        <title>single table을 사용하는 이유</title>
        
          <description>&lt;p&gt;dynamodb에서는 RDB를 사용하듯이 table을 많이 사용하는 것을 권장하지 않는다.&lt;br /&gt;
AWS에서 성능과 비용 개선을 위해 가이드를 자주 하기도 한다.&lt;/p&gt;

&lt;p&gt;최근 single table에 대한 이점을 다시 돌아볼 기회가 있어서 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;relational-design&quot;&gt;relational design&lt;/h2&gt;

&lt;p&gt;기존의 관계형 DB에서는 일반적으로 여러 table을 두고 사용한다.&lt;br /&gt;
각 table은 다른 table의 foreign key를 갖고, multiple tables에서 join query로 마치 single-table-view를 생성해서 사용한다.&lt;/p&gt;

&lt;p&gt;이런 query는 편리하고 유연하지만, DB 내부에선 굉장히 비싼 operation이고 horiziontal scale out이 어렵다.&lt;/p&gt;

&lt;h2 id=&quot;dynamodb-design&quot;&gt;dynamodb design&lt;/h2&gt;

&lt;p&gt;RDB에서는 scale의 한계가 있지만 dynamodb에서는 scale의 한계가 없다.&lt;br /&gt;
이건 &lt;u&gt;SQL과 NoSQL의 차이&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;이다.&lt;/p&gt;

&lt;p&gt;dynamodb의 중요한 goal 중 하나인데, scale이 증가하더라도 예측 가능한 performance를 제공할 수 있도록 디자인 한다는 것.&lt;br /&gt;
그래서 dynamodb는 scale 할 수 없는 operation 들을 제공하지 않고 있고, join도 그렇다.&lt;/p&gt;

&lt;h2 id=&quot;single-table&quot;&gt;single-table&lt;/h2&gt;

&lt;p&gt;join은 할 수 없으나 join 처럼 하나의 query로 data를 가져오기 위한 방법이 있는데 이게 바로 &lt;strong&gt;single-table design&lt;/strong&gt;이다.&lt;/p&gt;

&lt;p&gt;single-table design에서는 여러 data type들을 하나의 table에 저장하고 client에서 한 번에 query를 해가는 방식이다.&lt;br /&gt;
장/단점과 예시를 보자.&lt;/p&gt;

&lt;h2 id=&quot;single-table-장점&quot;&gt;single-table 장점&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#join과-유사하게-하나의-query로-data를-가져온다&quot;&gt;join과 유사하게 하나의 query로 data를 가져온다.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#여러-table을-사용하지-않아서-monitoringalert-포인트를-줄일-수-있다&quot;&gt;여러 table을 사용하지 않아서 monitoring/alert 포인트를 줄일 수 있다.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#비용을-절약할-수-있다&quot;&gt;비용을 절약할 수 있다.&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;join과-유사하게-하나의-query로-data를-가져온다&quot;&gt;join과 유사하게 하나의 query로 data를 가져온다.&lt;/h3&gt;

&lt;p&gt;위에서 말했듯 하나의 query로 data를 가져올 수 있다.&lt;br /&gt;
query의 개수가 줄어드는 것은 RTT 감소로 인한 성능 개선과 비용 감소로 이어진다.&lt;/p&gt;

&lt;h3 id=&quot;여러-table을-사용하지-않아서-monitoringalert-포인트를-줄일-수-있다&quot;&gt;여러 table을 사용하지 않아서 monitoring/alert 포인트를 줄일 수 있다.&lt;/h3&gt;

&lt;p&gt;aws에서 dynamodb를 소개할 때 DBA가 필요하지 않은 서비스라고 소개했다.&lt;br /&gt;
그만큼 dynamodb는 돈만내면 참 편하게 쓸 수 있는 DB이다.&lt;br /&gt;
db의 throttling이나 RCU/WCU에 대한 관리가 여러 db를 모니터링 하지 않아도 되기 때문에 개발팀 입장에서 일이 많이 줄어든다.&lt;/p&gt;

&lt;h3 id=&quot;비용을-절약할-수-있다&quot;&gt;비용을 절약할 수 있다.&lt;/h3&gt;

&lt;p&gt;2번과 이어지는 내용이다.&lt;br /&gt;
dynamo의 RCU/WCU에는 두 가지 과금 정책이 있는데 ondemand와 provisioned 이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ondemand: 쓰는만큼 돈을 내기&lt;/li&gt;
  &lt;li&gt;provisioned: provision을 설정하고 그 만큼 돈을 내기&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ondemand가 더 싸보이지만 enterprise 급에서는 대부분 provisioned를 사용한다.&lt;/p&gt;

&lt;p&gt;대체적으로 두 가지 이유 때문이다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;급격한 db 요청이 몰릴 때, ondemand에서 RCU/WCU를 늘리더라도 시간이 걸리고 그 사이에 장애가 발생한다. (물론 빨리 늘지만 그래도 시간이 걸린다)&lt;/li&gt;
  &lt;li&gt;provisioned로 계약하면 ondemand 보다 가격이 저렴하다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;provision는 당연히 서비스에서 사용되는 수치보다 한참 넉넉하게 설정하는 편이다.&lt;br /&gt;
10개의 table에 대해 provision이 여유롭게 설정된 것과, 1개의 table로 합쳐서 여유롭게 설정되는 차이에서 비용 절약이 발생한다.&lt;/p&gt;

&lt;h2 id=&quot;single-table-단점&quot;&gt;single-table 단점&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#single-table을-설계하기-위해-학습곡선이-있다&quot;&gt;single-table을 설계하기 위해 학습곡선이 있다.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#새로운-access-pattern을-추가하기-어렵다&quot;&gt;새로운 access pattern을 추가하기 어렵다.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#data-dump가-어렵다&quot;&gt;data dump가 어렵다.&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;single-table을-설계하기-위해-학습곡선이-있다&quot;&gt;single-table을 설계하기 위해 학습곡선이 있다.&lt;/h3&gt;

&lt;p&gt;primaryKey, sortKey에 대한 개념.&lt;br /&gt;
key 중복이 없도록 data 설계. &lt;br /&gt;
GSI와 LSI.&lt;br /&gt;
등에 대해 알고 배워야 한다.&lt;/p&gt;

&lt;p&gt;join은 정답같은 query가 있다고 한다면 dynamo table design은 설계하는 사람마다 다 다르기 때문에 더 어렵기도 하다.&lt;br /&gt;
근데 단점에 학습곡선을 넣는건 단점이 별로 없다는 얘기가 아닐까 싶다. 배우는건 당연하지.&lt;/p&gt;

&lt;h3 id=&quot;새로운-access-pattern을-추가하기-어렵다&quot;&gt;새로운 access pattern을 추가하기 어렵다.&lt;/h3&gt;

&lt;p&gt;RDB의 table join 같은 경우는 table이 추가되고 새로운 query가 필요할 때 join을 다시 짜면 된다.&lt;br /&gt;
그런데 single table에서는 primary key &amp;amp; sort key가 query를 한 번에 해오는데 중요한 요소가 되기 때문에 새로운 pattern이 필요할 때 key 설계가 변경되어야 하는 경우가 있다.&lt;/p&gt;

&lt;p&gt;그래서 dynamodb 설계는 application의 access pattern, usecase 들을 정리하는 것부터 시작한다.&lt;/p&gt;

&lt;h3 id=&quot;data-dump가-어렵다&quot;&gt;data dump가 어렵다.&lt;/h3&gt;

&lt;p&gt;블로그를 예로 들면, 유저와 포스트와 코멘트가 한 테이블에 있는 것이기 때문에 유저 dump가 필요한 경우 쉽지 않다.&lt;/p&gt;

&lt;h2 id=&quot;single-table-예시&quot;&gt;single table 예시&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/aws/dynamodb/single-table-1.png&quot; alt=&quot;table1&quot; /&gt;&lt;/p&gt;

&lt;p&gt;db entity의 구조가 위와 같다고 하자.&lt;/p&gt;

&lt;p&gt;전통적으로는 아래와 같은 RDB table들을 설계할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/aws/dynamodb/single-table-2.png&quot; alt=&quot;table2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;single table에서는 아래와 같이 table을 설계한다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/aws/dynamodb/single-table-3.png&quot; alt=&quot;table3&quot; /&gt;&lt;/p&gt;

&lt;p&gt;요구사항에 따라 primary key, sort key에 맞게 entity를 구분해서 넣는다.&lt;/p&gt;

&lt;h2 id=&quot;참고사항&quot;&gt;참고사항&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;모든 데이터를 하나의 테이블에 넣는다. 그게 안되면 가능한 적은 테이블을 사용한다.&lt;/li&gt;
  &lt;li&gt;PK, SK, GS1PK 같은 key name을 맞춘다.&lt;/li&gt;
  &lt;li&gt;entity의 type을 파악할 수 있도록 attribute를 추가하면 좋다.&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://meansoup.github.io/docs/aws/dynamo/single-table-result&quot;&gt;single table 적용 후기&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://aws.amazon.com/blogs/compute/creating-a-single-table-design-with-amazon-dynamodb/&lt;/li&gt;
  &lt;li&gt;https://www.alexdebrie.com/posts/dynamodb-single-table/&lt;/li&gt;
  &lt;li&gt;https://medium.com/till-engineering/single-table-design-aws-dynamodb-cffd230a371f&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;SQL은 기본적으로 scale up, NoSQL은 scale out으로 확장한다. &lt;a href=&quot;/docs/db/why-use-nosql&quot;&gt;SQL vs NoSQL&lt;/a&gt; 참고 &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/dynamo/single-table</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/dynamo/single-table</guid>
      </item>
    
      <item>
        <title>single table 적용 후기</title>
        
          <description>&lt;p&gt;우리 팀은 dynamodb를 많이 쓰고 있다.&lt;br /&gt;
RDB를 쓰다가 dynamodb로 넘어가서 시행착오가 좀 있었다.&lt;/p&gt;

&lt;p&gt;dynamodb를 처음 적용한 한 모듈은 RDB처럼 table을 나눠서 사용하고 있었다.&lt;br /&gt;
성능 개선을 위한 story를 진행하면서 single table에 대한 얘기가 나왔고 migration을 진행했다.&lt;/p&gt;

&lt;p&gt;사실 한지는 좀 됐는데 single table에 대해 다시 생각해볼 시간이 있어 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;single-table&quot;&gt;single table&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://meansoup.github.io/docs/aws/dynamo/single-table&quot;&gt;single table 이란?&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;table-design-변경&quot;&gt;table design 변경&lt;/h2&gt;

&lt;p&gt;이후에 개발하는 모듈에선 single table을 완전히 적용하기도 했지만&lt;br /&gt;
사실 이번 모듈의 migration은 single table까지는 아니다.&lt;/p&gt;

&lt;p&gt;table을 합치는 방식으로 10개의 table을 4개의 table로 합쳤다.&lt;/p&gt;

&lt;h2 id=&quot;비용-개선&quot;&gt;비용 개선&lt;/h2&gt;

&lt;p&gt;provision WCU가 절반으로 줄었다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;넉넉하게 세팅하던 값이 줄었기 때문이 아닌가 싶다.&lt;/li&gt;
  &lt;li&gt;그리고 scaling을 고려해서 여러 table로 나뉘어 있던 데이터들이 하나의 row에 합쳐지는 것들이 있어서 WCU 개선이 컸던 것으로 생각된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;provision RCU가 50% 정도 늘었다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이건 원인을 잘 모르겠다. 당시 call 수가 늘었는지.. 지금은 정확하게 기억나지는 않는다.&lt;/li&gt;
  &lt;li&gt;개념적으로는 줄어드는게 맞다만.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;성능-개선&quot;&gt;성능 개선&lt;/h2&gt;

&lt;p&gt;이 모듈은 요구사항에 맞게 data를 동기화 해주는게 주 목적이었다.&lt;br /&gt;
db query가 줄어드니 성능은 크게 개선되었다.&lt;br /&gt;
주요 api들의 성능이 40~80% 까지 개선되었다.&lt;/p&gt;

&lt;h2 id=&quot;회고&quot;&gt;회고&lt;/h2&gt;

&lt;p&gt;지금 생각하면 table 수를 더 줄일 수 있었을텐데 싶기도 하고.&lt;br /&gt;
이때는 single query load multiple type entity에 대한 생각이 잘 없었어서 그런 방향으로 성능 개선이 다시 가능할 것 같다.&lt;br /&gt;
물론 바빠서 못함.&lt;/p&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/dynamo/single-table-result</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/dynamo/single-table-result</guid>
      </item>
    
      <item>
        <title>list type casting 하기</title>
        
          <description>&lt;p&gt;이번에 작업하면서 list를 casting 할 일이 있었다.&lt;br /&gt;
대충 표현하면 이런 코드.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;B&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;cm&quot;&gt;/* ... */&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;나는 B의 list가 필요한데 가져온 list는 A인 상황.&lt;/p&gt;

&lt;h2 id=&quot;stream&quot;&gt;stream&lt;/h2&gt;

&lt;p&gt;가장 먼저 생각난건 stream으로 변환하기.&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Collectors&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;toList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;근데 이거 loop를 한 번 돌게 되는게 억울하다.&lt;br /&gt;
그래서 찾아보았다.&lt;/p&gt;

&lt;h2 id=&quot;generic-type-casting&quot;&gt;generic type casting&lt;/h2&gt;

&lt;p&gt;결론부터 말하자면 이렇게 해결할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;?&amp;gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이유는 A가 B의 parent 이지만 List&lt;a&gt;는 List&lt;b&gt;의 parent가 아니기 때문에 type casting이 되지 않는다.&lt;br /&gt;
그치만 **List&lt;a&gt;, List&lt;b&gt; 모두 List&amp;lt;?&amp;gt;의 child 이기 때문에 type casting이 가능하다.**&lt;/b&gt;&lt;/a&gt;&lt;/b&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/tips/generics-listParent.gif&quot; alt=&quot;list casting&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://stackoverflow.com/questions/933447/how-do-you-cast-a-list-of-supertypes-to-a-list-of-subtypes&lt;/li&gt;
  &lt;li&gt;https://docs.oracle.com/javase/tutorial/java/generics/subtyping.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/tip/list-type-casting</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/tip/list-type-casting</guid>
      </item>
    
      <item>
        <title>AWS 비용 효율화</title>
        
          <description>&lt;p&gt;연말이 다가오면 회사에선 항상 비용을 줄이라고 한다.&lt;br /&gt;
매년 비용을 어떻게 줄였는지 간략하게 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;비용들&quot;&gt;비용들&lt;/h2&gt;

&lt;p&gt;AWS에서 service 별로 어떻게 비용이 증가하는지 확인할 수 있다.&lt;br /&gt;
tag를 달아서 운영하는 모듈별로 어떤 비율로 사용하는지.&lt;/p&gt;

&lt;p&gt;비용은 크게 네 가지로 나눌 수 있다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;storage&lt;/li&gt;
  &lt;li&gt;database&lt;/li&gt;
  &lt;li&gt;instance&lt;/li&gt;
  &lt;li&gt;network&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;storage-비용&quot;&gt;Storage 비용&lt;/h2&gt;

&lt;p&gt;storage 비용은 request 비용과 storage 비용으로 나뉜다.&lt;/p&gt;

&lt;h3 id=&quot;request-비용-줄이기&quot;&gt;request 비용 줄이기&lt;/h3&gt;

&lt;p&gt;크기가 작은 경우 dynamoDb에 밀어 넣을 수 있다.&lt;br /&gt;
그렇게 되면 성능도 확보할 수 있고 request 비용도 줄일 수 있다.&lt;/p&gt;

&lt;p&gt;그치만 크기가 큰 경우나 사용성에 따라 되려 dynamo 저장 비용이 커질 수 있다.&lt;br /&gt;
dynamo는 request 비용이 싸고 S3는 storage 비용이 싸다.&lt;/p&gt;

&lt;h3 id=&quot;storage-비용-줄이기&quot;&gt;storage 비용 줄이기&lt;/h3&gt;

&lt;p&gt;storage layering을 통해 s3 오래된 데이터를 cold storage로 이동시킨다.&lt;br /&gt;
S3 Glacier가 분 단위 이상의 검색 시간이 걸려서 사용하지 못했으나 새롭게 나온  &lt;strong&gt;S3 Glacier Instant Retrieval&lt;/strong&gt; 같은 타입에서는 밀리초 단위의 검색 시간 소요하기 때문에 비용을 줄이면서 충분히 사용할 수 있다.&lt;/p&gt;

&lt;p&gt;물론 우리 팀에선 아직 안써봤고 신뢰성이 조금 떨어질 수 있다고 판단했다.&lt;br /&gt;
(dynamo에서 consistency가 늘어졌던 적도 있고..)&lt;/p&gt;

&lt;h2 id=&quot;database-비용&quot;&gt;database 비용&lt;/h2&gt;

&lt;p&gt;database 비용도 비슷한데 RCU/WCU와 storage 비용으로 나뉜다.&lt;/p&gt;

&lt;h3 id=&quot;dynamo-storage-비용-줄이기&quot;&gt;dynamo storage 비용 줄이기&lt;/h3&gt;

&lt;p&gt;유사하게 storage layering으로 오래된 data를 s3로 이동시킨다.&lt;br /&gt;
호출비용과 저장비용을 잘 계산해서 진행해야 한다. 무작정 s3는 되려 비쌀 수 있다.&lt;/p&gt;

&lt;p&gt;잘 사용하지 않는 데이터를 bulk로 s3에 backup하면 비용을 많이 줄일 수 있다.&lt;br /&gt;
다만 서비스 로직 변경이 크다.&lt;/p&gt;

&lt;h3 id=&quot;cu-줄이기&quot;&gt;CU 줄이기&lt;/h3&gt;

&lt;p&gt;CU는 provision을 줄이는 방향으로도 갈 수 있다.&lt;br /&gt;
우리 팀에선 single table로 migration 해서 CU를 크게 줄였다.&lt;/p&gt;

&lt;h2 id=&quot;storage--database-공통-비용-줄이기&quot;&gt;storage &amp;amp; database 공통 비용 줄이기&lt;/h2&gt;

&lt;p&gt;storage나 database 모두 data를 저장하는 곳이다.&lt;br /&gt;
data가 service됨에 따라 data가 쌓이기만 한다면 비용은 계속 증가할 수 밖에 없다.&lt;/p&gt;

&lt;p&gt;따라서 data에 대한 핸들링이 필요하다.&lt;/p&gt;

&lt;h3 id=&quot;garbage-collection-하기&quot;&gt;garbage collection 하기&lt;/h3&gt;

&lt;p&gt;지워야 했던, 지울 수 있는 데이터를 삭제한다.&lt;/p&gt;

&lt;p&gt;삭제가 필요했던 탈퇴한 사용자에 대한 데이터 삭제가 되지 않았다거나.&lt;br /&gt;
관련된 data가 삭제되었으나 남아있는 찌꺼기가 있다거나.&lt;br /&gt;
성능 상의 이슈로 미뤄진 data 삭제 등이 남아있을 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;data-life-cycle-확인하고-조절하기&quot;&gt;data life cycle 확인하고 조절하기&lt;/h3&gt;

&lt;p&gt;data life cycle이 사실 비용에서 가장 중요하다.&lt;br /&gt;
data가 10년이 지나도 쌓이기만 한다면 비용은 증가할 수 밖에.&lt;br /&gt;
1Y 보관기간의 데이터를 6M으로 줄일 수 있다면 storage 비용을 반으로 줄일 수 있다.&lt;/p&gt;

&lt;p&gt;data life cycle을 확인하고 그 정도의 life cycle이 필요한지 확인한다.&lt;br /&gt;
삭제를 하는 경우를 명확하게 정의하고 ttl 설정 혹은 delay batch로 삭제한다.&lt;/p&gt;

&lt;p&gt;사진/동영상의 경우 thumbnail의 lifecycle도 고려가 필요하다.&lt;/p&gt;

&lt;h2 id=&quot;instance-비용&quot;&gt;instance 비용&lt;/h2&gt;

&lt;p&gt;서비스 특성에 따라 instance가 CPU / memory / I/O 중 어디에 bound 되는지 확인할 필요가 있다.&lt;br /&gt;
어느 정도의 instance type과 크기가 필요한지 테스트 해서 적절한 type을 사용한다.&lt;/p&gt;

&lt;h2 id=&quot;network-비용&quot;&gt;network 비용&lt;/h2&gt;

&lt;p&gt;binary가 비효율적으로 흐르지 않는지 확인한다.&lt;br /&gt;
client와 통신에 compression(Gzip 등)이 적용되었는지 확인한다.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;실제로 서비스가 오픈되었다면 심각한 상황이 아니고서야 비용을 크게 줄일만한 부분이 잘 없다.&lt;br /&gt;
우리가 제공하는 서비스 같은 경우는 data가 많이 쌓여서 CPU 비용은 비율이 낮을 정도이다.&lt;/p&gt;

&lt;p&gt;결국 data life cycle을 확인하고 data 비용을 줄여나가는 방향.&lt;br /&gt;
서비스 초기에 life cycle을 잘 잡아두면 도움이 많이 된다.&lt;/p&gt;

&lt;p&gt;내가 생각하기에 어느정도 GC가 진행됐다면 지금 우리팀 같은 상황에선 비용이 새고 있는 곳은 없는 것 같다.&lt;br /&gt;
(작년/재작년에는 새고있는 돈들을 많이 잡았지만)&lt;br /&gt;
결국 이정도 상황에선 &lt;strong&gt;storage layering&lt;/strong&gt;을 어떻게 잘 해나가느냐가 비용을 줄일 수 있는 키가 되지 않을까 싶다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/cost-efficiency</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/cost-efficiency</guid>
      </item>
    
      <item>
        <title>Server Developer, 2022 yearly Retrospection</title>
        
          <description>&lt;p&gt;The year seemed to pass while I handled tasks in order of priority.&lt;br /&gt;
It’s a bit disappointing that I couldn’t spare enough time to polish or develop things at a relaxed pace because I was busy fulfilling top-down ASAP requests.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#automation-or-project-completion&quot;&gt;Automation or Project Completion&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#tactical-ddd&quot;&gt;Tactical DDD&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#team&quot;&gt;Team&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;h2 id=&quot;automation-or-project-completion&quot;&gt;Automation or Project Completion&lt;/h2&gt;

&lt;p&gt;While creating a bot to handle issues, I thought about automating work.&lt;br /&gt;
However, our team leader said, “This is not about automation; it’s about properly completing the project.”&lt;br /&gt;
The issue-handling process is also part of the project, and we had overlooked it.&lt;/p&gt;

&lt;p&gt;He was right.  &lt;br /&gt;
But designing and completing a project while considering statistics and issue handling isn’t easy—especially during a busy year like this one.&lt;br /&gt;
Still, I want to reflect on the things I accomplished this year.&lt;/p&gt;

&lt;h3 id=&quot;1-building-an-issue-response-process&quot;&gt;1. Building an Issue Response Process&lt;/h3&gt;

&lt;p&gt;One module I manage receives around 80 client issue requests per month.&lt;br /&gt;
So far, we’ve had a process where we manually ran scripts to respond to these requests, taking from an hour to a week.&lt;br /&gt;
While it didn’t take very long, the frequent context-switching made it costly.&lt;/p&gt;

&lt;p&gt;One day, I was working on these tasks and got bored, so I built a Slack bot to make it more fun.&lt;br /&gt;
After wrapping up the tasks that week, I used some spare time to create the bot, which now handles client issues.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;refer &lt;a href=&quot;/docs/automation/python-bot&quot;&gt;Building a Slack Bot&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Benefits of the bot&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Saved 40 hours per month on issue handling (30 minutes * 80 requests).
    &lt;ul&gt;
      &lt;li&gt;I found out that the client didn’t request it more because of the slow response.&lt;/li&gt;
      &lt;li&gt;With the bot, clients requested more.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Reduced client wait time by 80 days per month (1 day * 80 requests).
    &lt;ul&gt;
      &lt;li&gt;While this was idle time, having a process to respond quickly—even on weekends—was beneficial.&lt;/li&gt;
      &lt;li&gt;It’s not that client can’t work because it is just waiting time, but I established process that allows client to get a response right away even on weekends.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Adding features to the bot became easy, so other modules’ function were also integrated.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;2-reporting-service-failures&quot;&gt;2. Reporting Service Failures&lt;/h3&gt;

&lt;p&gt;We use Grafana to monitor services, but we don’t see it very often.&lt;br /&gt;
We receive alerts if module success rates drop below a threshold (e.g., 99.9%). For new modules, we started with the idea that there should be “no unknown 500 errors.”&lt;br /&gt;
To address this, We set up an AWS Lambda that sends Slack notifications when unexpected 500 errors occur, allowing us to identify issues immediately.&lt;/p&gt;

&lt;h3 id=&quot;3-designing-statistics&quot;&gt;3. Designing Statistics&lt;/h3&gt;

&lt;p&gt;Extracting statistics from completed modules can be painful.&lt;br /&gt;
Sometimes, we had to dump databases or query a year’s worth of logs to answer once-a-year requests.&lt;br /&gt;
For new modules, We focused on designing statistics from the outset and developed a batch module for organizing them.&lt;/p&gt;

&lt;h2 id=&quot;tactical-ddd&quot;&gt;Tactical DDD&lt;/h2&gt;

&lt;p&gt;Continuing from last year, we’ve been developing with DDD (Domain-Driven Design).&lt;/p&gt;

&lt;p&gt;This year, We&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;Developed one module early in the year.&lt;/li&gt;
  &lt;li&gt;Refactored one module mid-year.&lt;/li&gt;
  &lt;li&gt;Built a new module at the end of the year.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Through these three projects, I deepened my understanding of DDD.&lt;/p&gt;

&lt;p&gt;This year, I studied and summarized the tactical parts of &lt;strong&gt;Vaughn Vernon’s Implementing Domain-Driven Design&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;/docs/ddd/tactical/domain_events&quot;&gt;Domain Events&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/docs/ddd/tactical/vo&quot;&gt;Value Object&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/docs/ddd/tactical/domain-service&quot;&gt;Domain Service&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;/docs/ddd/tactical/entity&quot;&gt;Entity&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Aggregate&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Even though reading summaries can give an “aha!” moment, team members had different interpretations of DDD concepts during development.&lt;br /&gt;
I shared my summaries within the team, which led to valuable discussions and personal growth in design skills.&lt;/p&gt;

&lt;h3 id=&quot;1-aggregate&quot;&gt;1. Aggregate&lt;/h3&gt;

&lt;p&gt;Vaughn Vernon mentions that aggregates are the most ambiguous part of DDD.&lt;br /&gt;
This was also the most debated topic within our team.&lt;/p&gt;

&lt;p&gt;We initially designed one module with an overly large aggregate, which felt like a &lt;strong&gt;code smell&lt;/strong&gt;.&lt;br /&gt;
Studying aggregates further taught me the importance of size and criteria for dividing them.&lt;br /&gt;
Experiencing the downsides of large aggregates firsthand was a great learning opportunity.&lt;/p&gt;

&lt;h3 id=&quot;2-domain-events&quot;&gt;2. Domain Events&lt;/h3&gt;

&lt;p&gt;Our team doesn’t usually use domain events.&lt;br /&gt;
However, after studying the concept and sharing it internally, I received feedback suggesting many areas where domain events could be applied.&lt;br /&gt;
While it wasn’t feasible to adopt domain events immediately due to project constraints, I learned to recognize situations where they would have been beneficial.&lt;/p&gt;

&lt;h2 id=&quot;team&quot;&gt;Team&lt;/h2&gt;

&lt;p&gt;I think our team collaborates well and operates efficiently.&lt;br /&gt;
This year, some of our team processes improved significantly.&lt;/p&gt;

&lt;h3 id=&quot;1-standardizing-and-splitting-stories&quot;&gt;1. Standardizing and Splitting Stories&lt;/h3&gt;

&lt;p&gt;We break tasks into stories.&lt;br /&gt;
This year, we standardized how we document development stories, reducing the time spent creating stories and ensuring no tasks were missed.&lt;br /&gt;
A standardized development story looks like this.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Design the implementation.&lt;/li&gt;
  &lt;li&gt;Write acceptance tests.&lt;/li&gt;
  &lt;li&gt;Implement interfaces.&lt;/li&gt;
  &lt;li&gt;Write scenario tests.&lt;/li&gt;
  &lt;li&gt;Implement the domain.&lt;/li&gt;
  &lt;li&gt;Implement use cases.&lt;/li&gt;
  &lt;li&gt;Pass scenario tests.&lt;/li&gt;
  &lt;li&gt;Pass acceptance tests.&lt;/li&gt;
  &lt;li&gt;Retrospect.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Unnecessary cards are removed during the design phase.&lt;br /&gt;
For example, if only part of the domain changes without external impact, tests or interface cards can be discarded.&lt;br /&gt;
Clearly splitting stories made task distribution smoother.&lt;/p&gt;

&lt;h3 id=&quot;2-story-point-estimation&quot;&gt;2. Story Point Estimation&lt;/h3&gt;

&lt;p&gt;We previously estimated tasks in amount of time.&lt;br /&gt;
we switched out estimation to story points, which estimate based on amount of work.&lt;br /&gt;
With story points and team MH (man-hours), we now understand how many stories we can handle.&lt;/p&gt;

&lt;p&gt;Interestingly, our rotating Scrum leaders tend to aim for maximum story points.&lt;/p&gt;

&lt;h3 id=&quot;3-priority-based-schedulingbgh&quot;&gt;3. Priority-Based Schedulingbgh&lt;/h3&gt;

&lt;p&gt;We manage schedules by stacking stories in a backlog.&lt;br /&gt;
This year, we assigned priorities (high, mid, low) to stories and adjusted them during Scrum planning.&lt;br /&gt;
By focusing on urgent priorities first and aligning story points with sprint goals, we reduced the risk of over-planning or addressing less critical tasks first.&lt;/p&gt;

&lt;h3 id=&quot;4-bonus-team-leadership&quot;&gt;4. Bonus. Team Leadership&lt;/h3&gt;

&lt;p&gt;At year-end, I attended company training that included a week-long team project.&lt;br /&gt;
The project involved working with members from different teams.&lt;br /&gt;
In this training, many teams said they set up nights to complete their final projects.
In the first meeting, I noticed the meeting didn’t go well, so I took the lead.&lt;/p&gt;

&lt;p&gt;I led the team through design discussions, sharing plans, writing tests, creating interfaces, distributing assignments, etc.&lt;br /&gt;
This experience reinforced my confidence in both team-based work and leadership. It was fun being a leader for the first time outside my usual team.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;Lesson of the Year is &lt;strong&gt;Doing the same work in the same way is boring.&lt;/strong&gt;&lt;br /&gt;
I wanted to try new things but it was not easy.&lt;br /&gt;
Next year, I hope to work in a new way or on something entirely new for more fun.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/retrospect/2022</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/retrospect/2022</guid>
      </item>
    
      <item>
        <title>telnet 없을 때 connection 확인하기</title>
        
          <description>&lt;p&gt;서버에 연결이 잘 되는지를 확인할 때 telnet이나 ping을 사용하곤 한다.&lt;br /&gt;
권한 문제 등으로 연결이 되지 않거나 서버가 떠있지 않은 경우를 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;문제는 alpine 이미지로 생성한 docker를 접속할 때를 대표적으로 telnet이나 ping이 없는 경우가 있다는 것.&lt;/p&gt;

&lt;p&gt;굉장히 파워풀한 해결책을 가져왔다.&lt;/p&gt;

&lt;h2 id=&quot;telnet-없이-telnet-하기&quot;&gt;telnet 없이 telnet 하기&lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; telnet://127.0.0.1:22
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이거하나면 어디든.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://gist.github.com/Khoulaiz/41b387883a208d6e914b&quot;&gt;https://gist.github.com/Khoulaiz/41b387883a208d6e914b&lt;/a&gt;&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux-commands/telnet-by-curl</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux-commands/telnet-by-curl</guid>
      </item>
    
      <item>
        <title>flutter theme</title>
        
          <description>&lt;p&gt;flutter에서 간단하게 테마를 적용할 수 있는 툴이 있다.&lt;br /&gt;
디자이너가 아닌 경우에 색깔을 선택하는데도 도움이되고, 나처럼 front-end 실력이 부족한 경우에 크게 도움이 되는 것 같다.&lt;/p&gt;

&lt;p&gt;별건 없으니 나중에 내가 보기 위해&lt;/p&gt;

&lt;h2 id=&quot;pubdev-readme&quot;&gt;pub.dev readme&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://pub.dev/packages/flex_color_scheme&quot;&gt;https://pub.dev/packages/flex_color_scheme&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;playground&quot;&gt;playground&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://rydmike.com/flexcolorscheme/themesplayground-v6/#/&quot;&gt;https://rydmike.com/flexcolorscheme/themesplayground-v6/#/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;playground에서 선택을하고 copy만 하면 적용할 수 있다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/flutter/flutter-theme</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/flutter/flutter-theme</guid>
      </item>
    
      <item>
        <title>DDD의 Aggregate란? Aggregate를 적절하게 만들기</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;DDD tactical components&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/ddd/tactical/vo&quot; class=&quot;btn&quot;&gt;VO&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/entity&quot; class=&quot;btn&quot;&gt;Entity&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain-service&quot; class=&quot;btn&quot;&gt;Domain Service&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/domain_events&quot; class=&quot;btn&quot;&gt;Domain Events&lt;/a&gt;
&lt;a href=&quot;/docs/ddd/tactical/aggregate&quot; class=&quot;btn btn-purple&quot;&gt;Aggregate&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;em&gt;에그리게잇은 모든 DDD의 전술적인 지침 중에서도 무엇보다 정확히 규명되지 않은 패턴 중 하나다. - Vaughn Vernon&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;aggregate&quot;&gt;aggregate?&lt;/h2&gt;

&lt;p&gt;에그리게잇이란 단지 공통 부모 아래 긴밀하게 연결된 객체의 그래프를 묶는 방법 중 하나가 아니다.  &lt;br /&gt;
이런 생각들로 잘못 모델링 된 aggregate들이 생겨난다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;컴포지션의 편의에 맞춰 설계해서 에그리게잇을 너무 크게 만들어버리는 경우&lt;/li&gt;
  &lt;li&gt;너무 걷어내서 고정자를 보호하지 못하는 에그리게잇을 만드는 경우&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;큰-aggregate&quot;&gt;큰 aggregate&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;A는 ~를 포함한다.&lt;/em&gt; 에 중점을 두고 aggregate을 설계한다면 큰 aggregate을 만들기 쉽다.&lt;br /&gt;
옳지 않다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;장점&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;A에 포함된 모델들의 변경에 따라 모든 부분을 보호하기 위해 이런 설계를 할 수 있다.&lt;/li&gt;
  &lt;li&gt;A를 내부의 객체들을 포함한 아주 큰 aggregate으로 모델링하면 의도치 않은 client가 누락되지 않도록 보호할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;단점&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;크기가 큰 에그리게잇은 처음엔 그럴싸해 보였지만 실제로 실용적이진 않다.&lt;/li&gt;
  &lt;li&gt;에그리게잇의 단위가 크기 때문에 트랜잭션이 실패하기 쉽다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;다수의-aggregate&quot;&gt;다수의 aggregate&lt;/h2&gt;

&lt;p&gt;동시성 문제를 해결하기 위해 아래와 같은 구조를 사용하기도 한다. 
이런 구조는 aggregate의 invirant를 동시에 발생하는 변경으로부터 보호할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/ddd/strategic/aggregate_toomany.png&quot; alt=&quot;다수의 aggregate&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;장점&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;트랜잭션에 이점이 있다. 성공하기 쉽다.&lt;/li&gt;
  &lt;li&gt;다른 aggregate 인스턴스들을 동시에 안전하게 생성할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;단점&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;클라이언트가 사용하는 관점에서 여러 개의 작은 aggregate은 불편할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;큰-aggregate-vs-다수-aggregate&quot;&gt;큰 aggregate vs 다수 aggregate&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;큰 에그리게잇은 에그리게잇 내부에서 모두 수행하는 (return void) CQS command로 수행되고&lt;/li&gt;
  &lt;li&gt;다수 에그리게잇은 각 메소드가 새로운 에그리게잇 인스턴스를 반환하는 (return Aggregate&lt;T&gt;) CQS query로 수행된다&lt;/T&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;다수의 aggregate 모델링에서는 다른 aggregate에 대해서 얼마든지 동시에 생성할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;트랜잭션에 이점이 있다. 큰 aggregate에서 문제가 되는 부분.&lt;/li&gt;
  &lt;li&gt;클라이언트가 사용하는 관점에서 여러 개의 작은 에그리게잇은 불편할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;모델링-규칙&quot;&gt;모델링 규칙&lt;/h2&gt;

&lt;h3 id=&quot;invirant&quot;&gt;invirant&lt;/h3&gt;

&lt;p&gt;invirant는 aggregate의 모델링 규칙을 설명할 때 가장 중요한 개념으로 :star:&lt;br /&gt;
&lt;strong&gt;언제나 일관성을 유지해야 한다는 비즈니스 규칙&lt;/strong&gt;이다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;c = a + b&lt;/li&gt;
    &lt;li&gt;a = 2&lt;/li&gt;
    &lt;li&gt;b = 3&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;같은 조건 이 있을 때 c가 5가 아닌 경우는 시스템의 invirant를 위반하는 것이다.&lt;br /&gt;
c가 일관성을 갖게 하기 위해 모델의 특성을 둘러싸는 경계를 설계해야 한다.&lt;br /&gt;
그렇다면 a, b, c는 하나의 aggregate에 속하게 되는 것.&lt;/p&gt;

&lt;/div&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;c = a + b&lt;/li&gt;
    &lt;li&gt;a = 2&lt;/li&gt;
    &lt;li&gt;b = 3&lt;/li&gt;
    &lt;li&gt;d + e = 5&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;같은 조건 이 있을 때 c가 5가 아닌 경우는 시스템의 invirant를 위반하는 것이다.
c가 일관성을 갖게 하기 위해 모델의 특성을 둘러싸는 경계를 설계해야 한다.
그렇다면 a, b, c는 하나의 aggregate에 속하게 되는 것.&lt;/p&gt;

  &lt;p&gt;여기에 마지막 조건이 추가된다고 보자.
a, b, c는 하나의 aggregate이겠지만, d, e는 관련이 없는 다른 aggregate이 될 것이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;진짜-invirant를-일관성-경계-안에서-모델링하라&quot;&gt;진짜 invirant를 일관성 경계 안에서 모델링하라&lt;/h3&gt;

&lt;p&gt;가장 먼저 invirant를 소개한 것은 bounded context에서 aggregate을 찾으려면 모델의 진짜 invirant를 이해해야 하기 때문이다.&lt;br /&gt;
invirant를 알아야 aggregate으로 묶어야 할 객체가 무엇인지 결정할 수 있다.&lt;/p&gt;

&lt;p&gt;일관성 경계는 어떤 요청이 수행되든 경계 안의 모든 대상이 invirant에 대한 비즈니스 규칙들을 준수하도록 논리적으로 보장해야 한다.  &lt;br /&gt;
이 경계 밖의 일관성은 aggregate과 무관하다.&lt;br /&gt;
그러므로 aggregate은 트랜잭션의 일관성 경계와 같은 개념이다.&lt;/p&gt;

&lt;p&gt;올바르게 설계된 aggregate은 단일 트랜잭션 내에서 완벽한 일관성을 유지하면서 비즈니스 요구사항과 그 invirant에 맞춰 수정되어야 한다.&lt;br /&gt;
또 하나의 트랙잭션당 하나의 aggregate만 수정되어야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;경험적으로 얻어진 aggregate을 사용하는 가장 중요한 이유라고&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;작은-aggregate으로-설계하라&quot;&gt;작은 aggregate으로 설계하라&lt;/h3&gt;

&lt;p&gt;모든 트랜잭션이 성공하는 경우에도 큰 aggregate을 사용하는 것은 성능과 확장성에 문제가 있다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;데이터가 많이 쌓인 상황에서 데이터를 추가하고 싶을 때도 한 번에 가져오는 데이터의 크기가 너무 많다.&lt;/li&gt;
  &lt;li&gt;이를 막기 위해 지연로딩을 하기도 하지만 지연로딩으로도 해결할 수 없는 경우가 있다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/ddd/strategic/aggregate_big.png&quot; alt=&quot;큰 aggregate&quot; /&gt;&lt;br /&gt;
다이어그램의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;0 ... *&lt;/code&gt; 에 속으면 안된다 0이 되는 경우는 거의 없고 대부분은 시간이 지나면 계속 증가한다.&lt;br /&gt;
결국 큰 aggregate은 시간이 흐를수록 더 나빠진다.&lt;/p&gt;

&lt;p&gt;위 예제를 보면 거짓 invirant와 컴포지션적 편의성이 설계를 주도했기 때문에 시작부터 문제가 있었다.&lt;br /&gt;
트랜잭션의 성공적인 종료, 성능, 확장성에 안좋은 영향을 미쳤다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;그럼 얼마나 작아야할까?&lt;/strong&gt;&lt;br /&gt;
당연한 말이지만, 무작정 작지도 않고 너무 크지도 않게 필요한 만큼만 작아야 한다.&lt;/p&gt;

&lt;p&gt;aggregate은 도메인 전문가가 규칙으로 구체화하지 않더라도 다른 대상과 일관성을 유지해야 한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;product가 name과 description을 갖는다면 name과 description이 일관성이 맞지 않는건 상상할 수 없다.&lt;br /&gt;
둘 중 하나를 바꾸고 다른 것을 그대로 두는 경우는 철자를 고치거나 description을 name에 맞게 바꾸는 정도일 것.&lt;br /&gt;
도메인 전문가가 비즈니스 규칙으로 명시하지 않더라도 여기에 비즈니스 규칙이 녹아있는 것.&lt;/p&gt;

&lt;/div&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;Qi4j를 사용한 한 프로젝트에서 니클라스 헤드만의 팀은 aggregate을 설계할 때 70 퍼센트는 단일 엔티티와 vo의 aggregate으로 설계하고 남은 30 퍼센트는 두 세개의 엔티티가 필요했다고 한다.  &lt;br /&gt;
대부분 이런 것은 아니지만 높은 비율로 aggregate 루트 엔티티를 하나로 구성할 수 있다.&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;최대한 나누는 방향을 고려하는데, 고려할 때 invirant를 확인한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;BacklogItem«Aggregate root»에 Task«Entity»가 있다&lt;br /&gt;
이 둘을 나눠야 하지는 않을지 고민해보고 그 기준으로 invirant가 있는지 확인한다.&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;크기가 작은 aggregate은 성능과 확장성이 좋고, 커밋을 가로막는 문제가 없어 트랜잭션 성공 가능성도 높다.&lt;br /&gt;
따라서 크기를 제한하는 편이 현명하다.&lt;br /&gt;
혹시 일관성 규칙이 꼭 필요한 상황에서는 엔티티나 컬렉션을 추가하고 그러면서도 전체 크기는 가능한 작게 유지하자.&lt;/p&gt;

&lt;h4 id=&quot;유스케이스를-전부-믿지는-말기&quot;&gt;유스케이스를 전부 믿지는 말기&lt;/h4&gt;

&lt;p&gt;도메인 전문가가 만든 유스케이스는 설계에 영항을 크게 미친다.&lt;br /&gt;
그러나 유스케이스는 개발자와 모델링 관점이 포함되지 않았다는 것을 생각하야 한다.&lt;br /&gt;
각 유스케이스와 현재의 모델은 조화를 이뤄야 하고 여기엔 aggregate에 대한 결정도 포함된다.&lt;/p&gt;

&lt;p&gt;특정 유스케이스 때문에 여러 aggregate를 수정해야 한다면 유스케이스의 진짜 목적이 여러 트랜잭션에 있는지 하나의 트랜잭션 안에서 이뤄지는지 반드시 확인해야 한다.
&lt;strong&gt;여러 aggregate을 수정하는 것이 하나의 트랜잭션에서 필요하다면&lt;/strong&gt; 잘 작성된 유스케이스라고 해도 진짜 aggregate을 정확히 반영하지 못할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;유스케이스가 무조건 하나의 트랜잭션에서 이뤄져야하는 것은 아니다. 여러 트랜잭션일 수 있다. 단순히 여러 aggregate 인스턴스가 하나의 트랜잭션에서 수정되는 것만 막으면 된다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;하나의 트랜잭션에서 일관성을 유지해주길 기대하는 유스케이스가 있다고 해서 반드시 지켜야하는 것은 아니다.
이런 경우 대부분 aggregate 사이의 결과적 일관성을 통해 비즈니스 목표를 달성할 수 있다.&lt;/p&gt;

&lt;p&gt;유스케이스를 &lt;strong&gt;그대로 따르기만 하면 통제하기 힘든 설계로 이어질 수 있다&lt;/strong&gt;.
유스케이스를 그냥 따르는 것이 아니라 &lt;strong&gt;비판적으로 살펴보고 면밀히 확인&lt;/strong&gt;해야 한다.
필요에 따라다시 유스케이스를 써야할 수도 있다.&lt;/p&gt;

&lt;h3 id=&quot;id로-다른-aggregate을-참조하라&quot;&gt;ID로 다른 aggregate을 참조하라&lt;/h3&gt;

&lt;p&gt;aggregate을 설계하면서 객체 그래프를 깊이 탐색하는 컴포지션 구조를 설계할 수도 있지만 이는 aggregate에 맞지 않는다.
aggregate은 다른 aggregate 루트로의 참조를 가질 수 있다.
그렇지만 이는 참조된 aggregate을 참조하고 있는 aggregate의 일관성 경계 안쪽에 위치시킨다는 의미가 아니다.&lt;/p&gt;

&lt;h4 id=&quot;aggregate을-가지고-있는-경우&quot;&gt;aggregate을 가지고 있는 경우&lt;/h4&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BacklogItem&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ConcurrencySafeEntity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Product&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;product&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/ddd/strategic/aggregate_has.png&quot; alt=&quot;aggregate이 aggregate을 가진 경우&quot; /&gt;&lt;/p&gt;

&lt;p&gt;이런 구조는 좋지 않지만 이런 구조를 갖는 경우 고려해야할 것들이 있다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;참조하는 aggregate과 참조된 aggregate이 하나의 트랜잭션 안에서 수정되면 안된다.&lt;/li&gt;
  &lt;li&gt;하나의 트랜잭션에서 여러 인스턴스를 수정하고 있다면 일관성 경계가 잘못되었을 경우가 많다.&lt;/li&gt;
  &lt;li&gt;2번과 유사하게 수정이 묶여있는 aggregate에 영향을 미친다면 원자적 일관성 대신 결과적 일관성을 사용해야 한다는 표시일 수 있다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;객체 참조가 아닌 ID를 참조함으로서 이런 상황을 완전히 피할 수 있다.&lt;/p&gt;

&lt;h4 id=&quot;참조id를-가지고-있는-경우&quot;&gt;참조(Id)를 가지고 있는 경우&lt;/h4&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BacklogItem&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ConcurrencySafeEntity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ProductId&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;productId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/ddd/strategic/aggregate_hasnot.png&quot; alt=&quot;aggregate이 aggregate을 가지지 않은 경우&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;참조를 즉시 가져올 필요가 없기 때문에 작아진다.&lt;/li&gt;
  &lt;li&gt;인스턴스를 가져올 때 elapsed가 짧고 메모리가 적게 필요하기 때문에 모델의 성능도 개선된다.&lt;/li&gt;
  &lt;li&gt;메모리 할당 비용과 GC에도 긍정적인 영향을 미친다.&lt;/li&gt;
  &lt;li&gt;그렇다고 모델을 전혀 탐색할 수 없는건 아니다.
    &lt;ul&gt;
      &lt;li&gt;aggregate 내부에서 리파지토리를 사용하거나 aggregate 사용 전에 repository나 domain service를 통해 객체를 조회할 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;경계의-밖에서-결과적-일관성eventual-consistency을-사용하라&quot;&gt;경계의 밖에서 결과적 일관성(Eventual Consistency)을 사용하라&lt;/h3&gt;

&lt;p&gt;하나의 aggregate 인스턴스에서 커맨드를 수행할 때 하나 이상의 aggregate에서 추가적인 비즈니스 규칙이 수행돼야 한다면 결과적 일관성을 사용하자.&lt;br /&gt;
큰 규모의, 트래픽이 많은 엔터프라이즈에서는 &lt;strong&gt;aggregate 인스턴스가 절대적이고 완전하게 일관성을 유지할 수 없다는 점을 받아들인다면&lt;/strong&gt;, 결과적 일관성이 더 적은 인스턴스가 관련된 더 작은 규모에서도 의미있다는 사실을 좀 더 쉽게 이해할 수 있다.&lt;/p&gt;

&lt;p&gt;한 인스턴스가 수정되고 관련된 다른 수정이 완료될 때까지 어느정도 시간 지연이 용납될 수 있는지 도메인 전문가에게 물어보자.&lt;br /&gt;
&lt;strong&gt;개발자들은 원자적 변경의 사고방식에 사로잡혀있기 마련이고 도메인 전문가는 지연된 일관성에 더 관대하다.&lt;/strong&gt;&lt;/p&gt;

&lt;h4 id=&quot;결과적-일관성을-지원하는-방법&quot;&gt;결과적 일관성을 지원하는 방법&lt;/h4&gt;

&lt;ol&gt;
  &lt;li&gt;aggregate 함수가 하나 이상의 비동기 구독자에게 제때 전달되는 도메인 이벤트를 발행한다.&lt;/li&gt;
  &lt;li&gt;각각의 구독자가 다른 유형의 aggregate 인스턴스를 가져오고 그에 기반해 동작을 수행한다.&lt;/li&gt;
  &lt;li&gt;각 구독자는 분리된 트랜잭션 내에서 수행되며 트랜잭션당 하나의 인스턴스만 수정한다는 aggregate 규칙을 따른다.&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BacklogItem&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ConcurrencySafeEntity&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
   &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;commitTo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sprint&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aSprint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
      &lt;span class=&quot;nc&quot;&gt;DomainEventPublisher&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;publish&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;BacklogItemCommitted&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
                  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;tenantId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt;
                  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;backlogItemId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt;
                  &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;sprintId&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()));&lt;/span&gt;
   &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 &lt;u&gt;domain event를 발행해서 다른 트랜잭션에서 다른 aggregate을 수정&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;하도록 한다.&lt;/p&gt;

&lt;h4 id=&quot;결과적-일관성-사용-여부-결정하기&quot;&gt;결과적 일관성 사용 여부 결정하기&lt;/h4&gt;

&lt;p&gt;트랜잭션을 사용할지 결과적 일관성을 사용할지 결정하기 쉽지 않다.&lt;br /&gt;
에릭 에반스의 지침을 참고하면 도움이 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;일관성을 보장하는 주체가 유스케이스를 수행하는 사용자의 일이라면 트랜잭션을 통해 일관성을 보장하자.&lt;/li&gt;
  &lt;li&gt;일관성을 보장하는 주체가 다른 사용자나 시스템이라면 결과적 일관성을 선택하자.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;규칙을-어기는-경우&quot;&gt;규칙을 어기는 경우&lt;/h3&gt;

&lt;p&gt;충분한 이유가 있을 때만 규칙을 어겨야 한다.
경험에 의지해서 규칙을 지키지 않아야할 변명거리를 찾아선 안된다.&lt;/p&gt;

&lt;p&gt;반버논이 얘기하는 규칙을 어길만한 사례들&lt;/p&gt;

&lt;h4 id=&quot;1-사용자-인터페이스의-편의&quot;&gt;1. 사용자 인터페이스의 편의&lt;/h4&gt;

&lt;p&gt;편의를 위해 사용자가 한 번에 여러 일의 공통 특성을 정의해 배치를 생성할 수 있도록 허용할 때도 있다.&lt;/p&gt;

&lt;h4 id=&quot;2-기술적-메커니즘의-부족&quot;&gt;2. 기술적 메커니즘의 부족&lt;/h4&gt;

&lt;p&gt;결과적 일관성을 위해 메시징이나 타이머, 백그라운드 쓰레드와 같은 추가적인 처리 기능이 필요할 수 있다.
이런 메커니즘을 전혀 제공하지 않고 있다면 큰 aggregate을 생성하는 방향으로 가게될 확률이 높고 aggregate을 변경하거나 하나의 트랜잭션에서 둘 이상의 aggregate을 수정해야할 수도 있다.&lt;/p&gt;

&lt;h4 id=&quot;3-글로벌-트랜잭션&quot;&gt;3. 글로벌 트랜잭션&lt;/h4&gt;

&lt;p&gt;two-phase commit transaction을 엄격하게 지켜야하는 경우도 고려가 필요하다.
그치만 꼭 바운디드 컨텍스트 내에서 다수의 aggregate 인스턴스를 한 번에 수정해야하지 않을수도 있다.&lt;/p&gt;

&lt;h4 id=&quot;4-쿼리-성능&quot;&gt;4. 쿼리 성능&lt;/h4&gt;

&lt;p&gt;다른 aggregate에 대해 직접 객체 참조를 유지하는 편이 최선일 때가 있다.
리파지토리의 쿼리 성능 문제를 해결하는데 사용될 수도 있다.&lt;/p&gt;

&lt;h3 id=&quot;구현&quot;&gt;구현&lt;/h3&gt;

&lt;p&gt;그래서 어떻게 해야할까.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;고유 ID와 root entity를 생성한다. 하나의 entity를 aggregate root로 모델링한다.&lt;/li&gt;
  &lt;li&gt;가능하면 aggregate 내부를 entity보다는 VO로 모델링한다. (entity/vo 참고)&lt;/li&gt;
  &lt;li&gt;‘데메테르의 법칙’과 ‘묻지 말고 시켜라’를 사용한다.
    &lt;ul&gt;
      &lt;li&gt;데메테르의 법칙: 서버의 구조를 클라이언트가 완벽하게 알지 못하고 인터페이스만 제공받는다.&lt;/li&gt;
      &lt;li&gt;묻지말고 시켜라: 클라이언트가 서버 객체의 일부를 요구해선 안되고 자신이 갖고 있는 상태에 기반해 결정하고 서버에게 무엇을 할지 시켜야 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Implement Domain Driven Design (chapter5 Entity), Vaughn Vernon&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;domain event를 통해 side effect으로 발생한 aggregate의 transaction을 분리할 수 있다. &lt;a href=&quot;/docs/ddd/tactical/domain_events&quot;&gt;domain event&lt;/a&gt; 참고 &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/tactical/aggregate</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/tactical/aggregate</guid>
      </item>
    
      <item>
        <title>10 Things to Consider When Developing a Synchronization Server</title>
        
          <description>&lt;p&gt;As a developer worked on synchronization servers for several years, my team and I have been responsible for most of the synchronization services provided by our company.&lt;br /&gt;
Here are some key points that I’ve learned from developing synchronization servers that handle requests from hundreds of millions of MAU.&lt;/p&gt;

&lt;h2 id=&quot;key-considerations-in-the-synchronization-domain&quot;&gt;Key Considerations in the Synchronization Domain&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#1-whose-synchronization-is-it&quot;&gt;Whose Synchronization Is It?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-syncing-deletions&quot;&gt;Syncing Deletions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-safe-and-quick-actual-deletion&quot;&gt;Safe and Quick Actual Deletion&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-considering-faster-deletions&quot;&gt;Considering Faster Deletions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-handling-synchronization&quot;&gt;Handling Synchronization&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-managing-initial-synchronization&quot;&gt;Managing Initial Synchronization&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-ensuring-no-misses-in-downsync&quot;&gt;Ensuring No Misses in Downsync&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#8-considering-partial-errors&quot;&gt;Considering Partial Errors&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#9-considering-legal-requirements&quot;&gt;Considering Legal Requirements&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#10-managing-policies&quot;&gt;Managing Policies&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;1-whose-synchronization-is-it&quot;&gt;1. Whose Synchronization Is It?&lt;/h3&gt;

&lt;p&gt;The most important aspect of synchronization is &lt;strong&gt;whose data is being synchronized&lt;/strong&gt;.&lt;br /&gt;
Understanding the target of synchronization leads to a clear domain design.&lt;/p&gt;

&lt;p&gt;Is the synchronization for a single user?&lt;br /&gt;
Is it for multiple devices?  &lt;br /&gt;
Is it for shared use with others?&lt;br /&gt;
Or is it a publicly open synchronization?&lt;/p&gt;

&lt;p&gt;The type of synchronization determines the data marked on the server.&lt;br /&gt;
Policies such as the relationship between the data creator and ownership, and the permissions to view and modify the data, will differ.&lt;/p&gt;

&lt;h3 id=&quot;2-syncing-deletions&quot;&gt;2. Syncing Deletions&lt;/h3&gt;

&lt;p&gt;When a user deletes data, it typically gets removed from the server.&lt;br /&gt;
However, in synchronization, &lt;strong&gt;deletions must also be synchronized&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;If data is deleted on one device, it should also be deleted on other devices.&lt;br /&gt;
If one user deletes data, other users should no longer be able to access that data.&lt;/p&gt;

&lt;p&gt;Even if multiple devices are involved or if a user synchronizes months later, the deletion should still be reflected in the service.&lt;br /&gt;
Syncing deletions often requires &lt;strong&gt;minimal metadata for aligning deletions&lt;/strong&gt;, so it might be okay to delete the actual file or data at this point.&lt;/p&gt;

&lt;p&gt;Syncing deletions means &lt;strong&gt;distinguishing between synchronized deletions and actual data deletion&lt;/strong&gt; and not confusing the two.&lt;/p&gt;

&lt;h3 id=&quot;3-safe-and-quick-actual-deletion&quot;&gt;3. Safe and Quick Actual Deletion&lt;/h3&gt;

&lt;p&gt;Unlike the deletion to sync, there are actual deletion as well.
This often happens when a user leaves.&lt;br /&gt;
Even in the deletion synchronization, data excluding meta data may be deleted.&lt;/p&gt;

&lt;p&gt;When actual data deletion occurs, &lt;strong&gt;mark it for deletion and handle it in batches via events&lt;/strong&gt;.&lt;br /&gt;
Actual data deletion takes longer, but batching allows for quicker responses to users and safer failure handling and retries.&lt;/p&gt;

&lt;p&gt;All services should handle deletions safely, but extra care is needed when deleting user data.&lt;br /&gt;
It’s crucial to log sufficiently, though not excessively, to handle issues like “My photos were deleted!”&lt;/p&gt;

&lt;h3 id=&quot;4-considering-faster-deletions&quot;&gt;4. Considering Faster Deletions&lt;/h3&gt;

&lt;p&gt;There are times when all data of a specific user needs to be deleted, such as when a user leaves, due to GDPR’s right to erasure, or due to expiration or service policies.&lt;br /&gt;
Deletion may not occur as expected, and if the user syncs during the deletion, there’s a risk they may receive partially deleted data.&lt;/p&gt;

&lt;p&gt;Using a concept like revision allows you to make it appear as if the user’s data has been deleted by changing their revision.&lt;br /&gt;
This is also useful for batch processing.&lt;/p&gt;

&lt;p&gt;For example, raising a user’s revision from 2 to 3 can make it seem as if the data from revision 2 has been wiped.&lt;br /&gt;
Even if revision 2 is processed later in a batch, there won’t be any issues.&lt;br /&gt;
And the user will feel that the data has been wiped cleanly.&lt;/p&gt;

&lt;h3 id=&quot;5-handling-synchronization&quot;&gt;5. Handling Synchronization&lt;/h3&gt;

&lt;p&gt;The method to handle synchronization on the server side is to use a concept like pageToken.&lt;br /&gt;
We handle synchronization proactively on the server using a value we specify as SyncPoint.&lt;/p&gt;

&lt;p&gt;It’s best to use an encoded value for SyncPoint, which the client cannot interpret.&lt;br /&gt;
This prevents unintended or unauthorized use by the client.&lt;/p&gt;

&lt;p&gt;For instance, if you specify SyncPoint=100 for the 100th item, the client might interpret it and attempt to retrieve the 1000th item.&lt;/p&gt;

&lt;p&gt;SyncPoint can be used to track up to where a specific user’s client has synchronized. 
And It can also be used to check schema changes.&lt;br /&gt;
By encoding and sending the necessary data for synchronization in SyncPoint, the server can monitor and manage the synchronization progress.&lt;/p&gt;

&lt;p&gt;Since the synchronization trigger ultimately comes from the client, it’s essential to have indicators to identify client-side implementation issues.&lt;/p&gt;

&lt;h3 id=&quot;6-managing-initial-synchronization&quot;&gt;6. Managing Initial Synchronization&lt;/h3&gt;

&lt;p&gt;Managing synchronization with SyncPoint also means managing initial synchronization.&lt;br /&gt;
Initial synchronization involves receiving all data from the beginning, which means heavy resource usage for both the server and client.&lt;/p&gt;

&lt;p&gt;You need to be able to track how much of the initial synchronization the client has completed. If initial synchronization is required due to schema changes, the server should be able to prompt it.&lt;br /&gt;
To this end, an initial SyncPoint is provided to the client under certain conditions.&lt;/p&gt;

&lt;h3 id=&quot;7-ensuring-no-misses-in-downsync&quot;&gt;7. Ensuring No Misses in Downsync&lt;/h3&gt;

&lt;p&gt;You need to confirm the baseline for downsync.&lt;br /&gt;
This baseline could be a specific value of SyncPoint and is often related to the modifiedTime of the synchronized item.&lt;/p&gt;

&lt;p&gt;Once an issue where items with the same modifiedTime spanned across pagination, causing an item to be missed.&lt;br /&gt;
If this happens, the data may not be retrieved unless an initial sync is performed, and the bigger problem is that the development team may not be aware of the issue.&lt;/p&gt;

&lt;p&gt;Although rare, since multiple items having the same modifiedTime and being split across pagination is uncommon, it’s necessary to develop downsync in a way that prevents any misses.&lt;/p&gt;

&lt;h3 id=&quot;8-considering-partial-errors&quot;&gt;8. Considering Partial Errors&lt;/h3&gt;

&lt;p&gt;During synchronization, it’s common for a user to synchronize multiple items at once.&lt;br /&gt;
When multiple items are synchronized, should the entire request fail if some items fail?&lt;br /&gt;
Or should the response include both the failed and successful items?&lt;/p&gt;

&lt;p&gt;This issue, which is related to how retries are handled, depends on &lt;strong&gt;what data is being synchronized&lt;/strong&gt;.&lt;br /&gt;
If the synchronized data is large and heavy, it’s better to design for partial errors.&lt;/p&gt;

&lt;p&gt;However, if the data is small or if the range of retries can be reduced (e.g., using a hash before uploading a file), it’s much simpler for both client and server to handle errors without partial error handling.&lt;/p&gt;

&lt;p&gt;While errors may not be frequent, the complexity introduced by partial errors is greater than you might expect.&lt;/p&gt;

&lt;h3 id=&quot;9-considering-legal-requirements&quot;&gt;9. Considering Legal Requirements&lt;/h3&gt;

&lt;p&gt;There are legal requirements for managing user data, most commonly adhering to the EU’s GDPR restrictions.&lt;br /&gt;
If the domain of service logic is not introduced into the GDPR, management becomes complicated by service changes.&lt;/p&gt;

&lt;p&gt;GDPR should be considered if the service is global, and it should be possible to use the same domain as the service logic.&lt;/p&gt;

&lt;h3 id=&quot;10-managing-policies&quot;&gt;10. Managing Policies&lt;/h3&gt;

&lt;p&gt;Policies are important in every domain.&lt;br /&gt;
In enterprise-level services, if policies aren’t defined, you’ll encounter users who abuse the system beyond common sense.&lt;/p&gt;

&lt;p&gt;Heavy users are valuable customers.&lt;br /&gt;
&lt;strong&gt;Users who go far beyond common sense are not just heavy users&lt;/strong&gt;. They may generate data that’s typically not possible, often exploiting policy loopholes or bugs.&lt;/p&gt;

&lt;p&gt;For example, I’ve seen users with 2 million items that would take at least few second to process for creating a item.&lt;br /&gt;
Without policies, enterprise-level services often encounter such data from abusive users.&lt;/p&gt;

&lt;p&gt;Unimaginable usage cases always exist, no matter how unlikely.&lt;br /&gt;
Services like Instagram or Google Photos have clear policies in place.&lt;br /&gt;
If policies aren’t established, it will eventually lead to quality and service issues.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/career/domain/sync</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/career/domain/sync</guid>
      </item>
    
      <item>
        <title>java serialize 사용할 때 주의사항</title>
        
          <description>&lt;p&gt;java에서 serialize를 잘 사용하지 않는 편이다.&lt;br /&gt;
그럼에도 사용해야 하는 경우가 있는데, 이번이 그랬다.&lt;/p&gt;

&lt;h2 id=&quot;serialize-단점&quot;&gt;serialize 단점&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;java에서 serialize를 한다면 java 외의 다른 언어에서 deserialize할 수 없다.
    &lt;ul&gt;
      &lt;li&gt;언어에 제약이 생기게 된다. batch나 다른 작업에도 java 밖에.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;java serialize는 serialized된 data의 크기가 크다.
    &lt;ul&gt;
      &lt;li&gt;package / class 정보가 포함되기 때문에 다른 serialize 알고리즘 보다 무겁다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;실수하기 쉽다.
    &lt;ul&gt;
      &lt;li&gt;오늘 다루려고하는 부분인데 실수하기 쉽다.&lt;/li&gt;
      &lt;li&gt;serialize 하는 class에 손을 대는 경우 이미 만들어놓은 serialize 데이터가 deserialize가 불가능할 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;그럼에도-사용하는-경우&quot;&gt;그럼에도 사용하는 경우&lt;/h2&gt;

&lt;p&gt;serialize의 장점은 &lt;strong&gt;별도의 라이브러리가 필요없는 것&lt;/strong&gt; 하나 밖에 없다.
아주 형편없는 것. :weary:&lt;/p&gt;

&lt;p&gt;그럼에도 사용하는 경우는 &lt;strong&gt;기존 모듈에서 사용하는 경우&lt;/strong&gt; 하나 뿐인 것 같다.&lt;/p&gt;

&lt;p&gt;새로 합류한 팀에서 java serialize를 사용하고 있었고, 덕분에 serialize에 대해 다시 생각해볼 기회가 되었다.&lt;br /&gt;
그 전에 serialize가 필요하면 성능(압축률과 시간, cpu 점유)을 비교해서 알고리즘을 선택했었는데, 그 중 java serialize는 없었다.&lt;br /&gt;
특정 성능이 아주 중요하고, java serialize가 그걸 만족한다면 사용할 수도 있을 것 같으나 일반적으로 사용하진 않는다.&lt;/p&gt;

&lt;h2 id=&quot;serialize의-주의사항&quot;&gt;serialize의 주의사항&lt;/h2&gt;

&lt;p&gt;오늘 정리하려고 했던 내용.&lt;br /&gt;
serialize는 단점이 많지만 일단 사용한다면 별 수 없다.&lt;br /&gt;
&lt;strong&gt;실수하기 쉽다&lt;/strong&gt;는 부분을 커버하기 위해.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#serialVersionUID를-고정한다&quot;&gt;serialVersionUID를 고정한다.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#package-이동에-주의한다&quot;&gt;package 이동에 주의한다.&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#테스트를-작성한다&quot;&gt;테스트를 작성한다.&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;serialversionuid를-고정한다&quot;&gt;serialVersionUID를 고정한다&lt;/h3&gt;

&lt;p&gt;property 추가 혹은 제거 등의 이유로 java class가 변하게 되면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serialVersionUID&lt;/code&gt;가 변하게 된다.&lt;br /&gt;
&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;serialVersionUID&lt;/code&gt;는 serialize/deserialize에 사용되기 때문에 이 값이 바뀌지 않도록 고정&lt;/strong&gt;하는 것이 java serialize를 사용할 때 필수이다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// 임의의 값으로 고정&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;serialVersionUID&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1234567L&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;package-이동에-주의한다&quot;&gt;package 이동에 주의한다&lt;/h3&gt;

&lt;p&gt;내가 이번에 당했던 이슈는 이거다.&lt;br /&gt;
legacy 프로젝트를 hexagonal과 ddd에 맞춰 리팩토링을 진행하면서 package를 옮겼더니 장애가 발생했다.&lt;/p&gt;

&lt;p&gt;다행히 &lt;a href=&quot;https://stackoverflow.com/questions/2358886/how-can-i-deserialize-the-object-if-it-was-moved-to-another-package-or-renamed&quot;&gt;InputStream에서 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;readClassDescriptor()&lt;/code&gt;를 조작&lt;/a&gt;함으로써 문제를 해결할 수 있었다.&lt;br /&gt;
이게 되게 재미있는 부분이었는데 stream을 쓰지 않다보니 package 이동이 문제가 된다는걸 모르고 있었던 것.&lt;br /&gt;
실수가 발생하기 참 좋은 구조인 것 같다.&lt;/p&gt;

&lt;h3 id=&quot;테스트를-작성한다&quot;&gt;테스트를 작성한다&lt;/h3&gt;

&lt;p&gt;그래서 이런 문제들을 해결하려면 테스트가 필요하다.&lt;br /&gt;
내가 리팩토링하면서 작성했던 테스트들은 변경된 구조에서의 serialize &amp;amp; deserialize.&lt;/p&gt;

&lt;p&gt;그런데 java serialize를 사용한다면 &lt;strong&gt;현재 알고리즘으로 serialized string을 만들어 놓고 이걸 수정된 로직에서 deserialize 하는 것을 테스트&lt;/strong&gt;할 수 있어야 한다.&lt;br /&gt;
그니까 테스트는 이럴거다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Test&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;deserializeTest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;serialized&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;abcde..............&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// 현재 개발과 별개로 이전에 serialize 해놓은 데이터&lt;/span&gt;
   &lt;span class=&quot;nc&quot;&gt;Object&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;deserializedObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Serializer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;deSerialize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;serialized&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 테스트를 작성하면 혹여 serialVersionUID가 바뀌었든, package가 바뀌었든 모두 커버할 수 있는 테스트를 갖게된다.&lt;/p&gt;

&lt;h2 id=&quot;오늘의-결론&quot;&gt;오늘의 결론&lt;/h2&gt;

&lt;p&gt;:x: java serialize 사용하지 마라.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;serialVersionUID 관련
    &lt;ul&gt;
      &lt;li&gt;https://www.baeldung.com/java-serial-version-uid&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;package 이동 관련
    &lt;ul&gt;
      &lt;li&gt;https://stackoverflow.com/questions/2358886/how-can-i-deserialize-the-object-if-it-was-moved-to-another-package-or-renamed&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/tip/java-serialize</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/tip/java-serialize</guid>
      </item>
    
      <item>
        <title>MSA의 데이터 일관성 유지 기법 Saga 이해하기</title>
        
          <description>&lt;h2 id=&quot;saga-패턴이-필요한-이유&quot;&gt;saga 패턴이 필요한 이유&lt;/h2&gt;

&lt;p&gt;분산시스템(MSA)에서는 application을 여러 개의 작은 application으로 나누기 때문에 단일 요청이 여러 요청으로 세분화된다. (여러 개의 트랜잭션)&lt;br /&gt;
이런 요청들은 일부는 성공하고 일부는 실패할 수 있다.&lt;br /&gt;
이 경우 &lt;strong&gt;모든 단계가 완료되거나 모든 단계가 완료되지 않아야 하는&lt;/strong&gt; 데이터 일관성을 유지하기 어렵다.&lt;/p&gt;

&lt;p&gt;여러 트랜잭션의 경우 원자적 일관성을 유지할 수 없고, 궁극적 일관성을 유지하려고 하는데 그 방법 중 하나가 saga 패턴이다.&lt;/p&gt;

&lt;h2 id=&quot;saga-패턴의-해결-방식&quot;&gt;saga 패턴의 해결 방식&lt;/h2&gt;

&lt;p&gt;트랜잭션의 모든 단계는 &lt;strong&gt;보상 트랜잭션(compensating transaction)&lt;/strong&gt; 즉, &lt;strong&gt;롤백&lt;/strong&gt;할 수 있다.&lt;br /&gt;
그리고 실패가 발생하는 경우 진행된 트랜잭션에 보상 트랜잭션이 실행되어 완료된 작업을 취소할 수 있도록 한다.&lt;/p&gt;

&lt;h2 id=&quot;saga-패턴&quot;&gt;saga 패턴&lt;/h2&gt;

&lt;p&gt;그래서 saga 패턴은&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;MSA에서 장기 트랜잭션 문제를 해결하는 것을 목표로 하는 필수적인 micro service 패턴이다.&lt;/li&gt;
  &lt;li&gt;트랜잭션에서 문제가 발생할 경우 롤백을 할 수 있게 설계한 패턴이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;saga-패턴-사용-예시&quot;&gt;saga 패턴 사용 예시&lt;/h2&gt;

&lt;p&gt;대표적인 saga 패턴 사용 예시는 전자 상거래.
전자 상거래 서비스의 경우 사용자가 상품을 주문했을 때 연속적으로 발생하는 작업들이 있다.
주문, 결재, 배송의 각각의 트랜잭션을 saga 패턴으로 관리할 수 있다.&lt;/p&gt;

&lt;p&gt;만약 배송 트랜잭션에서 문제가 발생하면, 결제와 주문 트랜잭션을 롤백한다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/architecture/saga.jpg&quot; alt=&quot;saga pattern&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;장점&quot;&gt;장점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;여러 마이크로 서비스에서 복잡한 트랜잭션을 쉽게 구현할 수 있다.&lt;/li&gt;
  &lt;li&gt;오류를 적절하게 처리하고 데이터 일관성을 보장한다.&lt;/li&gt;
  &lt;li&gt;시스템 복원력과 견고성을 높인다.&lt;/li&gt;
  &lt;li&gt;데이터 불일치 및 업데이트 손실을 방지한다.&lt;/li&gt;
  &lt;li&gt;트랜잭션 보상을 위한 명확하게 정의된 프로세스를 제공한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;단점&quot;&gt;단점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;구현 및 유지 관리가 어렵고 모니터링 및 디버깅도 어렵다.&lt;/li&gt;
  &lt;li&gt;saga의 상태를 저장하고 관리하는 오버헤드가 있다.&lt;/li&gt;
  &lt;li&gt;여러 마이크로 서비스에서 트랜잭션을 관리해야 하기 때문에 성능 오버헤드가 발생한다.&lt;/li&gt;
  &lt;li&gt;애플리케이션은 마이크로 서비스 간에 여러 번 왕복해야 하기 때문에 대기 시간이 증가한다.&lt;/li&gt;
  &lt;li&gt;서로 다른 마이크로 서비스에서 sagas를 구현하는 데 표준화가 없다. (java나 spring에도 없다)&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;p&gt;DDD의 aggregate 간의 domain event를 통한 통신, MSA의 모듈간 통신에서 빼놓을 수 없는 패턴이 된 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/javarevisited/what-is-saga-pattern-in-microservice-architecture-which-problem-does-it-solve-de45d7d01d2b&quot;&gt;https://medium.com/javarevisited/what-is-saga-pattern-in-microservice-architecture-which-problem-does-it-solve-de45d7d01d2b&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.baeldung.com/cs/saga-pattern-microservices&quot;&gt;https://www.baeldung.com/cs/saga-pattern-microservices&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/pattern/saga</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/pattern/saga</guid>
      </item>
    
      <item>
        <title>S3 처리량 제한</title>
        
          <description>&lt;p&gt;우리는 팀 내에서 storage로 대부분 S3를 사용하고 있다.&lt;br /&gt;
S3를 굉장히 자주, 잘 씀에도 S3를 잘쓰는 방법에 대한 노하우는 많지 않다.&lt;/p&gt;

&lt;p&gt;aws s3 cli를 통해 활용하는 노하우 정도.  &lt;br /&gt;
S3에도 dynamo처럼 처리량 제한이 있는데, 이건 잘 모르고 사용하는 편이다.&lt;/p&gt;

&lt;h2 id=&quot;처리량-제한&quot;&gt;처리량 제한&lt;/h2&gt;

&lt;p&gt;S3의 처리량 제한은 접두사 별로 존재한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;초당 3500개의 PUT (PUT/COPY/POST/DELETE)&lt;/li&gt;
  &lt;li&gt;초당 5500개의 GET (GET/HEAD)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이 처리량은 접두사별로 존재하기 때문에, 접두사를 분리해주면 병렬화하여 처리량을 늘릴 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;S3의 접두사는 첫 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/&lt;/code&gt; 이 등장하기 전까지의 bucket prefix.&lt;/li&gt;
  &lt;li&gt;예전엔 접두사의 수가 6-8 자리로 해싱을 권장했으나, 내부적으로 해시를 사용하여 해결됨. (아래 레퍼런스 참조)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;s3-처리량에-대해&quot;&gt;S3 처리량에 대해&lt;/h2&gt;

&lt;p&gt;사실 초당 3500개의 put을 하는건 object storage에서 쉽지 않다.  &lt;br /&gt;
테스트로 100KB 파일 2만 개를 올리는데 걸린 시간은 16분.&lt;br /&gt;
prefix만 적절하게 사용한다면 문제가 있기는 어렵다.&lt;br /&gt;
그렇지만 엔터프라이즈 급에서 prefix 설계가 잘못된다면 문제가 생길 수 있다.&lt;/p&gt;

&lt;p&gt;dynamo의 partitionKey 제한도 그렇지만, s3 key도 이미 서비스 중에 prefix를 변경하기 어려우므로&lt;br /&gt;
설계 단계에서 잘 고려될 필요가 있겠다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;처리량 제한 문서
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/optimizing-performance.html&quot;&gt;https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/optimizing-performance.html&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;접두사 수 관련 문서
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://aws.amazon.com/ko/about-aws/whats-new/2018/07/amazon-s3-announces-increased-request-rate-performance/&quot;&gt;https://aws.amazon.com/ko/about-aws/whats-new/2018/07/amazon-s3-announces-increased-request-rate-performance/&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/s3/throughput</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/s3/throughput</guid>
      </item>
    
      <item>
        <title>http 1.0 semantics</title>
        
          <description>&lt;h2 id=&quot;multipart-form-data&quot;&gt;multipart form data&lt;/h2&gt;

&lt;p&gt;http의 단순 전송은 크게 신경쓸게 없다.&lt;/p&gt;

&lt;p&gt;보통 http 응답은 한 번에 한 파일씩 반환하므로 경계를 신경쓸 필요가 없다.
그런데 multipart를 이용하는 경우 한 번의 요청에 여러 파일을 전송할 수 있으므로 받는 쪽에서 파일을 나눠야 한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Type: multipart/form-data; boundary=boundary-example

--boundary-example
Content-Disposition: form-data; name=&quot;text&quot;

Sample text part.
--boundary-example
Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;example.txt&quot;
Content-Type: text/plain

This is the content of the file.

--boundary-example--
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;Content-Type&lt;/strong&gt;은 &lt;strong&gt;multipart/form-data&lt;/strong&gt;.&lt;br /&gt;
boundary에는 랜덤하게 생성된 경계 문자열이 들어간다.&lt;br /&gt;
body는 이 경계 문자열로 블록이 나뉜다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;경계 문자열에 –이 prefix로 붙는다&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;각각의 블록 내부도 http와 같이 &lt;strong&gt;header&lt;/strong&gt; 후에 &lt;strong&gt;빈 줄&lt;/strong&gt; 그리고 &lt;strong&gt;body&lt;/strong&gt;로 이루어진다.&lt;br /&gt;
그리고 파일의 마지막도 경계 문자열로 끝난다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;마지막 경계 문자열은 prefix와 postfix 모두 –를 붙여 끝낸다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;content-negotiation&quot;&gt;content negotiation&lt;/h2&gt;

&lt;p&gt;통신 방법을 최적화하고자 하나의 요청 안에 서버와 클라이언트가 서로 최고의 설정을 공유하는 시스템을 말한다.&lt;br /&gt;
이를 위해 header를 이용한다.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;request header&lt;/th&gt;
      &lt;th&gt;response header&lt;/th&gt;
      &lt;th&gt;negotiation target&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Accept&lt;/td&gt;
      &lt;td&gt;Content-Type&lt;/td&gt;
      &lt;td&gt;mime type&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Accept-Language&lt;/td&gt;
      &lt;td&gt;Content-Language&lt;/td&gt;
      &lt;td&gt;표시 언어&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Accept-Charset&lt;/td&gt;
      &lt;td&gt;Content-Type&lt;/td&gt;
      &lt;td&gt;문자의 문자셋&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Accept-Encoding&lt;/td&gt;
      &lt;td&gt;Content-Encoding&lt;/td&gt;
      &lt;td&gt;body 압축&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;파일-종류-결정&quot;&gt;파일 종류 결정&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;서버는 요청에서 요구한 형식 중에서 파일을 반환한다.&lt;br /&gt;
우선 순위를 해서개 위에서부터 차례로 지원하는 포맷을 찾고 일치하면 그 포맷을 반환한다.&lt;br /&gt;
서로 일치하는 요청이 없다면 서버가 406 Not Acceptable 오류를 반환한다.&lt;/p&gt;

&lt;h3 id=&quot;표시-언어&quot;&gt;표시 언어&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept-Language: en-US,en;q=0.8,ko;q=0.6
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;동일하게 적혀있는 우선순위로 요청을 보낸다. en-Us, en, ko 순&lt;/p&gt;

&lt;h3 id=&quot;문자셋&quot;&gt;문자셋&lt;/h3&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept-Charset: windows-949,utf-8;q=0.7,*;q=0.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;현대의 어떤 브라우저도 Accept-Charset을 송신하지 않는다.&lt;br /&gt;
브라우저가 문자셋 인코더를 내장하고 있어 미리 negotiation 할 필요가 없어졌기 때문으로 여겨진다.&lt;br /&gt;
문자셋은 mime type과 함께 Content-Type header에 실려 응답된다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Type: text/html; charset=UTF-8
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;압축&quot;&gt;압축&lt;/h3&gt;

&lt;p&gt;압축은 전송속도 향상을 위한 것이다.&lt;br /&gt;
통신에 걸리는 시간보다 압축과 해제가 짧은 시간에 이루어짐으로 압축을 함으로써 웹페이지를 표시할 때 걸리는 전체적인 처리 시간을 줄일 수 있다.&lt;/p&gt;

&lt;p&gt;통신량이 줄어들기 때문에 시간 뿐만 아니라 통신 비용(사용자 데이터, 서버 데이터, 전력 소비 등)도 줄어든다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Accept-Encoding: deflate, gzip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 header를 보내면 전송받은 목록 중 지원하는 방식이 있으면 응답할 때 그 방식으로 압축된 콘텐츠를 반환한다.&lt;br /&gt;
서버가 gzip을 지원한다면 헤더는 이렇다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Content-Encoding: gzip
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이제는 서버에서 받아올 때 뿐 아니라 서버로 올릴 때도 압축을 사용한다.&lt;br /&gt;
목적은 압축을 통해 얻는 이득을 업로드에도 누리기 위해서.&lt;br /&gt;
이런 경우엔 동일하게 Content-Encoding을 클라이언트가 header에 싣어서 보낸다.&lt;/p&gt;

&lt;h3 id=&quot;쿠키&quot;&gt;쿠키&lt;/h3&gt;

&lt;p&gt;쿠키랑 웹사이트의 정보를 브라우저 쪽에 저장하는 작은 파일이다.&lt;br /&gt;
쿠키도 http header를 기반으로 구현되었다.&lt;/p&gt;

&lt;p&gt;예를 들면 서버에서 access 시간을 저장하기 위해 이렇게 header를 보낼 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Set-Cookie: LAST_ACCESS_DATE=Jun/18/2023
Set-Cookie: LAST_ACCESS_TIME=12:04
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이러면 클라이언트가 이 값을 저장하고 다음에 방문할 때 서버에 이런 형식으로 보낸다.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Cookie: LAST_ACCESS_DATE=Jun/18/2023
Cookie: LAST_ACCESS_TIME=12:04
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이렇게 서버가 상태를 유지하는 stateful처럼 보이게 서비스를 제공할 수 있다.&lt;/p&gt;

&lt;p&gt;쿠키를 사용할 때 주의할점&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;영속성 문제가 있다. 데이터는 사라진다.&lt;/li&gt;
  &lt;li&gt;따라서 db 대신 쓸 수 없다.&lt;/li&gt;
  &lt;li&gt;용량 문제도 있다. 최대 4KB로 더 보낼 수 없다.&lt;/li&gt;
  &lt;li&gt;쿠키는 header로 항상 통신되는데 쿠키가 많아지면 통신량이 늘고 성능이 떨어진다.&lt;/li&gt;
  &lt;li&gt;사용자가 자유롭게 접근할 수 있고 수정도할 수 있어 민감정보는 넣으면 안된다.&lt;/li&gt;
  &lt;li&gt;http의 경우 평문으로 전송되서 유의할 필요가 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;쿠키는 몇 가지 속성(Expires, Max-Age, Domain, Path, Secure, …)으로 제어하고 제한할 수 있다.&lt;br /&gt;
쿠키의 이런 기능 추가 역사는 웹 보안의 역사와도 이어진다고.&lt;/p&gt;

&lt;h3 id=&quot;캐시&quot;&gt;캐시&lt;/h3&gt;

&lt;p&gt;콘텐츠가 변경되지 않았을 때 로컬에 저장된 파일을 재사용함으로써 다운로드 횟수를 줄이고 성능을 높이는 매커니즘.&lt;br /&gt;
GET / HEAD method 이외는 기본적으로 캐시되지 않는다.&lt;/p&gt;

&lt;p&gt;캐시의 방식&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;갱신 일자에 따른 캐시
    &lt;ul&gt;
      &lt;li&gt;서버가 데이터 수정 시간을 헤더로 주고, 클라이언트가 다음 요청에 이를 헤더에 넣는다.&lt;/li&gt;
      &lt;li&gt;수정이 생겼으면 200에 새로운 데이터를&lt;/li&gt;
      &lt;li&gt;수정이 생기지 않았으면 304 Not Modified를 반환&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;expries
    &lt;ul&gt;
      &lt;li&gt;갱신 일자에 따른 캐시는 서버에 콜을 한번 더 넣어야 한다.&lt;/li&gt;
      &lt;li&gt;expires에 날짜와 시간을 넣어서 지정한 기간 내에선 캐시를 강제로 사용한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;ETag
    &lt;ul&gt;
      &lt;li&gt;날짜와 시간을 이용한 캐시 비교만으로 해결할 수 없을 때&lt;/li&gt;
      &lt;li&gt;동적으로 바뀌는 요소가 많아져서 캐시 유효성 판단이 어려워질 때&lt;/li&gt;
      &lt;li&gt;ETag(Entity Tag)는 순차적 갱신 일시가 아니라 파일의 해시 값으로 비교한다.&lt;/li&gt;
      &lt;li&gt;갱신 일자에 따른 캐시처럼 ETag를 받고 다음 요청에 받은 ETag를 넣어 보낸다.&lt;/li&gt;
      &lt;li&gt;서버에서 비교해서 같다면 304 Not Modified를 반환&lt;/li&gt;
      &lt;li&gt;ETag는 http 1.1의 기능이다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;캐시는 Cache-Control header로 유연하게 캐시 제어를 지시할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;서버에서 내리는 값들도 있고, 클라이언트에서 요청할 때 사용할 수 있는 값들도 있다.&lt;/li&gt;
  &lt;li&gt;Cache-Control도 http 1.1의 기능이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Real World Http chapter 2&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/internet/http/http1.0/semantics</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/internet/http/http1.0/semantics</guid>
      </item>
    
      <item>
        <title>http 1.0 syntax 이해하기 (vs http 0.9)</title>
        
          <description>&lt;p&gt;http 1.0을 알기 위해서 http가 어떻게 만들어졌는지 이해하면 좋다.  &lt;br /&gt;
http 0.9는 내용이 너무 간단해서 1.0에서 함께 개념을 정리해본다.&lt;br /&gt;
이번에 정리하는 내용은 http 1.0의 syntax.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;http는 웹 브라우저와 웹 서버가 통신하는 절차와 형식을 규정한 것이다.&lt;br /&gt;
현재는 이런 규정을 넘어서 다양한 서비스의 인터페이스로 사용되면서 인터넷의 기초가 됐다.&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;1990년 HTTP/0.9&lt;/li&gt;
    &lt;li&gt;1996년 HTTP/1.0&lt;/li&gt;
    &lt;li&gt;1997년 HTTP/1.1&lt;/li&gt;
    &lt;li&gt;2005년 HTTP/2&lt;/li&gt;
  &lt;/ul&gt;

&lt;/div&gt;

&lt;h2 id=&quot;http-09&quot;&gt;http 0.9&lt;/h2&gt;

&lt;p&gt;HTML 도큐먼트를 요청해서 가져오기만 하는 단순 프로토콜 &lt;br /&gt;
웹사이트의 페이지를 서버에 요청하고 그 응답으로 웹사이트의 내용을 받아온다.&lt;br /&gt;
수신 후에는 서버와의 연결이 끊어진다.&lt;br /&gt;
요청에는 host(혹은 ip)과 port 번호를 지정한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;port는 생략하면 기본 80&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/internet/http0.9.png&quot; alt=&quot;http 0.9&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;검색을 위해 주소 끝에 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?&lt;/code&gt;를 사용하는 것도 0.9에서 사용되었다.&lt;/li&gt;
  &lt;li&gt;1.0 사양이 확정되고 1.0 이전이라는 의미에서 0.9로 불리게 됐다.&lt;/li&gt;
  &lt;li&gt;0.9는 현행 프로토콜과 하위 호환성이 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;http-10&quot;&gt;http 1.0&lt;/h2&gt;

&lt;p&gt;0.9는 매우 단순했고 할 수 없는 일들이 많았다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;하나의 문서를 전송하는 기능 밖에 없었다.&lt;/li&gt;
  &lt;li&gt;통신되는 모든 내용은 html 문서로 가정했으므로 다운로드할 콘텐츠의 형식을 서버가 전달할 수단이 없었다.&lt;/li&gt;
  &lt;li&gt;클라이언트 쪽에서 검색 이외의 요청을 보낼 수 없었다.&lt;/li&gt;
  &lt;li&gt;새로운 문장을 전송하거나 갱신 또는 삭제할 수 없었다.&lt;/li&gt;
  &lt;li&gt;요청이 올바른지, 서버가 올바르게 응답했는지 알 수 없었다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;그렇기 때문에 1.0에선 다른 요소들이 추가 되었다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;요청 시 method가 추가됐다. (GET ..)&lt;/li&gt;
  &lt;li&gt;요청 시 http version이 추가됐다. (HTTP/1.0)&lt;/li&gt;
  &lt;li&gt;header가 추가됐다. (Host, USer-Agent)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/internet/http1.0.png&quot; alt=&quot;http 1.0&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;http-10의-구성요소&quot;&gt;http 1.0의 구성요소&lt;/h2&gt;

&lt;p&gt;http 1.0은 다른 기술들(전자메일, 뉴스그룹)을 참고해서 스펙이 결정됐다.&lt;br /&gt;
http의 네 가지 구성 요소.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;header&lt;/li&gt;
  &lt;li&gt;method &amp;amp; url&lt;/li&gt;
  &lt;li&gt;body&lt;/li&gt;
  &lt;li&gt;status code&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;header&quot;&gt;header&lt;/h3&gt;

&lt;p&gt;http의 header는 요청과 응답 양쪽에서 사용된다.&lt;br /&gt;
이 아이디어는 &lt;strong&gt;전자메일&lt;/strong&gt;에서 가져왔다.&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;br /&gt;
header의 개념은 RFC에 규정되어 왔다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;메일의 원시 정보를 참고하면 http의 header와 유사하다.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Delivered-To: yoshiki@shibu.jp
(생략)
MIME-Version: 1.0
Recieved: by 10.176.69.212 with HTTP; Wed, 6 Apr 2023:06:18 -1200 (KST)
From: Yoichi Fujimoto &amp;lt;wozozo@example.com&amp;gt;
Date: Wed, 6 Apr 2023:06:18 +1000
Message-ID: &amp;lt;ABCDE....&amp;gt;
Subject: hi
To: yosiki@shibu.jp
Content-Type&quot; text/plain; charset=UTF-8

hello
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;header의 특징들&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;header 이름은 대소문자를 구분하지 않는다.&lt;/li&gt;
  &lt;li&gt;header에는 본문 이외의 모든 정보가 포함돼 있다.&lt;/li&gt;
  &lt;li&gt;RFC는 같은 header를 여러번 보내는 것도 허용한다.
    &lt;ul&gt;
      &lt;li&gt;수신측에선 결합문자로 다루거나 배열의 개별 요소로 처리하기도 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;User-Agent, Authorization 같이 클라이언트가 보내는 header, Content-Type, Content-Length와 같이 서버가 보내는 header가 정의되어 있고, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;X-&lt;/code&gt; 로 시작하는 header는 각 서비스에서 자유롭게 사용해도 좋다고 되어 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;결과적으로 http 1.0은 전자메일이 고속으로 왕복하는 것과 유사하다.&lt;/p&gt;

&lt;h3 id=&quot;method&quot;&gt;method&lt;/h3&gt;

&lt;p&gt;method는 &lt;strong&gt;뉴스그룹&lt;/strong&gt;으로부터 가져왔다.&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;br /&gt;
뉴스 그룹의 method들의 사용성과 유사하게 method를 도입했다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;LIST, HEAD, BODY, POST&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;http 규정이 생기기 전까지 많은 method의 제안이 있었지만 사라졌다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;LINK, UNLINK (1.0에 들어왔지만 1.1에 삭제)&lt;/li&gt;
  &lt;li&gt;CHECKOUT, CHECKIN, SHOWMETHOD, SEARCH (1992년 판에 제안됐지만 1.0에서 삭제)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;status-code&quot;&gt;status code&lt;/h3&gt;

&lt;p&gt;method와 같이 뉴스그룹으로부터 가져온 statusCode는 세 자리 숫자를 보고 서버의 응답을 한눈에 알 수 있는 값이다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;지금 우리가 너무 잘 아는 에러 값이다.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;1XX, 2XX, 3XX, 4XX, 5XX&lt;/li&gt;
  &lt;/ul&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;200 OK
404 NOT FOUND
500 INTERNAL SERVER ERROR
...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h3 id=&quot;url&quot;&gt;URL&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;schema://hostName/path&lt;/code&gt; 와 같은 구조로 이루어진다.&lt;br /&gt;
schema 해석은 브라우저의 책임. 브라우저는 schema를 보고 적절한 접속 방법을 선택해야 한다.&lt;br /&gt;
실제 통신하는 곳은 hostName으로 지정된 서버.&lt;br /&gt;
port가 생략되면 schema 별 기본 port를 사용한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;http: 80&lt;/li&gt;
  &lt;li&gt;https: 443&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;URL 구성 문자는 ASCII 문자열(영문자, 숫자, 일부 기호)이었지만 RFC 2718에서 URL을 인코딩함으로써 다국어 문자를 다룰 수 있게 되었다.&lt;br /&gt;
HTTP 사양상 URL 길이에 제한은 없지만 인터넷 익스플로러에서 2083자까지만 다룰 수 있어 ‘대체로 2000자’가 기준이 되었다.&lt;/p&gt;

&lt;h4 id=&quot;body&quot;&gt;body&lt;/h4&gt;

&lt;p&gt;header 끝에 빈 줄을 넣으면 그 이후는 모두 body가 된다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;아래 코드에서 header 끝에 빈 줄이 들어간 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;body start!&lt;/code&gt; 부터 body가 된다.&lt;/p&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;header1: header1value
header2: header2value
Content-Length: bytes of body

body start!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;속도를 위해 body를 압축하기도 하고 Content-Encoding에서 지정된 압축 알고리즘으로 읽어 온 body의 데이터를 전개할 필요가 있다.
이런 경우에 Content-Length는 압축 후 통신 데이터 크기가 된다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;get에서도 body를 보낼 수 있지만 그렇게 하지 않는 것이 좋다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Real World Http chapter 1&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;
&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;전자메일이라고 불리는 메일 시스템은 인터넷이 보급 되기 이전부터 사용되던 기술로 http에 영향을 줬다. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;뉴스라는 이름이지만 매스미디어가 아닌 대규모 전자 게시판으로 인터넷 이전의 주요 미디어였다. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/internet/http/http1.0/syntax</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/internet/http/http1.0/syntax</guid>
      </item>
    
      <item>
        <title>A website that arbitrarily receives Requests for verification</title>
        
          <description>&lt;p&gt;There is a website that issues a server URL that arbitrarily receives the requested requests.&lt;br /&gt;
When you send a request to this URL, it analyzes whether the request was received correctly and how it was received.&lt;/p&gt;

&lt;p&gt;When starting development without proper infrastructure, identifying issues becomes much more challenging.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Is there a problem on the client side?&lt;/li&gt;
  &lt;li&gt;Is there an issue on the server side?&lt;/li&gt;
  &lt;li&gt;Is the server running properly?&lt;/li&gt;
  &lt;li&gt;Is there a problem with gateway registration?&lt;/li&gt;
  &lt;li&gt;Are there any infra-related permission issues?&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When you have to start by checking if &lt;strong&gt;the server is not working&lt;/strong&gt;, there are too many things to verify at the beginning.&lt;/p&gt;

&lt;p&gt;For a server developere, there are cases where test clients written for acceptance or scenario tests do not properly reach the server (either local or dev).&lt;/p&gt;

&lt;p&gt;This time, I wanted to verify if the multi-part request call I made was correct, and while searching for a way to confirm this, I discovered this website.&lt;/p&gt;

&lt;h2 id=&quot;how-to-use&quot;&gt;How to Use&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Visit &lt;a href=&quot;https://webhook.site/&quot;&gt;https://webhook.site/&lt;/a&gt;.&lt;/li&gt;
  &lt;li&gt;On the site, you will be provided with a randomly generated webhook URL.
    &lt;ul&gt;
      &lt;li&gt;For example: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://webhook.site/554e2d76-a7ee-46c3-8f9f-ce6819fbcedf&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Send your test request to this host.&lt;/li&gt;
  &lt;li&gt;Review the analyzed call on the webpage.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/tools/website/webhook-site</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/tools/website/webhook-site</guid>
      </item>
    
      <item>
        <title>GC 로그 및 튜닝</title>
        
          <description>&lt;h2 id=&quot;gc-로깅&quot;&gt;GC 로깅&lt;/h2&gt;

&lt;p&gt;GC 로그는 시스템 다운의 원인을 분석할 때 유용하다.&lt;/p&gt;

&lt;p&gt;모든 중요한 애플리케이션에서는 두가지를 설정해야한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;GC 로그를 생성한다.&lt;/li&gt;
  &lt;li&gt;애플리케이션 출력과 별도로 특정 파일에 GC 로그를 보관한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;gc-로깅-켜기&quot;&gt;GC 로깅 켜기&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-Xloggc:gc.log -XX:+PrintGCDetails -XX:+PrintTenuringDistributuion -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;필수-flag&quot;&gt;필수 flag&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;flag&lt;/th&gt;
      &lt;th&gt;operation&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;-Xloggc:gc.log&lt;/td&gt;
      &lt;td&gt;GC event 로깅할 파일을 지정&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:+PrintGCDetails&lt;/td&gt;
      &lt;td&gt;GC event 세부 정보를 로깅&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:+PrintTenuringDistributuion&lt;/td&gt;
      &lt;td&gt;툴링에 필요한 부가적인 GC event 세부 정보를 추가 &lt;br /&gt; 사람이 확인하기 어려운 데이터지만 memory pressure, premature promotion 등 확인에 필요한 기본 데이터를 제공&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:+PrintGCTimeStamps&lt;/td&gt;
      &lt;td&gt;GC event 발생 시간을 (VM 시작 이후 경과 시간으로) 초단위 출력 &lt;br /&gt; GC event와 application event를 연관짓는 용도로 사용&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:+PrintGCDateStamps&lt;/td&gt;
      &lt;td&gt;GC event 발생 시간을 (시간 기준으로) 출력 &lt;br /&gt; GC event와 JVM event를 연관짓는 용도로 사용&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;rotation-flag&quot;&gt;Rotation flag&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;flag&lt;/th&gt;
      &lt;th&gt;operation&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:+UseGCLogFileRotation&lt;/td&gt;
      &lt;td&gt;log file rotation 기능을 켜기&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:+NumberOfGCLogFiles=&lt;n&gt;&lt;/n&gt;&lt;/td&gt;
      &lt;td&gt;rotation file 개수 설정&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:+GCLogFileSize=&lt;size&gt;&lt;/size&gt;&lt;/td&gt;
      &lt;td&gt;rotation file 최대 사이즈 설정&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;gc-로그-장점&quot;&gt;GC 로그 장점&lt;/h2&gt;

&lt;p&gt;JVM과 GC는 수 많은 component가 조합된 아주 복잡한 구현체.&lt;br /&gt;
성능 역시 예측하기가 굉장히 어렵다.&lt;br /&gt;
그렇기 때문에 GC를 모든 워크로드들이 특정 값으로 최적화할 수 없다.&lt;br /&gt;
이를 모니터링하고 GC 튜닝에 유용하게 사용되는 것이 GC 로그.&lt;/p&gt;

&lt;p&gt;GC 로깅은 사실상 오버헤드가 거의 없기 때문에 주요 JVM 프로세스는 항상 로깅을 켜놓아야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;JVM 내부에서 non-blocking write. 운영계에선 계속 켜놓는게 맞다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;gc-로그-파싱&quot;&gt;GC 로그 파싱&lt;/h2&gt;

&lt;p&gt;GC 로그 메세지는 정해진 포맷이 따로 없다.&lt;br /&gt;
로그에 어떤 메세지를 남길지는 hotspot 개발팀 마음이라 minor release에서도 포맷이 다르기도 하다.&lt;br /&gt;
단순 로그 파싱은 어렵지 않지만 로그가 많이 복잡하다.&lt;br /&gt;
GC 설정을 변경하면 로그 포맷이 변경되고 파서가 동작하지 않는 경우도 있다.&lt;/p&gt;

&lt;p&gt;따라서 로그를 스스로 파싱하려고하지 말고 반드시 로그 툴을 사용하자.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;센섬
    &lt;ul&gt;
      &lt;li&gt;상용 메모리 분석기 (유료)&lt;/li&gt;
      &lt;li&gt;파싱, 정보 추출부터 시간 뷰, 전체 클러스터 뷰까지 제공&lt;/li&gt;
      &lt;li&gt;센섬 개발팀이 openJDK code의 logging 소스를 분석해서 반영하기 때문에 철저하고 강력함&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;GCViewer
    &lt;ul&gt;
      &lt;li&gt;오픈소스 (무료)&lt;/li&gt;
      &lt;li&gt;센섬보다 빈약한 기능&lt;/li&gt;
      &lt;li&gt;로그 파싱, 그래프 출력등의 기본 기능만 있고 분석기능은 없음&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;gc-기본-튜닝&quot;&gt;GC 기본 튜닝&lt;/h2&gt;

&lt;h3 id=&quot;튜닝을-해야하는-이유&quot;&gt;튜닝을 해야하는 이유&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;GC가 성능 문제를 일으키는 원인인지 혹은 영향이 없는지 파악하는 비용은 크지 않다.
    &lt;ul&gt;
      &lt;li&gt;GC가 성능 문제를 일으키는지 밝히는건 쉽다.&lt;/li&gt;
      &lt;li&gt;맞다면 더 구체적인 원인 파악과 튜닝을, 아니라면 ‘문제없어’를 확신하고 넘어갈 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;testing 단계에서 GC flag를 켜는 것도 비용이 작다.&lt;/li&gt;
  &lt;li&gt;memory profiler 설정은 비용이 크다.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;heap-크기-조정-flag&quot;&gt;heap 크기 조정 flag&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;flag&lt;/th&gt;
      &lt;th&gt;operation&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;-Xms&lt;size&gt;&lt;/size&gt;&lt;/td&gt;
      &lt;td&gt;heap 최소 크기를 결정한다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-Xmx&lt;size&gt;&lt;/size&gt;&lt;/td&gt;
      &lt;td&gt;heap 최대 크기를 결정한다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;-XX:MaxMetaspaceSize=&lt;size&gt;&lt;/size&gt;&lt;/td&gt;
      &lt;td&gt;metaspace의 최대 크기를 결정한다&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;튜닝-시-주의사항&quot;&gt;튜닝 시 주의사항&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;GC flag를 추가/변경할 때는 한 flag씩 추가한다.&lt;/li&gt;
  &lt;li&gt;각 flag가 무슨 작용을 하는지 알고 사용해야 한다.&lt;/li&gt;
  &lt;li&gt;부수 효과를 일으키는 flag 조합이 있을수도 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;튜닝-주요-인자&quot;&gt;튜닝 주요 인자&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#1-할당&quot;&gt;할당&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-중단-시간&quot;&gt;중단시간&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;처리율 추이&lt;/li&gt;
  &lt;li&gt;객체 수명&lt;/li&gt;
&lt;/ol&gt;

&lt;h4 id=&quot;1-할당&quot;&gt;1. 할당&lt;/h4&gt;

&lt;p&gt;튜닝 뿐 아니라 성능 판단에 꼭 필요하다.&lt;br /&gt;
young generation GC event 데이터를 통해 할당된 데이터 양, 단위 수집 시간, 평균 할당률을 계산할 수 있다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;수작업으로 할당률을 계산하는 것은 시간 낭비. 툴을 사용하자&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;2-중단-시간&quot;&gt;2. 중단 시간&lt;/h4&gt;

&lt;p&gt;대부분의 application에서 100ms 정도의 중단은 무시할만하다.&lt;br /&gt;
중단 시간을 얼마나 허용할 수 있느냐를 기준으로 GC를 선택할 수 있다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;일반적으로 중단시간이 1초 이상으로 커도 된다면 Parallel이 좋다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Optimizing Java, chapter8&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc/log_tuning</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc/log_tuning</guid>
      </item>
    
      <item>
        <title>리팩토링 why? when? what?</title>
        
          <description>&lt;h2 id=&quot;리팩토링-하는-이유&quot;&gt;리팩토링 하는 이유&lt;/h2&gt;

&lt;h3 id=&quot;소프트웨어-설계가-개선되니까&quot;&gt;소프트웨어 설계가 개선되니까&lt;/h3&gt;

&lt;p&gt;리팩토링 하지 않으면 설계는 노후된다.&lt;br /&gt;
단기 목적의 수정은 코드가 산만해지게 하고 리팩토링은 이를 정리한다.&lt;/p&gt;

&lt;h3 id=&quot;이해하기-쉬워지니까&quot;&gt;이해하기 쉬워지니까&lt;/h3&gt;

&lt;p&gt;리팩토링 대상은 제대로 실행되지만 구조가 완전하지 못한 코드이고&lt;br /&gt;
리팩토링 후에 코드가 본연의 목적에 더 충실해지고 의도한 바를 정확히 전달할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;버그-찾기-쉬워지니까&quot;&gt;버그 찾기 쉬워지니까&lt;/h3&gt;

&lt;p&gt;리팩토링은 코드를 근본적으로 이해하는 작업이 깨달음이 코드에 즉시 반영된다.&lt;br /&gt;
프로그램을 명료하게 만들 수 있는 수준이라면 버그를 놓치기 어렵다.&lt;br /&gt;
리팩토링으로 프로그래밍 속도가 빨라진다.
설계가 지저분하면 새 기능을 추가하는 시간, 버그 찾는 시간, 시스템을 이해하고 중복 코드에 적용하는 시간 등으로 코드가 길어지고 시간이 늘어난다.&lt;br /&gt;
깔끔한 설계는 개발속도를 적절히 유지할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;리팩토링은-언제하는가&quot;&gt;리팩토링은 언제하는가&lt;/h2&gt;

&lt;p&gt;시간내서 따로 하는게 아니라 일상적으로 틈틈히 해야한다.&lt;br /&gt;
작정해서 하는게 아니라 다른 작업을 하는데 리팩토링을 하면 작업이 쉬워지기 때문에 하는 것.&lt;/p&gt;

&lt;h3 id=&quot;같은-작업을-세번-할-때&quot;&gt;같은 작업을 세번 할 때&lt;/h3&gt;

&lt;p&gt;처음할 땐 그냘하고 두번째는 망설여져도 그냥하고 세 번째 하게되면 리팩토링하는 기법&lt;/p&gt;

&lt;h3 id=&quot;기능을-추가할-때&quot;&gt;기능을 추가할 때&lt;/h3&gt;

&lt;p&gt;이때 하는 이유는 코드를 이해하기 쉽게 만들기 위해서이다.&lt;br /&gt;
리팩토링 후 코드가 더 이해하기 쉬워진다고 확신한다면 리팩토링한다.&lt;br /&gt;
설계가 지저분해서 기능 추가가 어려울 때 ‘이런 설계였으면 좋았겠다’ 싶을 때 설계를 수정한다.&lt;/p&gt;

&lt;h3 id=&quot;버그를-수정할-때&quot;&gt;버그를 수정할 때&lt;/h3&gt;

&lt;p&gt;버그 수정시엔 기능을 이해하려고 리팩토링한다.&lt;br /&gt;
앞서 말했듯 리팩토링하면 이해가 쉬워진다.&lt;/p&gt;

&lt;h3 id=&quot;코드를-검수할-때&quot;&gt;코드를 검수할 때&lt;/h3&gt;

&lt;p&gt;코드를 검수하면 다른 사람이 짠 코드를 보고 새로운 아이디어가 생기기도 하고 리팩토링하여 코드 검수가 더 잘되기도 한다.&lt;/p&gt;

&lt;h2 id=&quot;리팩토링의-효용성&quot;&gt;리팩토링의 효용성&lt;/h2&gt;

&lt;p&gt;프로그램이 지닌 가치는 두 종류이다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;현재의 기능이라는 가치.&lt;/li&gt;
  &lt;li&gt;미래의 기능이라는 가치.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;현재 기능이 프로그램의 일부에 불과하다는 사실을 깨우치지 않으면 개발자로서 오래갈 수 없다.&lt;br /&gt;
오늘 일은 할 수 있어도 내일 일을 내일 할 능력을 일게 되기 때문이다.&lt;br /&gt;
리팩토링은 과거의 판단이 불합리하다는 것을 발견하고 수정하는 작업으로 가치를 높이는 일이다.&lt;/p&gt;

&lt;h2 id=&quot;리팩토링-문제들&quot;&gt;리팩토링 문제들&lt;/h2&gt;

&lt;h3 id=&quot;데이터베이스&quot;&gt;데이터베이스&lt;/h3&gt;

&lt;p&gt;리팩토링으로 데이터베이스 스키마를 수정하면 데이터도 바뀌기 때문에 별도의 계층을 두면 좋다.&lt;/p&gt;

&lt;h3 id=&quot;인터페이스&quot;&gt;인터페이스&lt;/h3&gt;

&lt;p&gt;인터페이스의 변경은 호출하는 부분도 바뀌어야한다.&lt;br /&gt;
그렇지만 published interface의 경우엔 이게 어렵다. &lt;br /&gt;
사용하는 client들(다른 팀)의 수정까지 interface를 한동안 유지해줘야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;그러니 published를 필요할 때가 아니면 만들지 말자.&lt;/li&gt;
  &lt;li&gt;서버에겐 api와 같다. api는 필요한 것만 만드는 것도 중요하지만 필요하지 않은 param, body가 들어오지 않도록 클라이언트와 명확하게 설계하는게 좋다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;리팩토링하면-안되는-상황&quot;&gt;리팩토링하면 안되는 상황&lt;/h3&gt;

&lt;p&gt;차라리 완전히 처음부터 새로 작성하는게 나을 때가 있다. 물론 이 판단은 쉽지 않고 기준도 없다.&lt;br /&gt;
납기가 임박한 시점에도 리팩토링을 삼가야한다.&lt;br /&gt;
리팩토링으로 인한 생상성이 납기 이후에 가시화 될테니.&lt;br /&gt;
납기가 임박하지 않다면 시간이 없다는 핑계로 리팩토링을 미뤄선 안된다.&lt;br /&gt;
언제나 시간에 쫓긴다면 그건 리팩토링해야하는 신호이다.&lt;/p&gt;

&lt;h3 id=&quot;켄트-백의-모자-두-개&quot;&gt;켄트 백의 모자 두 개&lt;/h3&gt;

&lt;p&gt;리팩토링이라는 모자와 기능 추가 모자가 있다.&lt;br /&gt;
모자는 각각 번갈아가며 쓸 수 있다. 그치만 두 모자를 동시에 쓸 수는 없다.&lt;br /&gt;
리팩토링 때는 코드 구조만 개선되고 테스트도 추가될 필요가 없다.&lt;br /&gt;
그러나 기능을 추가할 땐 리팩토링을 하지 않는다.&lt;/p&gt;

&lt;h2 id=&quot;리팩토링과-설계&quot;&gt;리팩토링과 설계&lt;/h2&gt;

&lt;p&gt;리팩토링은 설계를 보완하는 역할을 한다.&lt;br /&gt;
사전 설계를 빡세게 하지 않아도 리팩토링으로 잡을 수 있기 때문에 최상의 솔루션을 찾지 못해도 괜찮다.&lt;br /&gt;
단순히 구현하고 나중에 리팩토링하면 비용(시간)이 얼마나 들까를 고려해서 단순한 솔루션을 사용할지 결정할 수 있다.&lt;br /&gt;
유연하고 복잡한 설계가 필요하지 않은 경우도 많다.&lt;/p&gt;

&lt;h2 id=&quot;리팩토링과-성능&quot;&gt;리팩토링과 성능&lt;/h2&gt;

&lt;p&gt;코드를 이해하기 쉽게 만들려면 수정할 일이 많은데 수정으로 프로그램이 느려질수도 있다.&lt;br /&gt;
설계의 순수성을 강조하더라도 성능을 무시하는건 이론을 가르치는 교수나 하는 말.&lt;br /&gt;
더 좋은 성능을 포기해선 안된다.&lt;/p&gt;

&lt;p&gt;성능 개선에서 재밌는 사실은 대부분의 개발자들이 코드를 분석할 때 작은 코드 조각에 얽메여 있다는 것이다.&lt;br /&gt;
모든 코드를 최적화한다고 했을 때 그 최적화 중 90%는 실행될 일이 거의 없는 코드를 최적화하는 의미없는 일이다.&lt;/p&gt;

&lt;p&gt;성능과 관련해선 프로그램의 시간과 공간을 알수있는 프로파일러 하에 프로그램을 실행해야 한다.&lt;br /&gt;
이렇게하면 성능에 영향을 주는 프로그램의 작은 부분을 찾을 수 있고 그 부분에 대해 최적화를 적용한다.&lt;br /&gt;
리팩토링으로 작은 부분을 쪼개고나면 성능 분석을 더 정밀하게 할 수 있고 튜닝도 쉬워진다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;마틴 파울러, 리팩토링 2장&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/refactoring/basic</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/refactoring/basic</guid>
      </item>
    
      <item>
        <title>복합 리팩토링</title>
        
          <description>&lt;p&gt;복합 리팩토링을 할때는 상황이 변화무쌍하다.&lt;br /&gt;
가동중인 시스템을 대상으로 하는 리팩토링은 수 개월에서 수 년이 걸리기도 한다.&lt;br /&gt;
서비스 중인 시스템을 작업 중단하고 리팩토링하겠다는 말을 받아주는 팀장은 없기 때문에.&lt;/p&gt;

&lt;p&gt;리팩토링은 시작했다고 끝을 봐야하는건 아니다.&lt;br /&gt;
기능 추가나 버그 수정시에 시작해서 필요한 만큼만 하면 된다.&lt;/p&gt;

&lt;p&gt;어느정도 센스와 경력이 있는 개발자들은 리팩토링 냄새를 맡고 수정하는 일을 잘 하고 있다.&lt;br /&gt;
실제 개발에서 리팩토링을 얼마나 잘하느냐는 복합 리팩토링을 어떻게 하느냐가 아닐까 싶다.&lt;/p&gt;

&lt;h2 id=&quot;복햡-리팩토링은&quot;&gt;복햡 리팩토링은&lt;/h2&gt;

&lt;p&gt;개발팀 전원의 합의하에 실시해야한다.&lt;br /&gt;
수정 방향이 많이 바뀌기 때문에 팀 전원이 복합리팩토링이 진행중임을 알고 움직여야한다.&lt;br /&gt;
사공이 많아 배가 산으로 가지 않도록.&lt;/p&gt;

&lt;h2 id=&quot;복합-리팩토링-필요성&quot;&gt;복합 리팩토링 필요성&lt;/h2&gt;

&lt;p&gt;단순 리팩토링은 예측 가능하고 절차가 투명하고 만족을 즉시 얻는다는 장점이 있다.&lt;br /&gt;
충분리 이해하지 못한 상태에서 결정된 설계가 쌓이면 막 자란 물풀로 막힌 운하처럼 프로그램이 막힌다. &lt;br /&gt;
단편적인 이해로 결정된 설계는 프로그램에 악영향을 전파시킨다.&lt;br /&gt;
이런 문제를 해결하고 예방하는게 복합 리팩토링.&lt;/p&gt;

&lt;h2 id=&quot;대표적인-복합-리팩토링&quot;&gt;대표적인 복합 리팩토링&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;상속 구조 정리&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/refactoring/tease_apart_inheritance.png&quot; alt=&quot;tease apart inheritance&quot; /&gt;&lt;/p&gt;

&lt;p&gt;하나의 상속 계층이 두 작업을 동시에 수행할 땐 상속 계층을 하나 더 만들어서 위임을 통해 다른 계층을 호출하자&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;절차 코드를 객체로 전환&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/refactoring/convert_procedural_design_to_objects.png&quot; alt=&quot;convert procedural design to objects&quot; /&gt;&lt;/p&gt;

&lt;p&gt;코드가 절차식으로 작성되어 있을 땐 데이터 레코드를 객체로 바꾸고 기능을 쪼개서 각각의 객체로 옮기자&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;메인 로직을 표현과 분리&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;도메인 로직이 들어있은 GUI 클래스가 있을 깬 도메인 로직을 별도의 도메인 클래스로 떼어내자&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;계층구조 추출&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;한 클래스에 기능이 너무 많고 일부분에라도 조건문이 많을땐 각 조건에 해당하는 하위 클래스를 작성해서 계층구조를 만들자&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;마틴 파울러, 리팩토링 12장&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/refactoring/big-refactoring</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/refactoring/big-refactoring</guid>
      </item>
    
      <item>
        <title>리팩토링 마음가짐</title>
        
          <description>&lt;p&gt;마틴 파울러의 refactoring 15장의 &lt;strong&gt;Putting It All Together&lt;/strong&gt;를 보고 정리한 내용이다.  &lt;br /&gt;
가장 마지막장의 내용으로 마틴 파울러가 설명한 리팩토링에 대한 내용들을 정리하는 내용인데, 나는 리팩토링의 마음가짐이라고 정리해본다.&lt;/p&gt;

&lt;p&gt;리팩토링을 알고 기법이랑 테스트를 알아도 리팩토링을 완전히 이해했다고 볼수는 없다.&lt;br /&gt;
리팩토링은 가벼운 마음으로 해야하는데 리팩토링을 하는데 마틴 파울러의 팁이 있다.&lt;/p&gt;

&lt;p&gt;경험이 있는 개발자들에겐 어쩌면 당연한 내용들이면서도 생각하고 작업하면 좋을 내용들이어서 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;습관적으로-목표를-정하자&quot;&gt;습관적으로 목표를 정하자&lt;/h2&gt;

&lt;p&gt;코드에서 구린내가 풍기면 구린내를 없야겠다는 결의를 다진 후 목표를 향해 나아가자.&lt;br /&gt;
리팩토링의 목표는 아름다운 코드가 아니라 이해하기 쉬운 코드, 퇴화하는 프로그램의 통제력을 되찾는 작업이다.&lt;/p&gt;

&lt;p&gt;,&lt;/p&gt;

&lt;p&gt;이게 생각보다 어려운 사람들이 있다.&lt;br /&gt;
어떤 사람이랑 일하면 당연하게 구린내를 제거하는데 어떤 사람들은 구린내에 냄새를 더 더한다.&lt;br /&gt;
개발자는 코가 민감해야 한다는 생각을 같이 일하다보면 느끼게 된다.&lt;/p&gt;

&lt;h2 id=&quot;확신이-없으면-중단하자&quot;&gt;확신이 없으면 중단하자&lt;/h2&gt;

&lt;p&gt;목표를 향해 전진할 때 현재 작업이 프로그램 로직을 보전하리란 사실을 입증할 수 없는 순간이 닥칠 수 있다.&lt;br /&gt;
그렇다면 작업을 중단해야 한다.&lt;br /&gt;
중단한 시점에 코드가 개선됐다면 결과물을 반영하고 그렇지 않다면 코드를 버린다.&lt;/p&gt;

&lt;p&gt;,&lt;/p&gt;

&lt;p&gt;코드를 버리는걸 잘 못하는 사람들이 있다.&lt;br /&gt;
한 번은 동료가 리팩토링 방향을 잘못잡고 개발한걸 버리지 못하고 넣어서 되잡는데 시간을 더 오래썼다.&lt;/p&gt;

&lt;h2 id=&quot;되돌아가자&quot;&gt;되돌아가자&lt;/h2&gt;

&lt;p&gt;리팩토링은 방향이 잘못들기 쉽다.&lt;br /&gt;
테스트를 돌리지 않고 여러 수정이 반영됐다면, 테스트가 도는 시점으로 되돌아가서 다시 수정사항을 반영하며 테스트 결과를 확인하는 것이 더 합리적이다.&lt;br /&gt;
1시간을 개발한 코드를 다시 짜는 것은 10분이면 되는데 이걸 디버깅하려면 2시간이 걸릴수도 있다.&lt;/p&gt;

&lt;p&gt;,&lt;/p&gt;

&lt;p&gt;이건 &lt;strong&gt;확신이 없으면 중단하자&lt;/strong&gt;의 내용과도 이어지는 것 같다.&lt;br /&gt;
여기서 중요한건 리팩토링 하면서 중간중간 테스트를 돌려야 한다는 것.&lt;/p&gt;

&lt;h2 id=&quot;작업은-둘이서-하자&quot;&gt;작업은 둘이서 하자&lt;/h2&gt;

&lt;p&gt;리팩토링은 조심히 체계적으로 해야한다. &lt;br /&gt;
내가 보지 못한 부분을 파트너가 챙겨줄 수 있을 것이고.&lt;br /&gt;
둘 중 한명이 이해하지 못한다면 리팩토링을 중단해야할 시점이라는 것도 알 수 있다.&lt;br /&gt;
포기하고 싶을 땐 함께 작업을 이어갈 수 있다.&lt;/p&gt;

&lt;p&gt;,&lt;/p&gt;

&lt;p&gt;완전히 동의되지는 않는 부분이기도 하다.&lt;br /&gt;
리팩토링을 페어 프로그래밍 하는것도 되겠지만 복합 리팩토링에서의 설계를 같이 나누거나 리팩토링의 한 부분을 나누는 것도 괜찮은 것 같다.&lt;br /&gt;
결국 페어 프로그래밍은 꼼꼼한 리뷰로 커버가 되기도 하니까.&lt;/p&gt;

&lt;h2 id=&quot;두-개의-모자&quot;&gt;두 개의 모자&lt;/h2&gt;

&lt;p&gt;리팩토링할 땐 리팩토링 전의 기능을 그대로 유지하는것이 필수다.&lt;br /&gt;
구린내가 나더라도 일정상 현재 리팩토링을 진행할 수 없다면 리팩토링을 잠시 보류할 필요도 있다.&lt;/p&gt;

&lt;p&gt;,&lt;/p&gt;

&lt;p&gt;일부 팀원들한테 많이 했던 얘기중 하나는 리팩토링 코드와 기능 개발 코드를 같이 커밋하지 말라는 얘기였다.&lt;br /&gt;
라인을 정리한다거나, 클래스 이동 같은 리팩토링이 기능 개발과 같이 들어가서 리뷰가 어려워지고 히스토리 관리가 안되는 경우가 빈번한 사람들이 있다.&lt;br /&gt;
리팩토링은 커밋을 나누거나, PR까지 나눠도 좋을 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;마틴 파울러, 리팩토링 15장&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/refactoring/putting-together-refactoring</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/refactoring/putting-together-refactoring</guid>
      </item>
    
      <item>
        <title>마틴 파울러의 리팩토링</title>
        
          <description>&lt;p&gt;마틴 파울러의 refactoring을 보고 정리한 내용이다.&lt;br /&gt;
사실 이미 아는 내용들도 많아서 정리할게 많진 않다.&lt;/p&gt;

&lt;h2 id=&quot;챕터별-내용-정리&quot;&gt;챕터별 내용 정리&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;chapter&lt;/th&gt;
      &lt;th&gt;summary&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;1장&lt;/td&gt;
      &lt;td&gt;맛보기 예제로 리팩토링을 잘 모르는 사람들이 보면 좋겠다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2장&lt;/td&gt;
      &lt;td&gt;리팩토링의 개념에 대해 다시 생각해볼 수 있다 &lt;br /&gt; - &lt;a href=&quot;https://meansoup.github.io/docs/refactoring/basic&quot;&gt;리팩토링 개론&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;3장&lt;/td&gt;
      &lt;td&gt;코드의 구린내를 잘 맡느냐 &lt;br /&gt;나는 좀 냄새에 예민한 편이다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;4장&lt;/td&gt;
      &lt;td&gt;리팩토링의 필수 전제조건으로 견고한 테스트가 있어야 한다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;5장&lt;/td&gt;
      &lt;td&gt;뒷 장부터 이어지는 기법들에 대한 카탈로그&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;6장&lt;/td&gt;
      &lt;td&gt;메서드 단위의 리팩토링 기법&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;7장&lt;/td&gt;
      &lt;td&gt;기능이 어디에 위치하는지가 적절한지를 중점으로 객체간 기능 리팩토링 기법&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;8장&lt;/td&gt;
      &lt;td&gt;데이터 연동을 간편하게 만들자&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;9장&lt;/td&gt;
      &lt;td&gt;조건문을 처리하는 리팩토링 기법 &lt;br /&gt;조건문은 복잡해질 가능성이 높아서 리팩토링도 다양한데 대부분이 조건문을 쪼개는 리팩토링이다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;10장&lt;/td&gt;
      &lt;td&gt;함수의 이름과 변수를 이해하기 쉽게하자&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;11장&lt;/td&gt;
      &lt;td&gt;상속 계층에서 함수나 필드를 상위나 하위로 옮기는 기법&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;12장&lt;/td&gt;
      &lt;td&gt;리팩토링을 얼마나 잘하느냐는 복합 리팩토링을 잘하느냐가 되지 않을까 &lt;br /&gt; - &lt;a href=&quot;https://meansoup.github.io/docs/refactoring/big-refactoring&quot;&gt;복합 리팩토링&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;13장&lt;/td&gt;
      &lt;td&gt;리팩토링에 대한 이야기 &lt;br /&gt;책에서 다루는 전반적인 내용이랑 중복도 꽤 있으나 보면 ‘음 그렇지’ 하는 내용들이다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;14장&lt;/td&gt;
      &lt;td&gt;rename이나 extract method 같은걸 지원하는 도구에 대한 이야기&lt;br /&gt;결국 인텔리제이가 지원하는 다양한 기능들에 대해 필요한 이유와 장점들에 대한 내용이다&lt;br /&gt;아무래도 이 책이 처음 나올 당시엔 이런 툴이 부족했어서 적지 않았을까 싶다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;15장&lt;/td&gt;
      &lt;td&gt;리팩토링의 마음가짐에 대해 이야기하는 마지막 장이다 &lt;br /&gt; - &lt;a href=&quot;https://meansoup.github.io/docs/refactoring/putting-together-refactoring&quot;&gt;리팩토링 마음가짐&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;마틴 파울러, 리팩토링&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/refactoring/martin-fowler-refactoring</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/refactoring/martin-fowler-refactoring</guid>
      </item>
    
      <item>
        <title>현업에서 진행하는 대규모 리팩토링 프로세스</title>
        
          <description>&lt;h2 id=&quot;리팩토링의-분류&quot;&gt;리팩토링의 분류&lt;/h2&gt;

&lt;p&gt;리팩토링은 기존의 코드를 재구성하여 코드의 품질을 향상시키는 작업이다.&lt;br /&gt;
일반적으로 리팩토링이라하면 변수나 함수를 정리하는 등의 방식으로 코드 품질과 생산성을 높이는 방식을 말한다.&lt;/p&gt;

&lt;p&gt;그런데 이렇게 간단하게 진행되는 리팩토링 외에 ‘리디자인’ 정도로 리팩토링이 필요한 경우가 있다.&lt;br /&gt;
마틴파울러는 이걸 &lt;a href=&quot;https://meansoup.github.io/docs/refactoring/big-refactoring&quot;&gt;big refactoring&lt;/a&gt;이라고 불렀다.
big refactoring을 어떻게 하면 좋을지를 고민해보며 업데이트 하는 나의 리팩토링 방향.&lt;/p&gt;

&lt;h2 id=&quot;사용하지-않는-코드-삭제하기&quot;&gt;사용하지 않는 코드 삭제하기&lt;/h2&gt;

&lt;p&gt;사용하지 않는 코드는 남아서 refactoring이 경직되게 만들고 코드를 이해하기 어렵게 만든다.&lt;br /&gt;
따라서 사용하지 않는 코드는 리팩토링의 모든 스텝마다 가장 먼저 체크되어야 할 부분이다.&lt;/p&gt;

&lt;p&gt;특히 legacy module의 경우 어떤 코드(모듈)을 사용하는지 사용하지 않는지 조차 알지 못하는 경우도 많다.&lt;br /&gt;
api call 지표를 보면서 사용하지 않는 api를 확인하는 것도 좋다.&lt;br /&gt;
이런 삭제는 얽혀있는 스파게티가 풀릴 수 있는 하나의 실마리들이 된다.&lt;/p&gt;

&lt;p&gt;리팩토링으로 제거할 수 있는 코드들은 이런게 있다.&lt;br /&gt;
내가 실제로 10년 된 모듈을 맡게되면서 리팩토링한 것들.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#사용하지-않는-api&quot;&gt;사용하지 않는 api&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#사용하지-않는-policy&quot;&gt;사용하지 않는 policy&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#사용하지-않는-code&quot;&gt;사용하지 않는 code&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;사용하지-않는-api&quot;&gt;사용하지 않는 api&lt;/h3&gt;

&lt;p&gt;내가 맡은 모듈은 전세계에서 하루에 수십 억건의 요청이 들어오는 서비스이다.&lt;br /&gt;
10년 된 모듈 답게 legacy version부터 수 십개의 api가 있었는데, 리팩토링을 하며 사용하지 않는 api들을 찾았다.&lt;br /&gt;
먼저 지표에서 api 호출이 없는 것을 확인하고, 클라이언트 담당자에게 사용하는 api인지를 확인했다.&lt;/p&gt;

&lt;p&gt;이렇게 지운 api만 해도 수 건이지만, 중요한건 이게 지워짐으로 인해 꼼꼼하게 얽혀있는 스파게티 코드에서 스파게티 몇 줄을 뺌으로써 조금 더 느슨한 스파게티를 만들 수 있다는 것이다.&lt;/p&gt;

&lt;h3 id=&quot;사용하지-않는-policy&quot;&gt;사용하지 않는 policy&lt;/h3&gt;

&lt;p&gt;api와 마찬가지로 사용하지 않는 policy도 많다.&lt;br /&gt;
이 서비스에서 policy는 property의 일종으로 사용되었고 서비스 전반에 영향을 미치는 짬뽕 같은 코드였다.
한 눈에 보이지도 않고 리팩토링을 하려고 하면 계속 냄새를 내뿜는 policy를 손보았다.&lt;/p&gt;

&lt;p&gt;오버 프로그래밍으로 만들어뒀지만 사용하지 않는 policy가 정리되기도 하지만,&lt;br /&gt;
Content 타입 별로 서로 다른 동작을 하도록 넣어뒀던 policy가 사실 모두 같은 값을 갖고 있기도 했다.&lt;br /&gt;
이런 policy를 지우면 해당 로직도 지울 수 있고 마찬가지로 느슨한 스파게티를 만드는데 도움이 된다.&lt;/p&gt;

&lt;h3 id=&quot;사용하지-않는-code&quot;&gt;사용하지 않는 code&lt;/h3&gt;

&lt;p&gt;api나 policy는 관심을 갖고 보아야 확인할 수 있지만 사용하지 않는 code를 찾는건 참 쉽다.&lt;br /&gt;
상위의 class, method, parameter, property 레벨에서 사용하지 않는 것들을 먼저 정리하면 하위의 필요 없던 로직들이 덩달아 지워지기도 한다.&lt;br /&gt;
‘리팩토링을 다 하고 봤더니 실제론 필요 없는 코드’라는 상황이 되지 않도록 사용하지 않는 코드들을 먼저 정리하면 스파게티도 느슨하고 리팩토링도 더 쉽다.&lt;/p&gt;

&lt;h2 id=&quot;리팩토링-아키텍쳐-설계하기&quot;&gt;리팩토링 아키텍쳐 설계하기&lt;/h2&gt;

&lt;p&gt;이미 운영중인 서비스, 그것도 legacy 서비스를 한 순간 리팩토링하긴 쉽지 않다.&lt;br /&gt;
마틴 파울러도 저서 ‘리팩토링’에서 이건 불가능한 일임을 몇 번이고 얘기했다.&lt;br /&gt;
작은 리팩토링이라면 서비스 개발 중에 리팩토링을 할 수 있겠지만 big refactoring의 경우 전략적인 접근이 필요하다.&lt;/p&gt;

&lt;p&gt;중간에 치고들어오는 다른 작업들로 리팩토링이 생각한 일정대로 진행되지 않을 수도 있다.&lt;br /&gt;
리팩토링을 한번에 하지 못하고 끊기더라도 나아갈 방향을 제시하기 위해 아키텍쳐 설계는 꼭 필요하다.&lt;/p&gt;

&lt;p&gt;아키텍쳐 설계가 중요한 이유는 리팩토링된 모듈의 구조에 대한 생각이 팀원들 모두 다르기 때문이다.&lt;br /&gt;
나 혼자 한다면 설계는 내 머리 속에 있지만 팀원들은 그렇지 않다.&lt;br /&gt;
생각보다 설계를 맞추는 과정은 더 디테일해야할 수 있는데, 실제로 아키텍쳐를 공유했는데도 다르게 이해해서 리팩토링이 잘못 진행되기도 했다.&lt;/p&gt;

&lt;p&gt;명확한 리팩토링 아키텍쳐는 리팩토링 방향을 명확하게 한다.  &lt;br /&gt;
리팩토링은 천천히 진행되겠지만 설계는 명확한 방향으로 나와야 한다.  &lt;br /&gt;
설계가 명확하지 않으면 애써 진행한 리팩토링한 것을 다시 리팩토링 할수도 있다.&lt;/p&gt;

&lt;p&gt;그렇지만 전체 아키텍쳐 설계를 다시할 순 없다.&lt;br /&gt;
설계가 명확한 방향이어야할 뿐, 전체적인 설계가 완벽하게 나와야한다는 것은 아니다. 리팩토링의 대상이 되는 서비스들의 설계가 명확하면 된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;특정 UseCase나 domain에 대해서만 명확하게 설계를 잡을수도 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;acceptance-test-확보하기&quot;&gt;Acceptance test 확보하기&lt;/h2&gt;

&lt;p&gt;리팩토링이지만 대규모 작업을 하기 위해선 작업의 안정성을 확보하기 위한 test는 필수다.&lt;br /&gt;
마틴 파울러도 리팩토링을 커버할 수 있는 충분한 test가 필요하다고 말한다.&lt;br /&gt;
리팩토링이 안전하게 됐는지 검증해줄 수 있는 test가 분명 필요하다.&lt;/p&gt;

&lt;p&gt;이 test는 SQE 팀에서 만든 test일수도 있고, 배포 전에 팀 내에서 수행하던 acceptance test일 수도 있다. 혹은 둘 다 일수도 있고.  &lt;br /&gt;
test가 없다면 만들어야한다. 수정하지 않고 리팩토링만 하고 내보내겠다며 test를 수행하지 않는 것은 문제다.&lt;/p&gt;

&lt;p&gt;완전히 커버할 수 있는 test를 만들기는 어렵다.&lt;br /&gt;
그렇다고 리팩토링하며 모든 모듈의 test를 작성할 여유가 없을 수 있다.&lt;br /&gt;
그렇지만 기본적인 시나리오를 커버하는 acceptance test는 있어야 한다.&lt;br /&gt;
개인적으로 big refactoring에선 unit test가 큰 효용성을 갖기는 어렵고 acceptance test 같은 상위 수준의 test가 필요하다고 생각한다.&lt;/p&gt;

&lt;h2 id=&quot;점진적으로-작업하기&quot;&gt;점진적으로 작업하기&lt;/h2&gt;

&lt;p&gt;이미 말했듯, 리팩토링을 한번에 하는 것은 쉽지 않다.&lt;br /&gt;
그리고 대규모 리팩토링으로 인한 장애가 있을수도 있다.&lt;/p&gt;

&lt;p&gt;아키텍쳐 리팩토링에서 가장 중요한 것 중 하나는 점진적으로 작업하는 것이다.&lt;br /&gt;
legacy 코드들을 보다보면 아키텍쳐 변경 외에도 손대고 싶은 로직들이 많다.&lt;br /&gt;
‘신기하게도 지저분한 코드를 만들었네’ 하는 생각과 ‘이걸 어떻게 오류 없이 돌렸을까’ 하는 생각도 들고, 때로는 오류를 발견하기도 한다.&lt;/p&gt;

&lt;p&gt;이런 로직에 대한 수정들이 아키텍쳐와 같이 반영되면, 장애가 발생했을 때 아키텍쳐로 인한 것인지, 로직 수정에 의한 것인지 알 수 없다.&lt;br /&gt;
로직은 잠시 내려놓고 아키텍쳐에 대한 리팩토링만 반영하고 배포까지 되도록 한다. &lt;br /&gt;
점진적인 작업에서 중요한건 잦은 배포다.&lt;br /&gt;
잦은 배포로 안정적인 rollback point를 만들어두고 나면 혹시 잘못된 수정이 있더라도 리팩토링된 안전한 코드들을 확보할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;인터페이스-나누기&quot;&gt;인터페이스 나누기&lt;/h2&gt;

&lt;p&gt;어느정도 사용하지 않는 코드도 걷어내고, 리팩토링 아키텍쳐도 설계했고, 신뢰할 수 있는 테스트도 준비됐다면 실제 리팩토링은 어떤 작업부터 하면 좋을까?  &lt;br /&gt;
모든 개발이 그렇듯 인터페이스를 나누는 것이 가장 먼저가 되야한다.&lt;br /&gt;
그렇기 때문에 아키텍쳐를 설계를 먼저하는 것이기도 하고.&lt;/p&gt;

&lt;p&gt;리팩토링에서 가장 중요한건 인터페이스를 끊어내고 리디자인된 인터페이스로 옮겨가는 것이다.&lt;br /&gt;
한번에 갈 수 없기 때문에 인터페이스를 먼저 작업하고 부분 부분 옮겨가야한다.
도메인 인터페이스를 나누고, UseCase를 나누고, Port 인터페이스를 분리하는 작업들을 한번에 하기보다는 하나의 도메인, 하나의 UseCase, 하나의 Port 씩 인터페이스를 생성하고 옮겨가는 방향이 명확하다.&lt;/p&gt;

&lt;p&gt;인터페이스 방향을 잡아놓으면 새로 추가되는 클래스들은 리디자인된 인터페이스 방향에 맞춰 개발할 수 있다.&lt;br /&gt;
인터페이스를 나눌 때 패키지의 위치도 중요하다.&lt;br /&gt;
여러 인터페이스 레벨에서 이게 adapter의 인터페이스인지, application의 인터페이스인지&lt;/p&gt;

&lt;h2 id=&quot;도메인-분리하기&quot;&gt;도메인 분리하기&lt;/h2&gt;

&lt;p&gt;Hexagonal + DDD의 리팩토링을 초점에 둔다면, 리팩토링을 통해 얻을 수 있는 것은 도메인을 명확하게 하고 로직을 분리할 수 있다는 것이다.&lt;br /&gt;
인터페이스를 나누면 어느정도 정리가 되지만 도메인을 분리하면 장점은 너무 많다. DDD 자체의 장점을 다 가지게 되는 것이나 마찬가지니까.&lt;/p&gt;

&lt;p&gt;코드 이해도를 확연하게 높일 수 있고 중복 제거도 된다. &lt;br /&gt;
도메인 로직 보호와 도메인 언어로 서비스 코드를 관리할 수도 있다.&lt;/p&gt;

&lt;p&gt;그런데, 생각보다 10년 묵은 legacy 코드를 도메인으로 분리하는건 쉽지 않았다.&lt;br /&gt;
인터페이스만 나눈다고 될 일도 아니고 도메인 로직이 프로젝트 전반에 걸쳐 사용되고 있었기 때문이다.&lt;/p&gt;

&lt;p&gt;도메인 로직을 분리하는 팁이라고 하자면,&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;우선 대상 aggregate을 만든다.
    &lt;ul&gt;
      &lt;li&gt;aggregate의 꼴이 새로 DDD를 했을 때와는 다르겠지만 현재 legacy 코드와 호환할 수 있는 aggregate를 만든다.&lt;/li&gt;
      &lt;li&gt;aggregate와 legacy에서 사용하는 class들 사이의 converter를 만든다.
        &lt;ul&gt;
          &lt;li&gt;이 converter는 리디자인된 aggregate을 사용하는 로직들에서 legacy 코드들과 호환할 때 convert 한 후 사용할 수 있는 도구.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;aggregate에 도메인 로직을 넣는다.
    &lt;ul&gt;
      &lt;li&gt;도메인 개념이 없는 코드에선 도메인 로직이 여기저기 흩어져있다.&lt;/li&gt;
      &lt;li&gt;이런 경우엔 중복코드가 여러곳에 있고 코드가 파편화되어 있기도 하다.&lt;/li&gt;
      &lt;li&gt;도메인 개념의 로직들을 하나씩 도메인 모델로 밀어넣고 코드를 정리한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;대상 aggregate의 repository를 만든다.
    &lt;ul&gt;
      &lt;li&gt;서비스에 따라 필요한 CRUD가 다를 수 있으나 보통은 몇 가지 인터페이스의 CRUD가 있기 마련이다.&lt;/li&gt;
      &lt;li&gt;aggregate의 CRUD 중 가능한 기능부터 repository에 추가하고 분리한다.&lt;/li&gt;
      &lt;li&gt;repository의 개념은 db의 repository와 다를 수 있고 이를 명확하게 잡는 것이 중요하다. (이건 DDD 개념이 있어야 함)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;repository를 서비스에 적용한다.
    &lt;ul&gt;
      &lt;li&gt;repository의 모든 기능이 만들어질 필요는 없다. read 중 하나의 함수만 완성되었다면 그걸 서비스에 적용한다.&lt;/li&gt;
      &lt;li&gt;서비스 로직에서 도메인 개념없이 read를 하고 있었다면 이것만으로도 가독성이 향상되고 지저분한 로직을 제거하고 곳곳에서 호출되던 중복된 repository 로직들을 제거할 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;이 정도만 해도 도메인이 어느정도 정리된다.&lt;br /&gt;
이 과정이 부분부분 반복되다보면 도메인 서비스로 분리할 것들이 보이기도 한다.&lt;br /&gt;
그치만 legacy 코드를 전부 이렇게 만드는 것만 하더라도 오랜 시간이 걸린다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;도메인 주도 설계 첫걸음 13장&lt;/li&gt;
  &lt;li&gt;스트렝글러 패턴&lt;/li&gt;
  &lt;li&gt;리팩토링, 마틴 파울러&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/refactoring/my-refactoring</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/refactoring/my-refactoring</guid>
      </item>
    
      <item>
        <title>구글 아이디로 로그인 구현하기</title>
        
          <description>&lt;p&gt;사이드 프로젝트 개발 중, 로그인 기능을 고려하게 되었다.  &lt;br /&gt;
처음 로그인을 생각할 땐 회원가입, 로그인, 로그아웃, 회원탈퇴을 생각하면 뭔가 골치가 아팠다.&lt;br /&gt;
더불어 사용자 계정과 비밀번호를 관리하는 것까지.&lt;/p&gt;

&lt;p&gt;회사에선 써볼일이 없는 OAuth를 적용해보기로 했다.
개념은 정리하지 않고 간단히 하자면 &lt;strong&gt;네이버 아이디로 로그인&lt;/strong&gt;, &lt;strong&gt;구글 아이디로 로그인&lt;/strong&gt; 같이 다른 소셜 서비스의 아이디로 로그인할 수 있는 약속을 말한다.&lt;/p&gt;

&lt;h2 id=&quot;구글-로그인-서비스-생성&quot;&gt;구글 로그인 서비스 생성&lt;/h2&gt;

&lt;p&gt;아래 링크에서 구글 로그인에 사용할 서비스를 생성한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://console.cloud.google.com/apis/credentials&quot;&gt;https://console.cloud.google.com/apis/credentials&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;테스트나 소규모 서비스에 대해선 무료에 가깝다.&lt;/p&gt;

&lt;h2 id=&quot;flutter-client-구현&quot;&gt;flutter client 구현&lt;/h2&gt;

&lt;div class=&quot;language-dart highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;package:google_sign_in/google_sign_in.dart&apos;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signInGoogle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GoogleSignInAccount&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;googleUser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GoogleSignIn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;nl&quot;&gt;clientId:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;{YOUR_CLIENT_ID}.apps.googleusercontent.com&apos;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;signIn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;googleUser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;email = &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;${googleUser.email}&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;googleUser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;authentication&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;snapshot&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;idToken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;??&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;signOutGoogle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GoogleSignIn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;nl&quot;&gt;clientId:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;{YOUR_CLIENT_ID}.apps.googleusercontent.com&apos;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;signOut&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;내가 이번에 사용한 frontend는 flutter.&lt;br /&gt;
flutter의 코드는 위와 같은데, idToken을 받아오는 api이다.&lt;/p&gt;

&lt;p&gt;위 코드를 실행하면 우리가 흔히 아는 구글 로그인 팝업이 뜬다.
팝업으로 구글 로그인을 하면 email을 print하고 idToken을 반환하는 코드이다.&lt;/p&gt;

&lt;p&gt;여기 client에서 받은 idToken을 server에 전달해서 idToken으로 server에서 google에서 확인된 token이 맞는지를 verify 한다.&lt;/p&gt;

&lt;h2 id=&quot;spring-server-구현&quot;&gt;spring server 구현&lt;/h2&gt;

&lt;div class=&quot;language-kotlin highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@Service&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;GoogleSignInService&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lateinit&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;verifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;GoogleIdTokenVerifier&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@PostConstruct&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;httpTransport&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;NetHttpTransport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;jacksonFactory&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;JacksonFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;verifier&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;GoogleIdTokenVerifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Builder&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;httpTransport&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;jacksonFactory&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getIdToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;py&quot;&gt;googleIdToken&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;verifier&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;verify&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;?:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UnAuthenticatedUserException&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;idToken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이번에 사용한 backend는 코프링.&lt;br /&gt;
kotlin/java에서는 GoogleIdTokenVerifier를 사용한다.&lt;br /&gt;
client에서 받은 idToken을 여기에 넣어주기만 하면 googleIdToken을 받아온다.&lt;br /&gt;
googleIdToken은 우리가 필요한 여러 데이터들을 갖고 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://developers.google.com/identity/openid-connect/openid-connect#authenticatingtheuser&quot;&gt;응답으로 내려오는 데이터 목록&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;여기서 내가 필요한건, email, name, picture, locale 정도.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://cloud.google.com/apigee/docs/api-platform/security/oauth/oauth-introduction?hl=ko&lt;/li&gt;
  &lt;li&gt;https://developers.google.com/identity/openid-connect/openid-connect#authenticatingtheuser&lt;/li&gt;
  &lt;li&gt;https://developers.google.com/identity/protocols/oauth2&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/oauth/google-login</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/oauth/google-login</guid>
      </item>
    
      <item>
        <title>linux 환경변수 설정하기 - /etc/profile.d</title>
        
          <description>&lt;h2 id=&quot;etcprofiled&quot;&gt;etc/profile.d&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/etc/profile.d&lt;/code&gt; 폴더는 linux에서 user와 system 전체 환경 변수와 스크립트를 설정하기 위한 폴더이다.
로그인 시에 폴더 안의 파일들이 자동 실행되어 환경 변수 설정 등에 사용된다.&lt;/p&gt;

&lt;h2 id=&quot;사용-목적&quot;&gt;사용 목적&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;스크립트 파일로 환경 변수를 export 하면 시스템 전반에 설정되는 환경변수를 세팅할 수 있다.&lt;/li&gt;
  &lt;li&gt;스크립트를 사용해 시스템 동작을 변경하거나 환경을 설정할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;주의-사항&quot;&gt;주의 사항&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;일반적으로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.sh&lt;/code&gt;로 끝나는 관례를 따른다.&lt;/li&gt;
  &lt;li&gt;여러 스크립트가 추가될 수 있기 때문에 명확한 이름을 사용한다.&lt;/li&gt;
  &lt;li&gt;스크립트는 알파벳 순서에 맞춰 수행되는 것에 주의한다.&lt;/li&gt;
  &lt;li&gt;시스템의 모든 사용자에게 적용된다는 점을 고려한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;예시&quot;&gt;예시&lt;/h2&gt;

&lt;p&gt;예를 들면 실제로 내가 사용하는 로그인 토큰을 담은 환경변수 스크립트를 작성해본다.
로그인 토큰 같은 경우 사용되는 보안상의 이유로 스크립트를 git에 올리지 못하기 때문에 환경변수로 세팅해놓고 스크립트에서 환경 변수를 조회하도록 하면 좋다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;/etc/profile.d/login_token.sh&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/bash&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;LOGIN_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Hello_TOKEN&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;linuxfromscratch.org/blfs/view/11.0/postlfs/profile.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux/etc_profiled</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux/etc_profiled</guid>
      </item>
    
      <item>
        <title>archunit으로 아키텍처 테스트하기</title>
        
          <description>&lt;h2 id=&quot;아키텍처를-보호하기-위한-테스트-archunit&quot;&gt;아키텍처를 보호하기 위한 테스트 ArchUnit&lt;/h2&gt;

&lt;p&gt;개발에 있어서 아키텍처의 중요성은 점점 커져가고 있다.&lt;br /&gt;
최근 팀을 옮기고 개발하면서 불편한 점 중 하나는 아키텍처에 대한 이해도가 팀원들마다 다르다는 점이다.&lt;/p&gt;

&lt;p&gt;DDD와 hexagonal에 맞추어 잡아놓은 아키텍처가 다른 사람들의 작업으로 인해 무너지기도 한다.&lt;br /&gt;
리뷰로 잡아야겠지만 휴가 중이거나 리뷰를 놓치는 경우도 있다.&lt;/p&gt;

&lt;p&gt;아키텍처가 문서화되고 준수되어야겠지만 이를 확인하고 강제하는 도구도 필요하다.&lt;br /&gt;
아키텍처도 테스트로 강제화하는 방법을 소개한다.&lt;/p&gt;

&lt;h2 id=&quot;archunit&quot;&gt;ArchUnit&lt;/h2&gt;

&lt;p&gt;ArchUnit은 아키텍처를 확인하기 위한 라이브러리.&lt;br /&gt;
package, class, layer 간의 dependency 확인과 circular dependency 확인 등의 작업을 할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;사용법&quot;&gt;사용법&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://www.archunit.org/userguide/html/000_Index.html&quot;&gt;archunit의 가이드&lt;/a&gt; 참고&lt;/p&gt;

&lt;h2 id=&quot;test-코드를-통한-architecture-제한-예시&quot;&gt;test 코드를 통한 architecture 제한 예시&lt;/h2&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;@AnalyzeClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;packages&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;com.meansoup&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HexagonalArchitectureTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;nd&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;archunit 적용하기&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;domain&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;JavaClasses&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;importedClasses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ClassFileImporter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;importPackages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.meansoup&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;nc&quot;&gt;ArchRule&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;archRule&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;noClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;that&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;resideInAPackage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;..domain..&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dependOnClassesThat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;resideInAnyPackage&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;..adapter..&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;..application..&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;archRule&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;check&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;importedClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;plantuml을-통한-architecture-제한-예시&quot;&gt;plantuml을 통한 architecture 제한 예시&lt;/h2&gt;

&lt;p&gt;plantuml에 component diagram을 그려놓고 archunit을 적용할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HexagonalArchitectureTest&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    
    &lt;span class=&quot;nd&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;@DisplayName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;plantuml로 archunit 적용하기&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;byPlantUml&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nc&quot;&gt;JavaClasses&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;importedClasses&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ClassFileImporter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;withImportOption&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ImportOption&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Predefined&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;DO_NOT_INCLUDE_TESTS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;importPackages&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.meansoup&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;nc&quot;&gt;ClassesShouldConjunction&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shouldConjunction&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;classes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;adhereToPlantUmlDiagram&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;docs/01.architecture/component/architecture.puml&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;consideringOnlyDependenciesInDiagram&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;shouldConjunction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;check&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;importedClasses&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;withImportOption&lt;/code&gt;을 적지 않으면 테스트에서도 적용되고, 이게 현재 작성한 fitness 테스트까지 검사해서 테스트가 실패한다.&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-plantuml&quot;&gt;@startuml

[application] &amp;lt;&amp;lt;..application..&amp;gt;&amp;gt;
[domain] &amp;lt;&amp;lt;..domain..&amp;gt;&amp;gt;

[application] --&amp;gt; [domain]
@enduml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;위 테스트에서 사용한 예시 component diagram&lt;/p&gt;

&lt;h2 id=&quot;실제-사용&quot;&gt;실제 사용&lt;/h2&gt;

&lt;p&gt;초기 모듈을 개발하는 경우 개발 처음부터 설계된 package와 class에 맞춰 archunit 테스트를 작성하면 된다.&lt;br /&gt;
개발되는 모든 사항이 테스트를 통과해서 아키텍처에 맞게 반영되는지 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;그러나 이미 개발된 모듈이라면 패키지별로 테스트를 작성하고 수정하는 방식이 필요하다.&lt;br /&gt;
나 같은 경우는 이미 개발된 모듈의 domain 패키지의 dependency를 제거하는 것을 첫 번째 테스트로 잡았다.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.archunit.org/userguide/html/000_Index.html&lt;/li&gt;
  &lt;li&gt;https://www.baeldung.com/java-archunit-intro&lt;/li&gt;
  &lt;li&gt;https://d2.naver.com/helloworld/9222129&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/library/archunit</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/library/archunit</guid>
      </item>
    
      <item>
        <title>일회성 배치에 대한 회고</title>
        
          <description>&lt;p&gt;서버 개발을 하다보면 batch를 수행하게 될 일들이 종종있다.
종종이 어떨때는 자주가 되기도 한다.
batch application을 개발하는 것과는 별개로 &lt;strong&gt;한번만 수행되는 batch&lt;/strong&gt; 작업을 하게 되는 경우도 많다.&lt;/p&gt;

&lt;p&gt;이런 일회성 배치는 생각보다 자주 수행하게 되는데 많을 땐 한 해에 10번을 넘게 돌리기도 했다.
최근 데이터 정리를 위해 오랜만에 일회성 배치를 돌리면서 내 생각들을 정리한다.&lt;/p&gt;

&lt;h2 id=&quot;one-time-batch&quot;&gt;one time batch&lt;/h2&gt;

&lt;p&gt;일반적으로 사용하는 &lt;strong&gt;배치&lt;/strong&gt;작업과 &lt;strong&gt;일회성 배치&lt;/strong&gt;는 결이 좀 다른 것 같다.&lt;br /&gt;
한번만 수행하면 된다는 특징이 있다.&lt;/p&gt;

&lt;p&gt;일회성 배치를 뭐라고 하는지 모르겠지만 &lt;strong&gt;one time batch&lt;/strong&gt;라고 하면 좋을 것 같다.&lt;/p&gt;

&lt;p&gt;일회성 배치를 돌리는 상황들을 생각해보면 아래와 같은 케이스들이 있다.
다른 케이스가 더 있을지도 모르지만 내가 batch를 수행했던 이유들은 이렇다.&lt;/p&gt;

&lt;h3 id=&quot;1-migration&quot;&gt;1. migration&lt;/h3&gt;

&lt;p&gt;마이그레이션을 하는 이유 repository의 구조 변경을 하는 경우가 많다.&lt;br /&gt;
우리는 마이그레이션을 수 차례 진행했는데 이런 케이스다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;database를 변경하는 케이스&lt;/li&gt;
  &lt;li&gt;database 효율화를 위해 table을 통합하거나 스키마를 변경하는 케이스&lt;/li&gt;
  &lt;li&gt;storage key를 변경하는 케이스&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;legacy 모듈에는 database 스키마나 storage key가 굉장히 이상하게 작성되어 있는 경우가 종종 있다.&lt;br /&gt;
신규 피처를 추가하거나 리팩토링하면서 이런 로직들을 안고 분기처리할 수도 있지만 마이그레이션을 하면 코드 관리가 더 좋았다.&lt;br /&gt;
마이그레이션도 처음이 어렵지 여러번 하다보니 괜찮기도 했고.&lt;/p&gt;

&lt;h3 id=&quot;2-delete&quot;&gt;2. delete&lt;/h3&gt;

&lt;p&gt;서비스를 eof 시킬때도 일회성 배치를 활용했다.
서비스가 통채로 사라진다면 일정시간 보관 후 데이터를 전부 날리면 되겠지만 우리는 서비스의 일부 content만 eof되는 케이스가 있었다.&lt;/p&gt;

&lt;p&gt;이때도 일회성 배치를 계속 사용했다.&lt;/p&gt;

&lt;h3 id=&quot;3-check&quot;&gt;3. check&lt;/h3&gt;

&lt;p&gt;서비스에 버그가 있어서 장애를 겪는 사용자가 있는지 파악하기 위해 일회성 배치를 활용하기도 했다.&lt;br /&gt;
데이터 저장에 버그가 있는 이슈를 발견했을 때 이런 케이스에 해당하는 유저 데이터가 어느정도 되는지 파악하기 위해 사용하기도 한다.&lt;/p&gt;

&lt;h3 id=&quot;4-revise&quot;&gt;4. revise&lt;/h3&gt;

&lt;p&gt;버그를 찾았다면 수정을 해야할 경우에도 일회성 배치를 사용한다.&lt;/p&gt;

&lt;h2 id=&quot;배치에서-생각할-것&quot;&gt;배치에서 생각할 것&lt;/h2&gt;

&lt;p&gt;일회성 배치를 수십 차례 수행하면서 느낀 것. 배치에서 필요한 고려사항들.&lt;br /&gt;
이 느낀점은 한참 배치를 많이 수행하던 &lt;a href=&quot;/docs/retrospect/2021&quot;&gt;21년도 회고&lt;/a&gt;에서 회고한 내용도 포함한다.&lt;/p&gt;

&lt;h3 id=&quot;확장성-보장하기&quot;&gt;확장성 보장하기&lt;/h3&gt;

&lt;p&gt;대부분의 일회성 배치들은 대부분 정해진 기간이 있다.&lt;br /&gt;
마이그레이션이라면 기간이, eof를 위한 삭제에도 기간이 있고 이슈 해결을 위한 작업들은 언제나 ASAP.&lt;/p&gt;

&lt;p&gt;기간을 맞추기 위해, 혹은 낭비되는 cpu를 채우거나 인스턴스 숫자를 조절하기 위해서 보통 batch의 worker(instance 혹은 thread)가 확장 가능한 구조가 굉장히 중요하다.&lt;br /&gt;
우리는 배치를 한번 돌리면 대상이 수천만에서 수억이기 때문에 확장이 많이 필요했다.&lt;/p&gt;

&lt;p&gt;instance를 더 붙이고 싶은데 불가능하거나, 성능을 높이려면 재시작이 항상 필요하다면 곤란하다.
배치를 돌리다보면 성능을 늘리고 보니 더 늘리게 되는 경우가 태반이니까.=&lt;/p&gt;

&lt;h3 id=&quot;멱등성-보장하기&quot;&gt;멱등성 보장하기&lt;/h3&gt;

&lt;p&gt;재시작이 필요하지 않은 확장성을 보장하더라도, 배치를 돌리다보면 여러 이유로 배치 프로세스를 중단하고 재시작을 하는 경우가 많다.
배치 트리거 인스턴스에서 memory/disk가 부족해서 scale up, ebs 추가를 하기도 했고.&lt;br /&gt;
db thorttling 이슈로 input data를 정리해서 재수행하기도 했다.&lt;br /&gt;
뭐 그렇지 않더라도 인스턴스가 내려간다거나 하는 케이스도 고려되야할 것 같다.&lt;/p&gt;

&lt;p&gt;재수행 할 때마다 수행된 타겟이 batch에 다시 들어가더라도 문제가 없도록 멱등성이 고려되어야 한다.&lt;br /&gt;
그렇지 않으면 어디까지 돌렸는지를 정확하게 정리하는데 더 많은 시간을 쓰게 된다.&lt;br /&gt;
배치 수행이 한번 되든 열번 되든 타겟에는 한번 된 것과 동일한 문제 없는 상태여야한다는 말.&lt;/p&gt;

&lt;h3 id=&quot;재수행-고려하기&quot;&gt;재수행 고려하기&lt;/h3&gt;

&lt;p&gt;멱등성만 보장된다고 문제가 없는 건 아니다.&lt;br /&gt;
초기에 돌렸던 일회성 배치중 하나는 멱등성이 완벽하게 보장되었지만 재수행에 대한 고려가 되어있지 않은 케이스가 있었다.&lt;br /&gt;
배치가 돌아간 타겟이 다시 시간을 잡아먹으면서 배치가 길어지고, 타겟을 좀 더 추려내기 위해 개발자가 붙어 작업을 하기도 했다.&lt;/p&gt;

&lt;p&gt;재수행이 고려되어 있지 않다면 일주일을 배치를 돌리고 다시 돌렸을 때, 동작은 동일하지만 일주일을 꼬박 다시 기다려야한다거나 하는 이슈가 생길 수 있다.
물론 실제로 수행하다보면 일주일이나 돌렸다면 어느정도 타겟을 정리 하겠지만 앞서 말했듯 타겟을 명확하게 정리하는 일은 생각보다 귀찮다.&lt;br /&gt;
이미 수행된 타겟이 다시 재수행되는 경우 재수행 시간이 오래걸리지 않도록 고려가 필요하다.&lt;/p&gt;

&lt;h3 id=&quot;migration이라면-rollback-구조를-파악하기&quot;&gt;migration이라면 rollback 구조를 파악하기&lt;/h3&gt;

&lt;p&gt;많은 배치와 migration을 수행하면서 간단한 migration에는 자신감이 충만해질 때가 있다.&lt;br /&gt;
그래서 rollback에 대한 생각을 접어둘 때가 있는데, 배포 이후에 rollback이 불가능한 경우를 생각하면 아찔하다.&lt;br /&gt;
migration은 사용자의 data를 손대는 배치다보니 작업 수행 전후로 확인해야할 내용들을 명확히 정리하고 수행해야 한다.&lt;br /&gt;
migration 이후에도 이슈가 리포트되면 이전 상태로 rollback할 수 있는 구조를 가져가는 편이 안전하다.&lt;/p&gt;

&lt;h3 id=&quot;지표-확보하기&quot;&gt;지표 확보하기&lt;/h3&gt;

&lt;p&gt;배치를 수행하는데 이게 언제 끝날지 감이 잡히지 않는다면 곤란하다.&lt;br /&gt;
기간을 맞추기 위해선 tps나 batch의 예상 시간을 조회할 수 있는 지표를 남기면 유용하다.&lt;br /&gt;
&lt;strong&gt;이대로 배치를 돌리면 1년이 넘게 걸리겠다&lt;/strong&gt;는 인사이트를 지표를 통해 얻은적이 많다.&lt;br /&gt;
지표를 확보하고 필요하다면 배치를 확장한다.&lt;/p&gt;

&lt;p&gt;남은 타겟의 수나 예상 시간을 지표화하면 인스턴스에 들어가서 진행 상황을 보지 않더라도 잘 수행되고 있는지, 배치가 완료되었는지를 확인할 수 있어 좋다.&lt;/p&gt;

&lt;h3 id=&quot;data-flow-확인하기&quot;&gt;data flow 확인하기&lt;/h3&gt;

&lt;p&gt;우리는 지금 global 5개 region에서 서비스를 하고 있다.&lt;br /&gt;
file이 오가는 batch의 경우 binary data가 region을 넘어가는 경우가 발생하기도 하는데, 최대한 효율적으로 binary flow를 잡아갈 수 있도록 설계가 필요하다.&lt;br /&gt;
한 번은 설계를 잘 해놓고, binary flow를 놓쳐서 성능이 현저하게 떨어져서 다시 개발한 적이 있었다.&lt;/p&gt;

&lt;h2 id=&quot;배치-개발하기&quot;&gt;배치 개발하기&lt;/h2&gt;

&lt;p&gt;배치에서 필요한 것들을 생각해보면 배치를 어떻게 개발해야할지가 그려진다.&lt;br /&gt;
저 요구사항들을 맞추기 위해 우리가 개발했던 방향들.&lt;/p&gt;

&lt;h3 id=&quot;batch-api-개발&quot;&gt;batch api 개발&lt;/h3&gt;

&lt;p&gt;배치는 api를 사용하는 편이 좋다.&lt;br /&gt;
예전에는 db를 직접 조작하는 스크립트를 수행하는 적도 있었지만 스크립트 배치는 단점이 너무 크다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;소스코드가 잘 관리되지 않는다.&lt;/li&gt;
  &lt;li&gt;마찬가지로 소스 히스토리가 관리되지 않는다.&lt;/li&gt;
  &lt;li&gt;테스트가 넉넉하지 않고 허점이 있을 수 있다.&lt;/li&gt;
  &lt;li&gt;위험하다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;반면 서비스 코드에 api로 작성하게 되면 히스토리 관리나 테스트, 안전성을 확보할 수 있다.&lt;br /&gt;
그리고 서비스 코드의 domain과 usecase들을 활용할 수 있어서 개발이 훨씬 간단하다.&lt;/p&gt;

&lt;p&gt;위에서 말했듯 일회성 배치에서는 확장성이 가장 중요하다.&lt;br /&gt;
일회성 배치를 위해 배치 인스턴스를 확장 가능하게 가져가고 타겟을 분배하는 아키텍처를 잡는 것은 시간 낭비다.&lt;br /&gt;
was의 pipeline을 사용하거나 확장해서 사용하면 이걸 고려하지 않아도 된다.&lt;/p&gt;

&lt;h3 id=&quot;batch-runner-개발&quot;&gt;batch runner 개발&lt;/h3&gt;

&lt;p&gt;batch api를 만들었다면 target 리스트를 보고 api를 호출하는 runner가 있어야 한다.&lt;br /&gt;
runner는 언어가 무관하지만 경험상으론 golang이 가장 적절하다.&lt;/p&gt;

&lt;p&gt;초창기 우리팀의 일회성 배치는 python 스크립트로 타겟들을 읽어서 api를 호출하는 방식으로 구현됐다.&lt;br /&gt;
내가 이걸 처음 돌리게 됐을 때 대상 타겟이 수 억개 였고 python process를 늘리더라도 1년 이상의 시간이 걸리는 상황.&lt;br /&gt;
runner 자체가 오래걸리니 부하 조절을 할수가 없는 상황이었다.&lt;/p&gt;

&lt;p&gt;이를 해결하기 위해 golang으로 runner를 개발했다.&lt;br /&gt;
golang의 경우 kb 단위의 메모리를 사용하는 경량 쓰레드인 go-routine 덕분에 쓰레드 조절에 문제가 없었다.&lt;br /&gt;
backend가 충분히 받쳐준다면 runner의 문제로 부하를 조절하지 못하는 상황은 없다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;배치 수행하면서 c5.xlarge로도 3000개의 thread까지 호출했다.&lt;/li&gt;
  &lt;li&gt;이건 api의 workload가 중요한데 당시 batch api는 평균 1000ms.&lt;/li&gt;
  &lt;li&gt;이 때도 우리 일정상 더 높은 부하가 필요하지 않았을 뿐 c5.xlarge에서 3000개의 go-routine이 부담스럽진 않았다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이렇게 작성한 runner는 배치마다 조금씩 업데이트해서 현재는 모든 배치에서 거의 동일한 runner를 사용할 수 있게 됐다.&lt;/p&gt;

&lt;h3 id=&quot;batch-runner-개발시-생각할-것&quot;&gt;batch runner 개발시 생각할 것&lt;/h3&gt;

&lt;p&gt;runner에서는 배치 로그를 확인할 수 있으면 좋다.&lt;br /&gt;
어떤 이유로 실패했는지를 로그를 보고 알 수 있다면 api를 수정하기 쉽다. 이건 api도 어느정도 설계가 잘 되어야 한다.&lt;/p&gt;

&lt;p&gt;배치 결과 실패한 타겟들을 별도로 뽑을 수 있어야 한다.&lt;br /&gt;
실패한 타겟들을 따로 추출할 필요 없이 배치 수행시 실패한 타겟을 별도로 뽑아서 재수행시 해당 타겟들만 재수행할 수 있는 구조가 되어야 한다.&lt;br /&gt;
배치는 한 번에 성공하기는 불가능하고 수정과 배포를 하며 수차례 재수행하는데 수행이 간단해야 한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;이런 재수행이 한번의 스크립트로 수행될 수 있어야 재수행에 대한 시간낭비가 적고 귀찮음도 줄 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;동적으로 thread 추가가 가능해야 한다.&lt;br /&gt;
우리는 worker라고 불렀는데 property를 통해 thread를 동적으로 늘릴 수 있어야 한다.&lt;br /&gt;
지표를 확인하고 부하를 참고한 뒤 재수행 없이 확장 가능하도록 thread를 property 변경으로 늘릴 수 있는 구조를 만들어야 한다.&lt;/p&gt;

&lt;h2 id=&quot;문서화&quot;&gt;문서화&lt;/h2&gt;

&lt;p&gt;배치를 수행하는 정보를 기록하고 관리해야한다.&lt;br /&gt;
한 해에 열 번이 넘는 일회성 배치를 작업하면서 우리는 배치작업을 폴더 이름으로 관리했다.&lt;br /&gt;
우리도 이렇게 배치를 많이 돌리게 될줄은 몰랐지. 나중 가서야 우리가 문서화를 제대로 하지 않았다는 것을 확인했다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;migration1, migration2, migration 21, …&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;어떤 배치에서 어떤 작업들을 했는지 보이지가 않았다.&lt;br /&gt;
이런 배치들은 이름만 봐도 알 수 있게 분리되고 관리되어야 한다.&lt;/p&gt;

&lt;p&gt;시간이 지나고 이 배치들을 돌아봐야 할 때가 있다.&lt;br /&gt;
이슈가 생겼다거나, 특정 시점의 데이터가 수상하다거나.&lt;br /&gt;
배치에 대한 정보가 명확하게 기록되어 있지 않으면 나중엔 이걸 찾는 것도 일이다.&lt;/p&gt;

&lt;p&gt;배치가 열 번이 넘어갈 때쯤 나는 팀 docs 아래 문서 하나를 만들었다.&lt;br /&gt;
히스토리를 관리하는 &lt;strong&gt;history.md&lt;/strong&gt;에 배치 시작 시간, 끝나는 시간, 사용한 api, 타겟과 배치 특이사항을 기록하는 표를 작성했다.&lt;br /&gt;
배치 수행 기록을 한눈에 볼 수 있게 문서화하는 것이 중요하다.&lt;/p&gt;

&lt;p&gt;문서화의 다른 목적은 휴가를 잘 가기 위한 방향이다. &lt;br /&gt;
배치는 생각하지 못한 이슈로 길어지기도 한다.&lt;br /&gt;
내가 휴가를 가야될 때 다른 팀원이 배치 진행사항을 확인할 수 있도록 문서화 되어야 한다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/retrospect/one-time-batch</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/retrospect/one-time-batch</guid>
      </item>
    
      <item>
        <title>업무 효율 극강화 linux terminal 단축키</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;Linux Commands&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/dev-tools/linux-commands/terminal&quot; class=&quot;btn btn-purple&quot;&gt;Terminal Shortcut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/tmux&quot; class=&quot;btn&quot;&gt;tmux&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/cut&quot; class=&quot;btn&quot;&gt;cut&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/jq&quot; class=&quot;btn&quot;&gt;jq&lt;/a&gt;
&lt;a href=&quot;/docs/tools/linux-commands/screen&quot; class=&quot;btn&quot;&gt;screen&lt;/a&gt;
&lt;a href=&quot;/docs/dev-tools/linux-commands/split&quot; class=&quot;btn&quot;&gt;split&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;모든 단축키가 업무 효율을 굉장히 올려준다만 리눅스 터미널 단축키만큼 많이 쓰이고 당연하게 쓰이는건 없는 것 같다.&lt;br /&gt;
그만큼 리눅스 단축키를 알면 효율이 급격히 올라간다.&lt;/p&gt;

&lt;h2 id=&quot;창-조절&quot;&gt;창 조절&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;단축키&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;windows + up&lt;/td&gt;
      &lt;td&gt;터미널을 전체 화면으로 만든다.&lt;/td&gt;
      &lt;td&gt;터미널에서만 동작하는 명령어가 아니라 모든 앱에서 동작한다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;windows + down&lt;/td&gt;
      &lt;td&gt;터미널을 작은 화면으로 만든다.&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;windows + left&lt;/td&gt;
      &lt;td&gt;터미널을 왼쪽으로 옮긴다.&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;windows + right&lt;/td&gt;
      &lt;td&gt;터미널을 오른쪽으로 옮긴다.&lt;/td&gt;
      &lt;td&gt;-&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ctrl + ‘-‘&lt;/td&gt;
      &lt;td&gt;터미널 크기를 줄인다.&lt;/td&gt;
      &lt;td&gt;전체화면에선 터미널의 글자 크기를 줄인다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ctrl + shift + ‘+’&lt;/td&gt;
      &lt;td&gt;터미널 크기를 키운다.&lt;/td&gt;
      &lt;td&gt;전체화면에선 터미널의 글자 크기를 키운다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;프로세스-관련&quot;&gt;프로세스 관련&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;단축키&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + C&lt;/td&gt;
      &lt;td&gt;현재 실행 중인 명령어를 취소한다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + D&lt;/td&gt;
      &lt;td&gt;현재 터미널 세션을 종료한다. exit과 유사.&lt;/td&gt;
      &lt;td&gt;exit을 치지 않아도 되서 좋다. 특히 jumphost 안에서나 tmux 같이 exit이 연달아 필요했을 때 편하다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;터미널-출력-관련&quot;&gt;터미널 출력 관련&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;단축키&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + S&lt;/td&gt;
      &lt;td&gt;터미널에 나오는 출력을 잠시 멈춘다.&lt;/td&gt;
      &lt;td&gt;로그를 본다거나 너무 많은 출력으로 보고싶은 터미널을 볼 수 없을 때 멈추고 보기 좋다.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + Q&lt;/td&gt;
      &lt;td&gt;Ctrl + S랑 쌍으로 멈춘것 풀기.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + L&lt;/td&gt;
      &lt;td&gt;터미널 지우기. clear와 유사&lt;/td&gt;
      &lt;td&gt;clear를 치지 않아도 되니 좋다.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;터미널-입력-관련&quot;&gt;터미널 입력 관련&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;단축키&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + U&lt;/td&gt;
      &lt;td&gt;현재 입력중인 줄을 지운다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + K&lt;/td&gt;
      &lt;td&gt;현재 커서 위치부터 줄 끝까지 지운다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + W&lt;/td&gt;
      &lt;td&gt;현재 커서 위치부터 이전 단어까지 지운다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;명령어-관련&quot;&gt;명령어 관련&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;단축키&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Tab&lt;/td&gt;
      &lt;td&gt;자동완성&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;up / down&lt;/td&gt;
      &lt;td&gt;이전 명령어&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Ctrl + R&lt;/td&gt;
      &lt;td&gt;이전에 실행했던 명령어들을 검색한다.&lt;/td&gt;
      &lt;td&gt;이거 없으면 일 못하지.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;history--command&quot;&gt;history (!) command&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;단축키&lt;/th&gt;
      &lt;th&gt;설명&lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;!!&lt;/td&gt;
      &lt;td&gt;가장 최근에 수행한 명령어를 재수행한다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;!{abc}&lt;/td&gt;
      &lt;td&gt;abc로 시작하는 가장 최근에 수행한 명령어를 재수행한다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;!{abc}:p&lt;/td&gt;
      &lt;td&gt;abc로 시작하는 가장 최근에 수행한 명령어를 수행하지 않고 출력한다.&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux-commands/terminal</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux-commands/terminal</guid>
      </item>
    
      <item>
        <title>api gateway, envoy란?</title>
        
          <description>&lt;h2 id=&quot;envoy&quot;&gt;Envoy?&lt;/h2&gt;

&lt;p&gt;Envoy는 대규모 현대 서비스 지향 아키텍처를 위해 설계된 L7 proxy 및 communication bus이다.&lt;br /&gt;
Lift의 프로젝트로, Cloud Native Computing Foundation(CNCF)의 Graduated Project이다.&lt;/p&gt;

&lt;p&gt;이 프로젝트는 아래와 같은 목적으로 탄생했다.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;네트워크는 애플리케이션에 투명해야 한다. 네트워크 및 애플리케이션 문제가 발생하면 문제의 원인을 쉽게 파악할 수 있어야 한다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;msa의 단일 application과 service를 위해 설계된 &lt;strong&gt;high performance C++ distributted proxy&lt;/strong&gt;으로, &lt;br /&gt;
yaml로 policy를 작성하면 고성능의 proxy를 사용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;why-envoy&quot;&gt;why envoy?&lt;/h2&gt;

&lt;p&gt;우리가 gateway를 찾을 때 우리의 요구사항은 간단했다.&lt;br /&gt;
기본적으로 gateway가 제공하는 인증/인가, end point의 역할을 하는 것.&lt;br /&gt;
그리고 http/2와 grpc를 지원하는 것.&lt;/p&gt;

&lt;p&gt;envoy, kong, zuul, spring cloud gateway 같은 gateway들은 최근에는 모두 http/2, grpc를 지원하고 있다.&lt;br /&gt;
그 중에 envoy를 선택한 이유는 &lt;strong&gt;learning curve&lt;/strong&gt;가 비교적 낮기 때문이다.&lt;br /&gt;
그리고 오픈소스이며 enterprise도 존재하지 않는다. (kong은 enterpirse 서비스가 존재)&lt;/p&gt;

&lt;p&gt;envoy는 정책 기반으로 동작하는 proxy로 yaml 정책을 명시하기만 하면 proxy를 사용할 수 있다. 고성능으로.&lt;br /&gt;
필요한 기능은 C++, Lua로 작성한 filter를 추가할 수 있다. &lt;br /&gt;
대부분의 필요한 기능들은 이미 필터가 제공되고 있기도 하다.&lt;/p&gt;

&lt;p&gt;envoy는 태생부터 service mesh를 위해 만들어진 서비스이다. &lt;br /&gt;
k8s에서 service mesh로 사용하는 istio에서도 envoy를 사용하고 있기 때문에, 검증된 솔루션일 뿐만 아니라 envoy를 사용함으로써 추후에 istio를 더 쉽게 도입할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;기능&quot;&gt;기능&lt;/h2&gt;

&lt;p&gt;기능이야 많지만 대표적인 기능들만 추려보면.&lt;/p&gt;

&lt;h3 id=&quot;out-of-process-architecture&quot;&gt;Out of process architecture&lt;/h3&gt;

&lt;p&gt;Envoy proxy는 self contained process로 모든 언어와 application server와 함께 동작할 수 있게 설계되었다.&lt;br /&gt;
envoy는 application과 투명하게 메세지를 주고 받으며 여러 application과 언어를 사용하는 현대 서비스 방향을 투명하게 만들어준다.&lt;/p&gt;

&lt;p&gt;그 자체로 메모리사용량이 적은 고성능의 서버이다.  &lt;br /&gt;
모든 프로그래밍 언어, 프레임워크와 함께 실행될 수 있다.&lt;/p&gt;

&lt;p&gt;즉 다양한 언어와 프레임워크를 사용하는 MSA 구조에 적합하고 유용하다.&lt;/p&gt;

&lt;h3 id=&quot;l3l4-filter-architecture&quot;&gt;L3/L4 filter architecture&lt;/h3&gt;

&lt;p&gt;envoy는 L7 proxy 이지만 L3/L4 proxy에도 핵심 기능이 있다.&lt;br /&gt;
&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/listeners/listener_filters#arch-overview-network-filters&quot;&gt;pluggable filter&lt;/a&gt;를 통해 TCP/UDP 관련 처리 등을 할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;http-l7-filter-architecture&quot;&gt;HTTP L7 filter Architecture&lt;/h3&gt;

&lt;p&gt;Http는 현대 application architecture에서 중요하고 &lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/http_filters&quot;&gt;envoy는 이를 지원&lt;/a&gt;한다.&lt;br /&gt;
buffering, rate limiting, routing/forwarding 등을 수행할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;http-l7-routing&quot;&gt;HTTP L7 routing&lt;/h3&gt;

&lt;p&gt;path, authority, content type, runtime value 등에 따라 routing이나 redirectiong을 할 수 있는 routing을 지원한다.&lt;/p&gt;

&lt;h3 id=&quot;protocol-support&quot;&gt;protocol support&lt;/h3&gt;
&lt;p&gt;HTTP/2에 대해 투명한 지원을 한다. HTTP/1.1과 HTTP/2를 조합하여 사용할수도 있다.&lt;br /&gt;
gRPC를 지원한다.&lt;br /&gt;
현재 알파버전으로 HTTP/3도 지원하고 있다.&lt;/p&gt;

&lt;h3 id=&quot;service-discovery-and-dynamic-configuration&quot;&gt;Service discovery and dynamic configuration&lt;/h3&gt;

&lt;p&gt;계층화된 &lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/operations/dynamic_configuration#arch-overview-dynamic-config&quot;&gt;dynamic configuration APIs&lt;/a&gt;를 사용한다.&lt;br /&gt;
이 layer는 envoy에 backend cluster, routing 등에 대해 dynmic update를 제공한다.&lt;/p&gt;

&lt;h3 id=&quot;advanced-load-balancing&quot;&gt;Advanced load balancing&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/health_checking#arch-overview-health-checking&quot;&gt;health check&lt;/a&gt;, &lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/http_routing#arch-overview-http-routing-retry&quot;&gt;automatic retries&lt;/a&gt;, &lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/circuit_breaking#arch-overview-circuit-break&quot;&gt;circuit breaking&lt;/a&gt;, &lt;a href=&quot;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/other_features/global_rate_limiting#arch-overview-global-rate-limit&quot;&gt;global rate limiting&lt;/a&gt; 등을 제공한다.&lt;/p&gt;

&lt;h2 id=&quot;network-topology&quot;&gt;Network topology&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt; &lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;service mesh&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/post/apis/envoy/topology1.svg&quot; alt=&quot;topology1&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;internal load balancer&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/post/apis/envoy/topology2.svg&quot; alt=&quot;topology2&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ingress/egress proxy on the network edge&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/post/apis/envoy/topology3.svg&quot; alt=&quot;topology3&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;multi-tier topologies&lt;/td&gt;
      &lt;td&gt;&lt;img src=&quot;/images/post/apis/envoy/topology4.svg&quot; alt=&quot;topology4&quot; /&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;envoy는 service mesh의 sidecar proxy로 시작되었지만 다양한 network topology에서 사용될 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;envoy-architecture&quot;&gt;envoy architecture&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/apis/envoy/envoy_architecture.svg&quot; alt=&quot;architecture&quot; /&gt;&lt;/p&gt;

&lt;p&gt;envoy는 listner와 cluster라는 2개의 main part로 이루어져 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;listener는 downstream request를 핸들링하고 lifecycle을 관리하는 책임이 있다.&lt;/li&gt;
  &lt;li&gt;cluster는 endpoint에 대한 upstream connection을 선택하고 구성하는 책임이 있다.&lt;/li&gt;
  &lt;li&gt;listner와 cluster는 HTTP router filter로 연결되어 있다.&lt;/li&gt;
  &lt;li&gt;filter는 listener로부터 받은 요청을 filtering, 조작, 인증 등을 거쳐 cluster로 routing 하는 역할을 한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://www.envoyproxy.io/docs/envoy/latest/intro/what_is_envoy&lt;/li&gt;
  &lt;li&gt;https://www.envoyproxy.io/docs/envoy/latest/intro/life_of_a_request&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/envoy/envoy</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/envoy/envoy</guid>
      </item>
    
      <item>
        <title>마이크로 서비스(MSA)란? 개념, 장단점과 방향성 이해하기</title>
        
          <description>&lt;h2 id=&quot;마이크로-서비스-msa-microservice-architecture&quot;&gt;마이크로 서비스 (MSA, MicroService Architecture)&lt;/h2&gt;

&lt;p&gt;마이크로 서비스는 한 가지만 아주 잘 처리하자는게 기본 원칙이다.&lt;br /&gt;
그렇기 때문에 비즈니스 도메인을 중심으로 모델링된 여러 마이크로 서비스들이 나오게된다.&lt;br /&gt;
독립적으로 배포 가능한 서비스들이 네트워크로 서로 통신한다.&lt;/p&gt;

&lt;h2 id=&quot;마이크로-서비스의-특징&quot;&gt;마이크로 서비스의 특징&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;독립적인 배포 가능성&lt;/li&gt;
  &lt;li&gt;느슨한 결합&lt;/li&gt;
  &lt;li&gt;자유로운 언어 선택&lt;/li&gt;
  &lt;li&gt;각 컴포넌트가 갖는 자체 데이터베이스&lt;/li&gt;
  &lt;li&gt;서비스 안전성과 유지보수성&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;독립적인 배포 가능성을 위해 느슨한 결합과, 자체 데이터베이스가 요구된다.&lt;br /&gt;
독립적인 배포를 통해 언어에 구애받지 않게 되며, 서비스 유지보수에 용이하고 안전성을 얻을 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;독립적인-배포-가능성-independent-deployability&quot;&gt;독립적인 배포 가능성 (Independent deployability)&lt;/h2&gt;

&lt;p&gt;다른 서비스를 활용하지 않고 마이크로서비스에 변경을 가하는 방식으로 서비스 환경에 배포할 수 있다는 개념이다.&lt;br /&gt;
서비스가 &lt;strong&gt;느슨하게 결합(loosely coupled)&lt;/strong&gt; 되어 있음을 보증할 필요가 있고, 이를 위해 서비스간에 안정적인 계약이 필요하다.&lt;br /&gt;
인터페이스가 안정적이게 느슨하려면 서비스 경계를 찾아야한다.&lt;br /&gt;
그래서 도메인 중심의 모델링이 중요하다.&lt;/p&gt;

&lt;h3 id=&quot;데이터-소유권-문제&quot;&gt;데이터 소유권 문제&lt;/h3&gt;

&lt;p&gt;몇몇 구현의 선택이 느슨한 결합 어렵게 만드는데 가장 자주 보이는 예시는 &lt;strong&gt;데이터베이스의 공유&lt;/strong&gt;이다.&lt;/p&gt;

&lt;p&gt;데이터 베이스 공유에 대한 원칙&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;정말 필요한 경우가 아니라면 DB를 공유하지 말자.&lt;/li&gt;
  &lt;li&gt;정말 필요해도 피할 수 있는 방법을 찾자.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;어떤 이유로 변경될 수 있는 내부 구현 세부사항으로부터 안정적인 공개 계약으로 서비스를 매핑해야한다. &lt;br /&gt;
독립적 배포가능성에서는 안정적인 인터페이스가 필수이며 DB 공유는 독립적 배포 가능성을 위해할 수 있는 최악의 선택이다.&lt;/p&gt;

&lt;p&gt;데이터를 보유한 서비스에 요청하는게 당연하다.&lt;br /&gt;
무엇을 공유하고 숨길지 결정해야하고, 이 인터페이스가 안정적으로 나와야 한다.&lt;br /&gt;
인터페이스가 바뀌면 사용하는 서비스들도 변경되어야 한다.&lt;/p&gt;

&lt;h3 id=&quot;서비스와-데이터-소유권&quot;&gt;서비스와 데이터 소유권&lt;/h3&gt;

&lt;p&gt;MSA는 아니지만 내가 개발하는 모듈에서 배치와 같은 작업으로 멀티 서비스 구조를 갖게 되었을 때  데이터베이스 공유 문제로 이슈가 된적이 있다.&lt;/p&gt;

&lt;p&gt;우리는 서비스 서버와 서비스 서버에서 발생한 메시지를 처리하는 배치 서버에서 동일한 데이터베이스를 공유했다.&lt;br /&gt;
초기엔 편하게 서비스를 개발하고 유지했는데, 키와 스키마 변경, 데이터 베이스 변경 등의 이슈 때마다 배포 순서를 신경써야 했다.&lt;br /&gt;
한번은 서비스 서버의 데이터 반영이 배치 서버에 반영되지 않아 사용자 데이터를 유실할 뻔 하기도 했다.&lt;/p&gt;

&lt;p&gt;그 이후로 개발하는 배치에선 데이터베이스 공유를 하지 않는 방향을 기본으로 한다.&lt;br /&gt;
데이터의 안정성과 데이터에 대한 책임을 하나의 서비스가 갖는 것이 중요하다.&lt;br /&gt;
이건 어떤 편의성이 있더라도 교환해선 안되는 문제이다.&lt;/p&gt;

&lt;h2 id=&quot;마이크로-서비스의-장점&quot;&gt;마이크로 서비스의 장점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;독립적인 배포로 시스템 확장과 견고성 개선
    &lt;ul&gt;
      &lt;li&gt;독립적인 배포는 각각의 서비스에 대한 자체적인 빌드, 배포, 테스트, 모니터링, 확장, 롤백이 가능하다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;서비스의 병렬 개발(&lt;a href=&quot;#콘웨이의-법칙&quot;&gt;콘웨이의 법칙&lt;/a&gt;)&lt;/li&gt;
  &lt;li&gt;맡은 부분에만 몰입해서 개발&lt;/li&gt;
  &lt;li&gt;다양한 기술적 선택&lt;/li&gt;
  &lt;li&gt;아키텍처적 유연성&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;콘웨이의-법칙&quot;&gt;콘웨이의 법칙&lt;/h3&gt;

&lt;p&gt;&lt;em&gt;시스템 구조는 그 시스템을 설계하는 조직의 통신 구조를 그대로 따라갈 수밖에 없다.&lt;/em&gt; - 콘웨이&lt;/p&gt;

&lt;p&gt;‘조직의 통신 구조에 따라 제품을 만들게 된다.’는 현상이다.&lt;br /&gt;
모놀리스로 가게되면 모놀리스 구조의 큰 개발팀이 일해야 하는 구조가 되며, MSA로 가게되면 각각의 서비스 개발팀이 나뉘거나 독립적인 개발이 가능한 구조가 된다.&lt;/p&gt;

&lt;p&gt;그런데 반대로 이미 만들어진 시스템 구조가 조직의 통신 구조에 영향을 미치기도 한다.&lt;br /&gt;
서비스와 팀이 아직 작을 때 모놀리스를 선택하게 되면 서비스와 팀이 커져서 팀을 나누게 될 때, 적절히 팀을 나눌 수가 없게 된다.&lt;br /&gt;
큰 모놀리스 서비스에서 업무 영역을 나누게 되면 커뮤니케이션 비용이 커질 수 밖에 없다.&lt;/p&gt;

&lt;h2 id=&quot;마이크로-서비스-단점&quot;&gt;마이크로 서비스 단점&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;복잡성 증가
    &lt;ul&gt;
      &lt;li&gt;전체 시스템의 복잡성이 증가한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;테스트 및 디버깅 비용 증가
    &lt;ul&gt;
      &lt;li&gt;여러 서비스를 관통하는 acceptance 테스트를 작성하기 더 어렵다.&lt;/li&gt;
      &lt;li&gt;이슈 등으로 디버깅이 필요한 경우에도 동일하다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;네트워크를 사용하는 대기시간
    &lt;ul&gt;
      &lt;li&gt;각 서비스를 거치기 때문에 아무리 효율적인 기술들(grpc 등)을 사용한다 하더라도 모놀리스에 비해 대기시간이 길어질 수 밖에 없다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;예측할 수 없는 통신 문제
    &lt;ul&gt;
      &lt;li&gt;서비스 통신, 네트워크, 서비스 다운 등의 문제에 대한 각각 서비스의 대응을 설계해야 한다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;결합도와-응집력&quot;&gt;결합도와 응집력&lt;/h2&gt;

&lt;p&gt;서비스는 응집력이 높고 결합도가 낮아야한다.&lt;br /&gt;
결합도와 응집력을 이해하는게 중요하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;결합도는 한가지를 바꾸면 다른 것도 바꿀 필요가 있는 방식.&lt;/li&gt;
  &lt;li&gt;응집력은 관련된 코드를 그룹으러 묶는 방식.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;구현-결합도-implementation-coupling&quot;&gt;구현 결합도 (implementation coupling)&lt;/h3&gt;

&lt;p&gt;가장 위험한 형태의 결합도지만 가장 쉽게 결합도를 낮출 수 있다.&lt;br /&gt;
위에서 예를 들었던 DB의 공유가 구현 결합도의 가장 고전적인 예시이다.&lt;br /&gt;
DB를 공유하면 스키마 구조, 쿼리, 행의 내용까지 모두 결합된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;인터페이스를 두고 해당 서비스에 요청하는 방식으로 결합을 낮춘다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;시간적-결합도-temporal-couping&quot;&gt;시간적 결합도 (temporal couping)&lt;/h3&gt;

&lt;p&gt;메세지가 전송되는 시점과 메세지가 처리되는 방식이 시간과 관련되어 있는 경우에 대한 결합도이다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;캐싱등의 해결책이 있을 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;배포-결합도-deployment-coupling&quot;&gt;배포 결합도 (deployment coupling)&lt;/h3&gt;

&lt;p&gt;배포 결합도가 높은 서비스의 예를 들면 모놀리스이다.&lt;br /&gt;
모놀리스에서는 한 곳의 변경으로 전체 배포가 필요하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;배포에는 위험이 따르고 위험을 줄이는 방식으로 마이크로 서비스로 배포 결합도를 낮출 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;도메인-결합도-domain-coupling&quot;&gt;도메인 결합도 (domain coupling)&lt;/h3&gt;

&lt;p&gt;마이크로 서비스에서는 상호작용이 있기 때문에 도메인 결합도는 당연하다.&lt;br /&gt;
주문하려면 고객 주문 정보를, 배송하려면 고객 주소 정보를 알아야 한다.&lt;br /&gt;
마이크로 서비스에서는 이런 정보들이 각각 다른 마이크로 서비스에 있게되며 필요한 도메인만 사용하는 방식으로 도메인 결합도를 낮춘다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;꼭 알지 않아도 되는 도메인은 메세지에 보내어 서비스에서 직접 도메인을 알지 않도록 결합도를 낮출수도 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;msa의-방향&quot;&gt;MSA의 방향&lt;/h2&gt;

&lt;p&gt;가능한 작은 인터페이스를 유지하는 것이 좋다.&lt;br /&gt;
그러나 처음 MSA를 한다면 규모를 작게하기 보단 작게 만들 수 있는 방향으로 모델링하되 컴포넌트의 개수를 너무 작지 않게 가져간다.&lt;br /&gt;
그리고 점진적으로 컴포넌트를 늘려갈 수 있도록 한다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;마이크로서비스 도입, 이렇게 한다 1장, 샘 뉴먼&lt;/li&gt;
  &lt;li&gt;마이크로 서비스 아키텍처 1장, 우메쉬 램 샤르마&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/design/msa</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/design/msa</guid>
      </item>
    
      <item>
        <title>이벤트 기반 아키텍처(EDA)란? MSA의 문제점과 EDA의 해결책</title>
        
          <description>&lt;h2 id=&quot;이벤트-기반-아키텍처-eda-event-driven-architecture&quot;&gt;이벤트 기반 아키텍처 (EDA, Event Driven Architecture)&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;The world is Asynchronous&lt;/em&gt; - AWS re:Invent 2022&lt;/p&gt;

&lt;p&gt;&lt;em&gt;애플리케이션이 클라우드 네이티브거나 대규모 분산 환경에서 돌아가면서 메세징을 사용하지 않는다면 버그일 가능성이 높다.&lt;/em&gt; - Tim Bray&lt;/p&gt;

&lt;p&gt;실제 세계는 async하게 돌아가고 있고, 이렇게 모델링을 하면 더욱 느슨한 결합을 유지할 수 있다.&lt;br /&gt;
마이크로 서비스에서 더 느슨한 결합을 갖기 위해 진화된 architecture.&lt;/p&gt;

&lt;h2 id=&quot;특징&quot;&gt;특징&lt;/h2&gt;

&lt;p&gt;EDA는 시스템이 이벤트를 생산/소비 하는 방식으로 서로 통신한다.&lt;br /&gt;
소비된 이벤트는 바로 사라지지 않고 같은 메세지를 필요로하는 다른 컨슈머도 가져갈 수 있다.&lt;/p&gt;

&lt;p&gt;MSA에서 EDA로 나가는 이유는 더 &lt;strong&gt;느슨한 결합&lt;/strong&gt;을 위해서이다.&lt;br /&gt;
MSA에 event를 도입하면 마이크로 서비스간에 coupling을 없앨 수 있기 때문에 신규 서비스의 확장에 열려있는 구조이다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;sender와 receiver를 추상화&lt;/li&gt;
  &lt;li&gt;응답성 향상 및 종속성 감소&lt;/li&gt;
  &lt;li&gt;서비스를 사용할 수 있을 때까지 메세지를 버퍼링&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;monolithic-vs-msa-vs-eda&quot;&gt;Monolithic vs MSA vs EDA&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;특징&lt;/th&gt;
      &lt;th&gt;Monolithic&lt;/th&gt;
      &lt;th&gt;MSA&lt;/th&gt;
      &lt;th&gt;EDA&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;서비스 구조&lt;/td&gt;
      &lt;td&gt;단일 서비스&lt;/td&gt;
      &lt;td&gt;독립적인 서비스&lt;/td&gt;
      &lt;td&gt;독립적인 서비스&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;통신 방식&lt;/td&gt;
      &lt;td&gt;프로세스 내 동기/비동기&lt;/td&gt;
      &lt;td&gt;프로세스 간 동기/비동기&lt;/td&gt;
      &lt;td&gt;프로세스 간 비동기 이벤트&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;코드베이스&lt;/td&gt;
      &lt;td&gt;단일 코드베이스&lt;/td&gt;
      &lt;td&gt;서비스별 독립 코드베이스&lt;/td&gt;
      &lt;td&gt;서비스별 독립 코드베이스&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;데이터베이스&lt;/td&gt;
      &lt;td&gt;단일 데이터베이스&lt;/td&gt;
      &lt;td&gt;서비스별 독립 데이터베이스&lt;/td&gt;
      &lt;td&gt;서비스별 독립 데이터베이스&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;배포 및 확장성&lt;/td&gt;
      &lt;td&gt;전체 서비스 배포/확장&lt;/td&gt;
      &lt;td&gt;서비스별 배포/확장&lt;/td&gt;
      &lt;td&gt;서비스별 배포/확장&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;운영 복잡성&lt;/td&gt;
      &lt;td&gt;낮음&lt;/td&gt;
      &lt;td&gt;높음&lt;/td&gt;
      &lt;td&gt;높음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;기능 추가 및 수정 복잡성&lt;/td&gt;
      &lt;td&gt;높음&lt;/td&gt;
      &lt;td&gt;낮음&lt;/td&gt;
      &lt;td&gt;낮음&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;의존성&lt;/td&gt;
      &lt;td&gt;강하게 결합된 의존성&lt;/td&gt;
      &lt;td&gt;느슨하게 결합된 의존성&lt;/td&gt;
      &lt;td&gt;더 느슨하게 결합된 의존성&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;장애 영향도&lt;/td&gt;
      &lt;td&gt;특정 컴포넌트 실패 시 전체 애플리케이션 중단 가능&lt;/td&gt;
      &lt;td&gt;컴포넌트 분리로 장애 격리&lt;/td&gt;
      &lt;td&gt;느슨한 결합으로 더 나은 장애 격리&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;기술 스택&lt;/td&gt;
      &lt;td&gt;단일 기술 스택&lt;/td&gt;
      &lt;td&gt;다양한 기술 스택&lt;/td&gt;
      &lt;td&gt;다양한 기술 스택&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;synchronous-msa의-문제와-eda의-해결책&quot;&gt;synchronous MSA의 문제와 EDA의 해결책&lt;/h2&gt;

&lt;p&gt;synchoronous 마이크로 서비스의 문제는 asynchoronous EDA의 장점이기도 하다.&lt;/p&gt;

&lt;h3 id=&quot;결합도&quot;&gt;결합도&lt;/h3&gt;

&lt;p&gt;자신이 할 일을 다른 서비스에 의존한다.&lt;br /&gt;
의존관계가 꼬리에 꼬리를 물면 나중에 어느 서비스가 어떤 로직을 담당하는지 파악하기가 어렵다.&lt;br /&gt;
synchoronous MSA는 implementation coupling은 없지만 temporal coupling을 가지고 있는 구조이다.&lt;/p&gt;

&lt;p&gt;EDA는 event를 통해 temporal coupling까지 끊어낸다.&lt;br /&gt;
sender는 event를 발행하고 client에 바로 응답을 줄 수 있으므로 client 응답이 빨라지고 사용자 경험을 좋게 만들 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;부하와-의존성-확장&quot;&gt;부하와 의존성 확장&lt;/h3&gt;

&lt;p&gt;한 서비스의 확장 가능 여부를 확인할 때 해당 서비스가 의존하는 다른 서비스들이 확장 가능한지 확인해야 한다.&lt;br /&gt;
부하가 늘거나 병목이 생기는 경우 장애가 되며 이를 서비스 운영중에 고려해야 한다.&lt;/p&gt;

&lt;p&gt;EDA의 경우 늘어난 호출이 sender나 receiver에게 병목 등의 이슈로 장애가 되지 않는다.&lt;br /&gt;
receiver가 consumption 비율을 조절할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;장애의-전파와-장애-처리&quot;&gt;장애의 전파와 장애 처리&lt;/h3&gt;

&lt;p&gt;synchronous의 경우 장애가 전파된다.&lt;br /&gt;
전파되는 장애가 문제가 생기기도 하고 이를 위해 circuit breaker 같은 패턴을 사용할수도 있다.&lt;br /&gt;
더 중요한 문제는 실패로 인한 정합성을 위해 실패시 어떻게 처리할지를 정의해야하는데 서비스가 많을수록 복잡하다.&lt;/p&gt;

&lt;p&gt;EDA의 경우 장애가 전파되지 않는다.&lt;br /&gt;
장애로 인한 복구도 해당 event 단위로 복구할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;분산-모놀리스&quot;&gt;분산 모놀리스&lt;/h3&gt;

&lt;p&gt;서비스가 분산 모놀리스처럼 동작하도록 조합돼서 서비스간 호출이 얽히고 설킨다.&lt;br /&gt;
느슨한 결합을 위한 마이크로 서비스이지만 synchronous 이기 때문에 결합이 유지되며 어떤 경우엔 더 복잡하다.&lt;/p&gt;

&lt;p&gt;EDA의 경우 별개의 event이기 때문에 호출이 명확하다.&lt;br /&gt;
그치만 디버깅을 위해서라면 조금 더 헷갈릴 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;eda에서-고려해야할-점&quot;&gt;EDA에서 고려해야할 점&lt;/h2&gt;

&lt;p&gt;synchronous MSA의 장점이기도 하다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;직접 요청 &amp;amp; 응답이 필요한 유즈케이스에선 적절하지 않음&lt;/li&gt;
  &lt;li&gt;네트워크 지연시간&lt;/li&gt;
  &lt;li&gt;보다 더 어려운 구조&lt;/li&gt;
  &lt;li&gt;여러 서비스에 걸친 추적이 용이&lt;/li&gt;
  &lt;li&gt;디버깅과 가시성이 더 좋음&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=RfvL_423a-I&quot;&gt;AWS re:Invent 2022 - Keynote with Dr. Werner Vogels&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;이벤트 기반 마이크로서비스 구축: 대규모 조직 데이터를 활용하는 기법 1장&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/design/eda</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/design/eda</guid>
      </item>
    
      <item>
        <title>서버 개발자, 2023 회고</title>
        
          <description>&lt;p&gt;23년은 새로운 팀으로 옮기며 내 능력들을 테스트해볼 수 있는 시간이었다.&lt;br /&gt;
한 해를 돌아보니 생각보다 새롭게 경험한 일들이 많다.&lt;br /&gt;
그럼에도 돌아보면 아쉬운 것들도 많고.&lt;/p&gt;

&lt;h2 id=&quot;팀-문화-리딩하기&quot;&gt;팀 문화 리딩하기&lt;/h2&gt;

&lt;p&gt;올해는 팀을 옮긴 후 팀의 문화를 만드는데 시간을 많이 쏟은 해였다.&lt;/p&gt;

&lt;p&gt;팀 문화가 무너지고 정체된 팀에 문화를 만들자며 파트 리더가 나를 현재 팀으로 보냈다.&lt;br /&gt;
연간 회고를 하며 &lt;a href=&quot;/docs/retrospect/2022&quot;&gt;작년 회고&lt;/a&gt;를 봤을 때, 이전 팀은 팀 문화를 참 잘 만들어가던 팀이었구나 느낀다.&lt;br /&gt;
파트 리더는 ‘문화를 같이 잘 만들어 가는 것과 없는 곳에서 문화를 만드는 것은 다르다’고 ‘문화에 적응하는 사람이 있고 이끄는 사람이 있다. 이끌길 바란다’며 문화가 없는 곳에서 만들 수 있는 경험은 값진 경험이라고 하시며 나를 보냈다.&lt;/p&gt;

&lt;p&gt;처음 팀에 와서 팀 문화를 보곤 조금은 착잡했는데 한 해를 돌아보면 나한테는 팀 문화를 리딩해보는 경험을 해보는 해가 됐던 것 같다.&lt;/p&gt;

&lt;h3 id=&quot;리뷰-문화-만들기&quot;&gt;리뷰 문화 만들기&lt;/h3&gt;

&lt;p&gt;처음 팀에 왔을땐 개발팀의 기본이라고 생각하는 리뷰 문화조차 제대로 되지 않아 착잡했다.&lt;br /&gt;
때문에 내 첫 목표는 리뷰 문화를 만드는 것이었는데 이런건 글로 정리하기 어렵지만 대강 이렇다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;리뷰 속도와 리뷰의 질에 대한 (수 차례의) 논의 및 회고&lt;/li&gt;
  &lt;li&gt;리뷰 그라운드 룰 세우기&lt;/li&gt;
  &lt;li&gt;운영, 개발, 문서까지 리뷰하기&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;의사소통-개선하기&quot;&gt;의사소통 개선하기&lt;/h3&gt;

&lt;p&gt;생각보다 어떤 무언가를 한다기보단 의사소통을 개선하는데 꾸준히 노력한 것 같다.&lt;br /&gt;
슬랙을 통한 의사소통을 더 많이하도록 유도했고, 의사소통에 리액션을 강제?하여 슬랙 리액션을 꼭 달도록 했다.&lt;br /&gt;
업무 중에 small talk을 계속해서 팀 분위기도 챙기려고 했는데 사실 이건 내 스타일인 것 같기도하고.&lt;/p&gt;

&lt;p&gt;생각보다 더 팀원들 사이의 생각이 달랐다.&lt;br /&gt;
더해서 ‘안전감’에 대해 회고 시간에 자주 이야기 했는데, 이런 이야기를 한 명 한 명 들어가면서 생각들을 더 잘 얘기할 수 있는 팀이 되었다. 물론 아직은 부족하지만.&lt;/p&gt;

&lt;h3 id=&quot;스프린트&quot;&gt;스프린트&lt;/h3&gt;

&lt;p&gt;내가 올해 만든 팀 문화 중 가장 중요한거라면 스프린트를 바꾼 것 같다.&lt;br /&gt;
처음 우리팀은 팀 리더가 일을 나누면 각자 알아서 일을 하다가 끝나면 공유했는데, 어떤 팀원은 한 주 내내 혼자 일을 하고 리뷰를 올리기도 했다.&lt;br /&gt;
리더를 멤버들이 돌아가면서 하기로 정하고 스프린트 주기, 회의 방식, 문서화, 회고, 스토리 포인트 단위의 추정과 일을 쪼개고 나누는 방식들을 도입했다. 물론 하나씩 차근차근.&lt;br /&gt;
개발보다 문화를 바꾸는게 더 어렵다는 생각도 드는데, 내가 답답하게 일할 수 없다보니 방식을 하나씩 바꾸게 됐다.&lt;br /&gt;
내가 실질적으로 팀을 이끄는 리더는 아니면서 문화는 내가 바꿔가야 했기 때문에 내 생각보다 더디게 진행되긴 했는데, 우리 팀 리더는 팀 문화에 대한 제안을 드리면 ‘뭐든지 okay’로 답을 주셔서 좋았다.&lt;br /&gt;
주변에서 나와 비슷한 상황에서 ‘뭐든지 현재대로’를 원하시는 리더로 고생하는 분도 보았기 때문에 리더가 중요하다는 것을 다시 느꼈다.&lt;/p&gt;

&lt;p&gt;팀 문화를 바꾸면서 느낀건 생각보다 ‘좋은 팀’을 만드는데는 시간이 제법 걸린다는 것이다.&lt;br /&gt;
내가 시도한 많은 것들이 우리 팀을 더 좋게 만들었지만, 아직 내가 원하는 좋은 팀이 되기까지 가야할 길은 좀 남은 것 같다.&lt;/p&gt;

&lt;h2 id=&quot;새로운-서비스&quot;&gt;새로운 서비스&lt;/h2&gt;

&lt;p&gt;팀을 옮긴게 처음은 아니지만 동기화 서버 개발자로 구르다가 백업 서버를 담당하게 되었다.&lt;br /&gt;
이직을 생각해볼 때 ‘내가 팀을 옮기게 되면 업무를 따라가는데 얼마나 걸릴까?’라는 생각을 종종 했었다.&lt;br /&gt;
연간 회고를 준비하면서 최근 설계를 떠올려보면 질문을 하기보단 대부분 설명을 해주고 있는 모습을 볼 때 ‘내가 생각보다 깊이있게 프로젝트를 이해하는데 시간이 오래걸리지 않는구나’를 느꼈다.&lt;/p&gt;

&lt;p&gt;동기화 서버에서 백업 서버를 맡게되면서 했던 사내 부검과 &lt;a href=&quot;/docs/retrospect/theme/sync&quot;&gt;회고&lt;/a&gt; 내용 중 하나는 ‘나는 동기화 서버 개발에 있어서는 프로였다’라는 말이었는데, 이제는 내 도메인이 동기화에서 백업까지 확장된 것 같다.&lt;br /&gt;
백업이랑 동기화는 비슷하면서도 다른 정책들이 있었는데, 이건 나중에 백업 서비스를 회고하면서 적어봐야겠다.&lt;/p&gt;

&lt;p&gt;아쉬운 점은 백업이 아닌 gRPC를 비롯한 내가 사용해보지 않은 기술들을 사용하는 새로운 서비스를 경험해보고 싶었는데, 백업 서비스의 요구사항이 많아서 다른 서비스를 하지 못했다.&lt;/p&gt;

&lt;h2 id=&quot;리팩토링&quot;&gt;리팩토링&lt;/h2&gt;

&lt;p&gt;리팩토링이야 매일같이 하는거지만 올해는 리팩토링에 대해 다시 생각해봤다.&lt;br /&gt;
새로 맡은 서비스는 워낙 레거시 코드가 많아서 손댈 부분이 많았는데, 각잡고 리팩토링을 한 시간도 많았지만 기존 코드를 손대는 모든 작업에서 리팩토링을 꼭 했던 것 같다.&lt;/p&gt;

&lt;p&gt;대규모 리팩토링은 이전 팀에서 너무 많이 해서 나한텐 재미없는 작업으로 느껴졌다.&lt;br /&gt;
파트 리더께서 조금 더 리팩토링에 대해 탄탄하게 정리해보자는 코멘트를 주셨고 리팩토링에 대한 생각들을 정리할 수 있는 시간들이 된 것 같다.&lt;/p&gt;

&lt;h3 id=&quot;복합-리팩토링&quot;&gt;복합 리팩토링&lt;/h3&gt;

&lt;p&gt;피쳐 개발에 맞춰 code smell을 해결하는 리팩토링이 아니라 프로젝트의 넓은 범위에 영향을 미치는 리팩토링에 대해 마틴 파울러는 ‘복합 리팩토링(big refactoring)’이라는 표현을 사용한다.&lt;br /&gt;
리팩토링은 대부분이 리팩토링의 기법들에 대한 내용들이어서 기법이 아니라&lt;a href=&quot;/docs/refactoring/my-refactoring&quot;&gt; 복합 리팩토링에서 해야할 작업들에 대한 생각&lt;/a&gt;을 정리했다.&lt;br /&gt;
다양한 종류의 사용하지 않는 코드 제거에도 시간을 쓰고 이런 종류의 코드도 제거가 되어야 좋다는 생각을 할 수 있었다.&lt;/p&gt;

&lt;h3 id=&quot;비용을-고려한-리팩토링&quot;&gt;비용을 고려한 리팩토링&lt;/h3&gt;

&lt;p&gt;복합 리팩토링을 하면서는 키 설계나 메세지 전달 방식까지 다시 설계하게 되기도 한다.&lt;br /&gt;
올해는 내가 이런 설계에서 비용을 고려해보기 시작했다는 점에서 새롭다.&lt;br /&gt;
&lt;strong&gt;하루 수십억 단위의 api call&lt;/strong&gt; 규모의 서비스를 담당하다보니, 모듈 사이에 SQS를 놓을까를 고민하다가 비용을 계산하니 SQS 추가 하나만으로 &lt;strong&gt;연간 억 단위가 되어 설계를 변경&lt;/strong&gt;하기도 했고, 다른 팀원이 제안한 &lt;strong&gt;아이디어에 대해 반대하기 위한 근거 중 하나로 아이디어 적용시 추가되는 수십억 단위의 S3 비용을 계산&lt;/strong&gt;해서 제시하기도 했다.&lt;/p&gt;

&lt;p&gt;이전에도 비용을 고려하긴 했으나 자연스럽게 비용을 근거로 설계를 제시하고 반대했던 모습들을 떠올리면 내가 리팩토링과 설계에 있어서 조금 더 성장했나 하는 생각이 든다.&lt;/p&gt;

&lt;h3 id=&quot;msa&quot;&gt;MSA&lt;/h3&gt;

&lt;p&gt;feature를 바쁘게 추가하면서 진행해온 작업들을 돌아봤을 때, 거대한 모놀리스인 우리 서비스를 조금이나마 분리할 수 있는 기회들을 내가 놓쳤다는 생각을 했다.&lt;br /&gt;
한 선배와 &lt;a href=&quot;/docs/design/msa&quot;&gt;MSA&lt;/a&gt;에 대해 이야기 했는데 한 해를 돌아봤을 때 ‘아 이거 MSA’면 좋았을텐데 싶은 생각들이 드는 것들이 있다. 특히나 하반기에 읽은 &lt;strong&gt;마이크로 서비스 도입 이렇게 한다&lt;/strong&gt;를 생각해봤을 때 점진적으로 MSA로 갔으면 좋았을텐데 하는 후회가 든다.&lt;/p&gt;

&lt;p&gt;지금 팀에선 설계를 내가 많이 맡고 있는데, 내가 연초에 MSA의 장점과 모놀리스에서 MSA로 전환하는 방식들에 대해 제대로 이해하지 못했기 때문에 이런 설계를 내지 못했다는 생각이 들어 아쉽다.&lt;/p&gt;

&lt;h2 id=&quot;연사&quot;&gt;연사&lt;/h2&gt;

&lt;p&gt;올해 기회가 되어 슬랙 자동화 봇을 주제로 두 차례의 연사로 설 수 있었다.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.salesforce.com/kr/events/sflive-korea-23/&quot;&gt;코엑스에서 열린 salesforce live korea&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://slack-champion-day2023.splashthat.com/&quot;&gt;slack 관계사들을 대상으로하는 slack champion day&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;재밌고 새로운 경험들을 해볼 수 있는 시간이어서 좋았고, 이런 기회들을 더 잘 만들어갈 수 있었으면 좋겠다는 생각이 든다.&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;올해는 리더에 대해서 생각해볼 시간들이 많았다.  &lt;br /&gt;
팀을 재배치하고 면담을 통해 동기부여를 하는 파트리더의 역할에 대해서 먼저 생각했고.&lt;br /&gt;
이전 팀 리더, 현재 팀 리더와 다른 팀 리더의 태도들로 만들어지는 팀의 분위기를 내가 더 잘 볼 수 있는 위치가 된 것 같다.&lt;br /&gt;
그리고 팀 문화와 회의, 설계를 주도하다보니 리더의 모습에 대해서도 더 생각하게 됐다.&lt;/p&gt;

&lt;p&gt;새로운 경험들을 많이 하게된 해였다.&lt;br /&gt;
두 차례의 연사 경험, 새로운 팀으로 옮겨와서 맡게된 새로운 역할들.  &lt;br /&gt;
기대한 새로운 기술들에 대한 개발 경험을 갖지 못한게 아쉽지만 새로운 역할들을 잘 소화해낸 것 같다.&lt;br /&gt;
작은 팀이지만 팀 문화와 설계를 주도하는 자리에서 일을 해본게 재밌었다. 생각보다 잘 맞는 것 같기도 하고.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/retrospect/2023</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/retrospect/2023</guid>
      </item>
    
      <item>
        <title>DDD의 기둥 Ubiquitous Language</title>
        
          <description>&lt;p&gt;&lt;em&gt;It’s one of the two primary pillars of DDD’s strengths.&lt;/em&gt; - Vaughn Vernon&lt;/p&gt;

&lt;p&gt;Vaughn Vernon의 말처럼 유비쿼터스 언어는 DDD의 가장 강력한 요소 중 하나이며 DDD에서 절대 빠질 수 없는 개념이다.&lt;/p&gt;

&lt;h2 id=&quot;유비쿼터스-ubiquitous&quot;&gt;유비쿼터스, Ubiquitous&lt;/h2&gt;

&lt;p&gt;유비쿼터스라는 단어는 &lt;strong&gt;‘어디에나 있다. 아주 흔하다’&lt;/strong&gt; 라는 말을 의미한다.&lt;/p&gt;

&lt;h2 id=&quot;유비쿼터스-언어&quot;&gt;유비쿼터스 언어&lt;/h2&gt;

&lt;p&gt;유비쿼터스 언어의 의미도 어디에서나 발견되는 언어라는 의미이다.&lt;/p&gt;

&lt;p&gt;그러나 유비쿼터스 언어는 팀 내에 공유된 언어로 &lt;strong&gt;팀 내에서&lt;/strong&gt; 어디에서나 발견되는 언어라고 보는 것이 정확하다.&lt;br /&gt;
DDD의 개념은 실제 도메인 모델을 코드에 녹이는 것이기 때문에 도메인의 용어(유비쿼터스 언어)들이 정의되는 것이 중요하기 때문이다.&lt;/p&gt;

&lt;p&gt;따라서 유비쿼터스 언어는 도메인 전문가와 개발자 모두 공유하는 언어이며, 뿐만 아니라 실제로 해당 프로젝트에 참여하는 모든 사람들이 공유하는 언어이다.&lt;br /&gt;
팀 내에서 무슨 역할을 맡더라도 프로젝트에 참여하고 있다면 해당 프로젝트의 유비쿼터스 언어를 사용하게 된다.&lt;/p&gt;

&lt;h2 id=&quot;유비쿼터스-언어의-필요성&quot;&gt;유비쿼터스 언어의 필요성&lt;/h2&gt;

&lt;p&gt;도메인에 맞는 소프트웨어를 만들려면 도메인을 설명할 수 있는 방법이 필요하다.&lt;br /&gt;
모델과 모델들의 관계, 이벤트, 비즈니스, 모델의 변화를 설명할 수 있는 방법들이 필요하다.&lt;br /&gt;
이런 설명을 함께 일관되게 사용하기 위해 필요한 것이 유비쿼터스 언어이다.&lt;/p&gt;

&lt;p&gt;유비쿼터스 언어를 사용해 비즈니스 개념이나 프로세스를 쉽게 설명할 수 있다면 올바른 방향으로 언어를 결정해나가고 있다고 볼 수 있다.&lt;br /&gt;
반대로 설명에 어려움을 느낀다면 무언가 놓치고 있을 가능성이 높다.&lt;/p&gt;

&lt;h2 id=&quot;유비쿼터스-언어의-특징&quot;&gt;유비쿼터스 언어의 특징&lt;/h2&gt;

&lt;p&gt;유비쿼터스 언어는 팀에 의해 쓰이는 명사, 형용사, 동사, 등의 풍부한 표현을 포함한다.&lt;br /&gt;
팀이 사용하는 모든 문서, 소프트웨어, 테스트는 이 언어를 담고 있으며 이 언어에 맞춰진다.&lt;/p&gt;

&lt;h3 id=&quot;1-의사소통&quot;&gt;1. 의사소통&lt;/h3&gt;

&lt;p&gt;팀 내에서 사용하는 용어와 비즈니스 용어를 일치시키고 소프트웨어 모델에 반영한다.&lt;br /&gt;
개발자, 비즈니스 전문가를 포함한 모든 팀원들이 동일한 언어로 의사소통할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;2-비즈니스-이해&quot;&gt;2. 비즈니스 이해&lt;/h3&gt;

&lt;p&gt;개발자들이 비즈니스 전문가와 의사소통하며 비즈니스를 이해하는 속도가 향상된다.&lt;br /&gt;
비즈니스 도메인을 더 깊이 이해할 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;3-도메인-복잡성-해결&quot;&gt;3. 도메인 복잡성 해결&lt;/h3&gt;

&lt;p&gt;유비쿼터스 언어로 생성한 도메인 모델을 통한 추상화로 복잡한 도메인을 더 이해하기 쉽게 만든다.&lt;br /&gt;
역할이 비즈니스 로직에 맞게 명확하게 분리됨을 통해 복잡성이 줄고 이해관계자 간의 이해도를 맞출 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;유비쿼터스-언어를-어떻게-만들까&quot;&gt;유비쿼터스 언어를 어떻게 만들까&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;물리적이고 개념적인 도메인 그림을 그리고 이름과 행동을 붙여보기&lt;/li&gt;
  &lt;li&gt;간단한 정의로 구성된 용어집 만들기
    &lt;ul&gt;
      &lt;li&gt;맘에 들지 않더라도 용어집 쓰기. 용어집을 씀으로써 추가적인 용어와 구문을 언어로 끄집어낼 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;일부 팀원이 작성했다면 만들어진 구문을 리뷰하고 동의하지 못하는 경우가 많으므로 변경이 발생하더라도 대응할 수 있게 준비하기&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;유비쿼터스 언어를 만드는 것은 도메인 모델을 만드는 것과도 관련이 있다.&lt;br /&gt;
도메인 모델을 만들 때 프로젝트를 위해 가장 좋은 언어를 완성하기 위해 합의와 타협을 거치며 토론하고 논쟁한다. 때로는 흥정할 수도 있다.&lt;br /&gt;
기존 문서의 참고, 비즈니스 지식의 공유, 기술 표준, 어학 사전들을 참조하는 과정도 지난다.&lt;br /&gt;
&lt;strong&gt;가장 좋은 개념과 용어와 의미가 무엇인지&lt;/strong&gt;에만 초점을 맞춘다.&lt;/p&gt;

&lt;h2 id=&quot;유비쿼터스-언어-주의사항&quot;&gt;유비쿼터스 언어 주의사항&lt;/h2&gt;

&lt;p&gt;보편적으로 사용되고 흔히 보이는 유비쿼터스 언어라는 의미가 &lt;strong&gt;엔터프라이즈 전체나 전사적인, 혹은 세계적이거나 보편적인 도메인 언어라는 의미는 아니다&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;컨텍스트는 생각보다 작고, 컨텍스트 당 하나의 유비쿼터스 언어가 있다.&lt;br /&gt;
유비쿼터스 언어는 바운디드 컨텍스트를 격리시키고 그 안에서 프로젝트를 진행하는 팀 내에서만 유비쿼터스하다.&lt;/p&gt;

&lt;p&gt;그러므로 전체 엔터프라이즈나 다른 팀 같이 넓은 범위에서 유비쿼터스 언어를 적용하려고 하면 성공할 수 없고 적절하지 않다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;격리된 컨텍스트 상에서 합의된 유비쿼터스 언어가 아닌 모든 개념을 거부하라.&lt;/strong&gt; 라고 표현하는데, 이는 모든 도메인 용어들을 합의한 유비쿼터스 언어로 만들자는 말과 동시에 다른 컨텍스트의 유비쿼터스 언어가 합의 없이 침범할 수 없음을 의미한다.&lt;/p&gt;

&lt;h2 id=&quot;유비쿼터스-언어의-변화&quot;&gt;유비쿼터스 언어의 변화&lt;/h2&gt;

&lt;p&gt;언어는 시간이 지남에 따라 크고 작은 변화를 겪으면서 확장되고 변화한다.&lt;br /&gt;
언어처럼 유비쿼터스 언어도 성장하고 변화한다.&lt;/p&gt;

&lt;p&gt;그렇기 때문에 처음 유비쿼터스 언어를 만드는데 영감을 주었던 결과물들은 시간이 지나면서 쓸모 없어질 가능성이 매우 크다.&lt;br /&gt;
그렇기 때문에 결국 유비쿼터스 언어가 가장 지속적으로 유지되고 보장되는 것은 팀원간의 이야기와 코드상의 모델이다.&lt;br /&gt;
&lt;strong&gt;팀원간의 이야기와 코드가 유비쿼터스 언어의 영속적인 발현&lt;/strong&gt;이기 때문에 이야기 속의 유비쿼터스 언어에 맞춰 결과물들(그림, 용어집 등의 문서)를 업데이트하기 어렵다면 버릴 수 있어야 한다.&lt;br /&gt;
모든 문서를 최신으로 동기화하는 것이 현실적으로 어렵기 때문에 이편이 실용적이며 죄책감을 느낄 필요가 없다.&lt;/p&gt;

&lt;h2 id=&quot;코드레벨에서의-유비쿼터스-언어&quot;&gt;코드레벨에서의 유비쿼터스 언어&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Possible Viewpoints&lt;/th&gt;
      &lt;th&gt;Result Code&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;“Who cares? Just code it up.” &lt;br /&gt;Um, not even close.&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;patient.setShotType(ShotTypes.TYPE_FLU);&lt;/code&gt; &lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;patient.setDose (dose);&lt;/code&gt; &lt;br /&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;patient.setNurse(nurse);&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“We give flu shots to patients.”  &lt;br /&gt;Better, but misses some important concepts.&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;patient.giveFlushot();&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;“Nurses administer flu vaccines to patients in standard doses.” &lt;br /&gt; This seems like what we’d like to run with at this time, at least until we learn more.&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Vaccine vaccine = vaccines.standardAdultFluDose();&lt;/code&gt; &lt;br /&gt; &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;nurse.administerFluVaccine(patient, vaccine);&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;유비쿼터스 언어를 코드레벨에서 적용하는 생각들에 많이 미흡했던 것 같다.&lt;br /&gt;
나는 보통 유비쿼터스 언어를 뽑아서 도메인 모델을 만드는데 의의를 많이 뒀었는데, 이번에 다시 &lt;em&gt;Vaughn Vernon&lt;/em&gt;의 책을 읽으면서 느낀건 위처럼 코드레벨에서 유비쿼터스 언어를 더 고민할 필요가 있다는 것.&lt;/p&gt;

&lt;h3 id=&quot;reference&quot;&gt;reference&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;Implement Domain Driven Design, Vaughn Vernon&lt;/li&gt;
  &lt;li&gt;https://vaadin.com/blog/ddd-part-1-strategic-domain-driven-design&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/strategic/ubiquitous</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/strategic/ubiquitous</guid>
      </item>
    
      <item>
        <title>kafka 아키텍처 이해하기</title>
        
          <description>&lt;h2 id=&quot;메시지-message&quot;&gt;메시지 (message)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;레코드&lt;/strong&gt;라고도 부르는 &lt;strong&gt;메시지&lt;/strong&gt;는 카프카를 통해 흐르는 데이터의 기본 요소이다.&lt;br /&gt;
메시지는 &lt;strong&gt;timestamp&lt;/strong&gt;, &lt;strong&gt;value&lt;/strong&gt; 그리고 선택적으로 &lt;strong&gt;key&lt;/strong&gt;를 갖는다.&lt;br /&gt;
원한다면 &lt;strong&gt;custom header&lt;/strong&gt;를 사용할 수도 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/record.png&quot; alt=&quot;record&quot; /&gt;&lt;/p&gt;

&lt;p&gt;key와 value는 각각의 serialize, deserialize를 위해 카프카 특유의 방식으로 상호작용할 수 있다.&lt;br /&gt;
메시지가 있다면 브로커에게 메시지를 보내야 한다.&lt;/p&gt;

&lt;h2 id=&quot;카프카-아키텍처&quot;&gt;카프카 아키텍처&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;컴포넌트&lt;/th&gt;
      &lt;th&gt;역할&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Producer&lt;/td&gt;
      &lt;td&gt;카프카로 메시지를 보낸다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Consumer&lt;/td&gt;
      &lt;td&gt;카프카에서 메시지를 조회한다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Topics&lt;/td&gt;
      &lt;td&gt;메시지를 브로커에 저장하기 위한 논리적인 이름&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ZooKeeper ensemble&lt;/td&gt;
      &lt;td&gt;클러스터에서 consensus를 유지하도록 돕는다&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Broker&lt;/td&gt;
      &lt;td&gt;커밋 로그를 처리한다 (메시지를 disk에 저장한다)&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;producer--consumer&quot;&gt;Producer &amp;amp; Consumer&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/producer_consumer.png&quot; alt=&quot;producer_consumer.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Producer&lt;/strong&gt;는 메시지를 카프카 topic으로 보내는 도구이다.&lt;br /&gt;
default producer는 없으나 API, Flume, Connect, Streams 등이 사용될 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Consumer&lt;/strong&gt;는 카프카에서 메시지를 검색하는 도구다.&lt;br /&gt;
consumer는 topic을 구독하고 지속적으로 메시지를 polling 한다.&lt;/p&gt;

&lt;h2 id=&quot;topic&quot;&gt;Topic&lt;/h2&gt;

&lt;p&gt;Topic은 &lt;strong&gt;Partition&lt;/strong&gt;이라는 단위로 구성된다.&lt;br /&gt;
즉 1개 이상의 partition이 단일 Topic을 구성한다.&lt;br /&gt;
카프카의 실제 작업은 대부분 disk에 실제로 구현되는 partition이다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/topic_broker.png&quot; alt=&quot;topic &amp;amp; broker&quot; /&gt;&lt;/p&gt;

&lt;p&gt;partition replica 중 하나는 leader가 된다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;파티션 3개로 된 토픽이 있고, 각 파티션은 3개의 replica를 갖고 있다.&lt;br /&gt;
모든 파티션은 각각 &lt;strong&gt;leader replica&lt;/strong&gt;를 선출했을 것이다.&lt;br /&gt;
기본적으로 읽고 쓰기는 leader replica에서 발생하고 나머지 replica들은 follower가 되어 데이터를 업데이트 받는다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;zookeeper&quot;&gt;ZooKeeper&lt;/h2&gt;

&lt;p&gt;ZooKeeper는 discovery, configuration, synchronization service를 고가용성으로 제공하는 분산 저장소다.&lt;br /&gt;
ZooKeeper는 카프카 생태계를 복잡하게 만드는 원인 중 하나다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;카프카 요구사항을 단순화하기 위해 ZooKeeper 대신 자체 관리되는 Quorum으로 교체하자는 제안이 있고 kafka 3.대의 버전에서 Zookeeper 의존성에서 탈출했다.&lt;/p&gt;
&lt;/div&gt;

&lt;p&gt;Zookeeper를 사용하는 사례 중 하나는 앞서 봤던 leader replica가 어떤 파티션인지 합의하는데 사용하는 것이다.&lt;/p&gt;

&lt;h2 id=&quot;page-cache&quot;&gt;Page Cache&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/page-cache.png&quot; alt=&quot;page-cache.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;카프카는 수백만 개의 메시지를 빠르게 처리할 수 있는데, 이를 가능하게 만드는 핵심 중 하나는 &lt;u&gt;page cache&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;이다.&lt;br /&gt;
broker가 JVM heap에 캐시되지 않도록 하여 &lt;u&gt;크기가 큰 heap으로 인해 발생하는 문제&lt;/u&gt;&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;를 방지한다.&lt;/p&gt;

&lt;h2 id=&quot;commit-log&quot;&gt;Commit Log&lt;/h2&gt;

&lt;p&gt;Kafka에서 Commit Log는 Java의 logger의 로그나, DB의 WAL 처럼 숨겨진 세부정보가 아니다.&lt;br /&gt;
오히려 kafka의 중심에 위치하며 사용자들은 offset을 사용해서 메시지가 로그의 어디에 위치하는지 찾을 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/commit-log.png&quot; alt=&quot;commit-log.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Commit Log는 메시지가 항상 로그 마지막에 추가되는 추가 전용 로그이다.&lt;br /&gt;
메시지를 읽을 때 그 메시지를 시스템에서 제거하거나 다른 consumer로부터 제외하지 않는다.&lt;/p&gt;

&lt;h2 id=&quot;카프카-상위-수준-뷰&quot;&gt;카프카 상위 수준 뷰&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/kafka-overview.png&quot; alt=&quot;kafka-overview.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;상위 수준에서 정리한 카프카 뷰.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Kafka In Action 2장&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;운영 체제에서 제공하는 메모리 기술 중 하나로, 디스크로부터 읽은 파일이나 블록들을 메모리에 캐시하여 빠르게 액세스할 수 있도록 하는 기술 &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;장시간 또는 빈번한 GC로 인해 일시적인 멈춤(&lt;a href=&quot;/docs/java/gc/basic#stw-stop-the-world&quot;&gt;Stop The World&lt;/a&gt;)이 발생하는 문제 &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/message-broker/kafka/architecture</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/message-broker/kafka/architecture</guid>
      </item>
    
      <item>
        <title>kafka producer 이해하기</title>
        
          <description>&lt;p&gt;Producer는 메시지를 카프카 topic으로 보내는 도구이다.&lt;/p&gt;

&lt;h2 id=&quot;producer-option&quot;&gt;producer option&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;키&lt;/th&gt;
      &lt;th&gt;용도&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;bootstrap.servers&lt;/td&gt;
      &lt;td&gt;시작 시 연결할 하나 이상의 카프카 브로커&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;acks&lt;/td&gt;
      &lt;td&gt;메시지 전달이 성공하기 위한 producer가 요구하는 복제 확인 (acknowledgement)의 수&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;key.serializer&lt;/td&gt;
      &lt;td&gt;키의 직렬화에 사용되는 클래스&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;value.serializer&lt;/td&gt;
      &lt;td&gt;값의 직렬화에 사용되는 클래스&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;bootstrap-servers&quot;&gt;bootstrap servers&lt;/h2&gt;

&lt;p&gt;producer는 할당된 파티션의 leader replica에만 쓸 수 있는데, topic과 &lt;strong&gt;bootstrap.servers&lt;/strong&gt; 밖에 모르기 때문에 알고있는 server에 연결한다.
producer는 &lt;strong&gt;boootstrap.servers&lt;/strong&gt;를 시작점으로 사용해 모든 후속 쓰기에 사용하는 브로커와 파티션에 대한 메타데이터를 가져온다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/bootstrap-server.png&quot; alt=&quot;bootstrap-server.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;각 브로커들은 클러스터 안의 다른 브로커들도 알고 있기 때문에 producer는 하나의 브로커를 통해 leader를 찾을 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;acks&quot;&gt;acks&lt;/h2&gt;

&lt;p&gt;acks는 producer가 완료를 받기 전에 partition leader가 follower(replica)로 부터 얼마나 많은 ack를 받아야 하는지에 대한 속성이다.&lt;br /&gt;
이 값은 &lt;strong&gt;all&lt;/strong&gt;, &lt;strong&gt;-1&lt;/strong&gt;, &lt;strong&gt;1&lt;/strong&gt;, &lt;strong&gt;0&lt;/strong&gt;을 가질 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;acks-0&quot;&gt;acks 0&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/ack0.png&quot; alt=&quot;ack0.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;acks가 0&lt;/strong&gt;인 경우 0개의 replica에 ack를 받기 때문에 &lt;strong&gt;가장 적은 대기 시간&lt;/strong&gt;을 얻을 수 있지만 &lt;strong&gt;안전한 배달을 보장하진 않는다&lt;/strong&gt;.&lt;/p&gt;

&lt;h3 id=&quot;acks-all&quot;&gt;acks all&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/ackall.png&quot; alt=&quot;ackall.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;acks가 all&lt;/strong&gt; 혹은 -1인 경우 leader replica가 모든 replica 들의 ack를 기다린다는 의미이다.&lt;br /&gt;
따라서 &lt;strong&gt;가장 느린 대기 시간&lt;/strong&gt;을 갖게 되지만 &lt;strong&gt;안전한 배달을 보장&lt;/strong&gt;한다.&lt;/p&gt;

&lt;h3 id=&quot;acks-1&quot;&gt;acks 1&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/ack1.png&quot; alt=&quot;ack1.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;acks가 1&lt;/strong&gt;인 경우 1개의 replica에 ack를 받는다.&lt;br /&gt;
즉 leader replica의 수신을 확인하기 때문에 &lt;strong&gt;비교적 적당한 안정성과 대기시간&lt;/strong&gt;을 가질 수 있다.&lt;/p&gt;

&lt;p&gt;leader가 follower에게 복사본을 만드는 사이에 다운된다면 메시지를 누락할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;serializer&quot;&gt;serializer&lt;/h2&gt;

&lt;p&gt;카프카의 메시지는 byte array로 저장되기 때문에 serializer가 필요하다.&lt;br /&gt;
producer의 serializer와 맞는 consumer의 deserializer가 필요하다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;StringSerializer&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;IntegerSerializer&lt;/code&gt;와 같이 기본 제공되는 serializer들이 있으며, customSerializer를 만들 수도 있다.&lt;/p&gt;

&lt;p&gt;여기서 key가 같으면 동일한 partition으로 전송한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;partition 수가 늘어나면 다른 partition으로 갈 수도 있다.&lt;/li&gt;
  &lt;li&gt;key가 null 인 경우 사용 가능한 partition 중 랜덤으로 선택한다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;timestamp&quot;&gt;timestamp&lt;/h2&gt;

&lt;p&gt;최신 버전의 producer에서는 event에 대한 timestamp가 포함되어 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;message.timestamp.type&lt;/code&gt;을 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CreateTime&lt;/code&gt;으로 설정하면 사용자가 직접 작성하거나 현재 시스템 시간으로 전달할 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;LogAppendTime&lt;/code&gt;으로 설정하면 브로커 시간이 사용된다.&lt;/p&gt;

&lt;p&gt;메시지 전달이 실패하여 재시도 할 수 있기 때문에, 브로커의 시간을 사용할지 producer의 시간을 사용할지 서비스 특성에 맞게 판단해야 한다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Kafka In Action 4장&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/message-broker/kafka/producer</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/message-broker/kafka/producer</guid>
      </item>
    
      <item>
        <title>apache kafka란?</title>
        
          <description>&lt;p&gt;&lt;em&gt;More than 80% of all Fortune 100 companies trust, and use Kafka.&lt;/em&gt; - Apache Software Foundation&lt;/p&gt;

&lt;p&gt;카프카는 현재 어떤 산업의 분야에 관계 없이 대부분의 기업에서 사용되고 있다.&lt;br /&gt;
카프카를 통해 데이터 플랫폼에 대한 표준이 바뀌고 있는데, 이전엔 &lt;u&gt;ETL과 batch workflow&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;로 처리하던 작업들이 카프카를 통해 &lt;strong&gt;near-real-time&lt;/strong&gt; 데이터 처리로 가고 있다.&lt;br /&gt;
카프카는 작업을 더 명확하고 간단하게 만들면서 &lt;a href=&quot;/docs/design/msa&quot;&gt;MSA&lt;/a&gt;와 IoT의 중심에 자리잡고 있다.&lt;/p&gt;

&lt;h2 id=&quot;이벤트-스트리밍&quot;&gt;이벤트 스트리밍&lt;/h2&gt;

&lt;p&gt;카프카는 스스로를 이벤트 스트리밍 플랫폼이라고 소개하고 있다.&lt;/p&gt;

&lt;p&gt;이벤트 스트림이란 사람 몸의 중추 신경계 같은 것으로 이벤트 소스(DB, sensor, devices, cloud service, application)에서 이벤트 스트림 형태로 실시간으로 데이터를 캡처하는 방식이다.&lt;br /&gt;
검색을 위해 이벤트 스트림을 영구 저장하고 실시간 이벤트 스트림을 조작하고 처리하는 것과 다른 곳으로 라우팅 하는 것도 포함한다.&lt;/p&gt;

&lt;h2 id=&quot;카프카의-주요-특징&quot;&gt;카프카의 주요 특징&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;메시지 큐처럼 레코드를 읽고 쓴다.&lt;/li&gt;
  &lt;li&gt;내결함성(falut tolerance)로 이벤트 스트림을 지속적이고 안정적으로 저장한다.&lt;/li&gt;
  &lt;li&gt;이벤트 스트림이 발생할 때 처리한다.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;그 외에도 카프카의 여러 특징들이 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;카프카는 시스템으로 들어오고 시스템에서 나가는 데이터 중개인처럼 행동한다.&lt;/li&gt;
  &lt;li&gt;프로듀서와 컨슈머 사이에 느슨한 결합을 생성한다.&lt;/li&gt;
  &lt;li&gt;데이터 병렬 처리가 가능하다.&lt;/li&gt;
  &lt;li&gt;다수의 컨슈머가 있을 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;카프카의-세가지-semantic&quot;&gt;카프카의 세가지 semantic&lt;/h2&gt;

&lt;h3 id=&quot;1-at-least-once-semantics&quot;&gt;1. at-least once semantics&lt;/h3&gt;

&lt;p&gt;메시지가 수진 확인될 때까지 재발송된다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/at-leat.png&quot; alt=&quot;at-leat&quot; /&gt;&lt;/p&gt;

&lt;p&gt;같은 메시지를 한 번 이상 보내어 브로커에 틀림없이 기록되도록 한다.&lt;br /&gt;
메시지가 브로커에 쓰였음을 보증받지 못한다면 프로듀서는 메시지를 다시 보낸다.&lt;br /&gt;
중복 메시지를 컨슈머가 필터링해야할 수 있지만 가장 안전한 배달방식이다.&lt;/p&gt;

&lt;h3 id=&quot;2-at-most-once-semantics&quot;&gt;2. at-most once semantics&lt;/h3&gt;

&lt;p&gt;메시지는 단 한 번 보내며 실패하더라도 재발송하지 않는다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/at-most.png&quot; alt=&quot;at-most&quot; /&gt;&lt;/p&gt;

&lt;p&gt;메시지 전달이 실패하는 경우에도 프로듀서는 다음 메시지로 넘어가고 실패한 메시지를 다시 보내지 않는다.&lt;br /&gt;
메시지를 잃어도 괜찮은 경우에 사용할 수 있다.&lt;br /&gt;
수신 확인을 하는 것은 결국 시스템 자원을 소모하는 일이고, 메시지를 일부 잃어도 괜찮다면 성능과 비용을 위해 수신확인을 기다리지 않을 수 있다.&lt;/p&gt;

&lt;h3 id=&quot;3-exactly-once-semantics-eos&quot;&gt;3. exactly-once semantics (EOS)&lt;/h3&gt;

&lt;p&gt;메시지는 컨슈머에게 단 한 번만 보인다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;한 번만 발송하는 것이 아니라 한 번만 보이는 것이다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/exactly-once.png&quot; alt=&quot;exactly-once&quot; /&gt;&lt;/p&gt;

&lt;p&gt;브로커가 하나의 메시지만을 허용하는 방식으로 프로듀서는 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;at-least once semantics&lt;/code&gt; 처럼 수신확인을 하나 컨슈머에게 도달하는 메시지는 하나가 된다.&lt;/p&gt;

&lt;h2 id=&quot;카프카가-적절한-경우&quot;&gt;카프카가 적절한 경우&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;안정적인 message queue
    &lt;ul&gt;
      &lt;li&gt;kafka 초기의 사용 사례로 일반적인 사례&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;MSA의 &lt;a href=&quot;/docs/design/eda&quot;&gt;EDA&lt;/a&gt;에서의 이벤트 통신&lt;/li&gt;
  &lt;li&gt;IoT의 데이터 처리&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;카프카가-적절하지-않을-수-있는-경우&quot;&gt;카프카가 적절하지 않을 수 있는 경우&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;실시간이 아니라 한 달이나 일 년에 한 번 데이터 처리가 필요한 경우&lt;/li&gt;
  &lt;li&gt;메시지가 큰 경우
    &lt;ul&gt;
      &lt;li&gt;카프카는 기본적으로 큰 메시지를 보내도록 설계되지 않았다.&lt;/li&gt;
      &lt;li&gt;큰 메시지는 메모리 압박이 증가하고 캐시할 수 있는 메시지 수가 줄어 성능이 저하될 수 있다.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://kafka.apache.org/intro&lt;/li&gt;
  &lt;li&gt;Kafka In Action 1장&lt;/li&gt;
&lt;/ul&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;배치 작업은 enterprise 급일수록 눈처럼 불어나 시스템이 과부하 상태로 빠질 수 있으며 관리를 위한 리소스가 필요하다. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/message-broker/kafka/kafka</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/message-broker/kafka/kafka</guid>
      </item>
    
      <item>
        <title>kafka consumer 이해하기</title>
        
          <description>&lt;p&gt;consumer는 카프카에서 데이터를 가져와 다른 시스템이나 애플리케이션에 데이터를 제공한다.&lt;br /&gt;
consumer는 consumer를 추가/제거 함으로써 처리량에 영향을 주기 때문에 중요하다.&lt;/p&gt;

&lt;p&gt;consumer가 topic에 대해 Push 받지 않고 pull 해온다는 것이 중요하다.&lt;br /&gt;
topic을 구독하는 방식을 통해 consumer는 자신의 메세지 소비 비율을 통제한다.&lt;br /&gt;
구독 방식을 통해 consumer를 항상 가동할 필요 없이 다운되면 다시 수행할 수 있다.&lt;br /&gt;
그러나 장시간 다운되선 안된다. (메시지 유실 가능성)&lt;/p&gt;

&lt;p&gt;consumer 클라이언트 시작 시 연결을 시도할 수 있는 브로커를 항상 알아야 한다. &lt;br /&gt;
&lt;strong&gt;메세지를 생성한 직렬 변환기와 일치하는 키와 값에 대한 역직렬 변환기를 사용해야 한다.&lt;/strong&gt;&lt;/p&gt;

&lt;h2 id=&quot;consumer-option&quot;&gt;consumer option&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;키&lt;/th&gt;
      &lt;th&gt;용도&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;bootstrap.servers&lt;/td&gt;
      &lt;td&gt;시작할 때 연결할 하나 이상의 카프카 브로커&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;value.deserializer&lt;/td&gt;
      &lt;td&gt;값 역직렬화에 필요&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;key.deserializer&lt;/td&gt;
      &lt;td&gt;키 역직력화에 필요&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;group.id&lt;/td&gt;
      &lt;td&gt;consumer group에 조인하기 위해 사용되는 ID&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;client.id&lt;/td&gt;
      &lt;td&gt;유저를 식별하기 위한 ID&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;heartbeat.interval.ms&lt;/td&gt;
      &lt;td&gt;consumer가 그룹 코디네이터에게 ping 신호를 보낼 간격&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;offset&quot;&gt;offset&lt;/h2&gt;

&lt;p&gt;consumer가 브로커에게 보내는 로그의 인덱스 위치로 offset을 사용한다.&lt;br /&gt;
offset을 통해 로그에서 필요한 메시지의 위치를 알 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/kafka_offset.png&quot; alt=&quot;kafka_offset.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;auto.offset.reset&lt;/code&gt;을 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;earliest&lt;/code&gt;로 설정하면 처음부터 읽기 때문에 해당 토픽에 대한 모든 메시지를 볼 수 있다.&lt;br /&gt;
기본값인 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;latest&lt;/code&gt;로 설정하면 consumer를 시작한 후 보낸 메시지들을 읽는다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/partition_leaders.png&quot; alt=&quot;partition_leaders.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;topic에 작성된 메시지를 찾기 위해 우선 topic 내에서 파티션을 찾은 다음 인덱스 기반 offset을 찾는다.&lt;br /&gt;
consumer는 일반적으로 leader replica에서 읽는다.&lt;br /&gt;
consumer가 어떤 파티션에 연결할지, 파티션의 리더는 어디에 있는지는 각 consumer 그룹에 대해 &lt;strong&gt;그룹 코디네이터&lt;/strong&gt; 역할을 하는 특정 브로커를 통해 알 수 있다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;offset은 항상 각 파티션에 대해 증가한다.&lt;br /&gt;
파티션 내에서 각 로그 시퀀스를 갖기 때문에 다른 파티션 간에는 offset 번호가 같아도 괜찮다.  &lt;br /&gt;
파티션에 offset 0이 표시되면 나중에 해당 메시지가 제거되더라도 offset 번호는 다시 사용되지 않는다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;파티션-수와-consumer&quot;&gt;파티션 수와 consumer&lt;/h2&gt;

&lt;p&gt;메시지를 읽는데는 파티션의 수도 영향을 미친다.&lt;/p&gt;

&lt;h3 id=&quot;파티션-수--consumer-수&quot;&gt;파티션 수 &amp;lt; consumer 수&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/kafka_extra_consumer.png&quot; alt=&quot;kafka_extra_consumer.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;파티션보다 consumer가 많으면 일부 consumer는 작업을 수행하지 않는다.&lt;br /&gt;
여유 consumer는 ready 상태이다.&lt;br /&gt;
consumer가 예기치 않게 실패하는 경우에도 비슷한 비율의 소비가 필요한 경우가 있다면 consumer가 있을 수 있다.&lt;br /&gt;
그룹 코디네이터는 그룹 시작 초기에 어떤 consumer가 어떤 파티션을 읽을지 지정하는 것 뿐만 아니라 consumer가 추가되거나 실패하여 그룹을 종료할 때도 consumer를 할당한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;&lt;strong&gt;Q: 그렇다면 항상 많은 파티션을 사용하면 되는 것 아닌가?&lt;/strong&gt;&lt;/p&gt;

  &lt;p&gt;많은 파티션은 공짜가 아니다. latency를 증가시킬 수 있다.&lt;br /&gt;
파티션이 많다면 브로커간에 파티션이 복제될 때까지 기다려야해서 대기시간이 길어질 수 있다. consumer에게 메시지를 전달하기 전에 동기화가 완료된다.&lt;br /&gt;
consumer에 대해 파티션이 1:1 매핑이 아닌 경우 더 많은 파티션이 할당됨에 따라 메모리 요구가 증가할 수 있다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;파티션-수--consumer-수-1&quot;&gt;파티션 수 &amp;gt; consumer 수&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/kafka_extra_partition.png&quot; alt=&quot;kafka_extra_partition.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;하나의 파티션을 두 개의 consumer가 읽을 수 없다.&lt;/strong&gt;&lt;br /&gt;
consumer보다 파티션이 많은 경우 필요에 따라 하나의 consumer가 둘 이상의 파티션을 처리한다.&lt;/p&gt;

&lt;p&gt;하나의 파티션을 하나의 consumer가 읽는건 하나의 consumer 그룹 내에서의 이야기다.&lt;br /&gt;
&lt;strong&gt;서로 다른 consumer 그룹에선 각 그룹의 하나의 consumer가 파티션을 읽을 수 있다.&lt;/strong&gt;&lt;br /&gt;
즉 파티션 기준으로 여러 consumer가 있을 수 있지만, 같은 consumer 그룹에서는 하나의 consumer만 있을 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;그룹-코디네이터&quot;&gt;그룹 코디네이터&lt;/h2&gt;

&lt;p&gt;그룹 코디네이터는 consumer와 협력해서 특정 consumer 그룹이 읽은 topic 내부의 기록을 유지한다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/coordinates.png&quot; alt=&quot;coordinates.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;topic에서 다음 메시지를 읽을 위치를 결정하기 위해 offset을 커밋 좌표로 사용하고 있다.&lt;/p&gt;

&lt;p&gt;일반적으로 다른 브로커 서비스에서는 이런 케이스에서 필요한 수만큼 동일한 메시지를 갖는 여러 큐를 갖는다.&lt;br /&gt;
그렇지만 kafka는 consumer 그룹마다 코디네이션을 하기 때문에 별도의 논리적인 작업이 필요하다면 새 consumer 그룹을 사용하여 해결할 수 있다.&lt;br /&gt;
consumer 그룹은 서로 consumer offset에 대한 동일한 코디네이션을 공유하지 않는다.&lt;/p&gt;

&lt;p&gt;각 consumer들은 consumer group에 속한다.&lt;br /&gt;
conumser group의 consumer들은 topic 파티션의 소유권을 공유하며 각 consumer가 해당 토픽의 다른 파티션을 분담하면서 메시지를 읽을 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/message-broker/kafka/consume_separate_group.png&quot; alt=&quot;consume_separate_group.png&quot; /&gt;&lt;/p&gt;

&lt;p&gt;위 그림은 동일한 파티션 집합이 3개의 다른 브로커에 존재하고, kinaction_teamoffka0과 kinaction_teamsetka1이라는 2개의 consumer 그룹이 파티션에서 consume하고 있는 상황이다.&lt;br /&gt;
각 그룹의 consumer는 각 브로커의 파티션에서 고유한 데이터 복사본을 가져온다.&lt;br /&gt;
다른 그룹이라면 같이 동작하지 않는다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;consumer가 데이터를 사용해도 토픽에서 제거하지 않는다.&lt;br /&gt;
그렇기 때문에 consumer group이 다르면 메시지를 가져갈 수 있다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;heartbeat&quot;&gt;heartbeat&lt;/h2&gt;

&lt;p&gt;consumer가 그룹 코디네이터에게 ping을 하는 것을 &lt;strong&gt;heartbeat&lt;/strong&gt;라고 한다.&lt;br /&gt;
heartbeat는 consumer가 코디네이터와 통신하여 적절한 시간내에 응답하며 작업하고 있음을 알리는 신호이다.&lt;/p&gt;

&lt;p&gt;heartbeat가 시간 내에 응답되지 않으면 그룹 코디네이터는 리밸런싱을 시작한다.&lt;br /&gt;
리밸런싱이란 consumer간 파티션 소유권을 이전하는 것을 말한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;heartbeat.interval.ms&lt;/code&gt;를 통해 consumer가 heartbeat를 보내는 간격을 설정할 수 있다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;heartbeat.interval.ms&lt;/code&gt;는 일반적으로 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;session.timeout.ms&lt;/code&gt;의 1/3 이하의 값으로 설정되어야 한다.&lt;br /&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;session.timeout.ms&lt;/code&gt;는 클라이언트가 활성화 되어있는지 만료를 체크하는 브로커의 시간이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Kafka In Action 5장&lt;/li&gt;
  &lt;li&gt;https://docs.confluent.io/platform/current/installation/configuration/consumer-configs.html&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/message-broker/kafka/consumer</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/message-broker/kafka/consumer</guid>
      </item>
    
      <item>
        <title>8년차 개발자의 개발 면접 질문 리스트</title>
        
          <description>&lt;p&gt;어떤 면접이든 면접을 보게 되면 질문을 받은 후엔 질문을 할 시간을 갖게 된다.&lt;br /&gt;
면접을 준비할 땐 당연히 받을 질문을 준비하지만, 내 생각엔 &lt;strong&gt;받는 질문보다 할 질문이 더 중요하다.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;최근 한 곳에 면접을 보게 되었는데 그 회사의 개발팀 내부 분위기를 잘 모르는 상태로 면접을 보게 됐다.&lt;br /&gt;
난 궁금한 게 많았고, 어떤 질문을 하는 것이 좋을까 찾아봤는데 괜찮은 질문 리스트를 찾지 못했다.&lt;br /&gt;
개발자라면 마땅히 해볼법하고 해야 할 질문들, 그리고 내가 면접을 준비하며 고민했던 질문 내용들을 리스트업 해본다.&lt;/p&gt;

&lt;h2 id=&quot;면접자가-면접관에게-질문할-내용들&quot;&gt;면접자가 면접관에게 질문할 내용들&lt;/h2&gt;

&lt;p&gt;질문을 적다보니 질문의 내용이 팀과 기술 스택, 개발 문화로 정리된다.&lt;br /&gt;
특별히 서버 개발자라고 특정되는 질문보다는 개발자라면 하는 질문의 내용이 비슷한 것 같다.&lt;/p&gt;

&lt;h3 id=&quot;팀&quot;&gt;팀&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;팀 구성은 어떻게 되나요?&lt;/li&gt;
  &lt;li&gt;팀 내에 서버 팀 인력 구성은 어떻게 되나요?&lt;/li&gt;
  &lt;li&gt;여러 프로젝트를 같이 관리하게 되기도 하나요?&lt;/li&gt;
  &lt;li&gt;채용된다면 어떤 역할을 기대하나요?&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;팀의 구성과 인력 구조는 팀 내에서 소통해야 할 범위와 의사결정이 어떻게 진행되는지를 알 수 있기 때문에 팀에 대한 질문들이 중요한 것 같다.&lt;/p&gt;

&lt;h3 id=&quot;기술-스택&quot;&gt;기술 스택&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;어떤 기술 스택을 사용하나요?&lt;/li&gt;
  &lt;li&gt;어떤 아키텍처를 사용하고 있고 누가 아키텍처를 그리나요?&lt;/li&gt;
  &lt;li&gt;형상관리는 어떻게 하나요?&lt;/li&gt;
  &lt;li&gt;팀 내에서 새로운 기술을 도입하는 방식이 궁금합니다.&lt;/li&gt;
  &lt;li&gt;스터디를 진행하는지와 방식을 알 수 있을까요?&lt;/li&gt;
  &lt;li&gt;테스트는 어떻게 하고 있나요?&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;기술 스택은 일반적으론 모집 공고에 적힌 편이다.&lt;br /&gt;
나는 아키텍처에 참여를 많이 하는 편이고 관심이 많아 아키텍처에 대한 질문을 넣었다.&lt;br /&gt;
그 외에 팀이 성장하기 위해 스터디를 하는지를 물어보면 좋겠고 테스트가 잘 되는지는 프로젝트에 너무 중요하다.&lt;/p&gt;

&lt;h3 id=&quot;개발-문화&quot;&gt;개발 문화&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;일이 애자일로 진행되는지 궁금합니다.&lt;/li&gt;
  &lt;li&gt;그렇다면 애자일 주기는 어떻게 될까요?&lt;/li&gt;
  &lt;li&gt;애자일 팀의 범위는 어떻게 될까요?&lt;/li&gt;
  &lt;li&gt;회고는 하고 있는지 궁금합니다.&lt;/li&gt;
  &lt;li&gt;애자일 스프린트 리더는 누가 맡을까요?&lt;/li&gt;
  &lt;li&gt;코드는 공동 소유하고 있나요?&lt;/li&gt;
  &lt;li&gt;리뷰는 어떻게 진행되나요?&lt;/li&gt;
  &lt;li&gt;업무 강도는 어떤가요?&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;사실 가장 중요한건 개발 문화가 아닌가 생각이 든다.&lt;br /&gt;
기술 스택은 비슷해도 좋고 다르다면 배울 수 있어 더 좋지만 개발 문화가 낙후되었다면 일하는 것도 성장하는 것도 어렵기 때문이다.&lt;/p&gt;

&lt;h2 id=&quot;면접-후기&quot;&gt;면접 후기&lt;/h2&gt;

&lt;p&gt;짧은 시간의 면접을 통해 준비한 질문을 다 하기 힘든 경우도 있다.&lt;br /&gt;
최근 면접에선 내가 준비한 위 질문들을 면접관들께 모두 할 수 있었고, 잘 모르던 회사에 대해 나름대로 깊이 있게 알 수 있게 되었다.&lt;br /&gt;
질문을 하다 보면 면접관들이 답변하신 내용에 재차 질문을 하게 되기도 한다.&lt;/p&gt;

&lt;p&gt;면접을 자주 보는 편은 아니지만 앞으로도 이 질문들이 더 영양가 있게 업데이트할 수 있으면 좋겠다.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/career/interview-question</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/career/interview-question</guid>
      </item>
    
      <item>
        <title>link local ip address 개념 명확하게 이해하기</title>
        
          <description>&lt;p&gt;ip 주소 중 특정 ip들은 특별한 목적으로 사용되도록 설계 되었다.&lt;br /&gt;
link local ip address는 특별한 목적으로 설계된 ip block이다.&lt;/p&gt;

&lt;h2 id=&quot;link-local-ip-address&quot;&gt;link local ip address&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;169.254.0.0/16&lt;/strong&gt;는 RFC 6890에서 &lt;strong&gt;Link Local Special Purpose Address&lt;/strong&gt;로 정의 되었다. &lt;br /&gt;
&lt;strong&gt;Link Local IP Address는 직접 연결된 하위 네트워크 내에서만 유효한 address&lt;/strong&gt;이다.&lt;/p&gt;

&lt;p&gt;link local ip는 DHCP 서버나 수동으로 구성된 ip address를 사용할 수 없을 경우 auto configuration을 위한 목적의 인터페이스이다.&lt;br /&gt;
정상적으로 routable ip address를 얻게 된 후에는 해당 address를 사용한다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;ul&gt;
    &lt;li&gt;link local ip address는 하위 네트워크에서만 유효하므로 네트워크 인프라에서 해당 block 내의 subnet을 생성하면 안된다.&lt;/li&gt;
    &lt;li&gt;router는 link local ip address를 대상으로 하는 패킷은 전달할 수 없다.&lt;/li&gt;
    &lt;li&gt;DNS는 link local ip address를 저장해선 안된다.&lt;/li&gt;
    &lt;li&gt;169.254.0.0/24 와 169.254.255.0/24의 각각 256개의 ip는 추후 다른 목적으로 사용하기 위해 예약되었기 때문에 사용할 수 없다.&lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;h2 id=&quot;클라우드와-link-local-ip-address&quot;&gt;클라우드와 link local ip address&lt;/h2&gt;

&lt;p&gt;AWS와 같은 cloud service provider는 클라우드의 물리적인 인프라를 제어하기 때문에 모든 인스턴스에 대해 local access가 가능하도록 구성할 수 있다.&lt;/p&gt;

&lt;p&gt;다음과 같은 이유로 link local ip address는 자동구성 서비스에 적합하다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;link local ip address는 source와 destination 모두에서 non-forwardable ip 이다.&lt;/li&gt;
  &lt;li&gt;클라우드 서비스 내에서 local network으로 연결되어 바이러스로부터 안전하다.&lt;/li&gt;
  &lt;li&gt;사용자가 이 주소를 subnet으로 사용할 수 없다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이런 이유로 NTP(Network Time Protocol), IMDS(Instance Metadata Service) 등 클라우드 상의 가상 컴퓨터에 필요한 서비스를 link local ip address를 통해 제공한다.&lt;/p&gt;

&lt;h2 id=&quot;imds-instance-metadata-service&quot;&gt;IMDS (Instance MetaData Service)&lt;/h2&gt;

&lt;p&gt;클라우드에서 인스턴스의 메타데이터에 접근할 필요가 있는 경우가 있다.&lt;br /&gt;
예를 들면 네트워크 구성, 인스턴스 타입, 가용 영역, 인스턴스 정보 등의 메타데이터가 필요할 수 있다.&lt;/p&gt;

&lt;p&gt;대부분의 클라우드 플랫폼에서 &lt;strong&gt;169.254.169.254&lt;/strong&gt;를 통해 IMDS에 접근할 수 있다.&lt;br /&gt;
169.254.169.254는 클라우드 인스턴스 내에서 접근 가능한 특별한 ip이다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;169.254.0.0/16, https://www.baeldung.com/linux/cloud-ip-meaning&lt;/li&gt;
  &lt;li&gt;link local, https://en.wikipedia.org/wiki/Link-local_address&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/internet/link-local</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/internet/link-local</guid>
      </item>
    
      <item>
        <title>too many open file 이슈 확인하고 해결하기</title>
        
          <description>&lt;h2 id=&quot;too-many-open-files-in-system&quot;&gt;too many open files in system&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; open config.property: too many open files in system
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;too many open files in system&lt;/strong&gt;는 linux에서 열린 파일 수가 너무 많아서 더 이상 파일을 열 수 없다는 오류 메시지이다.&lt;br /&gt;
linux에서는 동시에 열 수 있는 파일 수가 제한되어 있고, 이 제한을 초과하여 파일을 열려고 할 때 오류가 발생한다.&lt;/p&gt;

&lt;p&gt;오류가 발생하는 이유는 설정된 자원보다 더 많은 요청을 하기 때문이다.&lt;br /&gt;
프로세스가 동시에 많은 파일을 열 때 발생할 수 있는데, 주로 이런 경우는 &lt;strong&gt;file open 후 close 하지 않는 코드 상의 버그일 가능성이 높다&lt;/strong&gt;.&lt;br /&gt;
버그인지 아닌지 확인하기 위해 linux의 property를 먼저 확인한다.&lt;/p&gt;

&lt;h2 id=&quot;file-open-limit-확인하기&quot;&gt;file open limit 확인하기&lt;/h2&gt;

&lt;p&gt;file open limit을 확인할 때 &lt;strong&gt;user의 resource limit을 체크하는 ulimit&lt;/strong&gt;을 사용한다.&lt;br /&gt;
ulimit에는 두 가지 limit이 있다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;hard limit: -H 옵션으로 접근하며, super user만 수정할 수 있는 limit&lt;/li&gt;
  &lt;li&gt;soft limit: -S 옵션으로 접근하며, 사용자가 hard limit 내에서 변경할 수 있는 limit&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;process는 당연히 둘 중 더 작은 limit인 soft limit으로 resource가 제한된다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;ulimit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; &lt;span class=&quot;c&quot;&gt;# 혹은 ulimit -Sn&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;다음은 hard limit을 확인한다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;ulimit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Hn&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;필요하다면 hard limit 보다 작은 값으로 soft limit을 변경한다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;ulimit&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 99999
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;hard limit 보다 큰 값으로 soft limit을 변경하려고 하면 에러가 발생한다.&lt;/p&gt;

&lt;h2 id=&quot;file-open-확인하기&quot;&gt;file open 확인하기&lt;/h2&gt;

&lt;p&gt;limit을 확인했다면, 어떤 process가 file open을 많이하는지 확인할 필요가 있다.&lt;br /&gt;
limit이 작고 실제 file open을 많이 하는 케이스도 있겠지만 대부분은 close가 제대로 되지 않으면서 발생하는 케이스가 많다.
어떤 process가 어떤 file을 open 하는지를 보면 이런 이슈를 분리할 수 있다.&lt;br /&gt;
정상적인 케이스라면 limit을 늘리면 될 것이고, 그렇지 않다면 버그를 수정하면 된다.&lt;/p&gt;

&lt;h3 id=&quot;1-file-nr&quot;&gt;1. file nr&lt;/h3&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /proc/sys/fs/file-nr
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;file-nr은 3개의 숫자를 갖는다. 순서대로 그 의미는&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;할당된 file handles 수&lt;/li&gt;
  &lt;li&gt;할당 되었지만 사용되지 않은 file handles 수&lt;/li&gt;
  &lt;li&gt;최대 file handles 수&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;cat&lt;/span&gt; /proc/sys/fs/file-nr &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;위 명령어를 주기적으로 호출해보면서 file-nr에서 보이는 file 할당 수가 시간이 지날수록 계속 증가한다면 file close가 잘 안되고 있는 것이라고 추정할 수 있다.&lt;br /&gt;
date와 함께 남기면 시간 별로 file-nr을 추적하기 용이하다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-green&quot;&gt;참고사항&lt;/p&gt;

  &lt;p&gt;file-nr의 마지막 값인 최대 file hadles 수는 &lt;strong&gt;cat /proc/sys/fs/file-max&lt;/strong&gt;와도 같은 값이다.&lt;br /&gt;
이 값과 &lt;strong&gt;ulimit -Hn&lt;/strong&gt;는 다르다.&lt;br /&gt;
&lt;strong&gt;file-max는 linux 시스템에서 열 수 있는 File descriptor의 최대 수에 대한 설정 값&lt;/strong&gt;으로 시스템 전체와 모든 프로세스에 적용된다.&lt;br /&gt;
반면 &lt;strong&gt;ulimit은 사용자나 프로세스 수준의 File descsriptor 제한&lt;/strong&gt;을 설정한다.&lt;/p&gt;
&lt;/div&gt;

&lt;h3 id=&quot;2-lsof&quot;&gt;2. lsof&lt;/h3&gt;

&lt;p&gt;lsof는 &lt;strong&gt;list open files 명령어&lt;/strong&gt;로 open file을 확인할 수 있다.&lt;br /&gt;
여기서 pid를 통해 특정 process의 open file을 체크할 수 있다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; lsof &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 1234567 &lt;span class=&quot;c&quot;&gt;# 1234567은 pid로, ps -ef를 통해 이슈가 발생한 pid를 찾아야한다.&lt;/span&gt;
 lsof &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 1234567|wc &lt;span class=&quot;nt&quot;&gt;-l&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;lsof를 통해 어떤 process가 open file 이슈를 만드는지 그리고 어떤 파일에 대한 open이 계속 남아있고, 증가하는지를 확인할 수 있다.&lt;br /&gt;
위와 동일하게 date를 통해 기록을 남기며 특정 process가 이슈를 만드는지 체크할 수 있다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lsof &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; 1234567
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; COMMAND    PID USER   FD      TYPE             DEVICE SIZE/OFF     NODE NAME    
 app-test- 1234567 user  181r      REG      259,1          2    4392717 /app/test/config.property
 app-test- 1234567 user  182r      REG      259,1          2    4392717 /app/test/config.property
 app-test- 1234567 user  183r      REG      259,1          2    4392717 /app/test/config.property
 app-test- 1234567 user  184r      REG      259,1          2    4392717 /app/test/config.property
 app-test- 1234567 user  185r      REG      259,1          2    4392717 /app/test/config.property
 app-test- 1234567 user  186r      REG      259,1          2    4392717 /app/test/config.property
 app-test- 1234567 user  187r      REG      259,1          2    4392717 /app/test/config.property
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;이번에 내가 겪은 이슈의 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;lsof&lt;/code&gt; 결과이다. 동일한 파일인 &lt;strong&gt;config.property&lt;/strong&gt;에 대해 open이 반복되고 있었고, close 없이 계속해서 open file 수가 증가했다.&lt;br /&gt;
&lt;strong&gt;FD&lt;/strong&gt;는 File Descriptor의 약자로 181r의 r은 read file이라는 표현이다.&lt;/p&gt;

  &lt;p&gt;지금 상황은 config.property를 주기적으로 open하고 close 하지 않는 것으로 분석할 수 있다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;이슈-처리&quot;&gt;이슈 처리&lt;/h2&gt;

&lt;p&gt;이런경우 대부분의 이슈는 반복문 안에서 open file에 대한 close가 의도한대로 동작하지 않아서 발생한다.  &lt;br /&gt;
이슈 수정 후에 다시 수행하면서 위와 동일한 로직으로 open file이 증가하지 않는 것을 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;이번엔 golang에서 만든 코드가 for loop안에 defer close를 잘못 사용하여 발생한 이슈로 close를 적절하게 변경하여 해결했다.&lt;/p&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://docs.kernel.org/admin-guide/sysctl/fs.html#file-max-file-nr&lt;/li&gt;
  &lt;li&gt;https://www.baeldung.com/linux/error-too-many-open-files&lt;/li&gt;
  &lt;li&gt;https://www.baeldung.com/linux/soft-limit-hard-limit&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux/too_many_open_file</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux/too_many_open_file</guid>
      </item>
    
      <item>
        <title>객체 지향 설계의 5가지 원칙 SOLID 헷갈리지 않게 예제로 이해하기</title>
        
          <description>&lt;p&gt;SOLID 원칙은 당연하기도 하고 중요하기도 한 객체 지향 설계에서의 기본 원칙이다.&lt;br /&gt;
SOLID 원칙을 몰랐던 사람은 없겠지만 이걸 헷갈리고 까먹는 사람들은 제법 많다.&lt;br /&gt;
나도 그 중 한 명이고.&lt;/p&gt;

&lt;p&gt;어떻게 까먹지 않을 수 있을까 고민하다가 예제와 같이 정리해본다.&lt;/p&gt;

&lt;h2 id=&quot;solid-원칙&quot;&gt;SOLID 원칙&lt;/h2&gt;

&lt;p&gt;우선 SOLID 원칙은 다섯 가지의 객체지향 원칙들의 앞 문자를 따서 만든 원칙이다.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;S&lt;/strong&gt;RP, Single Responsibility Principle, 단일 책임 원칙&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;O&lt;/strong&gt;CP, Open Closed Principle, 개방 폐쇄 원칙&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;L&lt;/strong&gt;SP, Liskov Substitution Principle, 리스코프 치환 원칙&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;I&lt;/strong&gt;SP, Interface Segregation Principle, 인터페이스 분리 원칙&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;D&lt;/strong&gt;IP, Dependency Inversion Principle, 의존 역전 원칙&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;사실 SOLID 원칙이란 클래스를 어떻게 나누고, 인터페이스로 명세하고 사용하는지에 대한 내용이다.&lt;br /&gt;
객체 지향적 개발을 잘 해온 개발자라면 당연한 내용들이어서 &lt;em&gt;‘이걸 외워야하나?’&lt;/em&gt; 싶었지만 다른 사람들과 얘기할 때 원칙들을 딱 얘기하면 의사소통 비용이 줄어든다.&lt;br /&gt;
잘 알고 있는 개념들을 정리하고 자바의 List를 예시로 설명해본다.&lt;/p&gt;

&lt;h2 id=&quot;srp-single-responsibility-principle&quot;&gt;SRP, Single Responsibility Principle&lt;/h2&gt;

&lt;p&gt;단일 책임 원칙은 가장 이해하기 쉬운 원칙이다.&lt;br /&gt;
하나의 책임만을 가져야한다는 이름과 아주 걸맞는 원칙이기 때문이다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Class has one job to do. Each change in requirements can be done by changing just one class.&lt;/em&gt; - wiki&lt;/p&gt;

&lt;p&gt;클래스는 단 하나의 책임만 가져야 한다.&lt;br /&gt;
각 요구사항의 변경은 하나의 클래스의 변경으로 만족되어야 한다.&lt;/p&gt;

&lt;p&gt;이 말은 결국 &lt;strong&gt;클래스가 단 하나의 책임만 가져야 한다&lt;/strong&gt;는 말이면서 동시에 &lt;strong&gt;하나의 책임이 여러 클래스로 나뉘어선 안된다&lt;/strong&gt;는 말이다.&lt;/p&gt;

&lt;p&gt;결국 여러 책임을 갖지 않도록 하여 결합도를 낮추고, 책임이 온전히 하나의 클래스게 있게 함으로써 응집도를 높히는 원칙이다.&lt;br /&gt;
이를 통해 유지보수와 확장이 용이한 구조를 갖는다.&lt;/p&gt;

&lt;p&gt;단일 책임 원칙을 지키지 않을 경우 하나의 변경으로 인해 여러 기능에 영향을 미칠 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;클래스가 단 하나의 책임만 가져야 한다&lt;/em&gt;를 어기는 경우&lt;br /&gt;
:x: 클래스가 여러 책임을 가짐으로써 하나의 기능 변경으로 인해 여러 기능이 변경될 가능성(위험)이 있다.&lt;br /&gt;
:x: 클래스를 사용할 때 필요하지 않은 책임까지 갖게된다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;하나의 책임이 여러 클래스로 나뉘어선 안된다&lt;/em&gt; 를 어기는 경우&lt;br /&gt;
:x: 하나의 기능 변경을 위해 여러 클래스가 바뀌어야 한다.&lt;br /&gt;
:x: 변경해야 하는 클래스를 놓칠 가능성(위험)이 있다.&lt;/p&gt;

&lt;p&gt;객체 지향은 객체를 나누는 것이고, 객체를 나누는 이유는 책임을 명확히하고 재사용하기 위함이다.&lt;br /&gt;
SRP를 지키지 않는 것은 객체 지향의 이점을 포기하는 것과 같다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;Java의 ArrayList를 보자.&lt;br /&gt;
ArrayList는 list 자료구조를 내부적으로 array를 가지고 구현하는 하나의 책임만을 가진다.&lt;br /&gt;
list에서 제공하는 추가, 삭제, iteration을 구현한다.&lt;/p&gt;

  &lt;p&gt;ArrayList가 array가 아닌 list의 기능을 구현하거나 set 등의 다른 자료구조를 구현했다면 SRP를 위배하는 클래스가 됐을 것이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;ocp-open-closed-principle&quot;&gt;OCP, Open Closed Principle&lt;/h2&gt;

&lt;p&gt;개방 폐쇄 원칙은 내가 맨날 헷갈렸던 원칙이다.&lt;br /&gt;
&lt;em&gt;“뭘 개방하고 뭘 폐쇄하는데?”&lt;/em&gt; 라는 생각을 아주 자주하게 만들었더 원칙.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Class is happy (open) to be used by others. Class is not happy (closed) to be changed by others.&lt;/em&gt; - wiki&lt;/p&gt;

&lt;p&gt;클래스는 다른 클래스에 의해 사용(확장)되는데 열려 있어야 한다.&lt;br /&gt;
클래스는 다른 것들에 의해 변경(수정)되는데 닫혀 있어야 한다.&lt;/p&gt;

&lt;p&gt;즉 개방한다는 것은 &lt;strong&gt;기능을 추가하는 것에 개방&lt;/strong&gt;해야한다는 말이고, 폐쇄한다는 것은 &lt;strong&gt;기능이 추가될 때 기존의 코드 변경에 폐쇄&lt;/strong&gt;되어야 한다는 말이다.&lt;/p&gt;

&lt;p&gt;이 원칙을 주로 &lt;strong&gt;확장&lt;/strong&gt;으로 표현하는데 이 단어가 나를 더 헷갈리게 만든 것 같다.&lt;br /&gt;
원칙적인 OCP는 인터페이스 구현을 통한 확장 뿐 아니라 기능이 추가되는 모든 상황들을 말하고 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;OCP&lt;/strong&gt;를 어기는 경우&lt;br /&gt;
:x: 클래스간 결합도가 높아지고 코드 변경이 다른 클래스에 영향을 미친다.&lt;br /&gt;
:x: 재사용성이 감소하고 확장이 어려워진다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;다시 ArrayList를 보자.&lt;/p&gt;

  &lt;p&gt;ArrayList는 List 인터페이스를 상속하고 있는데, 이 List 인터페이스에 &lt;strong&gt;LinkedList&lt;/strong&gt;라는 새로운 클래스를 구현하려고 한다.&lt;br /&gt;
LinkedList 구현으로 인한 기능 추가는 &lt;strong&gt;Open&lt;/strong&gt;이 되며, 구현으로 인해 ArrayList나 List가 수정될 필요는 없으므로 &lt;strong&gt;Close&lt;/strong&gt;한 구조이다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;lsp-liskov-substitution-principle&quot;&gt;LSP, Liskov Substitution Principle&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;“리스코프라는 사람 참 대단하다.”&lt;/em&gt; 라는 생각이 들었던 원칙.&lt;br /&gt;
굳이 왜 이것만 사람 이름일까 싶긴한데 원칙 자체는 쉽다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Class can be replaced by any of its children. Children classes inherit parent’s behaviours.&lt;/em&gt; - wiki&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;클래스는 하위 클래스로 대체 될 수 있어야 한다.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;즉 하위 클래스는 상위 클래스가 할 수 있는 기능들을 모두 수행할 수 있어야 한다는 말이다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;LSP&lt;/strong&gt;를 어기는 경우&lt;br /&gt;
:x: 다형성(Polymorphism)을 보장할 수 없다.&lt;br /&gt;
:x: 이로 인해 기능을 예측할 수 없고 안정성이 떨어진다.&lt;/p&gt;

&lt;p&gt;객체지향에서 가장 중요한 것은 인터페이스를 분리하는 것이고, 이 원칙을 어긴다는 것은 인터페이스를 통해 얻을 수 있는 다형성의 이점을 포기한다는 것이다.
LSP를 지키지 않는다는 것은 인터페이스를 사용하지 않는 편이 옳다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;p&gt;List와 ArrayList를 보자.&lt;/p&gt;

  &lt;p&gt;일반적으로 아래와 같이 사용한다.&lt;/p&gt;
  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;propertyList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// do something   &lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;그치만 이 List들은 ArrayList로 바뀌어도 내부 동작에는 아무런 영향이 없다.&lt;br /&gt;
물론 List로 어떤 동작을 하느냐에 따라 어떤 List를 사용하는 것이 &lt;strong&gt;성능에 영향을 줄 수는 있지만 동일한 기능들을 수행할 수 있다.&lt;/strong&gt;&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;TestObject&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ArrayList&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;propertyList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;ArrayList&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;paramList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;// do something   &lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;

&lt;h2 id=&quot;isp-interface-segregation-principle&quot;&gt;ISP, Interface Segregation Principle&lt;/h2&gt;

&lt;p&gt;&lt;em&gt;“인터페이스를 분리한다는 것은 결국 인터페이스의 기능(책임)을 나눈다는 점에서 SRP에 속한 원칙이 아닌가?”&lt;/em&gt; 라는 생각을 했던 원칙.&lt;br /&gt;
조금 다른 점은 SRP는 클래스 내부의 책임에 대한 내용이라면 ISP는 인터페이스의 책임에 대한 내용이라고 볼 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;When classes promise each other something, they should separate these promises (interfaces) into many small promises, so it’s easier to understand.&lt;/em&gt; - wiki&lt;/p&gt;

&lt;p&gt;클래스가 몇 가지 기능들을 제공하기로 약속되어 있다면 이런 약속들은 이해하기 쉽게 &lt;strong&gt;작은 인터페이스들로 나뉘어야 한다&lt;/strong&gt;는 말이다.&lt;br /&gt;
대부분의 객체 지향 언어들은 클래스가 여러 인터페이스를 상속받을 수 있다.&lt;br /&gt;
인터페이스를 명확하게 나눔으로써 각 객체가 구현하는 내용들을 명확하게 하고 이해하기 쉽게 한다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;작은 인터페이스들로 나뉘어야 한다&lt;/em&gt;를 어기는 경우&lt;br /&gt;
:x: 클라이언트가 필요하지 않고 사용하지 않는 함수에도 의존관계를 갖게된다.&lt;br /&gt;
:x: 인터페이스 변경 시 영향도가 증가한다.&lt;br /&gt;
:x: 따라서 유연성이 감소하고 테스트가 어려워진다.&lt;/p&gt;

&lt;p&gt;결국 다시 인터페이스. 인터페이스를 어떻게 나누어야 올바른지를 제시하는 원칙이다.&lt;br /&gt;
ISP를 적용하지 않고 인터페이스를 그냥 만든다면 그냥 함수 명세만 적어놓은 것에 불과하다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ArrayList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AbstractList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RandomAccess&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cloneable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Serializable&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...    &lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;abstract class는 잠시 접어두고 ArrayList는 4가지의 인터페이스를 상속하고 있다.&lt;br /&gt;
ArrayList는 일단 List라는 약속을 지켜야하고, RandomAccess가 가능해야하고 Clone, Serialize가 가능해야 한다.&lt;br /&gt;
이 인터페이스들의 일부가 나뉘어있지 않거나 혹은 전체가 List 인터페이스 속에 있었다고 가정하면 인터페이스 변경에 따라 바뀌어야 할 클래스들이 많아질 것이다.&lt;/p&gt;

  &lt;p&gt;따라서 명확한 기능에 맞게 인터페이스를 나누는 것이 중요하다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;dip-dependency-inversion-principle&quot;&gt;DIP, Dependency Inversion Principle&lt;/h2&gt;

&lt;p&gt;나는 왜 이게 의존성 &lt;strong&gt;역전&lt;/strong&gt; 원칙인거지? 하는 생각이 많이 들었다.&lt;br /&gt;
일반적으로 고수준 클래스가 저수준 클래스에 의존하는데, 이 방향을 interface(추상화)를 통해 의존성 방향을 반대로 한다는 것이다.&lt;br /&gt;
Layered 아키텍처를 기준으로 생각해보면 고수준이 저수준을 의존하는게 당연하니, 이 방향을 interface로 역전하는 것에 대한 이야기.&lt;br /&gt;
나는 &lt;a href=&quot;/docs/design/msa&quot;&gt;MSA&lt;/a&gt;가 익숙해서 이게 역전이라고 생각하지 않았던게 이해를 방해했다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;When classes talk to each other in a very specific way, they both depend on each other to never change. Instead classes should use promises (interfaces, parents), so classes can change as long as they keep the promise.&lt;/em&gt; - wiki&lt;/p&gt;

&lt;p&gt;클래스가 구체적으로 소통한다면 서로에게 의존성이 생기고 바뀔 수 없다.&lt;br /&gt;
클래스는 &lt;strong&gt;약속을 정의한 인터페이스를 사용하여 약속 안에서 수정 가능하도록 해야한다.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;인터페이스를 명확하게 정의하고 인터페이스 안에서 수정이 가능하도록 하자는 방향이다.&lt;br /&gt;
여기서 인터페이스란 java interface 뿐 아니라 클라이언트와 약속한 함수 명세들을 의미한다고 보는 편이 맞다.&lt;br /&gt;
결국 인터페이스란 클라이언트와의 약속이고, 변경은 최대한 약속을 깨지 않는 선에서 이뤄져야 한다.&lt;br /&gt;
인터페이스가 없다면 약속없이 맘대로 쓴다는 것이다.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;약속을 정의한 인터페이스를 사용하여 약속 안에서 수정 가능하도록 해야한다&lt;/em&gt;를 어기는 경우&lt;br /&gt;
:x: 클래스간의 결합도가 높아지고 의존성이 불분명해진다.&lt;br /&gt;
:x: 변경이 발생할 때마다 클라이언트에도 영향을 줄 수 있다.&lt;br /&gt;
:x: 따라서 재사용성이 낮아지고 유연성이 떨어진다.&lt;/p&gt;

&lt;div class=&quot;code-example&quot; style=&quot;font-size: 0.8em&quot;&gt;
  &lt;p class=&quot;label label-yellow&quot;&gt;예시&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Collection&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Iterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;iterator&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;List 인터페이스는 Iterator 라는 인터페이스에 의존하고 있다.&lt;br /&gt;
List가 더 고수준이기 때문에 저수준인 Iterator 인터페이스를 의존하는건 당연하지만, &lt;strong&gt;CharIterator&lt;/strong&gt;와 같은 구체적인 클래스에 의존하지 않고 약속된 인터페이스에 의존함으로써 결합도를 낮추고 변경에 유연할 수 있다.&lt;/p&gt;
&lt;/div&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;SOLID wiki, https://simple.wikipedia.org/wiki/SOLID_(object-oriented_design)&lt;/li&gt;
  &lt;li&gt;OCP, https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/architecture/solid</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/architecture/solid</guid>
      </item>
    
      <item>
        <title>The easiest way to find root directory in Python</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;rootdir&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/algorithm/language/python/python-rootdir&quot; class=&quot;btn btn-purple&quot;&gt;find rootdir&lt;/a&gt;
&lt;a href=&quot;/docs/algorithm/language/python/python-import-rootdir&quot; class=&quot;btn&quot;&gt;add rootdir path for import&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Finding the root directory in Python can be challenging.&lt;br /&gt;
With the &lt;strong&gt;rootdir&lt;/strong&gt;, you can find the root directory intuitively, quickly, and easily.&lt;/p&gt;

&lt;h3 id=&quot;usage&quot;&gt;Usage&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;Install rootdir with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pip install rootdir&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__root__.py&lt;/code&gt; to your root path.&lt;/li&gt;
  &lt;li&gt;Import rootdir with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;import rootdir&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Check the root directory with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rootdir.root_dir(__file__)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;example&quot;&gt;example&lt;/h3&gt;

&lt;p&gt;If you need to find the root directory, you can easily do so with the following code.&lt;br /&gt;
Copy and run the code below to verify its functionality.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;rootdir&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rootdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;sample&quot;&gt;sample&lt;/h3&gt;

&lt;p&gt;Refer to the following &lt;u&gt;sample project&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; to better understand and efficiently use rootdir.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
└── example/
├── a/
│   └── a_1.py
├── b/
│   ├── b_1/
│   │   ├── b_1_1/
│   │   │   └── b_1_1_1.py
│   │   └── b_1_2.py
│   └── b_2.py
├── main.py
└── __root__.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Once you add &lt;strong&gt;__root__.py&lt;/strong&gt;, you can find the root directory from anywhere using &lt;strong&gt;rootdir&lt;/strong&gt;.&lt;br /&gt;
For example, in &lt;strong&gt;b_1_1_1.py&lt;/strong&gt;, you can find the rootdir as shown below.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;rootdir&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rootdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can find the root directory using above code not only in b_1_1_1.py but also in b_1_2.py, b_2.py, or any other file in the project.&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;You can check the actual &lt;a href=&quot;https://github.com/meansoup/rootdir/tree/main/sample&quot;&gt;sample project&lt;/a&gt; and its functionality in the sample project provided by rootdir. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm/language/python/python-rootdir</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm/language/python/python-rootdir</guid>
      </item>
    
      <item>
        <title>The easiest way to import other directory in Python</title>
        
          <description>&lt;blockquote class=&quot;note-title mb-6&quot;&gt;
  &lt;p&gt;rootdir&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/algorithm/language/python/python-rootdir&quot; class=&quot;btn&quot;&gt;find rootdir&lt;/a&gt;
&lt;a href=&quot;/docs/algorithm/language/python/python-import-rootdir&quot; class=&quot;btn btn-purple&quot;&gt;add rootdir path for import&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Importing code from different folders in Python can be very cumbersome.&lt;br /&gt;
In order to import in Python, you need to find the appropriate path and add it using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;sys.path.append(...)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;With the &lt;strong&gt;rootdir&lt;/strong&gt; library, you can add the root directory in an intuitive, fast, and easily.&lt;/p&gt;

&lt;h3 id=&quot;usage&quot;&gt;Usage&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;Install rootdir with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;pip install rootdir&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Add &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;__root__.py&lt;/code&gt; to your root path&lt;/li&gt;
  &lt;li&gt;Import rootdir with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;import rootdir&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;Add the rootdir with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rootdir.root_dependency(__file__)&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;example&quot;&gt;example&lt;/h3&gt;

&lt;p&gt;If you have a Python project with a directory structure and need to import code from different directories, you can copy the following code to add the path and perform imports based on the root directory.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;rootdir&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rootdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_dependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can use the same import code regardless of the directory structure, the path of the specific file.&lt;br /&gt;
With &lt;strong&gt;rootdir&lt;/strong&gt;, you can add the directory by the above code.&lt;/p&gt;

&lt;h3 id=&quot;sample&quot;&gt;sample&lt;/h3&gt;

&lt;p&gt;Refer to the following &lt;u&gt;sample project&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; to better understand and efficiently use rootdir.&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
└── example/
├── a/
│   └── a_1.py
├── b/
│   ├── b_1/
│   │   ├── b_1_1/
│   │   │   └── b_1_1_1.py
│   │   └── b_1_2.py
│   └── b_2.py
├── main.py
└── __root__.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After adding &lt;strong&gt;__root__.py&lt;/strong&gt;, you can easily add the root directory and perform imports from anywhere using &lt;strong&gt;rootdir&lt;/strong&gt;.&lt;br /&gt;
For example, &lt;strong&gt;in b_1_1_1.py&lt;/strong&gt;, you can add the directory with rootdir as follows.&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;rootdir&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;rootdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_dependency&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;a.a_1&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;print_a_1&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;rootdir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;root_dir&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__file__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;print_a_1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Not only in b_1_1_1.py, but also in b_1_2.py, b_2.py, and any other file in project, you can add rootdir and perform imports in the same way using the above code.
You don’t need to add sys.path or calculate path.&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;You can check the actual &lt;a href=&quot;https://github.com/meansoup/rootdir/tree/main/sample&quot;&gt;sample project&lt;/a&gt; and its functionality in the sample project provided by rootdir. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm/language/python/python-import-rootdir</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm/language/python/python-import-rootdir</guid>
      </item>
    
      <item>
        <title>DynamoDB Secondary Index: Considerations and Cost Issues</title>
        
          <description>&lt;p&gt;To optimize queries in DynamoDB, it is necessary to utilize Secondary Indexes.&lt;/p&gt;

&lt;p&gt;In DynamoDB, you can use Secondary Indexes to query data in the table using alternative keys besides the primary key. Secondary Indexes include the following:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Attributes for the alternative key, primary key attributes, and optionally a subset of other attributes from the base table (projected attributes).&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;DynamoDB automatically creates indexes based on the table’s primary key and updates all indexes automatically whenever the table is modified.&lt;/p&gt;

&lt;p&gt;DynamoDB supports two types of Secondary Indexes: GSI (Global Secondary Index) and LSI (Local Secondary Index).&lt;br /&gt;
AWS currently advises against using LSI, so this document will focus on the concepts and precautions of using GSI, as well as the reasons for avoiding LSI.&lt;/p&gt;

&lt;h2 id=&quot;gsi-global-secondary-index&quot;&gt;GSI (Global Secondary Index)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;GSI&lt;/strong&gt; is called ‘Global’ because queries on this index can span all partitions and are not limited to a specific partition.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;It can have a partition key and, optionally a sort key, which are different from the table’s original partition key and sort key.&lt;/li&gt;
  &lt;li&gt;Key values do not need to be unique.&lt;/li&gt;
  &lt;li&gt;It can be created when the table is created or added to an existing table.&lt;/li&gt;
  &lt;li&gt;It can be deleted after table creation.&lt;/li&gt;
  &lt;li&gt;It supports eventual consistency only.&lt;/li&gt;
  &lt;li&gt;It has separate provisioned throughput settings for read and write operations (RCU, WCU).&lt;/li&gt;
  &lt;li&gt;Queries return only the projected attributes in the index.&lt;/li&gt;
  &lt;li&gt;Up to 20 GSIs can be created per table.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;partitions-in-gsi&quot;&gt;Partitions in GSI&lt;/h3&gt;

&lt;p&gt;In GSI, &lt;strong&gt;key values do not need to be unique.&lt;/strong&gt; This allows multiple data items to be stored under the same key, which is not possible in the main table.&lt;/p&gt;

&lt;p&gt;For example, consider a main table with attributes &lt;strong&gt;name, age, country, passportNo&lt;/strong&gt;.&lt;br /&gt;
To ensure uniqueness, you might set the primary key to passportNo.&lt;/p&gt;

&lt;p&gt;However, if you need to query by country, you can set country as the primary key of a GSI.&lt;br /&gt;
This allows you to store and retrieve multiple non-unique data items under the same country key.&lt;/p&gt;

&lt;p&gt;Is this structure safe?&lt;br /&gt;
GSI internally shards and partitions based on the key, ensuring safety.&lt;br /&gt;
Theoretically, you can store unlimited data under the same key.&lt;br /&gt;
The main table also shard primary key, but the main table cannot have multiple data for the same primary key.&lt;/p&gt;

&lt;h3 id=&quot;gsi-cu-capacity-unit-in-gsi&quot;&gt;GSI CU (Capacity Unit) in GSI&lt;/h3&gt;

&lt;p&gt;GSI has separate Capacity Units (CUs) from the main table.&lt;br /&gt;
When reading or writing to GSI, it consumes separate CUs, but this is related to main table operations.&lt;/p&gt;

&lt;p&gt;For GSI’s RCU, throttling does not affect the main table.&lt;br /&gt;
However, for GSI’s WCU, if throttling occurs, writes to the main table will also fail.&lt;br /&gt;
DynamoDB internally &lt;u&gt;writes to both the main table and all related GSIs when data changes&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;, so a write failure in GSI leads to a failure in the main table.&lt;/p&gt;

&lt;p&gt;In summary, writes to DynamoDB are tied to writes in GSI.&lt;br /&gt;
Updates in DynamoDB can result in delete and write operations in GSI.&lt;/p&gt;

&lt;p&gt;Revisiting the previous example, if the country changes from KR to US, the projected data for the KR key in GSI is deleted, and the data is written to the US key.&lt;br /&gt;
This results in the consumption of 2 CUs for one write operation in DynamoDB.&lt;/p&gt;

&lt;p&gt;Since a significant portion of DynamoDB costs comes from CUs, a data structure that uses 3 CUs per write (1 for the main table and 2 for GSI) is not cost-effective.&lt;br /&gt;
Multiple GSIs can be applied to a DynamoDB table, so cost considerations should be factored into GSI design.&lt;/p&gt;

&lt;h2 id=&quot;lsi-local-secondary-index&quot;&gt;LSI (Local Secondary Index)&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;LSI&lt;/strong&gt; is called ‘Local’ because the index is located within the same table partition as the item with the specified partition key.&lt;br /&gt;
This means queries are restricted to data with the specified partition key value.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;The partition key of an LSI is the same as the table’s partition key.&lt;/li&gt;
  &lt;li&gt;It can only be created when the table is created.&lt;/li&gt;
  &lt;li&gt;It cannot be deleted after table creation.&lt;/li&gt;
  &lt;li&gt;It supports both eventual and strong consistency.&lt;/li&gt;
  &lt;li&gt;It uses the table’s read and write capacity without separate provisioning.&lt;/li&gt;
  &lt;li&gt;Queries can return attributes not projected into the index.&lt;/li&gt;
  &lt;li&gt;All items with the same partition key and their corresponding LSI items are stored within the same partition. The total size of this collection cannot exceed 10GB.&lt;/li&gt;
  &lt;li&gt;Up to 5 LSIs can be created per table.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;LSI has clear disadvantages and lacks distinct advantages over GSI, so it is not currently recommended.&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;LSIs cannot be added or deleted after table creation.&lt;/li&gt;
  &lt;li&gt;They share resources with the main table.&lt;/li&gt;
  &lt;li&gt;There is a 10GB size limit per partition key.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Using GSI is generally a better option.&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Refer to the &lt;a href=&quot;https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/GSI.html#GSI.ThroughputConsiderations&quot;&gt;relationship between main table and GSI table&lt;/a&gt; and the &lt;a href=&quot;https://repost.aws/knowledge-center/dynamodb-gsi-throttling-table&quot;&gt;impact of GSI CU shortages on the main table&lt;/a&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/dynamo/si</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/dynamo/si</guid>
      </item>
    
      <item>
        <title>What is DynamoDB Streams and When Should You Use It?</title>
        
          <description>&lt;p&gt;As a service reaches maturity, enterprises begin to look for ways to reduce service costs.&lt;br /&gt;
Since our service has been in the maturity phase for quite some time, we face pressure to reduce costs every year.&lt;/p&gt;

&lt;p&gt;I often wondered, “Can we use DynamoDB Streams even if it’s great, given our situation?”&lt;br /&gt;
Then, I found a very suitable case.&lt;/p&gt;

&lt;p&gt;First, let’s understand what DynamoDB Streams is.&lt;/p&gt;

&lt;h2 id=&quot;dynamodb-streams&quot;&gt;DynamoDB Streams&lt;/h2&gt;

&lt;p&gt;DynamoDB Streams is a service that captures and delivers changes in DynamoDB.&lt;/p&gt;

&lt;p&gt;Streams has the following characteristics:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;It keeps track of changes in DynamoDB in chronological order.&lt;/li&gt;
  &lt;li&gt;You can see what data has changed through Streams Record.&lt;/li&gt;
  &lt;li&gt;Streams Record stores data for 24 hours.&lt;/li&gt;
  &lt;li&gt;It can easily integrate with other AWS services.&lt;/li&gt;
  &lt;li&gt;It is easy to enable/disable without affecting the DynamoDB table.&lt;/li&gt;
  &lt;li&gt;You can specify the information to deliver
    &lt;ul&gt;
      &lt;li&gt;KEYS_ONLY, NEW_IMAGE, OLD_IMAGE, NEW_AND_OLD_IMAGE&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Since you can receive all changes via Streams, there are various ways to utilize Streams.&lt;br /&gt;
&lt;strong&gt;It can be used for data analysis, asynchronous tasks, data replication, backup, event delivery, and more.&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;However, as mentioned earlier, &lt;strong&gt;the problem is the cost&lt;/strong&gt;.&lt;br /&gt;
Delivering all changes to Streams means &lt;strong&gt;additional costs for all changes&lt;/strong&gt;.&lt;/p&gt;

&lt;h2 id=&quot;when-should-you-use-it&quot;&gt;When Should You Use It?&lt;/h2&gt;

&lt;p&gt;If there is no cost pressure, Streams can be conveniently used for all the cases mentioned above, such as data analysis, asynchronous tasks, and data replication.&lt;br /&gt;
However, considering the steeply increasing cloud costs as usage increases, it may not be appropriate to use Streams a lot simply because the current cost is low.&lt;/p&gt;

&lt;p&gt;I found a very suitable case for Streams while designing a new system.&lt;br /&gt;
We designed the user table in DynamoDB considering scalability and were considering statistics for users.&lt;br /&gt;
To easily extract statistics, a database capable of various queries was necessary.&lt;/p&gt;

&lt;p&gt;In the case of the user DB, the data cannot increase indefinitely (even if the entire world’s population becomes users, it is only 7 billion).&lt;br /&gt;
At the same time, the data in the user DB does not change frequently.&lt;br /&gt;
Therefore, although there may be a lot of accumulated data, the Streams generated during continuous service are not many.&lt;/p&gt;

&lt;p&gt;Let’s take Instagram as an example.&lt;br /&gt;
Instagram has about 1.5 billion users and generates about 100 million posts per day.&lt;/p&gt;

&lt;p&gt;If you store post data in DynamoDB and use Streams, at least 100 million Streams Records will be generated every day, which can be a cost issue.&lt;/p&gt;

&lt;p&gt;However, considering the 1.5 billion users, &lt;strong&gt;most user data is updated during the registration scenario, and changes are infrequent thereafter&lt;/strong&gt;.&lt;br /&gt;
If 1.5 billion Streams Records are generated over several years of Instagram service, this would be a very low cost.&lt;/p&gt;

&lt;h2 id=&quot;cost-calculation&quot;&gt;Cost Calculation&lt;/h2&gt;

&lt;p&gt;We will calculate the cost using the commonly used Streams and Lambda.&lt;br /&gt;
The costs are organized based on the &lt;u&gt;AWS pricing document&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt; as of June 24, 2024.&lt;br /&gt;
The costs are the same in the USA (Oregon), and Europe (Ireland) Korea (Seoul).&lt;/p&gt;

&lt;h3 id=&quot;streams&quot;&gt;Streams&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;del&gt;The first 2.5 million DynamoDB Streams read request units per month are free&lt;/del&gt;&lt;/li&gt;
  &lt;li&gt;&lt;del&gt;Thereafter, $0.0217 per 100,000 DynamoDB Streams read request units&lt;/del&gt;&lt;/li&gt;
  &lt;li&gt;Charges for reading data from DynamoDB Streams, but &lt;strong&gt;&lt;u&gt;free when invoked from Lambda&lt;/u&gt;&lt;/strong&gt;&lt;sup id=&quot;fnref:2&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:2&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Streams incurs no read request costs when used with Lambda.&lt;/p&gt;

&lt;h3 id=&quot;lambda&quot;&gt;Lambda&lt;/h3&gt;

&lt;p&gt;Lambda cost calculation is a bit complex.&lt;br /&gt;
There are separate charges for CPU per second, per request, and memory usage.&lt;/p&gt;

&lt;p&gt;CPU (x86) charges&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;First 6 billion GB-seconds per month: $0.0000166667 per GB-second&lt;/li&gt;
  &lt;li&gt;Next 9 billion GB-seconds per month:  $0.000015 per GB-second&lt;/li&gt;
  &lt;li&gt;Next 15 billion GB-seconds per month: $0.0000133334 per GB-second&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Per request charge&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;$0.20 per 1 million requests&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Memory (MB) per millisecond charges&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;128 MB    $0.0000000021&lt;/li&gt;
  &lt;li&gt;512 MB    $0.0000000083&lt;/li&gt;
  &lt;li&gt;1,024 MB  $0.0000000167&lt;/li&gt;
  &lt;li&gt;1,536 MB  $0.0000000250&lt;/li&gt;
  &lt;li&gt;2,048 MB  $0.0000000333&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cost-example-and-calculation&quot;&gt;Cost Example and Calculation&lt;/h3&gt;

&lt;p&gt;Let’s calculate the cost of linking Instagram’s user DB to a statistics DB using DynamoDB Streams and Lambda.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;AWS RDS would be needed, but this cost is not included here.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;Scenario: &lt;strong&gt;1.5 billion user data requests are made to Lambda through DynamoDB Streams.&lt;/strong&gt;&lt;/li&gt;
  &lt;li&gt;Assumptions:
    &lt;ul&gt;
      &lt;li&gt;Using the cheapest 128 MB memory, assume Lambda runs for 1 second.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Total cost: $28,450
    &lt;ul&gt;
      &lt;li&gt;Streams: $0&lt;/li&gt;
      &lt;li&gt;CPU per second cost: $25,000 (0.0000166667 * 1,500,000,000)&lt;/li&gt;
      &lt;li&gt;Per request cost: $300 (0.20 * 1,500)&lt;/li&gt;
      &lt;li&gt;Memory cost: $3,150 (0.0000000021 * 1,500,000,000 * 1,000)&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;In a real service, more Streams Records may be generated due to user changes.&lt;br /&gt;
However, paying a total of $28,000 for Streams over several years of service is expected to be a very small cost compared to the service scale.&lt;/p&gt;

&lt;h3 id=&quot;cost-optimization&quot;&gt;Cost Optimization&lt;/h3&gt;

&lt;p&gt;In Streams, you can save on Lambda costs by receiving records in batches.&lt;br /&gt;
You can modify the following properties to receive records in batches:&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;u&gt;Batch size&lt;/u&gt;&lt;/strong&gt;&lt;sup id=&quot;fnref:3&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The number of records sent to Lambda in each batch.&lt;/li&gt;
  &lt;li&gt;The maximum is 10,000 records, and multiple records are delivered in a single invocation.&lt;/li&gt;
  &lt;li&gt;It must not exceed the payload limit of 6MB.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;&lt;u&gt;Batch window&lt;/u&gt;&lt;/strong&gt;&lt;sup id=&quot;fnref:3:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:3&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;3&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;The time to collect records before invoking Lambda. (unit: seconds)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Let’s assume the batch size is set to 1000 and the batch window is set to 10.&lt;br /&gt;
If more than 1000 records are collected, Lambda is invoked. If fewer than 1000 records are collected, Lambda is invoked after 10 seconds.&lt;/p&gt;

&lt;p&gt;It is important to note that &lt;strong&gt;&lt;u&gt;batch size and window operate on a per-shard basis within Streams&lt;/u&gt;&lt;/strong&gt;&lt;sup id=&quot;fnref:4&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:4&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;4&lt;/a&gt;&lt;/sup&gt;.&lt;br /&gt;
If there are 10 shards, the batch window and size apply to each shard individually, so during a 10-second batch window,  a total of 10 Lambdas could be invoked  becaouse each of the 10 shards collects records.&lt;/p&gt;

&lt;p&gt;Therefore, sending data in batch sizes does not mean that a Lambda invocation will occur for each batch size of records.&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Refer to the &lt;a href=&quot;https://aws.amazon.com/dynamodb/pricing/provisioned/&quot;&gt;Streams pricing document&lt;/a&gt; and the &lt;a href=&quot;https://aws.amazon.com/lambda/pricing/&quot;&gt;Lambda pricing document&lt;/a&gt;. &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:2&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;You can check the cost when using Streams with Lambda in the &lt;a href=&quot;https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/CostOptimization_StreamsUsage.html&quot;&gt;Streams usage&lt;/a&gt; document. &lt;a href=&quot;#fnref:2&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:3&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Check property at &lt;a href=&quot;https://docs.aws.amazon.com/lambda/latest/dg/with-ddb.html#services-dynamodb-eventsourcemapping&quot;&gt;spec for batch window &amp;amp; size&lt;/a&gt;. &lt;a href=&quot;#fnref:3&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt; &lt;a href=&quot;#fnref:3:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
    &lt;li id=&quot;fn:4&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Refer to the stackoverflow about &lt;a href=&quot;https://stackoverflow.com/questions/75448464/dynamodb-streams-small-number-of-items-per-batch&quot;&gt;Streams shard &amp;amp; Stremas Batch&lt;/a&gt;. &lt;a href=&quot;#fnref:4&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/dynamo/streams</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/dynamo/streams</guid>
      </item>
    
      <item>
        <title>10 Things to Consider When Developing a Backup System</title>
        
          <description>&lt;p&gt;To build a reliable backup service, it’s crucial to understand the key considerations within the backup domain.&lt;br /&gt;
While it might seem similar to synchronization in terms of uploading and downloading data from a server, backup services have distinct characteristics.&lt;/p&gt;

&lt;h2 id=&quot;key-considerations-in-the-backup-domain&quot;&gt;Key Considerations in the Backup Domain&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;#1-distinguishing-the-start-and-end-of-backup-and-restore&quot;&gt;Distinguishing the Start and End of Backup and Restore&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#2-considering-revisions&quot;&gt;Considering Revisions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#3-managing-backup-lifecycle&quot;&gt;Managing Backup Lifecycle&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#4-preventing-data-loss&quot;&gt;Preventing Data Loss&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#5-focusing-on-restore&quot;&gt;Focusing on Restore&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#6-locks-might-not-be-necessary&quot;&gt;Locks Might Not Be Necessary&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#7-types-of-backups&quot;&gt;Types of Backups&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#8-considering-timing-for-automatic-backups&quot;&gt;Considering Timing for Automatic Backups&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#9-understanding-restore-usability&quot;&gt;Understanding Restore Usability&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#10-managing-policies&quot;&gt;Managing Policies&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;terminology&quot;&gt;Terminology&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Term&lt;/th&gt;
      &lt;th&gt;Meaning&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Backup&lt;/td&gt;
      &lt;td&gt;The process of uploading a user’s data from their device to a server.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Automatic Backup&lt;/td&gt;
      &lt;td&gt;A feature that performs backups automatically based on set conditions.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Restore&lt;/td&gt;
      &lt;td&gt;The process of retrieving a user’s saved data from the server back to their device.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Revision&lt;/td&gt;
      &lt;td&gt;A versioning method to differentiate each backup iteration when backups occur multiple times.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Snapshot&lt;/td&gt;
      &lt;td&gt;The data stored during each backup request from a device.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Full Backup&lt;/td&gt;
      &lt;td&gt;A backup process that uploads all data during each backup session.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Incremental Backup&lt;/td&gt;
      &lt;td&gt;A backup process that uploads only new or modified data since the last backup.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;1-distinguishing-the-start-and-end-of-backup-and-restore&quot;&gt;1. Distinguishing the Start and End of Backup and Restore&lt;/h3&gt;

&lt;p&gt;Backups are complete when all data is successfully backed up, and the same applies to restores.&lt;br /&gt;
You can create an interface to fulfill these functions, but large backups might involve thousands of API calls, potentially taking hours depending on the network.&lt;/p&gt;

&lt;p&gt;Without clear checkpoints, you won’t know if their backup has finished or if it stopped midway. &lt;br /&gt;
This is why it’s important to have &lt;strong&gt;start and end checkpoints for backups and restores&lt;/strong&gt;. Without these, it’s difficult to check whether a process has completed or encountered an issue.&lt;/p&gt;

&lt;p&gt;The checkpoint is also essential for analyzing performance, issues, and usability.
These start/end APIs aren’t just for checkpoints. They can also be used for processing snapshots&lt;/p&gt;

&lt;h3 id=&quot;2-considering-revisions&quot;&gt;2. Considering Revisions&lt;/h3&gt;

&lt;p&gt;When users request a new backup, it needs to be distinguished from previous backups.&lt;br /&gt;
For example, if a backup is in progress and the user requests a restore, the system should use the last completed backup, not the current one.&lt;br /&gt;
If the backup process is interrupted, the incomplete backup must not overwrite the previous, completed one.&lt;/p&gt;

&lt;p&gt;Therefore, it’s essential to include revision keys in data design, which allows for visibility management and enables async garbage collection (deleting old backups).&lt;/p&gt;

&lt;h3 id=&quot;3-managing-backup-lifecycle&quot;&gt;3. Managing Backup Lifecycle&lt;/h3&gt;

&lt;p&gt;Backups involve large amounts of data, so it’s critical to ensure that data deletion happens correctly.&lt;br /&gt;
If not, this will directly impact costs, as undetected undeleted data accumulates.&lt;/p&gt;

&lt;p&gt;Backups can be stored from days to years, depending on lifecycle policies.&lt;br /&gt;
To manage this, async deletions should be executed via batch jobs that are stable and accurate.&lt;/p&gt;

&lt;p&gt;Given that deletions occur asynchronously, it’s easy to miss them.&lt;br /&gt;
Missing deletion leads to that much cost and additional work.&lt;/p&gt;

&lt;p&gt;Due to the nature of backups, snapshots of specific backups are often erased when data is erased.&lt;br /&gt;
Therefore, it is better to continue the design until deletion by &lt;a href=&quot;#2-considering-revisions&quot;&gt;Considering Revisions&lt;/a&gt;.&lt;/p&gt;

&lt;h3 id=&quot;4-preventing-data-loss&quot;&gt;4. Preventing Data Loss&lt;/h3&gt;

&lt;p&gt;The most fundamental principle of backup system design is to never lose user data.&lt;br /&gt;
Surprisingly, there are many scenarios where data loss can occur, even in production services.&lt;/p&gt;

&lt;p&gt;While developing new features, engineers sometimes prioritize cost, efficiency, or operational concerns, leading to decisions that increase the risk of data loss.&lt;br /&gt;
However, &lt;strong&gt;managing user data means ensuring that data is never lost, no matter the circumstances&lt;/strong&gt;. It’s crucial to design the system not only to avoid losing data, but also to prevent any situation that could lead to human errors resulting in data loss.&lt;/p&gt;

&lt;p&gt;For instance, allowing batch jobs to directly access the data storage can be dangerous.&lt;br /&gt;
If the schema or access logic changes, the batch jobs may not reflect those updates.&lt;br /&gt;
It will potentially result catastrophic data loss. (as has happened to our team in past incidents).&lt;/p&gt;

&lt;p&gt;The goal is to design a system where &lt;strong&gt;there are no issues even without constant monitoring&lt;/strong&gt;, rather than one that requires attention to avoid problems.&lt;/p&gt;

&lt;h3 id=&quot;5-focusing-on-restore&quot;&gt;5. Focusing on Restore&lt;/h3&gt;

&lt;p&gt;Just as preventing data loss is important, ensuring safe data restoration is equally critical.&lt;/p&gt;

&lt;p&gt;The key difference between backups and synchronization is that backups store data, while synchronization keeps it updated in real time.&lt;br /&gt;
Backups only upload data. Even with automatic backups, the only time data is downloaded is during a restore request.&lt;br /&gt;
If data is restored incorrectly, there’s no way to correct it until the user makes another restore request, which could be problematic if the client doesn’t handle exclusions for previously restored items.&lt;br /&gt;
In some cases, it’s better not to restore data at all than to restore it incorrectly.&lt;/p&gt;

&lt;p&gt;Synchronization, on the other hand, provides more opportunities to correct datas because data is updated frequently.&lt;/p&gt;

&lt;h3 id=&quot;6-locks-might-not-be-necessary&quot;&gt;6. Locks Might Not Be Necessary&lt;/h3&gt;

&lt;p&gt;Typically, backups are device-specific, this means that there is no need to consider simultaneous requests from multiple devices. &lt;br /&gt;
No simultaneous requests mean no simultaneous writes, so locks might not be needed, depending on the design.&lt;br /&gt;
However, there might be cases where a restore (read) request is made simultaneously with a backup (write) request.&lt;/p&gt;

&lt;p&gt;In contrast, synchronization often involves simultaneous writes from multiple devices or users, necessitating the use of locks.&lt;/p&gt;

&lt;h3 id=&quot;7-types-of-backups&quot;&gt;7. Types of Backups&lt;/h3&gt;

&lt;p&gt;Each team might use different terms, but generally, there are &lt;u&gt;two main types of backups&lt;/u&gt;&lt;sup id=&quot;fnref:1&quot; role=&quot;doc-noteref&quot;&gt;&lt;a href=&quot;#fn:1&quot; class=&quot;footnote&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;Full Backup&lt;/strong&gt; – A complete backup regardless of previous backups.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Incremental Backup&lt;/strong&gt; – A backup that only includes data added or changed since the last backup.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You should choose the appropriate type based on the backup data’s requirements.&lt;br /&gt;
For our services, which handle various content with different characteristics, we use both types as needed.&lt;/p&gt;

&lt;h3 id=&quot;8-considering-timing-for-automatic-backups&quot;&gt;8. Considering Timing for Automatic Backups&lt;/h3&gt;

&lt;p&gt;Nowadays, many services offer &lt;strong&gt;automatic backup&lt;/strong&gt; options.&lt;br /&gt;
Automatic backups usually run at times when they won’t impact the user’s experience, typically during the night.&lt;/p&gt;

&lt;p&gt;If a client is set to run automatic backups at midnight, all backup traffic will be concentrated at that time.&lt;br /&gt;
Although the client handles the timing, the server should also monitor this.&lt;/p&gt;

&lt;p&gt;Backup services generally see a significant difference between peak and non-peak API request volumes due to these time-based patterns.&lt;/p&gt;

&lt;h3 id=&quot;9-understanding-restore-usability&quot;&gt;9. Understanding Restore Usability&lt;/h3&gt;

&lt;p&gt;Restores have their own characteristics.&lt;br /&gt;
Unlike automatic backups, restore requests typically occur during the day when users are active.&lt;/p&gt;

&lt;p&gt;Users often perform backups multiple times, but restores may only happen once—or not at all.&lt;br /&gt;
Therefore, restore requests are much less frequent compared to backups.&lt;br /&gt;
However, restores are often more important to users than backups, so the restore function needs to be well-managed.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Backup and restore metrics should be managed separately so that restores aren’t overshadowed by backup metrics.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;10-managing-policies&quot;&gt;10. Managing Policies&lt;/h3&gt;

&lt;p&gt;Policies are important across all domains.&lt;br /&gt;
For enterprise-level services, not having policies in place can lead to encountering abusive users with behavior far beyond the norm.&lt;/p&gt;

&lt;p&gt;For instance, while most users might have around 300 backup items, we’ve seen abusive user trying to store up to 1.5 million items. &lt;br /&gt;
If policies aren’t established beforehand, it can be difficult to address such cases after the fact, and handling them may require additional work.&lt;/p&gt;

&lt;hr /&gt;

&lt;div class=&quot;footnotes&quot; role=&quot;doc-endnotes&quot;&gt;
  &lt;ol&gt;
    &lt;li id=&quot;fn:1&quot; role=&quot;doc-endnote&quot;&gt;
      &lt;p&gt;Reference: &lt;a href=&quot;https://aws.amazon.com/compare/the-difference-between-incremental-differential-and-other-backups/&quot;&gt;AWS article on types of backups&lt;/a&gt; &lt;a href=&quot;#fnref:1&quot; class=&quot;reversefootnote&quot; role=&quot;doc-backlink&quot;&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
    &lt;/li&gt;
  &lt;/ol&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/career/domain/backup</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/career/domain/backup</guid>
      </item>
    
      <item>
        <title>What is HATEOAS? Why and when using HATEOAS, and issues when not in use</title>
        
          <description>&lt;p&gt;HATEOAS is one of the design principles of RESTful web services, which makes RESTful APIs self-descriptive, simplifying and enhancing the scalability of interactions between clients and servers.&lt;/p&gt;

&lt;p&gt;HATEOAS stands for ‘&lt;strong&gt;H&lt;/strong&gt;ypermedia &lt;strong&gt;a&lt;/strong&gt;s &lt;strong&gt;t&lt;/strong&gt;he &lt;strong&gt;E&lt;/strong&gt;ngine &lt;strong&gt;o&lt;/strong&gt;f &lt;strong&gt;A&lt;/strong&gt;pplication &lt;strong&gt;S&lt;/strong&gt;tate,’ which is the principle of using hypermedia to dynamically interact between the server and the client.&lt;br /&gt;
HATEOAS provides hypermedia links related to the resource in the API response, allowing the next actions to be determined dynamically based on the provided hypermedia.&lt;/p&gt;

&lt;p&gt;To understand why HATEOAS is used, let’s look at the issues that arise when HATEOAS is not used.&lt;br /&gt;
For comparison, we’ll use the example of implementing GitHub’s repository retrieval API.&lt;/p&gt;

&lt;p&gt;The key is &lt;strong&gt;how the data is delivered when other data&lt;/strong&gt; is needed in one api.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;#non-hateoas&quot;&gt;non-HATEOAS&lt;/a&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;#1-when-the-server-fills-in-and-returns-the-data&quot;&gt;When the server fills in and returns the data&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;#2-when-using-apis-with-predetermined-data-for-the-client&quot;&gt;When using APIs with predetermined data for the client&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;#hateoas&quot;&gt;HATEOAS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;non-hateoas&quot;&gt;non-HATEOAS&lt;/h2&gt;

&lt;h3 id=&quot;1-when-the-server-fills-in-and-returns-the-data&quot;&gt;1. When the server fills in and returns the data&lt;/h3&gt;

&lt;p&gt;When retrieving a repository and additional information about a user is needed, the user’s detailed information is added to the repository retrieval API.&lt;br /&gt;
The client starts by receiving small user information related to the repository. 
However, over time, the requirements change and data that is not related to the repository query is returned.&lt;/p&gt;

&lt;p&gt;As these requirements accumulate, the repository retrieval API might evolve into an API that returns multiple pieces of information beyond just repository retrieval.&lt;/p&gt;

&lt;h4 id=&quot;issues&quot;&gt;Issues&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;The API performs more than its intended function.&lt;/li&gt;
  &lt;li&gt;The API becomes harder to understand.&lt;/li&gt;
  &lt;li&gt;The server has to consider various exceptions for multiple domain concepts to support the API.&lt;/li&gt;
  &lt;li&gt;The server cannot determine which values in the API are being used by the client.&lt;/li&gt;
  &lt;li&gt;When supporting multiple clients, there may be several APIs that provide similar functions.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;2-when-using-apis-with-predetermined-data-for-the-client&quot;&gt;2. When using APIs with predetermined data for the client&lt;/h3&gt;

&lt;p&gt;To retrieve a repository and then additional information about a user, the client calls the predetermined API. It might be called as &lt;strong&gt;get user api&lt;/strong&gt;.&lt;br /&gt;
The process involves calling the predetermined user information retrieval API using the user ID obtained from the repository.&lt;/p&gt;

&lt;p&gt;The client must hardcode the API endpoint.&lt;br /&gt;
The client becomes the subject of managing endpoints and relies on endpoints.&lt;/p&gt;

&lt;h4 id=&quot;issues-1&quot;&gt;Issues&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;A strong coupling between the client and server emerges due to the endpoint.&lt;/li&gt;
  &lt;li&gt;The coupling resulting from the client’s endpoint makes server API changes more difficult.&lt;/li&gt;
  &lt;li&gt;If the server updates the API version, client modifications are required.&lt;/li&gt;
  &lt;li&gt;There is a need to share and explain the API with the client.&lt;/li&gt;
  &lt;li&gt;When supporting multiple clients, there is an overhead in explaining the API to each client.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;hateoas&quot;&gt;HATEOAS&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.github.com/en/rest/repos/repos?apiVersion=2022-11-28#get-a-repository&quot;&gt;GitHub’s Get Repository Example&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1296269&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;node_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MDEwOlJlcG9zaXRvcnkxMjk2MjY5&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Hello-World&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;full_name&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;octocat/Hello-World&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;owner&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;login&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;octocat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;node_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;MDQ6VXNlcjE=&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;avatar_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://github.com/images/error/octocat_happy.gif&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gravatar_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;html_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://github.com/octocat&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;followers_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/followers&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;following_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/following{/other_user}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;gists_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/gists{/gist_id}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;starred_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/starred{/owner}{/repo}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;subscriptions_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/subscriptions&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;organizations_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/orgs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;repos_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/repos&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;events_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/events{/privacy}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;received_events_url&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;https://api.github.com/users/octocat/received_events&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;User&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;site_admin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Referring to GitHub’s API, when retrieving a repository, the response includes hypermedia URLs that allow access to the other resource.&lt;br /&gt;
Even without checking the GitHub API specification, the concise response makes it clear what is included.&lt;br /&gt;
If each of the owner’s resources is needed, further retrieval can be made via the hypermedia URLs provided in the response.&lt;/p&gt;

&lt;p&gt;Each &lt;strong&gt;API’s provided resources and roles become clearer&lt;/strong&gt;, and in this way, &lt;strong&gt;HATEOAS can serve as self-descriptive API documentation&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Between the client and the server, there is only a minimal agreement on which field’s link the client must check to determine the desired state.&lt;br /&gt;
The client interacts by following the links provided by the server to retrieve the necessary resources.&lt;br /&gt;
As a result, &lt;strong&gt;the coupling between the client and server is minimized&lt;/strong&gt;, and &lt;strong&gt;the server can change the API independently of the client&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;The downside is that network overhead may occur as the client follows links to check the state.&lt;/p&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/rest/hateoas</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/rest/hateoas</guid>
      </item>
    
      <item>
        <title>The easiest way to convert epoch time, AI Epoch Time Converter</title>
        
          <description>&lt;p&gt;An epoch time converter that extracts and converts only the epoch time from a string containing the epoch time into a date and time.&lt;br /&gt;
If I were to present it more appealingly, I’d call it the AI Epoch Time Converter.&lt;/p&gt;

&lt;p&gt;When developing, there are many instances where you need to convert epoch time to DateTime. &lt;br /&gt;
Typically, various websites allow you to input epoch time and output the corresponding DateTime.&lt;br /&gt;
However, it can be inconvenient to pinpoint and convert just the epoch time from logs or data.&lt;br /&gt;
It becomes even more cumbersome when you want to review multiple data points and check their values.&lt;/p&gt;

&lt;p&gt;You can solve this issue through &lt;a href=&quot;https://meansoup.github.io/epoch/&quot;&gt;https://meansoup.github.io/epoch/&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This site converts and displays all the epoch times contained within a string.&lt;/p&gt;

&lt;h2 id=&quot;1-finding-epoch-times-in-beautified-json&quot;&gt;1. Finding epoch times in beautified json&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/site/epoch/json1.gif&quot; alt=&quot;beutified json epoch converter&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
     &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;abc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
     &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;createdAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1690330000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
     &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;modifiedAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1700330000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
     &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;lastAccessedAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1710330000000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
     &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;metadata&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;2-finding-epoch-times-in-multi-line-json&quot;&gt;2. Finding epoch times in multi-line json&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/site/epoch/json2.gif&quot; alt=&quot;multiline json epoch converter&quot; /&gt;&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;abc2&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;createdAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1690330001000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;modifiedAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1700330001000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;lastAccessedAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1710330001000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;metadata&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
 &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;abc3&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;createdAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1690330002000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;modifiedAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1700330002000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;lastAccessedAt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1710330002000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;metadata&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;3-finding-epoch-times-in-csv&quot;&gt;3. Finding epoch times in CSV&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/dev-tools/site/epoch/csv.gif&quot; alt=&quot;csv epoch converter&quot; /&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-csv&quot;&gt; a,123,1690330000000,...
 abced,123456,1710330000000,...
 b,123456,1720330000000,abcde
 b,123456,1670330000000,abcde,1680330012000,1690330000000
&lt;/code&gt;&lt;/pre&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/tools/site/epoch</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/tools/site/epoch</guid>
      </item>
    
      <item>
        <title>what is ZGC?</title>
        
          <description>&lt;blockquote class=&quot;note-title&quot;&gt;
  &lt;p&gt;Java GC Type&lt;/p&gt;

  &lt;p&gt;&lt;a href=&quot;/docs/java/gc/serial_gc&quot; class=&quot;btn&quot;&gt;Serial GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/parallel_gc&quot; class=&quot;btn&quot;&gt;Parallel GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/cms_gc&quot; class=&quot;btn&quot;&gt;CMS GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/g1_gc&quot; class=&quot;btn&quot;&gt;G1 GC&lt;/a&gt;
&lt;a href=&quot;/docs/java/gc/zgc&quot; class=&quot;btn btn-purple&quot;&gt;ZGC&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;The Z Garbage Collector (ZGC) is a scalable low latency garbage collector. ZGC performs all expensive work concurrently, without stopping the execution of application threads for more than a millisecond. It is suitable for applications which require low latency. Pause times are independent of the heap size that is being used. ZGC works well with heap sizes from a few hundred megabytes to 16TB.&lt;br /&gt;
ZGC was initially introduced as an experimental feature in JDK 11, and was declared Production Ready in JDK 15. In JDK 21 was reimplemented to support generations.&lt;/p&gt;

&lt;h2 id=&quot;zgc-usage&quot;&gt;ZGC usage&lt;/h2&gt;

&lt;p&gt;At its core, ZGC is a concurrent garbage collector, meaning all heavy lifting work is done while Java threads continue to execute. This greatly limits the impact garbage collection will have on your application’s response time.
ZGC is a scalable low-latency garbage collector capable of handling heaps ranging from 8MB to 16TB in size, with sub-millisecond max pause times.&lt;/p&gt;

&lt;p&gt;ZGC’s low latency and ability to scale to handle large live sets would make it a good candidate for web applications. Web applications frequently service many requests simultaneously, often resulting in maintaining larger live sets. Consistent responsiveness also helps with system stability. This pairs well with ZGC’s strengths.&lt;br /&gt;
On the other hand, while ZGC can operate with heaps as small as 8 MB, it is strongly discouraged to use ZGC in such a scenario.&lt;/p&gt;

&lt;h3 id=&quot;try-them-out&quot;&gt;Try them out&lt;/h3&gt;

&lt;p&gt;Start With the default GC, G1&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;If the Throughput is insufficient
    &lt;ul&gt;
      &lt;li&gt;try enabling Parallel GC&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;If pause times are too long
    &lt;ul&gt;
      &lt;li&gt;try ZGC&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;zgc-cycle&quot;&gt;ZGC cycle&lt;/h2&gt;

&lt;p&gt;The &lt;strong&gt;ZGC (Z Garbage Collector)&lt;/strong&gt; performs a few &lt;strong&gt;Stop-the-World (STW)&lt;/strong&gt; pauses, such as &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pause Mark Start&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pause Mark End&lt;/code&gt;, and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Pause Relocate Start&lt;/code&gt;.&lt;br /&gt;
These pauses are brief, typically under a millisecond, and are necessary to ensure &lt;strong&gt;consistency and correctness&lt;/strong&gt; in the garbage collection process. Here’s why these pauses occur.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Pause Name&lt;/th&gt;
      &lt;th&gt;Purpose&lt;/th&gt;
      &lt;th&gt;Reason for STW&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Pause Mark Start&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Capture root references&lt;/td&gt;
      &lt;td&gt;Ensure consistency of the root set before marking starts.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Pause Mark End&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Finalize marking and process references&lt;/td&gt;
      &lt;td&gt;Ensure all live objects are identified and prepare for relocation.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Pause Relocate Start&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Finalize the relocation set and prepare for object movement&lt;/td&gt;
      &lt;td&gt;Ensure consistency before relocating objects.&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/zgc_cycle.png&quot; alt=&quot;zgc_cycle&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;colored-pointers&quot;&gt;Colored Pointers&lt;/h2&gt;

&lt;p&gt;&lt;strong&gt;Colored pointers&lt;/strong&gt; in ZGC are just normal pointers with extra information embedded in them.&lt;br /&gt;
This extra information helps ZGC track and manage objects during &lt;strong&gt;concurrent garbage collection&lt;/strong&gt; without stopping the application.&lt;br /&gt;
It improves the efficiency of garbage collection by allowing ZGC to track live objects, move them, and perform other tasks in the background with minimal impact on performance.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/zgc_colored_pointer.png&quot; alt=&quot;zgc_colored_pointer&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;first 16 bits: remain in reserve for future use&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;last 44 bits: object address (16TB address space)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;4 bits
    &lt;ol&gt;
      &lt;li&gt;&lt;strong&gt;Mark Bits&lt;/strong&gt;: These bits indicate if an object is marked as live or reachable. ZGC uses two alternating bits (&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Marked0&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Marked1&lt;/code&gt;) to track this.
        &lt;ul&gt;
          &lt;li&gt;If the pointer is &lt;strong&gt;colored&lt;/strong&gt; with a “mark bit” ZGC knows this object is in use.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Remapped Bit&lt;/strong&gt;: This bit tells ZGC if the pointer is pointing to an object that has been &lt;strong&gt;moved&lt;/strong&gt; (remapped) during compaction.
        &lt;ul&gt;
          &lt;li&gt;If the pointer is &lt;strong&gt;colored&lt;/strong&gt; with a “remapped bit” ZGC knows the object has been moved and will automatically follow the new memory location.&lt;/li&gt;
        &lt;/ul&gt;
      &lt;/li&gt;
      &lt;li&gt;&lt;strong&gt;Finalizable Bit&lt;/strong&gt;: This bit indicates if the object is only reachable through a finalizer. Note that finalization was designated as deprecated for removal in JDK 18.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;heap-multi-mapping&quot;&gt;Heap Multi-Mapping&lt;/h3&gt;

&lt;p&gt;Because ZGC can move the physical location of an object in heap memory while the application is running, multiple paths need to be provided to the current physical location where the object resides. In ZGC, this is accomplished through heap multi-mapping. With multi-mapping, the physical location of an object is mapped to three views in virtual memory, corresponding to each of the pointer’s potential “colors”. This allows a load barrier to locate an object if it has been moved since the last synchronization point.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/zgc_heap_multi_mapping.png&quot; alt=&quot;zgc_heap_multi_mapping&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;load-barriers&quot;&gt;Load Barriers&lt;/h2&gt;

&lt;h3 id=&quot;why-do-we-need-a-load-barrier-in-zgc&quot;&gt;Why Do We Need a Load Barrier in ZGC?&lt;/h3&gt;
&lt;p&gt;In ZGC, objects can be &lt;strong&gt;moved around in memory&lt;/strong&gt; during garbage collection (in the &lt;strong&gt;compaction phase&lt;/strong&gt;). If an object is relocated, any reference to it must be updated to point to the new location of the object. Since ZGC performs most of its work &lt;strong&gt;concurrently&lt;/strong&gt; with the application, the &lt;strong&gt;load barrier&lt;/strong&gt; ensures that the program doesn’t accidentally use &lt;strong&gt;stale references&lt;/strong&gt; (outdated memory locations) during this process.&lt;/p&gt;

&lt;h3 id=&quot;how-does-it-work&quot;&gt;How Does It Work?&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;strong&gt;When a program loads a reference to an object&lt;/strong&gt; (say, via a field access or array access), the load barrier intercepts this access.&lt;/li&gt;
  &lt;li&gt;If the object has been &lt;strong&gt;moved&lt;/strong&gt; during garbage collection (i.e., it’s part of the &lt;strong&gt;relocation set&lt;/strong&gt;), the load barrier ensures that the reference is updated to point to the &lt;strong&gt;new location&lt;/strong&gt; of the object.&lt;/li&gt;
  &lt;li&gt;This process happens &lt;strong&gt;in the background&lt;/strong&gt; while the application is running, and it ensures that the application always accesses the &lt;strong&gt;correct&lt;/strong&gt; location of the object, even if ZGC has moved it.&lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;benefits-of-load-barriers-in-zgc&quot;&gt;Benefits of Load Barriers in ZGC&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;No Application Pause&lt;/strong&gt;: ZGC can move objects and manage memory without needing to stop the application, thanks to the load barrier. The barrier allows the application to continue running while still being safe and consistent.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Consistency&lt;/strong&gt;: The load barrier ensures that the program always reads the correct memory location, even when objects are relocated or modified during garbage collection.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Concurrency&lt;/strong&gt;: ZGC can do concurrent work, like relocating objects, while the application continues to access them as if nothing changed, making garbage collection less intrusive.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;regions&quot;&gt;Regions&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/images/post/java/gc/zgc_region.png&quot; alt=&quot;zgc_region&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This follows a similar pattern to G1 GC, which also uses memory regions. However, ZGC regions, internally defined as ZPages, are more dynamic, with small, medium, and large sizes; the number of active regions can increase and decrease depending on the needs of the live set.&lt;/p&gt;

&lt;p&gt;Small Regions&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;size: 2MB&lt;/li&gt;
  &lt;li&gt;Objects less than 1/8th (12.5%) the size of a small region, so less than or equal to 256 KB, are stored in a small region.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Medium Regions&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;size: 32MB (if heap bigger than 1GB)&lt;/li&gt;
  &lt;li&gt;Objects 1/8th (12.5%) or less in size than the set size of a medium region will be stored there.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Large Regions&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;size: tightly fitted in 2 MB increments to the object’s size.&lt;/li&gt;
  &lt;li&gt;13 MB object would be stored in a 14 MB large region.&lt;/li&gt;
  &lt;li&gt;Any object too large to fit in a medium region will be placed in its own large region.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;vs-g1gc&quot;&gt;vs G1GC&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Feature&lt;/th&gt;
      &lt;th&gt;G1GC&lt;/th&gt;
      &lt;th&gt;ZGC&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Primary Goal&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Low pauses + good throughput&lt;/td&gt;
      &lt;td&gt;Ultra-low pauses&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Heap Size&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Medium to large (up to ~32 GB+)&lt;/td&gt;
      &lt;td&gt;Very large (up to 16 TB)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Pause Times&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Predictable but grow with heap size&lt;/td&gt;
      &lt;td&gt;Always very low (&amp;lt;10 ms)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Compaction&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Stop-the-world or incremental&lt;/td&gt;
      &lt;td&gt;Fully concurrent&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Throughput&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Higher&lt;/td&gt;
      &lt;td&gt;Slightly lower&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Concurrent Phases&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;Partial&lt;/td&gt;
      &lt;td&gt;Mostly concurrent&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h2 id=&quot;reference&quot;&gt;reference&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;https://wiki.openjdk.org/display/zgc/Main&lt;/li&gt;
  &lt;li&gt;https://dev.java/learn/jvm/tool/garbage-collection/zgc-overview/&lt;/li&gt;
  &lt;li&gt;https://dev.java/learn/jvm/tool/garbage-collection/zgc-deepdive/&lt;/li&gt;
  &lt;li&gt;https://cr.openjdk.org/~pliden/slides/ZGC-PLMeetup-2019.pdf&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc/zgc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc/zgc</guid>
      </item>
    
      <item>
        <title>How to Use Linux grep Like a Terminal Pro</title>
        
          <description>&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; is one of the most frequently used commands in Linux.&lt;br /&gt;
For server developers, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; is essential when searching and analyzing logs or data.&lt;/p&gt;

&lt;h2 id=&quot;grep-options&quot;&gt;grep Options&lt;/h2&gt;

&lt;p&gt;Using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; as-is is fine, but there are some options that can make it more useful.&lt;br /&gt;
Knowing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; and being able to use it efficiently are very different.&lt;/p&gt;

&lt;h3 id=&quot;creating-a-file-to-test-grep-options&quot;&gt;Creating a File to Test grep options&lt;/h3&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;__main__&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;open&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;numbers.txt&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&apos;w&apos;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;range&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
   &lt;span class=&quot;n&quot;&gt;fw&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;numbers: &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot; ...&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before learning the options, let’s create a test file for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt;.&lt;br /&gt;
The file will contain numbers from 0 to 9999 for testing.&lt;br /&gt;
If something is unclear, working with a test file can make it easier to understand.&lt;/p&gt;

&lt;h3 id=&quot;ignoring-case-sensitivity&quot;&gt;Ignoring Case Sensitivity&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;Num numbers.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-i&lt;/span&gt; Num numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -i&lt;/code&gt;&lt;/strong&gt; &lt;strong&gt;i&lt;/strong&gt;gnores case when searching.&lt;/p&gt;

&lt;h3 id=&quot;limiting-the-number-of-matches&quot;&gt;Limiting the Number of Matches&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-m&lt;/span&gt; 5 1234 numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -m 1&lt;/code&gt;&lt;/strong&gt; prints only the first 1 line (&lt;strong&gt;m&lt;/strong&gt;ax count) that matches.&lt;/p&gt;

&lt;h3 id=&quot;displaying-line-numbers&quot;&gt;Displaying Line Numbers&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; 1234 numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -n&lt;/code&gt;&lt;/strong&gt; includes the line &lt;strong&gt;n&lt;/strong&gt;umber where the match is found.&lt;/p&gt;

&lt;h3 id=&quot;displaying-non-matching-lines&quot;&gt;Displaying Non-Matching Lines&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-v&lt;/span&gt; 1 numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -v&lt;/code&gt;&lt;/strong&gt; outputs only the lines that don’t match (&lt;strong&gt;v&lt;/strong&gt;invert match).&lt;/p&gt;

&lt;h3 id=&quot;restricting-output-to-a-specific-range&quot;&gt;Restricting Output to a Specific Range&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; 1234 numbers.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;0,3&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;1234.&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;0,3&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -o&lt;/code&gt;&lt;/strong&gt; prints only the matching part of the line (&lt;strong&gt;o&lt;/strong&gt;nly match).&lt;br /&gt;
You can use regular expressions with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;-o&lt;/code&gt; to show only the surrounding context of the match.&lt;br /&gt;
This is especially useful for long lines where you need to extract specific parts.&lt;/p&gt;

&lt;h3 id=&quot;or-condition&quot;&gt;OR Condition&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; 1234 &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; 5678 numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -e&lt;/code&gt;&lt;/strong&gt; allows searching using multiple regular expressions, working like an OR condition.&lt;/p&gt;

&lt;h3 id=&quot;displaying-lines-before-and-after-matches&quot;&gt;Displaying Lines Before and After Matches&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-A&lt;/span&gt; 2 1234 numbers.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-B&lt;/span&gt; 2 1234 numbers.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-C&lt;/span&gt; 2 1234 numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -A 2&lt;/code&gt;&lt;/strong&gt;: Displays 2 lines &lt;strong&gt;A&lt;/strong&gt;fter the match.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -B 2&lt;/code&gt;&lt;/strong&gt;: Displays 2 lines &lt;strong&gt;B&lt;/strong&gt;efore the match.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -C 2&lt;/code&gt;&lt;/strong&gt;: Displays 2 lines before and after the match.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;displaying-file-names&quot;&gt;Displaying File Names&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; 1234 numbers.txt
&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-h&lt;/span&gt; 1234 numbers&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -H&lt;/code&gt;&lt;/strong&gt;: Includes the file name in the output.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -h&lt;/code&gt;&lt;/strong&gt;: Omits the file name from the output.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;By default, the file name is shown when searching multiple files but omitted when searching a single file.&lt;/p&gt;

&lt;h3 id=&quot;recursive-search&quot;&gt;Recursive Search&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; 1234 &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -r 1234 .&lt;/code&gt;&lt;/strong&gt; searches recursively in the current directory.&lt;/p&gt;

&lt;h3 id=&quot;counting-matches&quot;&gt;Counting Matches&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-c&lt;/span&gt; 1234 numbers.txt
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep -c&lt;/code&gt;&lt;/strong&gt; displays the count of matching lines.&lt;/p&gt;

&lt;h2 id=&quot;advanced-grep-usage&quot;&gt;Advanced grep Usage&lt;/h2&gt;

&lt;p&gt;Using just &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; might make you a beginner in command-line usage.&lt;br /&gt;
Performance depends on how efficiently you combine &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; with other commands.&lt;/p&gt;

&lt;h3 id=&quot;basic-usage&quot;&gt;Basic Usage&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;1234 numbers.txt
&lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;1234 numbers.txt&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is the simplest and most commonly used way to use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt;.&lt;/p&gt;

&lt;h3 id=&quot;using-with-pipeline&quot;&gt;Using with Pipeline&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;numbers.txt | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;1234
 &lt;span class=&quot;nb&quot;&gt;cat &lt;/span&gt;numbers.txt | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;1234 | &lt;span class=&quot;nb&quot;&gt;cut&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;&apos;:&apos;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; 2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;grep&lt;/code&gt; more efficiently by combining it with other commands via pipelines.&lt;/p&gt;

&lt;h3 id=&quot;using-with-tail&quot;&gt;Using with tail&lt;/h3&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;nb&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt; numbers.txt | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;1234
 &lt;span class=&quot;nb&quot;&gt;tail&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-F&lt;/span&gt; numbers.txt | &lt;span class=&quot;nb&quot;&gt;grep &lt;/span&gt;1234
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tail -f&lt;/code&gt;&lt;/strong&gt; and &lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tail -F&lt;/code&gt;&lt;/strong&gt; are used to follow the lines added to a file in real-time.&lt;br /&gt;
These are commonly used to analyze server logs as they are written.&lt;br /&gt;
However, it’s nearly impossible to monitor thousands of lines per second.&lt;br /&gt;
By combining &lt;strong&gt;tail&lt;/strong&gt; and &lt;strong&gt;grep&lt;/strong&gt;, you can analyze only the desired logs in real-time.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tail -f&lt;/code&gt;&lt;/strong&gt; Follows the current file.&lt;br /&gt;
&lt;strong&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;tail -F&lt;/code&gt;&lt;/strong&gt; Follows based on the file name, even if the file is replaced.&lt;/p&gt;

&lt;p&gt;Logs often roll over to a new file based on time. &lt;br /&gt;
With &lt;strong&gt;-f&lt;/strong&gt;, if the file name changes due to rolling, no further logs will be shown. &lt;br /&gt;
&lt;strong&gt;-F&lt;/strong&gt;, on the other hand, continues following logs even after the file name changes.&lt;/p&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux-commands/grep</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux-commands/grep</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>&lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;
  .container {
    margin: 10px auto;
    max-width: 600px;
    text-align: center;
  }
  h1 {
    margin: 30px 0;
    font-size: 4em;
    line-height: 1;
    letter-spacing: -1px;
  }
&lt;/style&gt;

&lt;div class=&quot;container&quot;&gt;
  &lt;h1&gt;404&lt;/h1&gt;

  &lt;p&gt;&lt;strong&gt;Page not found :(&lt;/strong&gt;&lt;/p&gt;
  &lt;p&gt;The requested page could not be found.&lt;/p&gt;
&lt;/div&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/404.html</link>
        <guid isPermaLink="true">https://meansoup.github.io/404.html</guid>
      </item>
    
      <item>
        <title>About</title>
        
          <description>&lt;p&gt;다양한 종류의 데이터 동기화, 백업과 서비스 서버를 개발하고 있습니다.&lt;br /&gt;
하루 수 억건에 달하는 트래픽과 이를 처리하는 서버를 설계하고 개발합니다.&lt;/p&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/about/</link>
        <guid isPermaLink="true">https://meansoup.github.io/about/</guid>
      </item>
    
      <item>
        <title>Algorithm</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm</guid>
      </item>
    
      <item>
        <title>APIs</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/</guid>
      </item>
    
      <item>
        <title>Architecture</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/design/</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/design/</guid>
      </item>
    
      <item>
        <title>aws</title>
        
          <description>&lt;p&gt;AWS에서 시행하는 training 과정을 수료하면서 정리한 내용.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Developing on AWS&lt;/li&gt;
  &lt;li&gt;Advanced Developing on AWS&lt;/li&gt;
&lt;/ol&gt;

&lt;hr /&gt;

&lt;p&gt;그리고 내가 사용하면서 정리한 내용.&lt;/p&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws</guid>
      </item>
    
      <item>
        <title>blog</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/blog</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/blog</guid>
      </item>
    
      <item>
        <title>career</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/career/</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/career/</guid>
      </item>
    
      <item>
        <title>-</title>
        
          <description>
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/partition/10</link>
        <guid isPermaLink="true">https://meansoup.github.io/partition/10</guid>
      </item>
    
      <item>
        <title>-</title>
        
          <description>
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/partition/20</link>
        <guid isPermaLink="true">https://meansoup.github.io/partition/20</guid>
      </item>
    
      <item>
        <title>-</title>
        
          <description>
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/partition/30</link>
        <guid isPermaLink="true">https://meansoup.github.io/partition/30</guid>
      </item>
    
      <item>
        <title>-</title>
        
          <description>
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/partition/40</link>
        <guid isPermaLink="true">https://meansoup.github.io/partition/40</guid>
      </item>
    
      <item>
        <title>-</title>
        
          <description>
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/partition/50</link>
        <guid isPermaLink="true">https://meansoup.github.io/partition/50</guid>
      </item>
    
      <item>
        <title>-</title>
        
          <description>
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/partition/90</link>
        <guid isPermaLink="true">https://meansoup.github.io/partition/90</guid>
      </item>
    
      <item>
        <title>db 개념</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/db/concept</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/db/concept</guid>
      </item>
    
      <item>
        <title>c++</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/language/cpp</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/language/cpp</guid>
      </item>
    
      <item>
        <title>Database</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/db</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/db</guid>
      </item>
    
      <item>
        <title>Domain Driven Design</title>
        
          <description>&lt;p&gt;Vaughn Vernon의 IDDD 예제 코드&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;https://github.com/VaughnVernon/IDDD_Samples&lt;/li&gt;
&lt;/ul&gt;

</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd</guid>
      </item>
    
      <item>
        <title>Tools</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/</guid>
      </item>
    
      <item>
        <title>domain</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/03.career/domain.html</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/03.career/domain.html</guid>
      </item>
    
      <item>
        <title>DynamoDB</title>
        
          <description>&lt;p&gt;&lt;strong&gt;DynamoDB&lt;/strong&gt;는 완전 관리형 NoSQL DB 서비스으로 NoSQL의 특징을 갖는다.&lt;br /&gt;
리전 기반 서비스로 AZ에 문제가 생기더라도 다른쪽에서 정상적으로 동작한다.&lt;br /&gt;
완전 관리형 서비스로 사용자가 관리할 것이 거의 없다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;EC2에 os/db 설치 이후 db 서버로 쓸 수도 있지만 이런 서비스를 이용하면 초기세팅/소프트웨어 패치/운영 등을 신경쓰지 않아도 되서 더 편리함.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;데이터 볼륨이 증가하고 애플리케이션 성능 요구가 증가하면 DynamoDB는 자동 분할로 처리량을 충족하고 규모에 관계없이 낮은 지연 시간(보통 10밀리초 미만)을 유지한다.&lt;br /&gt;
IAM의 계정 권한 관리로 세분화된 접근 제어가 가능하다.&lt;br /&gt;
문서의 저장, 쿼리 및 업데이트를 지원하여 Json 문서를 테이블에 바로 저장할 수 있고 관련한 작업을 효율적으로 진행할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;database-option&quot;&gt;database option&lt;/h2&gt;
&lt;p&gt;AWS에는 DynamoDB 외에도 다양한 DB 서비스를 지원하고 있다.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;RDS&lt;/strong&gt;:&lt;br /&gt;
Aurora, PostgreSQL, MySQL, MariaDB, Oracle 등 다양한 관계형 데이터베이스 서비스를 제공한다.&lt;br /&gt;
RDB를 간편하게 설정하고 크기 조정이 가능하다.&lt;br /&gt;
DB 관리를 AWS에서 해줘서 서비스에 집중할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ex) 소프트웨어 패치, 데이터베이스 백업&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;Aurora&lt;/strong&gt;:&lt;br /&gt;
MySQL, PostgreSQL 호환 RDB로 MySQL보다 최대 5배 빠르며 1/10 수준 비용으로 서비스를 제공함.&lt;br /&gt;
MySQL, PostgreSQL 보다 더 높은 처리량을 가지며 쉽게 확장/축소할 수 있음.
Aurora Serverless 서비스도 있음.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Redshift&lt;/strong&gt;:&lt;br /&gt;
완전 관리형 데이터 웨어하우스. (&lt;a href=&quot;https://namu.wiki/w/%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%9B%A8%EC%96%B4%ED%95%98%EC%9A%B0%EC%8A%A4&quot;&gt;나무위키 웨어하우스&lt;/a&gt; 참고. 의사 결정을 위한 데이터 사용)&lt;br /&gt;
기존 솔루션 비용의 1/10 미만으로 페타바이트 규모로 확장할 수 있음.&lt;br /&gt;
다양한 개방형 형식(csv, json, …) 지원.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Neptune&lt;/strong&gt;:&lt;br /&gt;
완전관리형 그래프 데이터베이스.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ElastiCache&lt;/strong&gt;:&lt;br /&gt;
memCache나 Redis를 관리하는 관리형 상태로 지원하는 서비스.&lt;br /&gt;
in memory data store, cache를 쉽게 배포/운영할 수 있음.&lt;br /&gt;
당연히 메모리를 사용하니까 DB보다 빠른 검색을 지원하고, 성능 향상을 볼 수 있다.&lt;br /&gt;
Redis나 memcache를 활용하는 것으로 얘네의 장점을 보다 쉽게 적용할 수 있다.&lt;/p&gt;

&lt;h2 id=&quot;dynamodb-구성&quot;&gt;DynamoDB 구성&lt;/h2&gt;
&lt;p&gt;DynamoDB는 테이블, 항목, 속성으로 구성되고 각 항목들은 키 값을 갖는다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;각각 엑셀의 시트, 행, 열로 생각할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;스키마가 고정되어 있지 않기 때문에 항목에 속성의 추가가 자유롭다.&lt;/p&gt;

&lt;p&gt;DynamoDB는 테이블의 항목을 파티션 키에 따라 여러 항목으로 나누고 파티션은 스토리지로 백업되고 리전 내의 복수의 AZ에 자동으로 복제된다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;파티션 단위로 다른 위치에 저장될 수 있다는 것.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;데이터에 접근할 때는 파티션 키를 통해 접근하기 때문에 파티션 키는 고유한 값이어야 한다.&lt;br /&gt;
정렬 키는 선택적으로 사용되며 동일한 파티션 키를 사용하고 싶다면 정렬 키를 사용하여 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;파티션 키 + 정렬 키&lt;/code&gt;의 값이 고유하도록 구성할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;ex) 파티션 키는 sessionId, 정렬 키는 Time으로 동일한 세션에 대해 같은 파티션을 사용하도록 하고 시간에 따라 값을 저장할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;일관성&quot;&gt;일관성&lt;/h2&gt;
&lt;p&gt;DynamoDB는 일관성 수준을 지원한다.&lt;br /&gt;
여기서 일관성은 찰나의 시간에 쓰여진 데이터를 받아오는지에 대한 여부이다.&lt;br /&gt;
&lt;strong&gt;최종적 일관성&lt;/strong&gt; - 읽기 작업이 쓰기 작업 이후에 수행되는 경우 약간 오래된 데이터를 반환할 수 있음.&lt;br /&gt;
&lt;strong&gt;강력한 일관성&lt;/strong&gt; - 가장 최신 데이터를 반환.&lt;br /&gt;
&lt;strong&gt;트랜잭션&lt;/strong&gt; - ACID를 요구. 읽고 쓰기가 끝나는 것이 하나의 트랜잭션임을 보장하는 것. (계좌이체)&lt;/p&gt;

&lt;h2 id=&quot;처리량&quot;&gt;처리량&lt;/h2&gt;
&lt;p&gt;한 번에 들어온 요청에 대해 어느 정도까지 처리할 수 있는지 capacity를 설정할 수 있다.&lt;br /&gt;
처리량은 파티션 간에 균등하게 나뉜다. (파티션당 처리량 = capacity / 파티션 수)&lt;br /&gt;
&lt;strong&gt;RCU&lt;/strong&gt; - 최대 4KB 규모의 객체에 강력한 일관된 읽기를 수행할 수 있는 건수.&lt;br /&gt;
&lt;strong&gt;WCU&lt;/strong&gt; - 1KB 쓰기를 수행할 수 있는 초당 건수.&lt;/p&gt;

&lt;h2 id=&quot;글로벌-테이블&quot;&gt;글로벌 테이블&lt;/h2&gt;
&lt;p&gt;하나 이상의 DynamoDB 테이블의 모음으로 단일 AWS 계정이 소유한 복제 테이블이다.&lt;br /&gt;
글로벌 테이블에서는 리전당 하나의 복제 테이블만 사용되고 동일한 테이블 이름과 기본 키 스키마를 갖는다.
글로벌 테이블을 사용하면 복제 솔루션을 구축할 필요 없이 완전 관리형 솔루션을 제공한다.&lt;/p&gt;

&lt;p&gt;DynamoDB에서 해당 리전에 동일한 테이블을 생성하기 위해 모든 작업을 수행하고 진행 중인 데이터 변경을 모두에게 전파한다.&lt;br /&gt;
이런 복제에 스트림이 사용된다.&lt;br /&gt;
쓰기 일관성에서 동시 업데이트가 발생하는 경우에는 가장 마지막에 설정된 값으로 기록한다.&lt;br /&gt;
읽기 일관성에서 최종적 일관성을 지원한다.&lt;/p&gt;

&lt;h2 id=&quot;백업-및-복원&quot;&gt;백업 및 복원&lt;/h2&gt;
&lt;p&gt;백업, 복원, 특정 시점으로의 복구를 쉽게 할 수 있도록 지원한다.&lt;/p&gt;

&lt;h2 id=&quot;api&quot;&gt;API&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;제어 작업&lt;/strong&gt;: DynamoDB 테이블을 생성하고 관리.&lt;br /&gt;
&lt;strong&gt;데이터 작업&lt;/strong&gt;: 테이블 데이터에 CRUD 작업을 수행.&lt;/p&gt;

&lt;h2 id=&quot;객체-지속성-모델&quot;&gt;객체 지속성 모델&lt;/h2&gt;
&lt;p&gt;DynamoDB에 클라이언트 측 객체를 유지할 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;테이블에 대한 객체 매핑(클래스 인스턴스)를 지원한다.
객체 지속성 프로그래밍 인터페이스로 이를 지원하는데 이를 통해 CRUD 작업과 쿼리를 실행할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;function&quot;&gt;Function&lt;/h2&gt;
&lt;p&gt;테이블에서 PutItem, GetItem, UpdateItem, DeleteItem으로 항목과 관련한 작업을 수행할 수 있고,&lt;br /&gt;
Query, Scan 으로 값을 가져올 수 있다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Query, Scan 작업의 경우 1MB의 데이터라는 기본 페이지 매김 제한으로 반환되는 데이터 양이 제한된다.&lt;/li&gt;
  &lt;li&gt;Query, Scan 작업의 경우 Limit 파라미터를 통해 반환되는 최대 항목 수를 지정할 수 있다.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Batch로 데이터를 검색하거나 쓸 때 단일 요청으로 더 높은 처리와 효율적인 시간을 얻어낼 수 있다.&lt;br /&gt;
실패시 실패한 테이블과 항목을 재시도한다.&lt;br /&gt;
&lt;strong&gt;BatchGetItem&lt;/strong&gt; - 여러 테이블에서 최대 100개의 항목으로 이루어진 데이터를 최대 16MB까지 읽음.&lt;br /&gt;
&lt;strong&gt;BatchWriteItem&lt;/strong&gt; - 여러 테이블에서 최대 25번의 put 또는 delete 요청을 통해 최대 16MB까지 씀.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodbv2/document/DynamoDB.html&quot;&gt;DynamoDB javaSDK method Docs&lt;/a&gt;, &lt;a href=&quot;https://docs.aws.amazon.com/amazondynamodb/latest/APIReference/API_Operations_Amazon_DynamoDB.html&quot;&gt;DynamoDB API reference&lt;/a&gt; 참고.&lt;/p&gt;

&lt;h2 id=&quot;그외-참고-사항&quot;&gt;그외 참고 사항&lt;/h2&gt;
&lt;p&gt;예약어 자리 표시자 - 표현식에서 속성 이름을 위한 자리 표시자. (&lt;a href=&quot;https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ExpressionAttributeNames.html&quot;&gt;AWS Docs&lt;/a&gt; 참고)&lt;/p&gt;

&lt;p&gt;리터럴 값 자리 표시자 - 표현식에서 속성 값을 위한 자리 표시자. (&lt;a href=&quot;https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.ExpressionAttributeValues.html&quot;&gt;AWS Docs&lt;/a&gt; 참고)&lt;br /&gt;
조건부 쓰기 수행 - ConditionExpression을 만족하면 쓰기를 수행. (&lt;a href=&quot;http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/Expressions.SpecifyingConditions.html&quot;&gt;AWS Docs&lt;/a&gt; 참고)&lt;br /&gt;
처리량 예외 처리 - 처리량이 초과하면 &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;provisionedThroughputExceededException&lt;/code&gt;으로 알림을 전송하도록 CloudWatch 경보 설정. (&lt;a href=&quot;https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/metrics-dimensions.html&quot;&gt;AWS Docs&lt;/a&gt; 참고)&lt;/p&gt;

&lt;h2 id=&quot;효율성-확보&quot;&gt;효율성 확보&lt;/h2&gt;
&lt;p&gt;데이터를 고려하여 파티션 키가 분산될 수 있도록 구현한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;파티션 키에 따라 파티션이 나뉘며 경우에 따라 어떤 파티션엔 데이터가 적고 어떤 파티션엔 극도로 많아 작업 처리가 느려질 수 있다. 균일하게 파티션을 분배하여 처리를 분산시키는 것이 처리량을 극대화.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;핫 데이터(자주 사용)와 콜드 데이터(자주 사용하지 않음)을 분리한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;자주 사용되는 데이터는 처리량이 더 높은 테이블에 별도로 저장한다거나 오래된 데이터를 다른 스토리지로 이동하는 등의 방식.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;다수의 속성을 갖는 테이블 대신 일대다 테이블을 사용한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;최소한의 정보가 필요한 경우에도 쓸데없이 대량의 데이터를 가져오게 되는 문제를 해결.&lt;/li&gt;
  &lt;li&gt;항목 크기가 DynamoDB의 최대 항목 크기를 초과하는 문제를 막을 수 있음.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;자주 액세스하는 속성을 별도 테이블에 저장한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;큰 항목에 자주 액세스 하지만 큰 속성을 다 사용하지 않는다면 자주 사용되는 별도의 테이블을 분리하여 처리량을 개선.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;로컬 보조 인덱스를 가능한 작게 유지한다.&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;로컬 보조 인덱스는 스토리지와 테이블의 처리량을 사용하기 때문에 자주 쿼리하는 속성에 대해서만 생성하도록 함.&lt;/li&gt;
  &lt;li&gt;전체 테이블을 포함하지 않는 스파스 인덱스를 사용하여 효율성을 높임.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;메모리 가속인 DAX(DynamoDB Accelerator)를 추가한다. (app - (DAX) - DynamoDB 구조)&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;캐싱서비스로 밀리초 단위의 응답속도를 마이크로초 단위까지 줄일 수 있음.&lt;/li&gt;
  &lt;li&gt;DynamoDB와 호환되어 변경사항이 크지 않음.&lt;/li&gt;
  &lt;li&gt;read가 많은 경우 처리량을 줄여 비용을 절감시킴.&lt;/li&gt;
&lt;/ul&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/dynamo</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/dynamo</guid>
      </item>
    
      <item>
        <title>envoy proxy</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/envoy</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/envoy</guid>
      </item>
    
      <item>
        <title>error &amp; bug</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/error-bug</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/error-bug</guid>
      </item>
    
      <item>
        <title>Etc</title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/etc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/etc</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;rss version=&quot;2.0&quot; xmlns:atom=&quot;http://www.w3.org/2005/Atom&quot;&gt;
  &lt;channel&gt;
    &lt;title&gt;{{ site.title | xml_escape }}&lt;/title&gt;
    &lt;description&gt;{{ site.description | xml_escape }}&lt;/description&gt;
    &lt;link&gt;{{ site.url }}{{ site.baseurl }}/&lt;/link&gt;
    &lt;atom:link href=&quot;{{ &quot;/rfeed.xml&quot; | prepend: site.baseurl | prepend: site.url }}&quot; rel=&quot;self&quot; type=&quot;application/rss+xml&quot; /&gt;
    &lt;updated&gt;{{ site.time | date_to_xmlschema }}&lt;/updated&gt;
    &lt;id&gt;{{ site.url }}&lt;/id&gt;
    &lt;author&gt;
      &lt;name&gt;{{ site.author.name }}&lt;/name&gt;
    &lt;/author&gt;
    {% for page in site.pages %}
      &lt;item&gt;
        &lt;title&gt;{{ page.title | xml_escape }}&lt;/title&gt;
        {% if page.summaryfeed and page.excerpt %}
          &lt;description&gt;{{ page.excerpt | xml_escape }}&lt;/description&gt;
        {% else %}
          &lt;description&gt;{{ page.content | xml_escape }}&lt;/description&gt;
        {% endif %}
        &lt;pubDate&gt;{{ page.date | date: &quot;%a, %d %b %Y %H:%M:%S %z&quot; }}&lt;/pubDate&gt;
        &lt;link&gt;{{ page.url | prepend: site.baseurl | prepend: site.url }}&lt;/link&gt;
        &lt;guid isPermaLink=&quot;true&quot;&gt;{{ page.url | prepend: site.baseurl | prepend: site.url }}&lt;/guid&gt;
      &lt;/item&gt;
    {% endfor %}
  &lt;/channel&gt;
&lt;/rss&gt;</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/feed.xml</link>
        <guid isPermaLink="true">https://meansoup.github.io/feed.xml</guid>
      </item>
    
      <item>
        <title>flutter</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/flutter</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/flutter</guid>
      </item>
    
      <item>
        <title>Garbage Collection</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/gc</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/gc</guid>
      </item>
    
      <item>
        <title>GraphQL</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/graphql</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/graphql</guid>
      </item>
    
      <item>
        <title>http</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/internet/http</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/internet/http</guid>
      </item>
    
      <item>
        <title></title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/</link>
        <guid isPermaLink="true">https://meansoup.github.io/</guid>
      </item>
    
      <item>
        <title>Intellij</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/intellij</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/intellij</guid>
      </item>
    
      <item>
        <title>internet</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/internet</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/internet</guid>
      </item>
    
      <item>
        <title>이슈</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/issue</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/issue</guid>
      </item>
    
      <item>
        <title>Java</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java</guid>
      </item>
    
      <item>
        <title>Spring JPA</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/spring/jpa</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/spring/jpa</guid>
      </item>
    
      <item>
        <title>kafka</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/message-broker/kafka</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/message-broker/kafka</guid>
      </item>
    
      <item>
        <title>kivy</title>
        
          <description>### kivy - interactive applications and games in python second edition
kivy로 간단한 게임을 만들어가는 과정과 이에 대한 설명을 하는 책이다.  
[practice code](https://www.packtpub.com/support)에서 예제코드를 받을 수 있다.  


책과 별개로 공부한 내용과,  
책의 내용들을 챕터별로 정리한 것.

{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kivy</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kivy</guid>
      </item>
    
      <item>
        <title>kotlin in action 정리하기</title>
        
          <description>{: .fs-6 .fw-300 }</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin/kotlin-in-action</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin/kotlin-in-action</guid>
      </item>
    
      <item>
        <title>Kotlin</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/kotlin</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/kotlin</guid>
      </item>
    
      <item>
        <title>language</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/language</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/language</guid>
      </item>
    
      <item>
        <title>Java 라이브러리</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/library</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/library</guid>
      </item>
    
      <item>
        <title>linux</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux</guid>
      </item>
    
      <item>
        <title>Message Broker</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/message-broker</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/message-broker</guid>
      </item>
    
      <item>
        <title>OAuth</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/apis/oauth</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/apis/oauth</guid>
      </item>
    
      <item>
        <title>oci</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/oci</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/oci</guid>
      </item>
    
      <item>
        <title>PM</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/service-management</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/service-management</guid>
      </item>
    
      <item>
        <title>python</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/49.language/python.html</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/49.language/python.html</guid>
      </item>
    
      <item>
        <title>Refactoring</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/refactoring/</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/refactoring/</guid>
      </item>
    
      <item>
        <title>retrospect</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/retrospect/</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/retrospect/</guid>
      </item>
    
      <item>
        <title>S3</title>
        
          <description>AWS에서 대표적으로 사용되는 스토리지 서비스로 완전 관리형 서비스이다.  
원하는 양의 데이터를 저장할 수 있고 웹기반으로 어디서든 접근할 수 있는 스토리지.  
매우 안전하고 안정적이며 확장 가능한 객체 스토리지. (eleven-nine)  

콘텐츠 저장 및 배포, 백업 및 아카이빙, 빅 데이터 분석, 재해 복구, 정적 웹 사이트 호스팅에서 사용될 수 있다.
- 리전 기반이어서 정적 호스팅에선 EC2보다 더 안정적으로 지원 가능하다.

EC2는 AZ 기반이지만 S3는 리전 기반이어서 AZ가 문제가 생겨도 더 안전하게 지원할 수 있다.  
또한 CRR(교차 리전 복제)으로 모든 S3 객체를 다른 AWS 리전에 위치한 대산 버킷으로 자동 복제하여 안전성을 보장한다.  

S3는 객체 스토리지 구조를 갖는다.  

**전통적인 파일시스템**:  
dir &gt; dir &gt; dir &gt; files  방식의 search.  
파일이 많아지고 길어질수록 검색 속도가 늦어짐.  

**객체 스토리지**:  
dir 구조를 갖지 않고 파일을 찾아감.  
파일이 많아져도 균일한 속도를 유지함.

## storage option
AWS에서는 용도에 따라 S3 외에도 다양한 storage 서비스를 제공한다. ([storage class](https://aws.amazon.com/ko/s3/storage-classes/) 참고)  

**Glacier**:  
데이터를 저장하는데 저렴하며 내구성이 우수한 아카이브 스토리지.
저장하는 비용이 저렴하다는 장점이 있고,  
데이터를 가져오는데 비용이 많이 들고 데이터를 받아오는데 시간이 오래걸린다는 단점이 있다.  
주로 중요하지만 잘 사용하지 않는 데이터를 저장한다.

**EFS**: 전통적인 파일 스토리지. 공유 개념을 지원한다.  

**EBS**: 블록 기반의 스토리지. EC2 인스턴스에 외장하드를 네트워크로 붙이는 식으로 사용.

**Storage Gateway**: S3, Glacier, EBS 등의 스토리지 인프라 사이에 원활하고 안전한 통합이 이루어지도록 지원한다.
- ex) S3 주 데이터를 저장하고 Glacier에 보관하도록 사용.

## 구성요소
S3는 버킷과 객체로 이루어져 있다.  

**버킷**:    
버킷은 말 그대로 객체를 담는 바구니다.  
전세계적으로 고유한 이름을 가져야 한다.
- 3~63자의 사이즈와 a-z, 0-9, &apos;-&apos;만을 사용한다.  

**객체**:  
버킷에 저장되는 파일로 어떤 종류의 파일도 객체가 될 수 있다.  
객체는 고유한 키와 메타데이터를 갖는다.
키를 통해 객체를 업로드/검색한다.  
개층구조(폴더의 개념)가 존재하지 않는데, 키에 prefix(`/`)를 통해 폴더 개념을 지원할 수 있다.  
- `prog/java/collections.jtml`을 통해 prog/java의 폴더 개념을 갖도록 객체를 구분.  
- 실제로는 계층구조가 없지만 사용자가 있는 것처럼 활용.  
메타데이터는 시스템 메타데이터와 유저 메타데이터가 있으며 시스템 메타데이터는 생성 날짜, 크기 등의 정보를 포함한다.  
[객체의 key, metadata](https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingMetadata.html) 참고.

## versioning
S3는 동일한 이름의 파일을 넣으면 덮어쓰게 된다.  
이런 문제를 해결하기 위해 versioning을 지원한다.
- 각 버킷 &gt; property &gt; versioning 을 하면 version에 따른 동일한 이름의 파일을 저장하도록할 수 있음.  

version id는 객체의 metadata에 존재한다.  
기본적으로 S3는 versioning을 비활성화되어 있는데 versioning을 한 번 켜면 끌 수 없으므로 데이터 관리 측면에서 코드상에서 충분히 고려가 되야한다.
- 버전 별 데이터가 계속해서 쌓일 수 있음.

## URL
기본 경로
- `http://s3.[리전 엔드포인트].amazonaws.com/[버킷 이름]/[객체 파일 명]`  

가상 호스팅 
- `http://[버킷 이름]s3.amazonaws.com/[객체 파일 명]`  

aws의 주소가 들어가서 실 사용자에게 aws 서비스로 오해받을 수도 있을 것이고 이를 해결하기 위한 가상 호스팅도 존재한다. ([AWS Virtual Hosting](https://docs.aws.amazon.com/AmazonS3/latest/dev/VirtualHosting.html) 참고)

## 객체 작업

**Put**:  
단일 업로드 &lt;= 5GB, 멀티 파트 업로드 &lt;= 5TB 지원.  
인터넷은 비교적 신뢰성이 떨어지기 때문에 100 MB를 넘는 경우 멀티 파트 업로드를 권장한다.  
멀티 파트 업로드는 각 파트가 개별적으로 업로드 되고 업로드에 실패하면 실패한 파트만 재전송할 수 있다.

**Get**:  
완전한 객체 가져오는 것과 필요하다면 바이트 범위를 지정하여 객체의 일부를 가져올 수 있다.

**Select**:  
S3에서 파일에 대한 format(csv, json)을 지정하여 원하는 값만을 가져올 수 있다.  
큰 파일의 일부만 필요한 경우 파일 전체를 받는 낭비를 줄일 수 있다. 성능과 비용에서 효과를 볼 수 있다. ([AWS select](https://aws.amazon.com/blogs/aws/s3-glacier-select/) 참고)

**delete**:  
단일 객체나 여러 객체를 삭제하는데 사용한다.  
versioning이 활성화 된 경우는 versionId도 같이 명시하여 삭제한다.  
versioning이 활성화 된 경우에 key만 지정하면 현재 버전의 객체에 `delete marker`가 추가되고, 삭제 마커가 있는 객체를 검색하려고 하면 404 error가 발생한다.

## 미리 서명된 URL
기본적으로 객체와 버킷은 모두 private. AWS 보안 자격 증명이나 권한 없이 객체를 업로드 하기를 원하는 경우 `미리 서명된 URL`을 사용할 수 있다.  
다른 작업 수행을 위한 권한을 열지 않고 PUT/GET 에 대한 액세스를 제공.  
생성할 때 자격 증명 등의 데이터를 받고, URL을 생성하는 사용자의 권한을 사용하여 액세스함.  
지정된 기간 동안만 유효함. (최대 1주)  

## 암호화
전송 데이터 암호화를 할 수 있다.  
서버에 저장하는 데이터를 암호화 할 수 있다.
1. S3가 관리하는 키.
2. KMS(key 관리 서비스)가 관리하는 키.
3. 사용자가 설정한 키.

## ACL(Access Control List)
S3 ACL에서 객체나 버킷 수준에서 접근 가능한 권한 부여할 수 있다.  
버킷의 ACL을 바꾸거나 설정하더라도 그 내부의 객체는 이와 별개이다.

## CORS (Cross Origin Resource Sharing)
제한된 리소스를 최초 자원이 서비스된 도메인 밖의 다른 도메인으로부터 요청할 수 있게 허용하는 구조이다.  
S3에서는 CORS를 지원하며 활성화하여 사용할 수 있다. ([AWS CORS 시나리오 및 구성 방법](https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/dev/cors.html) 참고)  

## 성능 개선 방향
애플리케이션 설계에서 가능한 경우 버킷과 키 이름을 캐시.  
가장 가까운 버킷 리전을 선택.  
S3에 저자된 데이터를 압축하여 전송되는 데이터와 사용되는 스토리지 크기를 줄이는 방향.  
AWS CloudFront와 같은 CDN(콘텐츠 전송 네트워크)를 통해 효율적으로 콘텐츠 배포.  

&lt;!-- 
이해 안되는 부분
## 불필요한 요청 방지
고정된 버킷의 존재를 확인하는 대신 NoSuchBucket 오류를 처리함.
객체를 업로드하기 전에 객체 메타 데이터를 설정함. 메타데이터를 업데이트할 때 복사 작업을 사용하지 않음.
--&gt;

## 무결성 체크
GET/PUT으로 검색한 객체의 MD5 체크섬을 확인하여 전송 중 데이터 손상을 확인한다.  
- AWS SDK는 PUT 작업시 MD5 체크섬을 자동으로 지정. S3는 MD5 체크섬을 다시 계산하고 이를 지정된 값과 비교.

## 오류 코드
S3 응답에 대해 오류 코드가 나온 경우 처리를 해주어야 한다.  
400 error - 해당 작업을 수행할 수 없음.  
500 error - 해당 작업을 재시도할 수 있음.  </description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/aws/s3</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/aws/s3</guid>
      </item>
    
      <item>
        <title>website</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/site</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/site</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;urlset xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:schemaLocation=&quot;http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd&quot;
        xmlns=&quot;http://www.sitemaps.org/schemas/sitemap/0.9&quot;&gt;
  {% for page in site.pages %}
  {% if page.sitemap.lastmod %}
  &lt;url&gt;
    &lt;loc&gt;{{ site.url }}{{ page.url | remove: &quot;index.html&quot; }}&lt;/loc&gt;
    {% if page.sitemap.lastmod %}
    &lt;lastmod&gt;{{ page.sitemap.lastmod | date: &quot;%Y-%m-%d&quot; }}&lt;/lastmod&gt;
    {% endif %}
    &lt;changefreq&gt;monthly&lt;/changefreq&gt;
    &lt;priority&gt;0.5&lt;/priority&gt;
  &lt;/url&gt;
  {% if page.lang %}
  &lt;url&gt;
    &lt;loc&gt;{{ site.url }}/ko{{ page.url | remove: &quot;index.html&quot; }}&lt;/loc&gt;
    {% if page.sitemap.lastmod %}
    &lt;lastmod&gt;{{ page.sitemap.lastmod | date: &quot;%Y-%m-%d&quot; }}&lt;/lastmod&gt;
    {% endif %}
    &lt;changefreq&gt;monthly&lt;/changefreq&gt;
    &lt;priority&gt;0.5&lt;/priority&gt;
  &lt;/url&gt;
  {% endif %}
  {% endif %}
  {% endfor %}
&lt;/urlset&gt;
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/sitemap.xml</link>
        <guid isPermaLink="true">https://meansoup.github.io/sitemap.xml</guid>
      </item>
    
      <item>
        <title>슬랙</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/slack</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/slack</guid>
      </item>
    
      <item>
        <title>Spring</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/spring</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/spring</guid>
      </item>
    
      <item>
        <title>전략적 설계</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/strategic</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/strategic</guid>
      </item>
    
      <item>
        <title>전술적 설계</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/ddd/tactical</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/ddd/tactical</guid>
      </item>
    
      <item>
        <title>TDD</title>
        
          <description>{: .fs-6 .fw-300 }</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/extreme-programming/tdd</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/extreme-programming/tdd</guid>
      </item>
    
      <item>
        <title>linux commands</title>
        
          <description>linux 개발에 유용한 terminal 리스트

{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/dev-tools/linux-commands</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/dev-tools/linux-commands</guid>
      </item>
    
      <item>
        <title>Test</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/test</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/test</guid>
      </item>
    
      <item>
        <title>주제회고</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/02.retrospect/theme.html</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/02.retrospect/theme.html</guid>
      </item>
    
      <item>
        <title>Java Tips</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/java/tip</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/java/tip</guid>
      </item>
    
      <item>
        <title>vue</title>
        
          <description>{: .fs-6 .fw-300 }
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/vue</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/vue</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>{% include css/just-the-docs.scss.liquid color_scheme=&quot;dark&quot; %}
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/assets/css/just-the-docs-dark.css</link>
        <guid isPermaLink="true">https://meansoup.github.io/assets/css/just-the-docs-dark.css</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>{% if site.color_scheme and site.color_scheme != &quot;nil&quot; %}
  {% assign color_scheme = site.color_scheme %}
{% else %}
  {% assign color_scheme = &quot;light&quot; %}
{% endif %}
{% include css/just-the-docs.scss.liquid color_scheme=color_scheme %}
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/assets/css/just-the-docs-default.css</link>
        <guid isPermaLink="true">https://meansoup.github.io/assets/css/just-the-docs-default.css</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>{%- if site.color_scheme and site.color_scheme != &quot;nil&quot; -%}
  {%- assign color_scheme = site.color_scheme -%}
{%- else -%}
  {%- assign color_scheme = &quot;light&quot; -%}
{%- endif -%}

{%- capture newline %}
{% endcapture -%}

{%- capture scss -%}
{% include css/just-the-docs.scss.liquid color_scheme=color_scheme %}
.site-nav ul li a {
  background-image: linear-gradient(
    -90deg,
    rgba($feedback-color, 1) 0%,
    rgba($feedback-color, 0.8) 80%,
    rgba($feedback-color, 0) 100%
  );
}
{%- endcapture -%}

{{ scss | scssify | split: newline | slice: -3, 3 | join: newline }}
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/assets/css/just-the-docs-head-nav.css</link>
        <guid isPermaLink="true">https://meansoup.github.io/assets/css/just-the-docs-head-nav.css</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>{% include css/just-the-docs.scss.liquid color_scheme=&quot;light&quot; %}
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/assets/css/just-the-docs-light.css</link>
        <guid isPermaLink="true">https://meansoup.github.io/assets/css/just-the-docs-light.css</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>(function (jtd, undefined) {

// Event handling

jtd.addEvent = function(el, type, handler) {
  if (el.attachEvent) el.attachEvent(&apos;on&apos;+type, handler); else el.addEventListener(type, handler);
}
jtd.removeEvent = function(el, type, handler) {
  if (el.detachEvent) el.detachEvent(&apos;on&apos;+type, handler); else el.removeEventListener(type, handler);
}
jtd.onReady = function(ready) {
  // in case the document is already rendered
  if (document.readyState!=&apos;loading&apos;) ready();
  // modern browsers
  else if (document.addEventListener) document.addEventListener(&apos;DOMContentLoaded&apos;, ready);
  // IE &lt;= 8
  else document.attachEvent(&apos;onreadystatechange&apos;, function(){
      if (document.readyState==&apos;complete&apos;) ready();
  });
}

// Show/hide mobile menu

function initNav() {
  jtd.addEvent(document, &apos;click&apos;, function(e){
    var target = e.target;
    while (target &amp;&amp; !(target.classList &amp;&amp; target.classList.contains(&apos;nav-list-expander&apos;))) {
      target = target.parentNode;
    }
    if (target) {
      e.preventDefault();
      target.ariaPressed = target.parentNode.classList.toggle(&apos;active&apos;);
    }
  });

  const siteNav = document.getElementById(&apos;site-nav&apos;);
  const mainHeader = document.getElementById(&apos;main-header&apos;);
  const menuButton = document.getElementById(&apos;menu-button&apos;);

  disableHeadStyleSheets();

  jtd.addEvent(menuButton, &apos;click&apos;, function(e){
    e.preventDefault();

    if (menuButton.classList.toggle(&apos;nav-open&apos;)) {
      siteNav.classList.add(&apos;nav-open&apos;);
      mainHeader.classList.add(&apos;nav-open&apos;);
      menuButton.ariaPressed = true;
    } else {
      siteNav.classList.remove(&apos;nav-open&apos;);
      mainHeader.classList.remove(&apos;nav-open&apos;);
      menuButton.ariaPressed = false;
    }
  });

  {%- if site.search_enabled != false and site.search.button %}
  const searchInput = document.getElementById(&apos;search-input&apos;);
  const searchButton = document.getElementById(&apos;search-button&apos;);

  jtd.addEvent(searchButton, &apos;click&apos;, function(e){
    e.preventDefault();

    mainHeader.classList.add(&apos;nav-open&apos;);
    searchInput.focus();
  });
  {%- endif %}
}

// The &lt;head&gt; element is assumed to include the following stylesheets:
// - a &lt;link&gt; to /assets/css/just-the-docs-head-nav.css,
//             with id &apos;jtd-head-nav-stylesheet&apos;
// - a &lt;style&gt; containing the result of _includes/css/activation.scss.liquid.
// To avoid relying on the order of stylesheets (which can change with HTML
// compression, user-added JavaScript, and other side effects), stylesheets
// are only interacted with via ID

function disableHeadStyleSheets() {
  const headNav = document.getElementById(&apos;jtd-head-nav-stylesheet&apos;);
  if (headNav) {
    headNav.disabled = true;
  }

  const activation = document.getElementById(&apos;jtd-nav-activation&apos;);
  if (activation) {
    activation.disabled = true;
  }
}

{%- if site.search_enabled != false %}
// Site search

function initSearch() {
  var request = new XMLHttpRequest();
  request.open(&apos;GET&apos;, &apos;{{ &quot;assets/js/search-data.json&quot; | relative_url }}&apos;, true);

  request.onload = function(){
    if (request.status &gt;= 200 &amp;&amp; request.status &lt; 400) {
      var docs = JSON.parse(request.responseText);

      lunr.tokenizer.separator = {{ site.search.tokenizer_separator | default: site.search_tokenizer_separator | default: &quot;/[\s\-/]+/&quot; }}

      var index = lunr(function(){
        this.ref(&apos;id&apos;);
        this.field(&apos;title&apos;, { boost: 200 });
        this.field(&apos;content&apos;, { boost: 2 });
        {%- if site.search.rel_url != false %}
        this.field(&apos;relUrl&apos;);
        {%- endif %}
        this.metadataWhitelist = [&apos;position&apos;]

        for (var i in docs) {
          {% include lunr/custom-index.js %}
          this.add({
            id: i,
            title: docs[i].title,
            content: docs[i].content,
            {%- if site.search.rel_url != false %}
            relUrl: docs[i].relUrl
            {%- endif %}
          });
        }
      });

      searchLoaded(index, docs);
    } else {
      console.log(&apos;Error loading ajax request. Request status:&apos; + request.status);
    }
  };

  request.onerror = function(){
    console.log(&apos;There was a connection error&apos;);
  };

  request.send();
}

function searchLoaded(index, docs) {
  var index = index;
  var docs = docs;
  var searchInput = document.getElementById(&apos;search-input&apos;);
  var searchResults = document.getElementById(&apos;search-results&apos;);
  var mainHeader = document.getElementById(&apos;main-header&apos;);
  var currentInput;
  var currentSearchIndex = 0;

  {%- if site.search.focus_shortcut_key %}
  // add event listener on ctrl + &lt;focus_shortcut_key&gt; for showing the search input
  jtd.addEvent(document, &apos;keydown&apos;, function (e) {
    if ((e.ctrlKey || e.metaKey) &amp;&amp; e.key === &apos;{{ site.search.focus_shortcut_key }}&apos;) {
      e.preventDefault();

      mainHeader.classList.add(&apos;nav-open&apos;);
      searchInput.focus();
    }
  });
  {%- endif %}

  function showSearch() {
    document.documentElement.classList.add(&apos;search-active&apos;);
  }

  function hideSearch() {
    document.documentElement.classList.remove(&apos;search-active&apos;);
  }

  function update() {
    currentSearchIndex++;

    var input = searchInput.value;
    if (input === &apos;&apos;) {
      hideSearch();
    } else {
      showSearch();
      // scroll search input into view, workaround for iOS Safari
      window.scroll(0, -1);
      setTimeout(function(){ window.scroll(0, 0); }, 0);
    }
    if (input === currentInput) {
      return;
    }
    currentInput = input;
    searchResults.innerHTML = &apos;&apos;;
    if (input === &apos;&apos;) {
      return;
    }

    var results = index.query(function (query) {
      var tokens = lunr.tokenizer(input)
      query.term(tokens, {
        boost: 10
      });
      query.term(tokens, {
        wildcard: lunr.Query.wildcard.TRAILING
      });
    });

    if ((results.length == 0) &amp;&amp; (input.length &gt; 2)) {
      var tokens = lunr.tokenizer(input).filter(function(token, i) {
        return token.str.length &lt; 20;
      })
      if (tokens.length &gt; 0) {
        results = index.query(function (query) {
          query.term(tokens, {
            editDistance: Math.round(Math.sqrt(input.length / 2 - 1))
          });
        });
      }
    }

    if (results.length == 0) {
      var noResultsDiv = document.createElement(&apos;div&apos;);
      noResultsDiv.classList.add(&apos;search-no-result&apos;);
      noResultsDiv.innerText = &apos;No results found&apos;;
      searchResults.appendChild(noResultsDiv);

    } else {
      var resultsList = document.createElement(&apos;ul&apos;);
      resultsList.classList.add(&apos;search-results-list&apos;);
      searchResults.appendChild(resultsList);

      addResults(resultsList, results, 0, 10, 100, currentSearchIndex);
    }

    function addResults(resultsList, results, start, batchSize, batchMillis, searchIndex) {
      if (searchIndex != currentSearchIndex) {
        return;
      }
      for (var i = start; i &lt; (start + batchSize); i++) {
        if (i == results.length) {
          return;
        }
        addResult(resultsList, results[i]);
      }
      setTimeout(function() {
        addResults(resultsList, results, start + batchSize, batchSize, batchMillis, searchIndex);
      }, batchMillis);
    }

    function addResult(resultsList, result) {
      var doc = docs[result.ref];

      var resultsListItem = document.createElement(&apos;li&apos;);
      resultsListItem.classList.add(&apos;search-results-list-item&apos;);
      resultsList.appendChild(resultsListItem);

      var resultLink = document.createElement(&apos;a&apos;);
      resultLink.classList.add(&apos;search-result&apos;);
      resultLink.setAttribute(&apos;href&apos;, doc.url);
      resultsListItem.appendChild(resultLink);

      var resultTitle = document.createElement(&apos;div&apos;);
      resultTitle.classList.add(&apos;search-result-title&apos;);
      resultLink.appendChild(resultTitle);

      // note: the SVG svg-doc is only loaded as a Jekyll include if site.search_enabled is true; see _includes/icons/icons.html
      var resultDoc = document.createElement(&apos;div&apos;);
      resultDoc.classList.add(&apos;search-result-doc&apos;);
      resultDoc.innerHTML = &apos;&lt;svg viewBox=&quot;0 0 24 24&quot; class=&quot;search-result-icon&quot;&gt;&lt;use xlink:href=&quot;#svg-doc&quot;&gt;&lt;/use&gt;&lt;/svg&gt;&apos;;
      resultTitle.appendChild(resultDoc);

      var resultDocTitle = document.createElement(&apos;div&apos;);
      resultDocTitle.classList.add(&apos;search-result-doc-title&apos;);
      resultDocTitle.innerHTML = doc.doc;
      resultDoc.appendChild(resultDocTitle);
      var resultDocOrSection = resultDocTitle;

      if (doc.doc != doc.title) {
        resultDoc.classList.add(&apos;search-result-doc-parent&apos;);
        var resultSection = document.createElement(&apos;div&apos;);
        resultSection.classList.add(&apos;search-result-section&apos;);
        resultSection.innerHTML = doc.title;
        resultTitle.appendChild(resultSection);
        resultDocOrSection = resultSection;
      }

      var metadata = result.matchData.metadata;
      var titlePositions = [];
      var contentPositions = [];
      for (var j in metadata) {
        var meta = metadata[j];
        if (meta.title) {
          var positions = meta.title.position;
          for (var k in positions) {
            titlePositions.push(positions[k]);
          }
        }
        if (meta.content) {
          var positions = meta.content.position;
          for (var k in positions) {
            var position = positions[k];
            var previewStart = position[0];
            var previewEnd = position[0] + position[1];
            var ellipsesBefore = true;
            var ellipsesAfter = true;
            for (var k = 0; k &lt; {{ site.search.preview_words_before | default: 5 }}; k++) {
              var nextSpace = doc.content.lastIndexOf(&apos; &apos;, previewStart - 2);
              var nextDot = doc.content.lastIndexOf(&apos;. &apos;, previewStart - 2);
              if ((nextDot &gt;= 0) &amp;&amp; (nextDot &gt; nextSpace)) {
                previewStart = nextDot + 1;
                ellipsesBefore = false;
                break;
              }
              if (nextSpace &lt; 0) {
                previewStart = 0;
                ellipsesBefore = false;
                break;
              }
              previewStart = nextSpace + 1;
            }
            for (var k = 0; k &lt; {{ site.search.preview_words_after | default: 10 }}; k++) {
              var nextSpace = doc.content.indexOf(&apos; &apos;, previewEnd + 1);
              var nextDot = doc.content.indexOf(&apos;. &apos;, previewEnd + 1);
              if ((nextDot &gt;= 0) &amp;&amp; (nextDot &lt; nextSpace)) {
                previewEnd = nextDot;
                ellipsesAfter = false;
                break;
              }
              if (nextSpace &lt; 0) {
                previewEnd = doc.content.length;
                ellipsesAfter = false;
                break;
              }
              previewEnd = nextSpace;
            }
            contentPositions.push({
              highlight: position,
              previewStart: previewStart, previewEnd: previewEnd,
              ellipsesBefore: ellipsesBefore, ellipsesAfter: ellipsesAfter
            });
          }
        }
      }

      if (titlePositions.length &gt; 0) {
        titlePositions.sort(function(p1, p2){ return p1[0] - p2[0] });
        resultDocOrSection.innerHTML = &apos;&apos;;
        addHighlightedText(resultDocOrSection, doc.title, 0, doc.title.length, titlePositions);
      }

      if (contentPositions.length &gt; 0) {
        contentPositions.sort(function(p1, p2){ return p1.highlight[0] - p2.highlight[0] });
        var contentPosition = contentPositions[0];
        var previewPosition = {
          highlight: [contentPosition.highlight],
          previewStart: contentPosition.previewStart, previewEnd: contentPosition.previewEnd,
          ellipsesBefore: contentPosition.ellipsesBefore, ellipsesAfter: contentPosition.ellipsesAfter
        };
        var previewPositions = [previewPosition];
        for (var j = 1; j &lt; contentPositions.length; j++) {
          contentPosition = contentPositions[j];
          if (previewPosition.previewEnd &lt; contentPosition.previewStart) {
            previewPosition = {
              highlight: [contentPosition.highlight],
              previewStart: contentPosition.previewStart, previewEnd: contentPosition.previewEnd,
              ellipsesBefore: contentPosition.ellipsesBefore, ellipsesAfter: contentPosition.ellipsesAfter
            }
            previewPositions.push(previewPosition);
          } else {
            previewPosition.highlight.push(contentPosition.highlight);
            previewPosition.previewEnd = contentPosition.previewEnd;
            previewPosition.ellipsesAfter = contentPosition.ellipsesAfter;
          }
        }

        var resultPreviews = document.createElement(&apos;div&apos;);
        resultPreviews.classList.add(&apos;search-result-previews&apos;);
        resultLink.appendChild(resultPreviews);

        var content = doc.content;
        for (var j = 0; j &lt; Math.min(previewPositions.length, {{ site.search.previews | default: 3 }}); j++) {
          var position = previewPositions[j];

          var resultPreview = document.createElement(&apos;div&apos;);
          resultPreview.classList.add(&apos;search-result-preview&apos;);
          resultPreviews.appendChild(resultPreview);

          if (position.ellipsesBefore) {
            resultPreview.appendChild(document.createTextNode(&apos;... &apos;));
          }
          addHighlightedText(resultPreview, content, position.previewStart, position.previewEnd, position.highlight);
          if (position.ellipsesAfter) {
            resultPreview.appendChild(document.createTextNode(&apos; ...&apos;));
          }
        }
      }

      {%- if site.search.rel_url != false %}
      var resultRelUrl = document.createElement(&apos;span&apos;);
      resultRelUrl.classList.add(&apos;search-result-rel-url&apos;);
      resultRelUrl.innerText = doc.relUrl;
      resultTitle.appendChild(resultRelUrl);
      {%- endif %}
    }

    function addHighlightedText(parent, text, start, end, positions) {
      var index = start;
      for (var i in positions) {
        var position = positions[i];
        var span = document.createElement(&apos;span&apos;);
        span.innerHTML = text.substring(index, position[0]);
        parent.appendChild(span);
        index = position[0] + position[1];
        var highlight = document.createElement(&apos;span&apos;);
        highlight.classList.add(&apos;search-result-highlight&apos;);
        highlight.innerHTML = text.substring(position[0], index);
        parent.appendChild(highlight);
      }
      var span = document.createElement(&apos;span&apos;);
      span.innerHTML = text.substring(index, end);
      parent.appendChild(span);
    }
  }

  jtd.addEvent(searchInput, &apos;focus&apos;, function(){
    setTimeout(update, 0);
  });

  jtd.addEvent(searchInput, &apos;keyup&apos;, function(e){
    switch (e.keyCode) {
      case 27: // When esc key is pressed, hide the results and clear the field
        searchInput.value = &apos;&apos;;
        break;
      case 38: // arrow up
      case 40: // arrow down
      case 13: // enter
        e.preventDefault();
        return;
    }
    update();
  });

  jtd.addEvent(searchInput, &apos;keydown&apos;, function(e){
    switch (e.keyCode) {
      case 38: // arrow up
        e.preventDefault();
        var active = document.querySelector(&apos;.search-result.active&apos;);
        if (active) {
          active.classList.remove(&apos;active&apos;);
          if (active.parentElement.previousSibling) {
            var previous = active.parentElement.previousSibling.querySelector(&apos;.search-result&apos;);
            previous.classList.add(&apos;active&apos;);
          }
        }
        return;
      case 40: // arrow down
        e.preventDefault();
        var active = document.querySelector(&apos;.search-result.active&apos;);
        if (active) {
          if (active.parentElement.nextSibling) {
            var next = active.parentElement.nextSibling.querySelector(&apos;.search-result&apos;);
            active.classList.remove(&apos;active&apos;);
            next.classList.add(&apos;active&apos;);
          }
        } else {
          var next = document.querySelector(&apos;.search-result&apos;);
          if (next) {
            next.classList.add(&apos;active&apos;);
          }
        }
        return;
      case 13: // enter
        e.preventDefault();
        var active = document.querySelector(&apos;.search-result.active&apos;);
        if (active) {
          active.click();
        } else {
          var first = document.querySelector(&apos;.search-result&apos;);
          if (first) {
            first.click();
          }
        }
        return;
    }
  });

  jtd.addEvent(document, &apos;click&apos;, function(e){
    if (e.target != searchInput) {
      hideSearch();
    }
  });
}
{%- endif %}

// Switch theme

jtd.getTheme = function() {
  var cssFileHref = document.querySelector(&apos;[rel=&quot;stylesheet&quot;]&apos;).getAttribute(&apos;href&apos;);
  return cssFileHref.substring(cssFileHref.lastIndexOf(&apos;-&apos;) + 1, cssFileHref.length - 4);
}

jtd.setTheme = function(theme) {
  var cssFile = document.querySelector(&apos;[rel=&quot;stylesheet&quot;]&apos;);
  cssFile.setAttribute(&apos;href&apos;, &apos;{{ &quot;assets/css/just-the-docs-&quot; | relative_url }}&apos; + theme + &apos;.css&apos;);
}

// Note: pathname can have a trailing slash on a local jekyll server
// and not have the slash on GitHub Pages

function navLink() {
  var pathname = document.location.pathname;

  var navLink = document.getElementById(&apos;site-nav&apos;).querySelector(&apos;a[href=&quot;&apos; + pathname + &apos;&quot;]&apos;);
  if (navLink) {
    return navLink;
  }

  // The `permalink` setting may produce navigation links whose `href` ends with `/` or `.html`.
  // To find these links when `/` is omitted from or added to pathname, or `.html` is omitted:

  if (pathname.endsWith(&apos;/&apos;) &amp;&amp; pathname != &apos;/&apos;) {
    pathname = pathname.slice(0, -1);
  }

  if (pathname != &apos;/&apos;) {
    navLink = document.getElementById(&apos;site-nav&apos;).querySelector(&apos;a[href=&quot;&apos; + pathname + &apos;&quot;], a[href=&quot;&apos; + pathname + &apos;/&quot;], a[href=&quot;&apos; + pathname + &apos;.html&quot;]&apos;);
    if (navLink) {
      return navLink;
    }
  }

  return null; // avoids `undefined`
}

// Scroll site-nav to ensure the link to the current page is visible

function scrollNav() {
  const targetLink = navLink();
  if (targetLink) {
    targetLink.scrollIntoView({ block: &quot;center&quot; });
    targetLink.removeAttribute(&apos;href&apos;);
  }
}

// Find the nav-list-link that refers to the current page
// then make it and all enclosing nav-list-item elements active.

function activateNav() {
  var target = navLink();
  if (target) {
    target.classList.toggle(&apos;active&apos;, true);
  }
  while (target) {
    while (target &amp;&amp; !(target.classList &amp;&amp; target.classList.contains(&apos;nav-list-item&apos;))) {
      target = target.parentNode;
    }
    if (target) {
      target.classList.toggle(&apos;active&apos;, true);
      target = target.parentNode;
    }
  }
}

// Document ready

jtd.onReady(function(){
  if (document.getElementById(&apos;site-nav&apos;)) {
    initNav();
    activateNav();
    scrollNav();
  }
  {%- if site.search_enabled != false %}
  initSearch();
  {%- endif %}
});

// Copy button on code


{%- if site.enable_copy_code_button != false %}

jtd.onReady(function(){

  if (!window.isSecureContext) {
    console.log(&apos;Window does not have a secure context, therefore code clipboard copy functionality will not be available. For more details see https://web.dev/async-clipboard/#security-and-permissions&apos;);
    return;
  }

  var codeBlocks = document.querySelectorAll(&apos;div.highlighter-rouge, div.listingblock &gt; div.content, figure.highlight&apos;);

  // note: the SVG svg-copied and svg-copy is only loaded as a Jekyll include if site.enable_copy_code_button is true; see _includes/icons/icons.html
  var svgCopied =  &apos;&lt;svg viewBox=&quot;0 0 24 24&quot; class=&quot;copy-icon&quot;&gt;&lt;use xlink:href=&quot;#svg-copied&quot;&gt;&lt;/use&gt;&lt;/svg&gt;&apos;;
  var svgCopy =  &apos;&lt;svg viewBox=&quot;0 0 24 24&quot; class=&quot;copy-icon&quot;&gt;&lt;use xlink:href=&quot;#svg-copy&quot;&gt;&lt;/use&gt;&lt;/svg&gt;&apos;;

  codeBlocks.forEach(codeBlock =&gt; {
    var copyButton = document.createElement(&apos;button&apos;);
    var timeout = null;
    copyButton.type = &apos;button&apos;;
    copyButton.ariaLabel = &apos;Copy code to clipboard&apos;;
    copyButton.innerHTML = svgCopy;
    codeBlock.append(copyButton);

    copyButton.addEventListener(&apos;click&apos;, function () {
      if(timeout === null) {
        var code = (codeBlock.querySelector(&apos;pre:not(.lineno, .highlight)&apos;) || codeBlock.querySelector(&apos;code&apos;)).innerText;
        window.navigator.clipboard.writeText(code);

        copyButton.innerHTML = svgCopied;

        var timeoutSetting = 4000;

        timeout = setTimeout(function () {
          copyButton.innerHTML = svgCopy;
          timeout = null;
        }, timeoutSetting);
      }
    });
  });

});

{%- endif %}

})(window.jtd = window.jtd || {});

{% include js/custom.js %}
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/assets/js/just-the-docs.js</link>
        <guid isPermaLink="true">https://meansoup.github.io/assets/js/just-the-docs.js</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>{
{%- assign i = 0 -%}
{%- assign pages_array = &quot;&quot; | split: &quot;&quot; -%}
{%- assign pages_array = pages_array | push: site.html_pages -%}
{%- if site.just_the_docs.collections -%}
  {%- for collection_entry in site.just_the_docs.collections -%}
    {%- assign collection_key = collection_entry[0] -%}
    {%- assign collection_value = collection_entry[1] -%}
    {%- assign collection = site[collection_key] -%}
    {%- if collection_value.search_exclude != true -%}
      {%- assign pages_array = pages_array | push: collection -%}
    {%- endif -%}
  {%- endfor -%}
{%- endif -%}
{%- for pages in pages_array -%}
  {%- for page in pages -%}
    {%- if page.title and page.search_exclude != true -%}
      {%- assign page_content = page.content -%}
      {%- assign heading_level = site.search.heading_level | default: 2 -%}
      {%- for j in (2..heading_level) -%}
        {%- assign tag = &apos;&lt;h&apos; | append: j -%}
        {%- assign closing_tag = &apos;&lt;/h&apos; | append: j -%}
        {%- assign page_content = page_content | replace: tag, &apos;&lt;h1&apos; | replace: closing_tag, &apos;&lt;/h1&apos; -%}
      {%- endfor -%}
      {%- assign parts = page_content | split: &apos;&lt;h1&apos; -%}
      {%- assign title_found = false -%}
      {%- for part in parts offset: 1 -%}
        {%- assign titleAndContent = part | split: &apos;&lt;/h1&gt;&apos; -%}
        {%- assign title = titleAndContent[0] | replace_first: &apos;&gt;&apos;, &apos;&lt;h1&gt;&apos; | split: &apos;&lt;h1&gt;&apos; -%}
        {%- assign title = title[1] | strip_html -%}
        {%- assign content = titleAndContent[1] -%}
        {%- assign url = page.url -%}
        {%- if title == page.title and parts[0] == &apos;&apos; -%}
          {%- assign title_found = true -%}
        {%- else -%}
          {%- assign id = titleAndContent[0] -%}
          {%- assign id = id | split: &apos;id=&quot;&apos; -%}
          {%- if id.size == 2 -%}
            {%- assign id = id[1] -%}
            {%- assign id = id | split: &apos;&quot;&apos; -%}
            {%- assign id = id[0] -%}
            {%- capture url -%}{{ url | append: &apos;#&apos; | append: id }}{%- endcapture -%}
          {%- endif -%}
        {%- endif -%}
  {%- unless i == 0 -%},{%- endunless -%}
  &quot;{{ i }}&quot;: {
    &quot;doc&quot;: {{ page.title | jsonify }},
    &quot;title&quot;: {{ title | jsonify }},
    &quot;content&quot;: {{ content | replace: &apos;&lt;/h&apos;, &apos; . &lt;/h&apos; | replace: &apos;&lt;hr&apos;, &apos; . &lt;hr&apos; | replace: &apos;&lt;/p&apos;, &apos; . &lt;/p&apos; | replace: &apos;&lt;ul&apos;, &apos; . &lt;ul&apos; | replace: &apos;&lt;/ul&apos;, &apos; . &lt;/ul&apos; | replace: &apos;&lt;ol&apos;, &apos; . &lt;ol&apos; | replace: &apos;&lt;/ol&apos;, &apos; . &lt;/ol&apos; | replace: &apos;&lt;/tr&apos;, &apos; . &lt;/tr&apos; | replace: &apos;&lt;li&apos;, &apos; | &lt;li&apos; | replace: &apos;&lt;/li&apos;, &apos; | &lt;/li&apos; | replace: &apos;&lt;/td&apos;, &apos; | &lt;/td&apos; | replace: &apos;&lt;td&apos;, &apos; | &lt;td&apos; | replace: &apos;&lt;/th&apos;, &apos; | &lt;/th&apos; | replace: &apos;&lt;th&apos;, &apos; | &lt;th&apos; | strip_html | remove: &apos;Table of contents&apos; | normalize_whitespace | replace: &apos;. . .&apos;, &apos;.&apos; | replace: &apos;. .&apos;, &apos;.&apos; | replace: &apos;| |&apos;, &apos;|&apos; | append: &apos; &apos; | jsonify }},
    &quot;url&quot;: &quot;{{ url | relative_url }}&quot;,
    {% include lunr/custom-data.json page=page %}
    &quot;relUrl&quot;: &quot;{{ url }}&quot;
  }
        {%- assign i = i | plus: 1 -%}
      {%- endfor -%}
      {%- unless title_found -%}
  {%- unless i == 0 -%},{%- endunless -%}
  &quot;{{ i }}&quot;: {
    &quot;doc&quot;: {{ page.title | jsonify }},
    &quot;title&quot;: {{ page.title | jsonify }},
    &quot;content&quot;: {{ parts[0] | replace: &apos;&lt;/h&apos;, &apos; . &lt;/h&apos; | replace: &apos;&lt;hr&apos;, &apos; . &lt;hr&apos; | replace: &apos;&lt;/p&apos;, &apos; . &lt;/p&apos; | replace: &apos;&lt;ul&apos;, &apos; . &lt;ul&apos; | replace: &apos;&lt;/ul&apos;, &apos; . &lt;/ul&apos; | replace: &apos;&lt;ol&apos;, &apos; . &lt;ol&apos; | replace: &apos;&lt;/ol&apos;, &apos; . &lt;/ol&apos; | replace: &apos;&lt;/tr&apos;, &apos; . &lt;/tr&apos; | replace: &apos;&lt;li&apos;, &apos; | &lt;li&apos; | replace: &apos;&lt;/li&apos;, &apos; | &lt;/li&apos; | replace: &apos;&lt;/td&apos;, &apos; | &lt;/td&apos; | replace: &apos;&lt;td&apos;, &apos; | &lt;td&apos; | replace: &apos;&lt;/th&apos;, &apos; | &lt;/th&apos; | replace: &apos;&lt;th&apos;, &apos; | &lt;th&apos; | strip_html | remove: &apos;Table of contents&apos; | normalize_whitespace | replace: &apos;. . .&apos;, &apos;.&apos; | replace: &apos;. .&apos;, &apos;.&apos; | replace: &apos;| |&apos;, &apos;|&apos; | append: &apos; &apos; | jsonify }},
    &quot;url&quot;: &quot;{{ page.url | relative_url }}&quot;,
    {% include lunr/custom-data.json page=page %}
    &quot;relUrl&quot;: &quot;{{ page.url }}&quot;
  }
        {%- assign i = i | plus: 1 -%}
      {%- endunless -%}
    {%- endif -%}
  {%- endfor -%}
{%- endfor %}
}
</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/assets/js/search-data.json</link>
        <guid isPermaLink="true">https://meansoup.github.io/assets/js/search-data.json</guid>
      </item>
    
      <item>
        <title></title>
        
          <description></description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/docs/algorithm/language/java/stacktrace</link>
        <guid isPermaLink="true">https://meansoup.github.io/docs/algorithm/language/java/stacktrace</guid>
      </item>
    
      <item>
        <title></title>
        
          <description>{&quot;/docs/algorithm/language/java/stacktrace&quot;:&quot;https://meansoup.github.io/docs/java/issue/stacktrace&quot;}</description>
        
        <pubDate></pubDate>
        <link>https://meansoup.github.io/redirects.json</link>
        <guid isPermaLink="true">https://meansoup.github.io/redirects.json</guid>
      </item>
    
  </channel>
</rss>